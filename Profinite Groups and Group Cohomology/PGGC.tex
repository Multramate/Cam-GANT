\def\module{Profinite Groups and Group Cohomology}
\def\lecturer{Dr Gareth Wilkes}
\def\term{Lent 2020}
\def\cover{}
\def\syllabus{}
\def\thm{subsection}

\input{../style/header}

% Macros
\newcommand{\Grp}{\textbf{Grp}}
\newcommand{\Set}{\textbf{Set}}
\newcommand{\twobytwosmall}[4]{
  \begin{psmallmatrix}
    #1 & #2 \\
    #3 & #4
  \end{psmallmatrix}
}

\begin{document}

\input{../style/cover}

\section{Introduction}

\lecture{1}{Thursday}{21/01/21}

A question is, when are things different?
\begin{itemize}
\item $ \ZZ $ is in bijection with $ \QQ $, by writing down a bijection.
\item $ \QQ $ is not in bijection with $ \RR $, by diagonalisation.
\end{itemize}
A solution is to try to find an invariant, which is
\begin{itemize}
\item easier to compute,
\item computable, and
\item preserved under isomorphism.
\end{itemize}

\begin{example}
\hfill
\begin{itemize}
\item Cardinality of a set.
\item Dimension and base field of a vector space, which is complete.
\item For an algebraic field extension $ K $ over $ \QQ $, the degree $ \sbr{K : \QQ} $ and the Galois group $ \Gal\br{K / \QQ} $.
\item For a topological space $ X $, compactness, connectedness, simplicial homology groups $ \H_\bullet\br{X} $, and the fundamental group $ \pi_1\br{X} $.
\end{itemize}
\end{example}

\begin{theorem}
There is no algorithm that decides whether a finite presentation represents the trivial group.
\end{theorem}

Finite groups we can decide.
\begin{itemize}
\item List all the finite quotients of a group.
\item If you have two such lists, you can compare.
\item If two groups have different sets of finite quotients, they are not isomorphic.
\end{itemize}
How often does this work?
\begin{itemize}
\item Combine all the finite quotients into one object to study, the \textbf{profinite completion}, which is a limit of the finite groups.
\item More generally, a limit of finite groups is called a \textbf{profinite group}.
\end{itemize}

\begin{example}
\hfill
\begin{itemize}
\item In Galois theory, let $ K = \bigcup_{N \in \NN} K_N $ be the extension of $ \QQ $ adjoining all $ p^N $-th roots of unity for $ p $ a fixed prime and $ N \in \NN $, which gives a short exact sequence of Galois groups
$$ \Gal\br{K / K_N} \to \Gal\br{K / \QQ} \twoheadrightarrow \Gal\br{K_N / \QQ}. $$
Then $ \Gal\br{K_N / \QQ} = \br{\ZZ / p^N\ZZ}^\times $ and $ \Gal\br{K / \QQ} = \varprojlim_N \br{\ZZ / p^N\ZZ}^\times = \ZZ_p^\times $.
\item In algebraic geometry, \'etale fundamental groups are profinite groups.
\end{itemize}
\end{example}

The second part of the course is \textbf{group cohomology}, which is another invariant, with the following applications.
\begin{itemize}
\item Can tell if a group is free for some profinite groups.
\item Given a group $ G $ and an abelian group $ A $, group cohomology tells us how many groups $ E $ exist such that $ A \triangleleft E $ and $ E / A = G $.
\end{itemize}

\pagebreak

\section{Inverse limits}

\subsection{Categories and limits}

Let $ A $ and $ B $ be sets. How to combine into one thing? The disjoint union $ A \sqcup B $ has inclusion maps $ i_A : A \hookrightarrow A \sqcup B $ and $ i_B : B \hookrightarrow A \sqcup B $, and for any other set $ Z $, with functions $ j_A : A \to Z $ and $ j_B : B \to Z $ there is a unique function defined by
$$ \functions[f]{A \sqcup B}{Z}{a}{j_A\br{a}}{b}{j_B\br{b}}, $$
such that $ f \circ i_A = j_A $ and $ f \circ i_B = j_B $, so
$$
\begin{tikzcd}
A \arrow{r}{i_A} \arrow{dr}[swap]{j_A} & A \sqcup B \arrow[dashed]{d}{\exists !f} & B \arrow{l}[swap]{i_B} \arrow{dl}{j_B} \\
& Z &
\end{tikzcd}.
$$
The product $ A \times B $ comes with $ p_A : A \times B \to A $ and $ p_B : A \times B \to B $ such that
$$
\begin{tikzcd}
A & A \times B \arrow{l}[swap]{p_A} \arrow{r}{p_B} & B \\
& Z \arrow{ul}{q_A} \arrow[dashed]{u}{\exists !f} \arrow{ur}[swap]{q_B} &
\end{tikzcd},
$$
where $ f\br{z} = \br{q_A\br{z}, q_B\br{z}} $. Reversed all arrows, so there is a duality, and disjoint union is a coproduct. What about groups, and group homomorphisms? The product still works, but the disjoint union is not a group. The coproduct is the free product $ A * B $ such that
$$
\begin{tikzcd}
A \arrow{r} \arrow{dr} & A * B \arrow[dashed]{d} & B \arrow{l} \arrow{dl} \\
& Z &
\end{tikzcd}.
$$
More generally is the pushout. Given groups $ A $, $ B $, and $ C $, and homomorphisms $ \phi_A : C \to A $ and $ \phi_B : C \to B $, the \textbf{pushout} $ A \sqcup_C B $ is
$$
\begin{tikzcd}
C \arrow{r}{\phi_A} \arrow{d}[swap]{\phi_B} & A \arrow{d}{i_A} \arrow[bend left=30]{ddr}{j_A} & \\
B \arrow{r}[swap]{i_B} \arrow[bend right=30]{drr}[swap]{j_B} & A \sqcup_C B \arrow[dashed]{dr}{\exists !f} & \\
& & Z
\end{tikzcd}.
$$

\begin{definition}
A \textbf{category} $ \CCC $ consists of
\begin{itemize}
\item a collection of \textbf{objects} $ \Obj \CCC $,
\item a collection of \textbf{morphisms} or \textbf{arrows} $ \Mor \CCC $, such that each $ f \in \Mor \CCC $ has a \textbf{domain} $ X \in \Obj \CCC $ and a \textbf{codomain} $ Y \in \Obj \CCC $ written as $ f : X \to Y $,
\item for all objects $ X \in \Obj \CCC $, you have $ \id_X : X \to X $, and
\item if $ f : X \to Y $ and $ g : Y \to Z $, we have a defined composition $ g \circ f : X \to Z $,
\end{itemize}
such that
\begin{itemize}
\item if $ f : X \to Y $, then $ \id_Y \circ f = f = f \circ \id_X $, and
\item if $ f : W \to X $, $ g : X \to Y $, and $ h : Y \to Z $, then $ h \circ \br{g \circ f} = \br{h \circ g} \circ f $.
\end{itemize}
\end{definition}

\pagebreak

\begin{example}
\hfill
\begin{itemize}
\item In $ \Set $, objects are sets and morphisms are functions.
\item In $ \Grp $, objects are groups and morphisms are group homomorphisms.
\item In $ \Grp_{\text{fin}} $, objects are finite groups.
\item In $ \Grp_{\text{inj}} $, morphisms are injective group homomorphisms.
\end{itemize}
\end{example}

\begin{definition}
A \textbf{partial ordering} on a set $ J $ is a binary relation $ \le $ such that
\begin{itemize}
\item $ i \le i $,
\item if $ i \le j $ and $ j \le i $, then $ i = j $, and
\item if $ i \le j $ and $ j \le k $, then $ i \le k $.
\end{itemize}
A \textbf{poset} is a pair $ \br{J, \le} $, which is a \textbf{total ordering} if for all $ i, j \in J $ either $ i \le j $ or $ j \le i $. The \textbf{poset category} $ \JJJ $ has objects $ \Obj \JJJ = J $ and morphisms $ \Mor \JJJ = \cbr{i \to j \st i \le j} $.
\end{definition}

\lecture{2}{Saturday}{23/01/21}

\begin{definition}
Let $ \CCC $ be a category. A \textbf{product} of $ A, B \in \Obj \CCC $ is an object $ P $, equipped with morphisms $ p_A : P \to A $ and $ p_B : P \to B $, such that for all $ Z \in \Obj \CCC $ and for all $ q_A : Z \to A $ and $ q_B : Z \to B $, there exists a unique $ f : Z \to P $ such that $ p_A \circ f = q_A $ and $ p_B \circ f = q_B $, so
$$
\begin{tikzcd}
& Z \arrow{dl}[swap]{q_A} \arrow[dashed]{d}{\exists !f} \arrow{dr}{q_B} & \\
A & P \arrow{l}{p_A} \arrow{r}[swap]{p_B} & B
\end{tikzcd}.
$$
\end{definition}

\begin{definition}
Objects $ A $ and $ B $ in a category $ \CCC $ are \textbf{isomorphic} if there exist $ f : A \to B $ and $ g : B \to A $ such that $ g \circ f = \id_A $ and $ f \circ g = \id_B $.
\end{definition}

\begin{proposition}
If a product of $ A $ and $ B $ in $ \CCC $ exists, then it is unique up to a unique isomorphism.
\end{proposition}

\begin{proof}
Let $ \br{P, p_A, p_B} $ and $ \br{P', p_A', p_B'} $ be products. Then
$$
\begin{tikzcd}
& P' \arrow{dl}[swap]{p_A'} \arrow[bend right=30, dashed]{dd}[swap]{\exists !f} \arrow{dr}{p_B'} & \\
A & & B \\
& P \arrow{ul}{p_A} \arrow[bend right=30, dashed]{uu}[swap]{\exists !g} \arrow{ur}[swap]{p_B} &
\end{tikzcd}.
$$
Consider $ f \circ g : P \to P $. Then $ p_A \circ f \circ g = p_A' \circ g = p_A $ and $ p_B \circ f \circ g = p_B' \circ g = p_B $. By uniqueness, $ f \circ g = \id_P $. Similarly, $ g \circ f = \id_{P'} $.
\end{proof}

\begin{notation}
Define $ P = A \times B $.
\end{notation}

\begin{definition}
Let $ \CCC $ be a category and $ A, B \in \Obj \CCC $. Then a \textbf{coproduct} is an object $ A \sqcup B $, together with maps $ i_A : A \to A \sqcup B $ and $ i_B : B \to A \sqcup B $, with the universal property
$$
\begin{tikzcd}
A \arrow{r}{i_A} \arrow{dr}[swap]{j_A} & A \sqcup B \arrow[dashed]{d}{\exists !f} & B \arrow{l}[swap]{i_B} \arrow{dl}{j_B} \\
& Z &
\end{tikzcd}.
$$
\end{definition}

Products are examples of limits and coproducts are examples of colimits.

\pagebreak

\begin{definition}
Let $ \CCC $ and $ \DDD $ be categories. A \textbf{functor} $ F : \CCC \to \DDD $ associates an object $ F\br{X} \in \Obj \DDD $ to each $ X \in \Obj \CCC $, and a morphism $ F\br{f} : F\br{X} \to F\br{Y} $ for each $ f : X \to Y $ in $ \CCC $, such that
\begin{itemize}
\item $ F\br{\id_X} = \id_{F\br{X}} $, and
\item $ F\br{g \circ f} = F\br{g} \circ F\br{f} $.
\end{itemize}
\end{definition}

\begin{definition}
Let $ \JJJ $ and $ \CCC $ be categories. A \textbf{diagram of shape $ \JJJ $ in $ \CCC $} is a functor $ X : \JJJ \to \CCC $. Often write $ X\br{j} = X_j $, for $ j \in \Obj \JJJ $.
\end{definition}

Very often, $ \JJJ $ is a poset category. In that case, if $ i \le j $, there exists a unique arrow $ f : i \to j $ and then denote $ X\br{f} = \phi_{ij} $.

\begin{definition}
A \textbf{cone} on a diagram $ X : \JJJ \to \CCC $ is an object $ Z \in \Obj \CCC $, together with maps $ p_j : Z \to X_j = X\br{j} $ for all $ j \in \Obj \JJJ $ such that for all $ f : i \to j $, $ X\br{f} \circ p_i = p_j $, so
$$
\begin{tikzcd}
& Z \arrow{dl}[swap]{p_i} \arrow{dr}{p_j} & \\
X_i \arrow{rr}[swap]{X\br{f}} & & X_j
\end{tikzcd}.
$$
A \textbf{limit} of a diagram $ X : \JJJ \to \CCC $ is a cone $ L $, with morphisms $ p_j $, such that for any cone $ Z $, with morphisms $ q_j $, there is a unique $ g : Z \to L $ such that $ p_j \circ f = q_j $, for all $ j \in \Obj \JJJ $, so
$$
\begin{tikzcd}
& Z \arrow[dashed]{d}{\exists !g} \arrow[bend right=30]{ddl}[swap]{q_i} \arrow[bend left=30]{ddr}{q_j} & \\
& L \arrow{dl}[swap]{p_i} \arrow{dr}{p_j} & \\
X_i \arrow{rr}[swap]{X\br{f}} & & X_j
\end{tikzcd},
$$
for $ f : i \to j $. \textbf{Colimits} are as limits, but arrows are reversed.
\end{definition}

\begin{example}
\hfill
\begin{itemize}
\item If $ \JJJ $ is the category
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\fill (1, 0) circle (0.05);
\end{tikzpicture},
$$
then a diagram of shape $ \JJJ $ is a pair of objects. The limit is the product and the colimit is the coproduct.
\item If $ \JJJ $ is the category
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\fill (1, 0) circle (0.05);
\fill (0, -1) circle (0.05);
\draw (0, 0) to node{$ > $} (1, 0);
\draw (0, 0) to node{$ \vee $} (0, -1);
\end{tikzpicture},
$$
then a diagram of shape $ \JJJ $ in $ \Grp $ would be
$$
\begin{tikzcd}
C \arrow{r}{\phi_{CA}} \arrow{d}[swap]{\phi_{CB}} & A \\
B &
\end{tikzcd}.
$$
The colimit is the pushout.
\end{itemize}
\end{example}

\begin{proposition}
Limits and colimits are unique up to unique isomorphism.
\end{proposition}

\pagebreak

\subsection{Inverse limits and profinite groups}

Let $ G $ be a group. Let $ \NNN $ be the poset category whose objects are $ \cbr{N \triangleleft_\f G} $, where $ N \triangleleft_\f G $ are finite index, with ordering $ N_1 \le N_2 $ if and only if $ N_1 \subseteq N_2 $. There is a diagram of shape $ \NNN $ in $ \Grp $,
$$ \function[X]{\NNN}{\Grp}{N}{X_N = G / N}. $$
If $ N_1 \le N_2 $, then $ X\br{N_1 \to N_2} $ is the quotient map $ \phi_{N_1N_2} : G / N_1 \to G / N_2 $, the transition maps.

\begin{definition}
Let $ G $ be a group. The \textbf{profinite completion} of $ G $ is the limit of this diagram, denoted $ \widehat{G} $. Then $ G $ comes with \textbf{projections} $ p_N : \widehat{G} \to G / N $ for all $ N \triangleleft_\f G $ such that
\begin{itemize}
\item if $ N_1 \subseteq N_2 $, then $ \phi_{N_1N_2} \circ p_{N_1} = p_{N_2} $, and
\item if $ Z $ is a group, with $ q_N : Z \to G / N $ such that $ \phi_{N_1N_2} \circ q_{N_1} = q_{N_2} $, there exists a unique $ f : Z \to \widehat{G} $ such that $ p_N \circ f = q_N $ for all $ N $.
\end{itemize}
In particular, $ Z = G $ works, so there is a unique morphism $ \iota_G : G \to \widehat{G} $, the \textbf{canonical morphism}, such that the diagrams commute.
\end{definition}

\begin{definition}
A poset $ \br{J, \le} $ is an \textbf{inverse system} if for all $ i, j \in J $ there exists $ k \in J $ such that $ k \le i $ and $ k \le j $. An \textbf{inverse system of groups} consists of an inverse system $ \br{J, \le} $ and a diagram of shape $ \JJJ $ in $ \Grp $, so $ G : \JJJ \to \Grp $. Thus an inverse system is a group $ G_j $ for all $ j \in J $ and transition maps $ \phi_{ij} : G_i \to G_j $ if $ i \le j $ such that $ \phi_{ii} = \id $ and $ \phi_{jk} \circ \phi_{ij} = \phi_{ik} $ for all $ i \le j \le k $. The \textbf{inverse limit} of this inverse system of groups $ G_j $ is the limit of this diagram, denoted $ \varprojlim_j G_j $.
\end{definition}

\begin{definition}
A \textbf{profinite group} is the inverse limit of an inverse system of groups, all of which are finite.
\end{definition}

\begin{proposition}
Let $ \br{G_j}_{j \in J} $ be an inverse system of groups. Then the inverse limit exists, and is given by the explicit description
$$ \varprojlim_j G_j = \cbr{\br{g_j}_{j \in J} \in \prod_{j \in J} G_j \st \forall i \le j, \ \phi_{ij}\br{g_i} = g_j}. $$
\end{proposition}

\begin{proof}
This is a group. We have $ p_j : \varprojlim_j G_j \to G_j $, restricted from $ \prod_{j \in J} G_j \to G_j $. Take a cone $ Z $ on the system. Define
$$ \function[f]{Z}{\varprojlim_j G_j}{z}{\br{q_j\br{z}}_{j \in J}}. $$
Then $ \phi_{ij}\br{q_i\br{z}} = q_j\br{z} $, so $ p_j \circ f = q_j $.
\end{proof}

\lecture{3}{Tuesday}{26/01/21}

\begin{definition}
Let $ \br{G_j}_{j \in J} $ be an inverse system of finite groups. Give each $ G_j $ the discrete topology. Give $ \prod_j G_j $ the product topology. Then $ \varprojlim_j G_j \le \prod_j G_j $ gets the subspace topology.
\end{definition}

\begin{proposition}
$ \varprojlim_j G_j $ is compact Hausdorff.
\end{proposition}

\begin{proof}
$ \prod_j G_j $ is Hausdorff and compact, by Tychonoff's theorem. Each condition $ \phi_{ij}\br{g_i} = g_j $ is a closed condition, since $ \prod_{j \in J} G_j \to G_i \times G_j $, so $ \varprojlim_j G_j $ is closed in $ \prod_j G_j $.
\end{proof}

\begin{proposition}
Let $ \br{X_j}_{j \in J} $ be an inverse system of non-empty finite sets. Then $ \varprojlim_j X_j $ is non-empty.
\end{proposition}

\begin{proof}
Use the finite intersection property. Let $ I_1 \subseteq J $ be a finite subset. Define a closed subset
$$ Y_{I_1} = \cbr{\br{x_j} \in \prod_j X_j \st \forall i, j \in I_1, \ \forall i \le j, \ \phi_{ij}\br{x_i} = x_j} \subseteq \prod_j X_j. $$

\pagebreak

Since $ J $ is an inverse system and $ I_1 $ is finite, there exists $ k \in J $ such that $ k \le i $ for all $ i \in I_1 $. Choose $ x_k \in X_k \ne \emptyset $. Define $ x_j = \phi_{kj}\br{x_k} $ for all $ j \ge k $. Choose $ x_j $ arbitrarily elsewhere. This gives $ x = \br{x_j} \in \prod_{j \in J} X_j $, which lies in $ Y_{I_1} $, since if $ i, j \in I_1 $ such that $ i \le j $ then
$$ x_j = \phi_{kj}\br{x_k} = \phi_{ij}\br{\phi_{ki}\br{x_k}} = \phi_{ij}\br{x_i}. $$
So $ Y_{I_1} $ is non-empty. Then $ Y_{I_1} \cap \dots \cap Y_{I_n} \supseteq Y_{I_1 \cup \dots \cup I_n} \ne \emptyset $. By the finite intersection property, since $ \prod_j X_j $ is compact, $ \bigcap_{I_1} Y_{I_1} = \varprojlim_j X_j $ is non-empty.
\end{proof}

\begin{proposition}
Let $ J $ be a countable set and let $ \br{X_j}_{j \in J} $ be a family of finite sets. Then $ X = \prod_{j \in J} X_j $ is \textbf{metrisable}, so the metric topology equals to the other topology.
\end{proposition}

\begin{proof}
Without loss of generality $ J = \NN $. Give each $ X_n $ the discrete metric $ d_n $, where
$$ d_n\br{x_n, y_n} =
\begin{cases}
0 & x_n = y_n \\
1 & x_n \ne y_n
\end{cases},
\qquad x_n, y_n \in X_n. $$
Define
$$ d\br{\br{x_n}, \br{y_n}} = \sum_{n = 1}^\infty \dfrac{1}{3^n}d_n\br{x_n, y_n}, \qquad \br{x_n}, \br{y_n} \in \prod_n X_n. $$
We need to show this gives the product topology. Let $ f : \br{X, \tau_{\text{product}}} \to \br{X, d} $ be the identity function. A basis for the metric topology are open balls $ \B\br{x, 1 / 3^n} $ for $ x \in X $ and $ n \in \NN $. Then $ d\br{\br{x_n}, \br{y_n}} < 1 / 3^m $ if and only if $ x_n = y_n $ for all $ n \le m $, and
$$ f^{-1}\br{\B\br{\br{x_n}, \dfrac{1}{3^m}}} = \cbr{\br{y_n} \st \forall n \le m, \ y_n = x_n} = \bigcap_{n = 1}^m p_n^{-1}\br{\cbr{x_n}}, \qquad p_n : \prod_n X_n \to X_n $$
is open in the product topology. So $ f $ is continuous, so a homeomorphism.
\end{proof}

\begin{proposition}
A continuous bijection from a compact space to a Hausdorff space is a homeomorphism.
\end{proposition}

\begin{lemma}
\label{lem:1.2.18}
Let $ G $ be a finitely generated group. For each $ n \in \NN $, there are only finitely many subgroups of index $ n $.
\end{lemma}

\begin{proof}
For a subgroup $ H \le G $ of index $ n $, we get a homomorphism $ G \to \Sym n $, since by labelling cosets $ H, \dots, g_nH $ by symbols $ 1, \dots, n $, $ G $ permutes these right cosets by $ g \cdot g_iH = \br{gg_i}H $ and $ H $ is recovered from this as $ \Stab 1 $. So there are at most as many subgroups $ H $ as homomorphisms to $ \Sym n $, and there are only finitely many.
\end{proof}

\begin{corollary}
If $ G $ is finitely generated, the inverse system $ \NNN = \cbr{N \triangleleft_\f G} $ is countable.
\end{corollary}

\begin{proposition}
Let $ G $ be a profinite group. Then $ G $ is a \textbf{topological group}, so
$$ \function[\m]{G \times G}{G}{\br{g, h}}{gh}, \qquad \function[\i]{G}{G}{g}{g^{-1}} $$
are continuous.
\end{proposition}

\begin{definition}
Let $ G $ and $ H $ be topological groups. We say $ G $ and $ H $ are \textbf{isomorphic as topological groups} if and only if there exists $ f : G \to H $ which is both an isomorphism of groups and a homeomorphism.
\end{definition}

Recall that if $ G $ and $ H $ are profinite, this is the same as there exists $ f $ a continuous isomorphism.

\begin{proposition}
\label{prop:1.2.25}
Let $ H $ be a topological group and $ G = \varprojlim_j G_j $ be an inverse limit of finite groups. Let $ p_j : G \to G_j $ be the projection maps. A homomorphism $ f : H \to G $ is continuous if and only if each map $ f_j = p_j \circ f $ is continuous.
\end{proposition}

\begin{proof}
$ f : H \to G \le \prod_j G_j $. This is continuous if and only if all $ f_j $ are continuous, by definition of the product topology.
\end{proof}

\pagebreak

\begin{proposition}
Let $ f : H \to G_j $ be a homomorphism from a topological group to a finite group, with the discrete topology. Then $ f $ is continuous if and only if $ \ker f $ is open in $ H $.
\end{proposition}

\begin{proof}
If $ f $ is continuous then $ \ker f = f^{-1}\br{\cbr{1}} $ is open. Assume $ f^{-1}\br{\cbr{1}} $ is open. Then $ f^{-1}\br{\cbr{g}} $ is open for all $ g \in G $, since multiplication is continuous and $ f^{-1}\br{\cbr{g}} = hf^{-1}\br{\cbr{1}} $ for some $ h \in H $. Taking unions, the preimage of any set in $ G_j $ is open in $ H $, so $ f $ is continuous.
\end{proof}

\begin{proposition}
Let $ G $ be a compact topological group. A subgroup of $ G $ is open if and only if it is closed and of finite index.
\end{proposition}

\begin{proposition}
\label{prop:1.2.28}
Let $ \br{G_j}_{j \in J} $ be an inverse system of finite groups. If $ G = \varprojlim_j G_j $, then the open subgroups $ U_j = \ker \br{p_j : G \to G_j} $ form a \textbf{basis of open neighbourhoods} of the identity $ 1 \in G $, so if $ V \subseteq G $ is any open set with $ 1 \in V $, then there exists $ j $ such that $ U_j \subseteq V $.
\end{proposition}

\begin{proof}
Let $ V \ni 1 $ be open. By definition of the product topology,
$$ V \supseteq p_{j_1}^{-1}\br{X_{j_1}} \cap \dots \cap p_{j_n}^{-1}\br{X_{j_n}} \supseteq p_{j_1}^{-1}\br{\cbr{1}} \cap \dots \cap p_{j_n}^{-1}\br{\cbr{1}} = U_{j_1} \cap \dots \cap U_{j_n}. $$
for $ X_{j_i} \subseteq G_{j_i} $. There exists $ k $ such that $ k \le j_i $. Since $ p_{j_i} = \phi_{kj_i} \circ p_k $, $ \ker p_k = U_k \subseteq U_{p_{j_i}} = \ker p_{j_i} $ for all $ i $. Thus $ V \supseteq U_k $.
\end{proof}

\lecture{4}{Thursday}{28/01/21}

\begin{corollary}
If $ g = \br{g_j}_{j \in J} \in G $, then the open cosets $ gU_j = p_j^{-1}\br{\cbr{g_j}} $ form a neighbourhood base at $ g $, so for all open set $ V \ni g $, there exists $ j \in J $ such that $ gU_j \subseteq V $.
\end{corollary}

\begin{proof}
Continuity of multiplication.
\end{proof}

\begin{corollary}
\label{cor:1.2.30}
A subset $ X \subseteq G $ is dense if and only if $ p_j\br{X} = p_j\br{G} $ for all $ j \in J $.
\end{corollary}

\begin{proof}
Suppose $ X $ is not dense. There exists a non-empty open set $ V $ such that $ V \cap X = \emptyset $. Pick $ g \in V $. There exists $ j \in J $ such that $ p_j^{-1}\br{\cbr{g_j}} = gU_j \subseteq V $, where $ g_j = p_j\br{g} $. Then $ g_j \in p_j\br{G} $. But for any $ x \in X $, $ p_j\br{x} \ne g_j $, otherwise $ x \in p_j^{-1}\br{\cbr{g_j}} = gU_j \subseteq V $, so $ p_j\br{X} \ne p_j\br{G} $. Assume $ X $ is dense. Then $ p_j\br{X} \subseteq p_j\br{G} $ is obvious. If $ g_j \in p_j\br{G} $, then $ p_j^{-1}\br{\cbr{g_j}} $ is a non-empty open set, so there exists $ x \in X \cap p_j^{-1}\br{\cbr{g_j}} $, then $ p_j\br{x} = g_j $. So $ g_j \in p_j\br{X} $, so $ p_j\br{X} = p_j\br{G} $.
\end{proof}

\begin{corollary}
\label{cor:1.2.31}
Let $ Y $ be a compact topological space and let $ f : Y \to G $ be a continuous function. Then $ f $ is surjective if and only if $ p_j\br{f\br{Y}} = p_j\br{G} $ for all $ j \in J $.
\end{corollary}

\begin{proof}
$ p_j\br{f\br{Y}} = p_j\br{G} $ if and only if $ f\br{Y} $ is dense, if and only if $ f\br{Y} = G $, since $ f\br{Y} $ is closed.
\end{proof}

\begin{proposition}
\label{prop:1.2.32}
Let $ G $ be a profinite group and $ X \subseteq G $ be a subset. Then the closure of $ X $ is
$$ \overline{X} = \bigcap_{N \le_\o G} XN, $$
where $ N \le_\o G $ are open subgroups.
\end{proposition}

\begin{proof}
$ XN $ is a union of cosets, hence it is open and closed in $ G $. So $ \overline{X} \subseteq XN $ for all $ N \le_\o G $, so $ \overline{X} \subseteq \bigcap_{N \le_\o G} XN $. Take $ g \notin \overline{X} $. There exists an open $ V \subseteq G $ such that $ g \in V $ but $ X \cap V = \emptyset $. Then there exists $ j \in J $ such that $ V \supseteq gU_j $ for $ N = U_j = \ker p_j $. Then $ g \notin XN $, since if $ g = xn $ for $ x \in X $ and $ n \in N = U_j $ then $ x = gn^{-1} \in gN = gU_j \subseteq V $, a contradiction. Thus $ g \notin \bigcap_N XN $, so $ \bigcap_N XN \subseteq \overline{X} $.
\end{proof}

\begin{proposition}
\label{prop:1.2.33}
Let $ G $ be a profinite group and let $ \UUU $ be a collection of open normal subgroups which form a neighbourhood base at the identity. Then
$$ G \cong \varprojlim_{U \in \UUU} G / U, $$
as topological groups, where $ G / U $ are finite groups.
\end{proposition}

\pagebreak

\begin{proof}
The quotient maps $ G \twoheadrightarrow G / U $ are a cone on the inverse system, so we get a well-defined homomorphism $ f : G \to \varprojlim_U G / U $. Then
\begin{itemize}
\item $ f $ is continuous, since compositions with projection maps are continuous,
\item $ f $ is surjective, since $ G \twoheadrightarrow G / U $ are surjective, and
\item $ f $ is injective, since if $ g \in G \setminus \cbr{1} $, there exists an open subset $ V $ such that $ 1 \in V $ and $ g \notin V $ and there exists $ U \in \UUU $ such that $ 1 \in U \subseteq V $, then $ g \notin \ker \br{G \to G / U} $, so $ g \notin \ker f $.
\end{itemize}
\end{proof}

\subsection{Change of inverse system}

\begin{definition}
Let $ \br{J, \le} $ be an inverse system. A \textbf{cofinal subsystem} of $ J $ is a subset $ I \subseteq J $ such that for all $ j \in J $ there exists $ i \in I $ such that $ i \le j $.
\end{definition}

Then $ I $ is an inverse system.

\begin{example}
If $ k \in J $, then the set
$$ J_{\le k} = \cbr{j \in J \st j \le k}, $$
the \textbf{principal cofinal subsystem}, is cofinal in $ J $.
\end{example}

\begin{proposition}
Let $ \br{G_j}_{j \in J} $ be an inverse system of finite groups, and let $ I \subseteq J $ be cofinal. Then $ H = \varprojlim_{i \in I} G_i $ is topologically isomorphic to $ G = \varprojlim_{j \in J} G_j $.
\end{proposition}

\begin{proof}
The projection map $ \prod_{j \in J} G_j \to \prod_{i \in I} G_i $ is a continuous homomorphism, and it restricts to $ f : G \to H $. Check that $ f $ is bijective.
\begin{itemize}
\item Injective. Take $ g = \br{g_j}_{j \in J} \in G $. Assume $ f\br{g} = 1 $, so $ g_i = p_i\br{f\br{g}} = 1 $ for all $ i \in I $. For any $ j \in J $, there exists $ i \in I $ such that $ i \le j $. Then $ g_j = \phi_{ij}\br{g_i} = \phi_{ij}\br{1} = 1 $. So $ g = 1 $.
\item Surjective. Let $ h = \br{h_i}_{i \in I} \in H $ for $ h_i \in G_i $. Define $ g = \br{g_j} \in \prod_{j \in J} G_j $ by setting $ g_j = \phi_{ij}\br{h_i} $ for some $ i \in I $ such that $ i \le j $. If $ i_1 \le j $ and $ i_2 \le j $, there exists $ i_0 \in I $ such that $ i_0 \le i_1 $ and $ i_0 \le i_2 $, then
$$ \phi_{i_1j}\br{h_{i_1}} = \phi_{i_1j}\br{\phi_{i_0i_1}\br{h_{i_0}}} = \phi_{i_0j}\br{h_{i_0}} = \phi_{i_2j}\br{\phi_{i_0i_2}\br{h_{i_0}}} = \phi_{i_2j}\br{h_{i_2}}. $$
It also follows that $ g \in G $, since if $ j_1 \le j_2 $, choose $ i \in I $ such that $ i \le j_1 $, then
$$ g_{j_2} = \phi_{ij_2}\br{h_i} = \phi_{j_1j_2}\br{\phi_{ij_1}\br{h_i}} = \phi_{j_1j_2}\br{g_{j_1}}. $$
Finally, $ f\br{g} = h $, since $ g_i = \phi_{ii}\br{h_i} = h_i $ for all $ i \in I $.
\end{itemize}
\end{proof}

\begin{definition}
An inverse system of groups is \textbf{surjective} if all transition maps are surjective.
\end{definition}

\begin{proposition}
Let $ \br{X_j}_{j \in J} $ be an inverse system of finite sets where all transition maps are surjective. Then the projection maps $ p_j : \varprojlim_j X_j \to X_j $ are surjective.
\end{proposition}

\begin{proposition}
\label{prop:1.3.7}
Let $ \br{G_j}_{j \in J} $ be an inverse system of finite groups. Then there exists an inverse system $ \br{G_j'}_{j \in J} $ such that $ G_j' \le G_j $, with surjective transition maps, such that $ \varprojlim_j G_j = \varprojlim_j G_j' $.
\end{proposition}

\begin{proof}
Let $ p_j : G = \varprojlim_j G_j \to G_j $ be the projection. Define $ G_j' = p_j\br{G} $. Since $ \phi_{ij} \circ p_i = p_j $, $ \br{G_j'} $ is an inverse system with $ \eval{\phi_{ij}}_{G_i'} : G_i' \to G_j' $, and $ \eval{\phi_{ij}}_{G_i'} $ is surjective. If $ g = \br{g_j} \in G $ then $ g_j = p_j\br{g} \in G_j' $, so $ g \in \varprojlim_j G_j' \le G \le \prod_j G_j $. Thus $ \varprojlim_j G_j' = G $.
\end{proof}

\begin{definition}
An inverse system $ \br{J, \le} $ is \textbf{linearly ordered} if there exists a bijection $ f : J \to \NN $ such that $ i \le j $ if and only if $ f\br{i} \ge f\br{j} $, the \textbf{wrong-way ordering} on $ \NN $.
\end{definition}

Thus cofinal if and only if increasing subsequence.

\begin{proposition}
\label{prop:1.3.11}
If $ J $ is a countable inverse system, with no \textbf{global minimum}, so there does not exist $ m \in J $ such that $ m \le j $ for all $ j $, then $ J $ has a linearly ordered cofinal subsystem.
\end{proposition}

\pagebreak

\section{Profinite groups}

\subsection{The \texorpdfstring{$ p $}{p}-adic integers}

\lecture{5}{Saturday}{30/01/21}

Let $ p $ be a prime. Consider
$$ \dots \to \ZZ / p^2\ZZ \to \ZZ / p\ZZ \to 1. $$
The \textbf{ring of $ p $-adic integers} is
$$ \ZZ_p = \varprojlim_{n \in \NN} \ZZ / p^n\ZZ. $$
Thus $ \alpha \in \ZZ_p $ is a sequence $ \br{a_n}_{n \in \NN} $ of integers modulo $ p^n $ for $ a_n \in \ZZ / p^n\ZZ $ such that $ a_n \equiv a_m \mod p^m $ whenever $ n \ge m $, since $ \ZZ / p^n\ZZ \to \ZZ / p^m\ZZ $, and
$$ \function[p_n]{\ZZ_p}{\ZZ / p^n\ZZ}{\alpha}{a_n = \alpha \mod p^n}. $$
Given $ a \in \ZZ $, setting $ a_n = a \mod p^n $ gives an element $ \iota\br{a} \in \ZZ_p $ for $ \iota : \ZZ \to \ZZ_p $. Then $ \iota $ is injective, since if $ a \in \ZZ $, and $ p^n > \abs{a} $ then $ a \not\equiv 0 \mod p^n $, so $ \iota\br{a} \ne 0 $ in $ \ZZ_p $. Often $ \ZZ \le \ZZ_p $.

\begin{definition}
Let $ \alpha = \br{a_n}, \beta = \br{b_n} \in \ZZ_p $. If $ \alpha = \beta $ then $ \d\br{\alpha, \beta} = 0 $. If $ \alpha \ne \beta $, take the smallest $ n $ such that $ a_n \ne b_n $, and set $ \d\br{\alpha, \beta} = p^{-n} $, the \textbf{$ p $-adic metric on $ \ZZ_p $}. The restriction of $ \d $ to $ \iota\br{\ZZ} $ is the \textbf{$ p $-adic metric on $ \ZZ $}.
\end{definition}

Thus $ \alpha $ and $ \beta $ are close if $ \br{a_n} $ and $ \br{b_n} $ agree modulo $ p^n $ for all but large $ n $. Since
$$ \B\br{0, r} = \cbr{\alpha = \br{a_n} \st \forall n \le -\log_p r, \ a_n = 0} = \ker \br{\ZZ_p \to \ZZ / p^{\fbr{-\log_p r}}\ZZ}, $$
open balls are the subgroups $ p^n\ZZ_p \le \ZZ_p $.

\begin{itemize}
\item $ \iota\br{\ZZ} $ is dense in this metric. Let $ \alpha = \br{a_n} \in \ZZ_p $ and $ \epsilon > 0 $. Take $ n > -\log_p \epsilon $, and choose $ a \in \ZZ $ such that $ a \equiv a_n \mod p^n $. Then $ \d\br{\alpha, \iota\br{a}} \le p^{-n} < \epsilon $.
\item The $ p $-adic metric on $ \ZZ $ is not complete, since $ a_n = 1 + \dots + p^n $ does not converge in $ \ZZ $, but does converge in $ \ZZ_p $.
\item The $ p $-adic metric on $ \ZZ_p $ is complete. Let $ \alpha^{\br{k}} = \br{a_n^{\br{k}}}_{n \in \NN} $ be a Cauchy sequence in $ \ZZ_p $. For all $ n $ there exists $ K_n $ such that for all $ k, l \ge K_n $, we have $ \d\br{\alpha^{\br{k}}, \alpha^{\br{l}}} \le p^{-n} $, so $ a_n^{\br{k}} = a_n^{\br{l}} $ for all $ k, l \ge K_n $ so for fixed $ n $, $ a_n^{\br{k}} $ is eventually a constant $ b_n $. Then $ \beta = \br{b_n} \in \ZZ_p $, and $ \alpha^{\br{k}} \to \beta $ in $ \ZZ_p $.
\end{itemize}

Thus $ \ZZ_p $ is a completion of $ \ZZ $, but is not the profinite completion of $ \ZZ $.

\begin{definition}
Let $ p $ be a prime. A \textbf{$ p $-group} is a finite group of order $ p^n $ for $ n \ge 0 $. A \textbf{pro-$ p $ group} is an inverse limit of $ p $-groups.
\end{definition}

\begin{definition}
Let $ G $ be a group and $ p $ prime. The set of normal subgroups $ N \triangleleft G $ such that $ \sbr{G : N} = p^n $ for some $ n $ form an inverse system $ \NNN_p $. Since $ G / N_1 \times G / N_2 $ are $ p $-groups, $ N_1 \cap N_2 = \ker \br{G \to G / N_1 \times G / N_2} $ is a $ p $-group. The \textbf{pro-$ p $ completion} is
$$ \widehat{G_{\br{p}}} = \varprojlim_{N \in \NNN_p} G / N, $$
where $ G / N_1 \to G / N_2 $ if $ N_1 \le N_2 $.
\end{definition}

\begin{proposition}
The additive group $ \ZZ_p $ is abelian and torsionfree.
\end{proposition}

\begin{proof}
$ \ZZ_p \le \prod_{n \in \NN} \ZZ / p^n\ZZ $ is abelian. Let $ \alpha = \br{a_n} \in \ZZ_p \setminus \cbr{0} $. Suppose $ m\alpha = 0 $ for $ m \in \ZZ $. We want $ m = 0 $. Assume $ m = p^rs $ for $ s $ coprime to $ p $. Then $ \alpha \ne 0 $, so there exists $ n $ such that $ a_n \ne 0 $. Consider $ a_{n + r} $. Then $ 0 \equiv ma_{n + r} \equiv p^ra_{n + r}s \mod p^{n + r} $, so $ p^n \mid a_{n + r}s $. Thus $ p^n \mid a_{n + r} $, so $ a_n \equiv a_{n + r} \equiv 0 \mod p^n $, a contradiction.
\end{proof}

\pagebreak

\begin{proposition}
The ring $ \ZZ_p $ has no zero-divisors.
\end{proposition}

\begin{proof}
Exercise. \footnote{Exercise}
\end{proof}

\subsection{The profinite completion of the integers}

The \textbf{profinite completion of the integers} is
$$ \widehat{\ZZ} = \varprojlim_n \ZZ / n\ZZ, $$
where $ \ZZ / n\ZZ \to \ZZ / m\ZZ $ whenever $ n\ZZ \le m\ZZ $, which is if and only if $ m \mid n $, so $ n = mr $.

\begin{theorem}[Chinese remainder theorem]
There is an isomorphism of topological rings
$$ \widehat{\ZZ} \cong \prod_{p \ \text{prime}} \ZZ_p. $$
\end{theorem}

\begin{proof}
Each natural number $ n $ is written as a product of prime powers $ n = \prod_{p \ \text{prime}} p^{\e_p\br{n}} $. The classical CRT gives natural isomorphisms
$$ \function[f_n]{\ZZ / n\ZZ}{\prod_{p \ \text{prime}} \ZZ / p^{\e_p\br{n}}\ZZ}{1}{\br{1, \dots, 1}}, $$
and commutative diagrams
$$
\begin{tikzcd}
\ZZ / mn\ZZ \arrow{r}{f_{mn}}[swap]{\sim} \arrow[twoheadrightarrow]{d} & \displaystyle\prod_p \ZZ / p^{\e_p\br{mn}}\ZZ \arrow[twoheadrightarrow]{d} \\
\ZZ / n\ZZ \arrow{r}{\sim}[swap]{f_n} & \displaystyle\prod_p \ZZ / p^{\e_p\br{n}}\ZZ
\end{tikzcd}.
$$
Passing to inverse limits,
$$
\begin{tikzcd}[row sep=tiny]
\widehat{\ZZ} = \displaystyle\varprojlim_n \ZZ / n\ZZ \arrow{r}{\sim} \arrow[subset]{d} & \displaystyle\varprojlim_n \prod_p \ZZ / p^{\e_p\br{n}}\ZZ \arrow[subset]{d} \\
\displaystyle\prod_n \ZZ / n\ZZ \arrow{r}[swap]{\sim} & \displaystyle\prod_n \prod_p \ZZ / p^{\e_p\br{n}}\ZZ
\end{tikzcd}.
$$
The natural continuous surjections
$$ \prod_p \ZZ_p \twoheadrightarrow \prod_p \ZZ / p^{\e_p\br{n}}\ZZ $$
form a cone on the inverse system $ \cbr{\prod_p \ZZ / p^{\e_p\br{n}}\ZZ} $, so there exists
$$ f : \prod_p \ZZ_p \twoheadrightarrow \varprojlim_n \prod_p \ZZ / p^{\e_p\br{n}}\ZZ, $$
which is continuous by Proposition \ref{prop:1.2.25}, surjective by Corollary \ref{cor:1.2.31}, and injective since every non-trivial element of $ \prod_p \ZZ_p $ is non-trivial in some quotient $ \ZZ / p^e\ZZ $. So $ f $ is a topological isomorphism as required.
\end{proof}

\begin{corollary}
The abelian group $ \widehat{\ZZ} $ is torsionfree abelian.
\end{corollary}

\begin{corollary}
The ring $ \widehat{\ZZ} $ is not an integral domain.
\end{corollary}

\begin{proof}
Any product of non-trivial rings $ R_1 \times R_2 $ has zero-divisors, since $ \br{r_1, 0} \cdot \br{0, r_2} = \br{0, 0} $. An element of $ \widehat{\ZZ} $ is a zero-divisor if and only if it is zero in some $ \ZZ_p $-factor.
\end{proof}

Elements of $ \iota\br{\ZZ} $ are not zero divisors in $ \widehat{\ZZ} $.

\pagebreak

\subsection{Profinite matrix groups}

\lecture{6}{Tuesday}{02/02/21}

For a commutative ring $ R $, we have
$$ \Mat_{N \times M} R = \cbr{N \times M \ \text{matrices with elements in} \ R}. $$
If $ N = M $, we have a ring structure, where addition and multiplication are given by the usual formula. There exists a determinant function $ \det : \Mat_{N \times N} R \to R $. Then
$$ \ZZ_p^{NM} \cong \Mat_{N \times M} \ZZ_p = \varprojlim_{n \in \NN} \Mat_{N \times M} \br{\ZZ / p^n\ZZ}. $$
By continuity of ring operations on $ \ZZ_p $, addition and multiplication on matrices are continuous, and $ \det : \Mat_{N \times N} \ZZ_p \to \ZZ_p $ is continuous. Since $ \ZZ_p $ is an integral domain, it has a field of fractions $ \QQ_p $, so you can do linear algebra over $ \QQ_p $. A matrix over $ \QQ_p $ has an inverse over $ \QQ_p $ if and only if its determinant is non-zero, and a matrix over $ \ZZ_p $ has an inverse over $ \ZZ_p $ if and only if its determinant and its inverse are in $ \ZZ_p^\times $. Define
$$ \GL_N \ZZ_p = \cbr{A \in \Mat_{N \times N} \ZZ_p \st \det A \in \ZZ_p^\times}, \qquad \SL_N \ZZ_p = \cbr{A \in \Mat_{N \times N} \ZZ_p \st \det A = 1}. $$
Both are profinite groups.

\begin{lemma}
For all $ N \ge 1 $ and $ p $ prime,
$$ \GL_N \ZZ_p = \varprojlim_n \GL_N \br{\ZZ / p^n\ZZ}, \qquad \SL_N \ZZ_p = \varprojlim_n \SL_N \br{\ZZ / p^n\ZZ}. $$
\end{lemma}

\begin{proof}
The diagrams
$$
\begin{tikzcd}
\Mat_{N \times N} \ZZ_p \arrow{r} \arrow{d}[swap]{\det} & \Mat_{N \times N} \br{\ZZ / p^n\ZZ} \arrow{d}{\det} \\
\ZZ_p \arrow{r} & \ZZ / p^n\ZZ
\end{tikzcd}
$$
commute.
\begin{itemize}
\item $ A \in \GL_N \ZZ_p $ if and only if $ \det A \in \ZZ_p^\times $, if and only if $ \det A_n \in \br{\ZZ / p^n\ZZ}^\times $ for all $ n $, if and only if $ A_n \in \GL_N \br{\ZZ / p^n\ZZ} $ for all $ n $.
\item $ A \in \SL_N \ZZ_p $ if and only if $ \det A = 1 $, if and only if $ \det A_n = 1 $ for all $ n $, if and only if $ A_n \in \SL_N \br{\ZZ / p^n\ZZ} $ for all $ n $.
\end{itemize}
\end{proof}

Also have matrices over $ \widehat{\ZZ} $. A warning is that $ \widehat{\ZZ} $ is not an integral domain. Analogously,
$$ \GL_N \widehat{\ZZ} = \cbr{A \in \Mat_{N \times N} \widehat{\ZZ} \st \det A \in \widehat{\ZZ}^\times} = \varprojlim_n \GL_N \br{\ZZ / n\ZZ} = \prod_p \GL_N \ZZ_p, $$
$$ \SL_N \widehat{\ZZ} = \cbr{A \in \Mat_{N \times N} \widehat{\ZZ} \st \det A = 1} = \varprojlim_n \SL_N \br{\ZZ / n\ZZ} = \prod_p \SL_N \ZZ_p, $$
since $ \Mat_{N \times N} \widehat{\ZZ} = \prod_p \Mat_{N \times N} \ZZ_p $, and
$$ \SL_N \ZZ \le \SL_N \ZZ_p, \qquad \SL_N \ZZ \le \SL_N \widehat{\ZZ} = \varprojlim_n \SL_N \br{\ZZ / n\ZZ} $$
are dense. See problem sheet $ 2 $.

\begin{example}
$ \twobytwosmall{7}{9}{4}{9} \in \SL_2 \br{\ZZ / 13\ZZ} $ is in the image of $ \SL_2 \ZZ $.
\end{example}

\pagebreak

\subsection{Subgroups, quotients, and homomorphisms}

\begin{proposition}
A closed subgroup of a profinite group is a profinite group.
\end{proposition}

\begin{proof}
Let $ G = \varprojlim_{j \in J} G_j $ be a profinite group for $ G_j $ finite. Take a closed subgroup $ H \le_\c G $ of $ G $. Define $ H_j = p_j\br{H} \le G_j $. Then $ H_j $, with transition maps $ \eval{\phi_{ij}}_{H_i} : H_i \to H_j $, are an inverse system of finite groups. Define
$$ H' = \varprojlim_j H_j = \cbr{\br{g_j} \in \prod_{j \in J} G_j \st \forall i \le j, \ \phi_{ij}\br{g_i} = g_j, \ g_j \in H_j}. $$
Show that $ H = H' $. If $ h = \br{h_j} \in H $, by definition $ h_j = p_j\br{h} \in H_j $, so $ H \le H' $. Suppose $ g = \br{g_j} \notin H $. Since $ H $ is closed, $ G \setminus H $ is open, so there exists a basic open set containing $ g $, which does not intersect $ H $. There exists $ j \in J $ such that $ gU_j = p_j^{-1}\br{\cbr{g_j}} \le G \setminus H $. Therefore for all $ h \in H $, $ p_j\br{h} \ne g_j $, since then $ h \in H \cap p_j^{-1}\br{\cbr{g_j}} $, so $ g_j \notin H_j $, so $ g \notin H' $. So $ H = H' $.
\end{proof}

\begin{remark}
\hfill
\begin{itemize}
\item The two topologies on $ H $ agree by $ \id : \br{H, \tau_{\text{profinite}}} \to \br{H, \tau_{\text{subspace}}} $, which is continuous by Proposition \ref{prop:1.2.25}.
\item A better name for $ H' $ is $ \overline{H} $, the closure. Actually proved that $ H' = \overline{H} = H $.
\end{itemize}
\end{remark}

\begin{proposition}
Let $ G = \varprojlim_j G_j $ and $ H \le G $. Set $ H_j = p_j\br{H} \le G_j $. Then the closure of $ H $ is
$$ \overline{H} = \varprojlim_j H_j. $$
\end{proposition}

\begin{lemma}
Let $ f : G_1 \to G_2 $ be a surjective homomorphism and $ H \le G_1 $. Then $ \sbr{G_1 : H} \ge \sbr{G_2 : f\br{H}} $.
\end{lemma}

\begin{proposition}
Let $ G = \varprojlim_j G_j $ for $ \br{G_j} $ a surjective inverse system, so $ G \twoheadrightarrow G_j $. Let $ H \le_\c G $ and set $ H_j = p_j\br{H} \le G_j $. Then $ H $ is finite index if and only if $ \sbr{G_j : H_j} $ is constant on a cofinal subsystem, if and only if $ \sbr{G_j : H_j} $ is bounded for all $ j $. If this is true, then $ \sbr{G : H} = \sbr{G_i : H_i} $ for $ i \in I $.
\end{proposition}

\begin{proof}
$ p_j : G \to G_j $ are surjective, so $ \sbr{G : H} \ge \sbr{G_j : H_j} $. Suppose $ \sbr{G : H} \ge N $. There exist distinct cosets $ g_1H, \dots, g_NH $ of $ H $ in $ G $, if and only if $ g_n^{-1}g_m \notin H $ if $ n \ne m $, so there exists $ j_{n, m} \in J $ such that $ p_{j_{n, m}}\br{g_n^{-1}g_m} \notin H_{j_{n, m}} $. Take $ k \le j_{n, m} $ for all $ n $ and $ m $. Then $ p_k\br{g_n^{-1}g_m} \notin H_k $ for all $ n \ne m $, so $ p_k\br{g_n}H_k $ are distinct cosets of $ H_k $ in $ G_k $, so $ \sbr{G_k : H_k} \ge N $. For any $ i $ in the cofinal subsystem $ J_{\le k} $, it follows $ \sbr{G_i : H_i} \ge N $ for all $ i \le k $. If $ \sbr{G : H} = N $ is finite, take $ k $ as above and $ I = J_{\le k} $. Then $ \sbr{G : H} \ge \sbr{G_i : H_i} \ge N = \sbr{G : H} $ for all $ i \in I $. If $ \sbr{G : H} $ is infinite, assume $ I $ is cofinal and $ \sbr{G_i : H_i} = N $ for all $ i \in I $. Then there exists $ k $ such that $ \sbr{G_k : H_k} \ge N + 1 $. But there exists $ i \in I $ such that $ i \le k $, then $ \sbr{G_i : H_i} \ge \sbr{G_k : H_k} \ge N + 1 > N = \sbr{G_i : H_i} $, a contradiction.
\end{proof}

\begin{proposition}
Let $ G $ be a profinite group and $ N $ a closed normal subgroup. Then $ G / N $, with the quotient topology, is a profinite group.
\end{proposition}

\begin{proof}
Take $ G = \varprojlim_j G_j $ for $ \br{G_j} $ a surjective inverse system. Let $ N_j = p_j\br{N} \triangleleft G_j = p_j\br{G} $. Recall $ N = \varprojlim_j N_j $. Define $ Q_j = G_j / N_j $. Since $ \phi_{ij}\br{N_i} \le N_j $, we get quotient homomorphisms $ \psi_{ij} : Q_i \to Q_j $, which are transition maps for the $ Q_j $. Set $ Q = \varprojlim_j Q_j $. The map $ \prod_j G_j \to \prod_j Q_j $ is continuous, so there is a continuous surjective group homomorphism $ f : G \to Q $. The kernel of this map is $ N $, since $ f\br{g} = 1 $ if and only if $ q_j\br{f\br{g}} = 1 $ for all $ j $, if and only if $ g_j \in N_j $ for all $ j $, if and only if $ g \in \varprojlim_j N_j = N $. By the first isomorphism theorem for groups,
$$
\begin{tikzcd}
G \arrow{d} \arrow{dr} & \\
G / N \arrow{r}{\sim}[swap]{\overline{f}} & Q
\end{tikzcd}.
$$
Since $ G \to Q $ is continuous and $ G \to G / N $ is the quotient map, $ \overline{f} $ is continuous. Since $ G / N $ is compact and $ Q $ is Hausdorff, $ \overline{f} $ is a homeomorphism.
\end{proof}

This is the first isomorphism theorem for profinite groups.

\pagebreak

\lecture{7}{Thursday}{04/02/21}

\begin{definition}
Let $ \br{G_j}_{j \in J} $ and $ \br{H_j}_{j \in J} $ be inverse systems of finite groups, over the same poset $ J $. A \textbf{morphism of inverse systems} $ \br{f_j} $ is a family of homomorphisms $ f_j : G_j \to H_j $, such that for all $ i \le j $,
$$
\begin{tikzcd}
G_i \arrow{r}{f_i} \arrow{d}[swap]{\phi_{ij}^G} & H_i \arrow{d}{\phi_{ij}^H} \\
G_j \arrow{r}[swap]{f_j} & H_j
\end{tikzcd}
$$
commutes, so $ \phi_{ij}^H \circ f_i = f_j \circ \phi_{ij}^G $.
\end{definition}

\begin{proposition}
Let $ \br{f_j} : \br{G_j} \to \br{H_j} $ be a morphism of inverse systems. Then there is a unique continuous homomorphism $ f : G = \varprojlim_j G_j \to H = \varprojlim_j H_j $ such that
$$
\begin{tikzcd}
G \arrow{r}{f} \arrow{d}[swap]{p_j^G} & H \arrow{d}{p_j^H} \\
G_j \arrow{r}[swap]{f_j} & H_j
\end{tikzcd},
$$
so $ p_j^H \circ f = f_j \circ p_j^G $ for all $ j \in J $.
\end{proposition}

\begin{proof}
The maps $ f_j \circ p_j^G : G \to H_j $ form a cone on the inverse system $ \br{H_j} $,
$$
\begin{tikzcd}
& G \arrow{dl}[swap]{f_i \circ p_i^G} \arrow{dr}{f_j \circ p_j^G} & \\
H_i \arrow{rr}[swap]{\phi_{ij}^H} & & H_j
\end{tikzcd},
$$
since
$$ \phi_{ij}^H \circ f_i \circ p_i^G = f_j \circ \phi_{ij}^G \circ p_i^G = f_j \circ p_j^G. $$
So by definition of limits, there exists a unique $ f : G \to H = \varprojlim_j H_j $ such that $ p_j^H \circ f = f_j \circ p_j^G $.
\end{proof}

Thus $ f $ is \textbf{induced} by the $ f_j $ by passing to an inverse limit.

\begin{proposition}
\label{prop:2.4.11}
Let $ G = \varprojlim_{j \in J} G_j $ and $ H = \varprojlim_{i \in I} H_i $ be inverse limits of finite groups, where $ I $ and $ J $ are countable inverse systems with no minimal element. Let $ f : G \to H $ be a continuous homomorphism. Then there exist cofinal subsystems $ J' \subseteq J $ and $ I' \subseteq I $, an order-preserving bijection $ J' \cong I' $, and a morphism of inverse systems $ \br{f_j} : \br{G_j}_{j \in J'} \to \br{H_i}_{i \in I'} $ inducing $ f $.
\end{proposition}

\begin{proof}
Without loss of generality, use Proposition \ref{prop:1.3.11} to assume $ J $ and $ I $ are linearly ordered. Without loss of generality both are $ \NN $, with the wrong-way ordering. Construct an increasing sequence $ \br{k_n} $ of natural numbers as follows. Each map $ p_n^H \circ f : G \to H \to H_n $ is a continuous homomorphism, so its kernel is open in $ G $. By Proposition \ref{prop:1.2.28} there exists $ k_n $ such that $ \ker \br{G \to G_{k_n}} \le \ker \br{G \to H_n} $, which means there is a quotient homomorphism
$$
\begin{tikzcd}
G \arrow{r}{f} \arrow{d}[swap]{p_{k_n}^G} \arrow{dr} & H \arrow{d}{p_n^H} \\
G_{k_n} \arrow{r}[swap]{f_n} & H_n
\end{tikzcd}.
$$
Then $ \ker \br{G \to G_{n + 1}} \le \ker \br{G \to G_n} $, so without loss of generality $ k_n > k_{n - 1} $. Now $ J' = \cbr{k_n}_{n \in \NN} $ give a cofinal subsystem of $ J = \NN $, and the $ f_n $ are the required morphisms of inverse systems.
\end{proof}

\pagebreak

\subsection{Generators of profinite groups}

\begin{definition}
Let $ G $ be a topological group, and let $ S $ be a subset of $ G $. Then $ S $ is a \textbf{topological generating set} for $ G $ if the subgroup $ \abr{S} $ is dense in $ G $, and $ G $ is \textbf{topologically finitely generated} if it has some finite topological generating set $ S $.
\end{definition}

\begin{definition}
Let $ G $ be a topological group and $ S \subseteq G $. The \textbf{closed subgroup of $ G $ topologically generated by $ S $} is the smallest closed subgroup of $ G $ which contains $ S $. Denoted $ \overline{\abr{S}} $.
\end{definition}

\begin{proposition}
Let $ G $ be a topological group and $ H $ a subgroup of $ G $. Then $ \overline{H} $ is a subgroup of $ G $. Hence for $ S \subseteq G $, the closed subgroup of $ G $ generated by $ S $ is equal to the closure of $ \abr{S} $.
\end{proposition}

\begin{proof}
Exercise. \footnote{Exercise}
\end{proof}

\begin{lemma}
A finite index subgroup of a finitely generated group is finitely generated.
\end{lemma}

\begin{proposition}
If a profinite group $ G $ is topologically finitely generated and $ U $ is an open subgroup of $ G $ then $ U $ is topologically finitely generated.
\end{proposition}

\begin{proof}
Let $ S $ be a finite set such that $ \abr{S} $ is dense in $ G $. Then $ \Gamma = U \cap \abr{S} $ is finite index in $ \abr{S} $, hence $ \Gamma $ is finitely generated, so $ \Gamma = \abr{S'} $ for $ S' $ finite. Since $ U $ is open, and $ \abr{S} $ is dense, $ \abr{S'} = U \cap \abr{S} $ is dense in $ U $. So $ U $ is topologically finitely generated.
\end{proof}

\begin{proposition}
Let $ \br{G_j} $ be a surjective inverse system of finite groups with $ G = \varprojlim_j G_j $. Let $ S \subseteq G $. Then $ S $ is a topological generating set for $ G $ if and only if $ p_j\br{S} $ generates $ G_j $ for all $ j $.
\end{proposition}

\begin{proof}
By Corollary \ref{cor:1.2.30}, $ \abr{S} $ is dense in $ G $ if and only if $ G_j = p_j\br{\abr{S}} = \abr{p_j\br{S}} $ for all $ j $.
\end{proof}

\begin{lemma}
Let $ G $ be a topologically finitely generated profinite group. Then $ G $ may be written as the inverse limit of a countable inverse system of finite groups.
\end{lemma}

\begin{proof}
A continuous homomorphism from $ G $ to a finite group is determined by the image of a topological generating set $ S $, since a function on $ S $ determines all of a homomorphism from $ \abr{S} $ and continuity gives the behaviour on all of $ G $. So there are only countably many continuous homomorphisms from $ G $ to $ \Sym n $ for $ n \in \NN $. Every open normal subgroup of $ G $ is the kernel of such a continuous homomorphism. So there are only countably many open normal subgroups of $ G $. Then $ \UUU = \cbr{U \triangleleft_\o G} $ is a neighbourhood base of the identity, so by Proposition \ref{prop:1.2.33}, $ G = \varprojlim_{U \in \UUU} G / U $.
\end{proof}

\begin{example}
\label{eg:2.5.9}
Let $ G $ be a topologically finitely generated profinite group. Then there are only finitely many open subgroups of $ G $ of index at most $ n $. See Lemma \ref{lem:1.2.18}. Define
$$ G_n = \bigcap \cbr{U \st U \le_\o G, \ \sbr{G : U} \le n}. $$
Then $ G_n \triangleleft G $, and $ G_n $ is open in $ G $. And $ \cbr{G_n} $ is a neighbourhood base of the identity. So
$$ G = \varprojlim_{n \in \NN} G / G_n. $$
\end{example}

\begin{proposition}
\label{prop:2.5.10}
Let $ \ZZ_p^\times $ be the set of elements $ \alpha $ of $ \ZZ_p $ which topologically generate $ \ZZ_p $. Then $ \alpha \in \ZZ_p^\times $ if and only if $ \alpha \not\equiv 0 \mod p $. Hence $ \ZZ_p^\times $ is a closed uncountable subset of $ \ZZ_p $. For every $ n $, and every generator $ a_n \in \br{\ZZ / p^n\ZZ}^\times $ there is some $ \alpha \in \ZZ_p^\times $ such that $ \alpha \equiv a_n \mod p^n $.
\end{proposition}

\begin{proof}
For the last part, $ a_n $ is the image of $ \alpha $, since it is a surjective inverse system, and if $ a_n $ generates $ \ZZ / p^n\ZZ $, it is coprime to $ p $. If $ \alpha = \br{a_n} $ such that $ a_1 \ne 0 $, then $ p \nmid a_n $ for any $ n $. Hence $ a_n $ is coprime to $ p $, and so generates $ \ZZ / p^n\ZZ $ for all $ n $. So $ \abr{\alpha} $ is dense in $ \ZZ_p $ by an earlier result.
\end{proof}

\lecture{8}{Saturday}{06/02/21}

\begin{remark}
$ \ZZ_p^\times $ is the set of units in the ring $ \ZZ_p $.
\begin{itemize}[leftmargin=0.5in]
\item[$ \impliedby $] If $ \alpha $ is a unit, then $ \alpha \mod p^n $ is a unit in $ \ZZ / p^n\ZZ $, so generates $ \ZZ / p^n\ZZ $. Then $ \alpha $ topologically generates $ \ZZ_p $.

\pagebreak

\item[$ \implies $] Consider the group homomorphism
$$ \function[f]{\ZZ_p}{\ZZ_p}{x}{\alpha x}, $$
which is continuous as multiplication in a ring is continuous. So $ \im f $ is a closed subgroup of $ \ZZ_p $, containing $ \alpha $. Then $ \alpha $ generates $ \ZZ_p $, so the only closed subgroup containing $ \alpha $ is $ \ZZ_p $ itself. So $ 1 \in \im f $, so there exists $ \beta $ such that $ \alpha\beta = 1 $.
\end{itemize}
Thus $ \alpha $ is a unit if and only if $ \cbr{\alpha} $ is a topological generating set for $ \ZZ_p $.
\end{remark}

\begin{example}
If $ p \ne 2 $, then $ 2 $ is invertible in $ \ZZ_p $, so $ 2^{-1} $ exists. If $ p = 3 $, then $ 2^{-1} = \br{\dots, 5, 2} \in \ZZ_3 \le \prod_{n \in \NN} \ZZ / 3^n\ZZ $.
\end{example}

\begin{proposition}
$ \alpha \in \widehat{\ZZ}^\times $ if and only if $ \alpha \mod n \in \br{\ZZ / n\ZZ}^\times $ for all $ n $. For any $ n $, and every $ k \in \br{\ZZ / n\ZZ}^\times $ there exists a generator $ \alpha \in \widehat{\ZZ}^\times $ such that $ \alpha \equiv k \mod n $.
\end{proposition}

\begin{proof}
Follows from Proposition \ref{prop:2.5.10} via the CRT, since $ \widehat{\ZZ} = \prod_p \ZZ_p $.
\end{proof}

\begin{theorem}[Gaschutz's lemma for finite groups]
Let $ f : G \twoheadrightarrow H $ be a surjective homomorphism of finite groups. Suppose $ G $ has some generating set of size $ d $. For any generating set $ \cbr{z_1, \dots, z_d} \subseteq H $, there exists a generating set $ \cbr{x_1, \dots, x_d} \subseteq G $ such that $ f\br{x_i} = z_i $ for all $ i $.
\end{theorem}

Really, talking about generating vectors $ \underline{x} = \br{x_1, \dots, x_d} \in G^d $. Extend $ f $ to $ f : G^d \to H^d $.

\begin{proof}
We will prove, by induction on $ \abs{G} $, for $ H $ fixed, the following statement. The number
$$ N_G\br{\underline{y}} = \abs{\cbr{\text{generating vectors} \ \underline{x} \ \text{of} \ G \st f\br{\underline{x}} = \underline{y}}}, $$
where $ \underline{y} \in H^d $ is a generating vector of $ H $, is independent of $ \underline{y} $. Want to show $ N_G\br{\underline{z}} > 0 $, and $ G $ has some generating vector $ \underline{x'} \in G^d $ so $ N_G\br{\underline{z}} = N_G\br{f\br{\underline{x'}}} > 0 $. Let $ \underline{y} \in H^d $ be a generating vector. Let
$$ \CCC = \cbr{\text{$ d $-generator proper subgroups of} \ G}. $$
Every $ \underline{x} \in G^d $ such that $ f\br{\underline{x}} = \underline{y} $ either generates $ G $ or generates some $ C \in \CCC $. Therefore
$$ N_G\br{\underline{y}} + \sum_{C \in \CCC} N_C\br{\underline{y}} = \abs{\cbr{\underline{x} \st f\br{\underline{x}} = \underline{y}}} = \abs{\ker f}^d. $$
Thus $ N_G\br{\underline{y}} = \abs{\ker f}^d - \sum_{C \in \CCC} N_C\br{\underline{y}} $, which is independent of $ \underline{y} $ by induction.
\end{proof}

\begin{theorem}[Gaschutz's lemma for profinite groups]
Let $ f : G \to H $ be a continuous surjective homomorphism of profinite groups. Suppose $ G $ has a topological generating set of size $ d $. Then for any topological generating set $ \cbr{z_1, \dots, z_d} $ of $ H $, there is a topological generating set $ \cbr{x_1, \dots, x_d} $ of $ G $ such that $ f\br{x_i} = z_i $ for all $ i $.
\end{theorem}

\begin{proof}
By Proposition \ref{prop:1.3.7} and Proposition \ref{prop:2.4.11} we may assume and write $ G = \varprojlim_{j \in J} G_j $ and $ H = \varprojlim_{j \in J} H_j $, surjective inverse systems of finite groups, with a morphism of inverse systems $ \br{f_j} : \br{G_j} \to \br{H_j} $ such that $ f = \varprojlim_j f_j $. It is forced that $ f_j $ is surjective, since
$$
\begin{tikzcd}
G \arrow[twoheadrightarrow]{r}{f} \arrow[twoheadrightarrow]{d}[swap]{p_j^G} & H \arrow[twoheadrightarrow]{d}{p_j^H} \\
G_j \arrow[twoheadrightarrow]{r}[swap]{f_j} & H_j
\end{tikzcd}.
$$
Let $ \underline{z} $ be the given topological generating set of $ H $. Set $ \underline{z}_j $ for $ j \in J $ to be the image of $ \underline{z} $ in $ H_j $, so $ \underline{z}_j = p_j^H\br{\underline{z}} $ is a generating vector of $ H_j $. Consider the finite sets
$$ X_j = \cbr{\text{generating vectors} \ \underline{x}_j \in G_j^d \st f_j\br{\underline{x}_j} = \underline{z}_j} \ne \emptyset, $$
by Gaschutz. The $ X_j $ form an inverse system, since $ \phi_{ij}\br{X_i} \subseteq X_j $. Therefore $ \varprojlim_j X_j $ is non-empty. If $ \underline{x} \in \varprojlim_j X_j \subseteq G^d $ such that $ p_j^G\br{\underline{x}} \in X_j $, then $ \underline{x} $ is a topological generating set of $ G $ and $ p_j^H\br{f\br{\underline{x}}} = \underline{z}_j $ for all $ j $, so $ f\br{\underline{x}} = \underline{z} $.
\end{proof}

\pagebreak

\section{Profinite completions}

\subsection{Residual finiteness}

\begin{notation}
Discrete abstract groups will be Greek letters and profinite groups will be Roman letters.
\end{notation}

Given an abstract group $ \Gamma $ and an inverse system $ \NNN = \cbr{N \triangleleft_\f \Gamma} $, there is an inverse system of finite groups $ \Gamma / N $. Then $ \widehat{\Gamma} = \varprojlim_{N \in \NNN} \Gamma / N $, where $ \Gamma / N_1 \to \Gamma / N_2 $ if $ N_1 \le N_2 $. Also had a canonical morphism $ \iota_\Gamma = \iota : \Gamma \to \widehat{\Gamma} $. The image of $ \iota $ is dense by Corollary \ref{cor:1.2.30}. Also implies for any finite generating set $ S \subseteq \Gamma $, $ \iota\br{S} $ is a topological generating set of $ \widehat{\Gamma} $, so if $ \Gamma $ is finitely generated, then $ \widehat{\Gamma} $ is topologically finitely generated.

\begin{proposition}
\label{prop:3.1.2}
Let $ f : \Delta \to \Gamma $ be a group homomorphism. Then there exists a unique continuous group homomorphism $ \widehat{f} : \widehat{\Delta} \to \widehat{\Gamma} $ such that $ \widehat{f} \circ \iota_\Delta = \iota_\Gamma \circ f $, so
$$
\begin{tikzcd}
\Delta \arrow{r}{f} \arrow{d}[swap]{\iota_\Delta} & \Gamma \arrow{d}{\iota_\Gamma} \\
\widehat{\Delta} \arrow[dashed]{r}[swap]{\widehat{f}} & \widehat{\Gamma}
\end{tikzcd}.
$$
\end{proposition}

\begin{proof}
Uniqueness will follow from the density of $ \iota_\Delta\br{\Delta} $ in $ \widehat{\Delta} $. Take two $ \widehat{f_1} $ and $ \widehat{f_2} $ satisfying Proposition \ref{prop:3.1.2}. Consider
$$ S = \cbr{\delta \in \widehat{\Delta} \st \widehat{f_1}\br{\delta} = \widehat{f_2}\br{\delta}}. $$
Then $ S $ is closed, since it is the preimage of the diagonal in $ \widehat{\Gamma} \times \widehat{\Gamma} $ under $ \br{\widehat{f_1}, \widehat{f_2}} : \widehat{\Delta} \to \widehat{\Gamma} \times \widehat{\Gamma} $, and $ S $ contains $ \iota_\Delta\br{\Delta} $, which is dense. So $ S = \widehat{\Delta} $.
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \Gamma $ is finite, so $ \Gamma = \widehat{\Gamma} $. Then $ \ker f $ is a finite index normal subgroup $ M $ of $ \Delta $, so there exists a projection map $ p_M : \widehat{\Delta} \to \Delta / M $. So we get a composition
$$
\begin{tikzcd}
\Delta \arrow{rr}{\iota_\Delta} \arrow{dr} \arrow{ddr}[swap]{f} & & \widehat{\Delta} \arrow{dl}[swap]{p_M} \arrow[dashed]{ddl}{\widehat{f}} \\
& \Delta / M \arrow[hookrightarrow]{d} & \\
& \Gamma &
\end{tikzcd}.
$$
\item General case. Take some $ N \triangleleft_\f \Gamma $. There exists a unique $ q_N : \widehat{\Delta} \to \Gamma / N $ such that $ q_N \circ \iota_\Delta = p_N \circ \iota_\Gamma \circ f $. Then $ \br{q_N} $ form a cone on the inverse system, since
$$ \phi_{N_1N_2}^\Gamma \circ q_{N_1} \circ \iota_\Delta = \phi_{N_1N_2}^\Gamma \circ p_{N_1} \circ \iota_\Gamma \circ f = p_{N_2} \circ \iota_\Gamma \circ f = q_{N_2} \circ \iota_\Delta. $$
Thus there exists a unique $ \widehat{f} : \widehat{\Delta} \to \widehat{\Gamma} $ such that $ p_N \circ \widehat{f} = q_N $ for all $ N $, so
$$
\begin{tikzcd}
\Delta \arrow{rr}{\iota_\Delta} \arrow{d}[swap]{f} & & \widehat{\Delta} \arrow[dashed]{dl}[swap]{\widehat{f}} \arrow{ddl}{q_N} \\
\Gamma \arrow{r}{\iota_\Gamma} \arrow{dr} & \widehat{\Gamma} \arrow{d}[swap]{p_N} & \\
& \Gamma / N &
\end{tikzcd},
$$
and
$$ p_N \circ \widehat{f} \circ \iota_\Delta = q_N \circ \iota_\Delta = p_N \circ \iota_\Gamma \circ f. $$
\end{enumerate}
\end{proof}

\begin{corollary}
$ \widehat{\cdot} $ is a functor.
\end{corollary}

\pagebreak

\lecture{9}{Tuesday}{09/02/21}

\begin{definition}
Let $ \Gamma $ be an abstract group. Then $ \Gamma $ is \textbf{residually finite} if for every $ \gamma \in \Gamma \setminus \cbr{1} $, there exists $ N \triangleleft_\f \Gamma $ such that $ \gamma \notin N $, if and only if $ \gamma N \ne 1 $ in $ \Gamma / N $, if and only if there exists $ \phi : \Gamma \to G $ finite such that $ \phi\br{\gamma} \ne 1 $.
\end{definition}

\begin{proposition}
$ \Gamma $ is residually finite if and only if $ \iota : \Gamma \to \widehat{\Gamma} $ is injective.
\end{proposition}

\begin{proof}
$$ \function[\iota]{\Gamma}{\widehat{\Gamma} \le \prod_N \Gamma / N}{\gamma}{\br{\gamma N}}. $$
\end{proof}

\begin{proposition}
Any subgroup of a residually finite group is residually finite.
\end{proposition}

\begin{proposition}
Let $ \Gamma $ be an abstract group, and let $ \Delta \le \Gamma $ be finite index. If $ \Delta $ is residually finite, then $ \Gamma $ is residually finite.
\end{proposition}

\begin{proof}
Let $ \gamma \in \Gamma \setminus \cbr{1} $.
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item If $ \gamma \notin \Delta $, consider
$$ \gamma \notin N = \Core_\Gamma \Delta = \bigcap_{g \in \Gamma} g\Delta g^{-1} \triangleleft_\f \Gamma, $$
which has finitely many distinct terms, since if $ g\Delta = g'\Delta $ then $ g = g'\delta $ so $ g\Delta g^{-1} = g'\delta\Delta\delta^{-1}g'^{-1} = g'\Delta g'^{-1} $.
\item If $ \gamma \in \Delta $, there exists $ N \triangleleft_\f \Delta $ such that $ \gamma \notin N $. Now $ \gamma \notin \Core_\Gamma N \triangleleft_\f \Gamma $.
\end{enumerate}
\end{proof}

\begin{proposition}
Finitely generated abelian groups are residually finite.
\end{proposition}

\begin{proof}
Exercise. \footnote{Exercise: classification of finitely generated abelian groups}
\end{proof}

\begin{proposition}
The groups $ \SL_N \ZZ \le_\f \GL_N \ZZ $ are residually finite for all $ N $.
\end{proposition}

\begin{proof}
For $ A \in \GL_N \ZZ \setminus \cbr{\I} $. Take a prime $ p $ larger than the absolute value of all entries of $ A $. Then we have the homomorphism
$$ \function{\GL_N \ZZ}{\GL_N \br{\ZZ / p\ZZ}}{A}{A_p \ne \I}. $$
\end{proof}

These linear groups have as subgroups many important groups, such as free groups in $ \SL_2 \ZZ $.

\begin{theorem}[Malcev's theorem]
Let $ \Gamma $ be a finitely generated subgroup of $ \GL_N K $ where $ K $ is a field. Then $ \Gamma $ is residually finite.
\end{theorem}

\begin{proof}[Proof (non-examinable)]
The entries of a generating set of $ \Gamma $ generate a finitely generated subring $ R $ of $ K $. Commutative algebra says that $ R $ has many maximal ideals $ \ppp \subseteq R $, such that $ R / \ppp $ is a finite field. Use maps $ \GL_N R \to \GL_N \br{R / \ppp} $ to show residual finiteness.
\end{proof}

\begin{proposition}
The fundamental group of a surface is residually finite.
\end{proposition}

\begin{proof}
Surface groups, via geometry, are subgroups of $ \Isom \HH^2 \cong \PSL_2 \RR $.
\end{proof}

\pagebreak

\begin{lemma}
Let $ \Gamma $ be an abstract group. The open subgroups of $ \widehat{\Gamma} $ are exactly $ \overline{\iota\br{\Delta}} $ for $ \Delta \le_\f \Gamma $.
\end{lemma}

\begin{proof}
If $ \Delta \le_\f \Gamma $ is finite index, take a finite set of coset representatives $ \cbr{\gamma_i} $ of $ \Delta $ in $ \Gamma $, so $ \Gamma = \bigcup_i \gamma_i\Delta $. Then
$$ \widehat{\Gamma} = \overline{\iota\br{\Gamma}} = \overline{\bigcup_i \iota\br{\gamma_i\Delta}} = \bigcup_i \iota\br{\gamma_i}\overline{\iota\br{\Delta}}, $$
so $ \overline{\iota\br{\Delta}} $ is closed, and finite index, if and only if open. If $ U \le_\o \widehat{\Gamma} $, then $ \iota\br{\Gamma} $ is dense, so $ U = \overline{\iota\br{\Gamma} \cap U} $. Set $ \Delta = \iota^{-1}\br{U} \le_\f \Gamma $, and $ \iota\br{\Delta} = \iota\br{\Gamma} \cap U $. Thus $ U = \overline{\iota\br{\Delta}} $.
\end{proof}

\begin{theorem}
Let $ G $ and $ H $ be topologically finitely generated profinite groups. Suppose the sets of isomorphism types of continuous finite quotients of $ G $ and $ H $ are equal. Then $ G $ and $ H $ are isomorphic profinite groups.
\end{theorem}

Topologically finitely generated is necessary since $ \br{\ZZ / 2\ZZ}^\NN \not\cong \br{\ZZ / 2\ZZ}^\RR $. Continuous is not actually necessary by a hard theorem by Nikolov and Segal.

\begin{proof}
Let $ G_n $ be the intersection of all open subgroups of $ G $ of index at most $ n $. Similarly, $ H_n $. By Example \ref{eg:2.5.9}, $ G = \varprojlim_n G / G_n $ and $ H = \varprojlim_n H / H_n $. By assumption there exists $ V \triangleleft_\o H $, such that $ G / G_n \cong H / V $. The intersection of index at most $ n $ subgroups of $ G / G_n $ is trivial, so the intersection of index at most $ n $ subgroups of $ H / V $ is trivial. Taking preimages, there exist index at most $ n $ open subgroups of $ H $ whose intersection is contained in $ V $. Then $ H_n \le V $, so $ \abs{G / G_n} = \abs{H / V} \le \abs{H / H_n} $. By symmetry, $ \abs{G / G_n} \ge \abs{H / H_n} $, so equality holds and $ V = H_n $. So $ G / G_n \cong H / H_n $ for all $ n $. We want a morphism of inverse systems, so commuting diagrams
$$
\begin{tikzcd}
G / G_n \arrow{r} \arrow{d} & H / H_n \arrow{d} \\
G / G_{n - 1} \arrow{r} & H / H_{n - 1}
\end{tikzcd}.
$$
Let
$$ S_n = \cbr{\text{isomorphisms} \ f_n : G / G_n \to H / H_n} \ne \emptyset. $$
If $ f_n \in S_n $, then $ f_n $ takes an index at most $ n - 1 $ subgroup of $ G / G_n $ to an index at most $ n - 1 $ subgroup of $ H / H_n $. The intersection of such subgroups is $ G_{n - 1} / G_n $. So $ f_n $ maps $ G_{n - 1} / G_n $ to $ H_{n - 1} / H_n $. So there is a well-defined quotient map such that the diagram
$$
\begin{tikzcd}
G / G_{n - 1} \arrow{r}{\phi_{n, n - 1}\br{f_n}}[swap]{\sim} & H / H_{n - 1} \\
G / G_n \arrow{r}{\sim}[swap]{f_n} \arrow{u} & H / H_n \arrow{u}
\end{tikzcd}
$$
commutes. The $ \phi_{n, n - 1} : S_n \to S_{n - 1} $ make $ \br{S_n} $ into an inverse system. Then $ \varprojlim_n S_n $ is non-empty, and an element of $ \varprojlim_n S_n \le \prod_n S_n $ is a sequence of $ f_n $ such that all diagrams commute. Thus there is an isomorphism of inverse systems, so $ G \cong H $.
\end{proof}

\begin{theorem}
Let $ \Gamma $ and $ \Delta $ be finitely generated abstract groups. Suppose the sets of isomorphism types of finite quotients of $ \Gamma $ and $ \Delta $ are equal. Then $ \widehat{\Gamma} \cong \widehat{\Delta} $.
\end{theorem}

\lecture{10}{Thursday}{11/02/21}

\begin{definition}
A property $ \PPP $ of groups is a \textbf{profinite invariant} if, whenever two finitely generated residually finite groups $ G $ and $ H $ have $ \widehat{G} \cong \widehat{H} $, $ G $ has $ \PPP $ if and only if $ H $ has $ \PPP $.
\end{definition}

\begin{proposition}
Being abelian is a profinite invariant.
\end{proposition}

\begin{proof}
Let $ G $ and $ H $ be finitely generated residually finite groups such that $ \widehat{G} \cong \widehat{H} $, with $ H $ abelian. Every quotient group of $ H $ is abelian, so every finite quotient of $ G $ is abelian. Suppose $ G $ is not abelian. There exist $ g_1, g_2 \in G $ such that $ \sbr{g_1, g_2} \ne 1 $. Since $ G $ is residually finite, there exists a finite quotient $ Q $ of $ G $ and $ \phi : G \twoheadrightarrow Q $, such that $ \sbr{\phi\br{g_1}, \phi\br{g_2}} = \phi\br{\sbr{g_1, g_2}} \ne 1 $. But $ Q $ is abelian, a contradiction.
\end{proof}

\pagebreak

\begin{proposition}
Let $ G $ and $ H $ be finitely generated groups with $ \widehat{G} \cong \widehat{H} $. Then the abelianisations $ G_{\ab} = G / \sbr{G, G} $ and $ H_{\ab} = H / \sbr{H, H} $ are isomorphic.
\end{proposition}

\begin{proof}
Suppose $ \widehat{G} \cong \widehat{H} $. We claim $ \widehat{G_{\ab}} \cong \widehat{H_{\ab}} $. Since $ G $ and $ H $ have the same finite quotients they have the same abelian finite quotients, which are the finite quotients of $ G_{\ab} $ and $ H_{\ab} $, since
$$
\begin{tikzcd}
G \arrow[twoheadrightarrow]{rr} \arrow[twoheadrightarrow]{dr} & & G / \sbr{G, G} \arrow[twoheadrightarrow]{dl} \\
& A &
\end{tikzcd}.
$$
It remains to show, if $ A $ and $ A' $ are finitely generated abelian groups with $ \widehat{A} \cong \widehat{A'} $ then $ A \cong A' $. By the classification, $ A = \ZZ^r \times T $ and $ A' \cong \ZZ^s \times T' $ for $ r, s \in \NN $ and $ T $ and $ T' $ finite. We can see $ r $ and $ T $ from finite quotients, so
$$ r = \max \cbr{k \st \forall n, \ A \twoheadrightarrow \br{\ZZ / n\ZZ}^k} = \max \cbr{k \st \forall n, \ A' \twoheadrightarrow \br{\ZZ / n\ZZ}^k} = s. $$
Having found $ r $, $ T $ is the largest finite group such that $ A \twoheadrightarrow \br{\ZZ / n\ZZ}^r \times T $ for all $ n $, which is $ T' $.
\end{proof}

\begin{corollary}
If $ G $ is abelian, the property of being isomorphic to $ G $ is a profinite invariant.
\end{corollary}

\begin{example}
Let
$$ \function[\phi]{\CCC_{25}}{\CCC_{25}}{t}{t^6} $$
be an automorphism, where $ \CCC_{25} = \ZZ / 25\ZZ = \abr{t} $. Form semidirect products
$$ G_1 = \CCC_{25} \rtimes_\phi \ZZ, \qquad \br{t^a, s^b} *_1 \br{t^c, s^d} = \br{t^a\phi^b\br{t^c}, s^{b + d}}, $$
$$ G_2 = \CCC_{25} \rtimes_{\phi^2} \ZZ, \qquad \br{t^a, s^b} *_2 \br{t^c, s^d} = \br{t^a\phi^{2b}\br{t^c}, s^{b + d}}, $$
where $ \ZZ = \abr{s} $. Note that $ \phi $ is of order five, so $ \phi^5 = \id $ and $ \phi^k = \phi^l $ if and only if $ k \equiv l \mod 5 $.
\begin{itemize}
\item Claim that $ G_1 $ is not isomorphic to $ G_2 $. Suppose $ \Phi : G_2 \to G_1 $ is an isomorphism. Each $ G_i $ has a unique order $ 25 $ subgroup. So $ \Phi\br{\CCC_{25}} = \CCC_{25} $ and $ \Phi\br{t, 1} = \br{t^a, 1} $ for some $ a $ coprime to $ 25 $. Set $ \Phi\br{1, s} = \br{t^b, s^c} $, and $ s^c $ generates $ \ZZ $, so $ c = \pm 1 $. A contradiction comes from the computation of
\begin{align*}
\br{\phi^2\br{t}^a, 1}
& = \Phi\br{\phi^2\br{t}, 1}
= \Phi\br{\br{1, s} *_2 \br{t, 1} *_2 \br{1, s^{-1}}}
= \Phi\br{1, s} *_1 \Phi\br{t, 1} *_1 \Phi\br{1, s^{-1}} \\
& = \br{t^b, s^c} *_1 \br{t^a, 1} *_1 \br{\phi^{-c}\br{t^{-b}}, s^{-c}}
= \br{\phi^c\br{t^a}, 1},
\end{align*}
and since $ \phi^2\br{t^a} = \phi^c\br{t^a} $, $ \phi^2 = \phi^c $, so $ c \equiv 2 \mod 5 $.
\item Consider finite quotients of $ G_1 $. Let $ f : G_1 \to Q $ be a finite quotient map. If $ \im \br{\ZZ \to G_1 \to Q} $ has order $ m $, then $ \ker f \ge 5m\ZZ $. Then $ f $ factors through the quotient $ \CCC_{25} \rtimes_\phi \ZZ / 5m\ZZ $, which is cofinal, so
$$ \widehat{G_1} = \varprojlim_m \CCC_{25} \rtimes_\phi \ZZ / 5m\ZZ = \CCC_{25} \rtimes_\phi \widehat{\ZZ}. $$
By Gaschutz lemma, there exists $ \kappa \in \widehat{\ZZ}^\times $ such that $ \kappa \equiv 2 \mod 5 $. We may now build an isomorphism defined by
$$ \function[\Omega]{\widehat{G_2}}{\widehat{G_1}}{\br{t^b, s^\lambda}}{\br{t^b, s^{\lambda\kappa}}}. $$
This is a continuous bijection, and can compute it is a group homomorphism.
\end{itemize}
\end{example}

\begin{question}[Remeslennikov's question]
Let $ F $ be a finitely generated free group, and $ G $ a finitely generated residually finite group. Is it true that $ \widehat{F} \cong \widehat{G} $ implies that $ F \cong G $?
\end{question}

\begin{question}
Does there exist $ G $ a finitely generated residually finite group, other than a free group, and an integer $ n $ such that a finite group $ Q $ is a quotient of $ G $ if and only if $ Q $ has a generating set with $ n $ elements?
\end{question}

\pagebreak

\begin{proposition}
Let $ F $ and $ F' $ be finitely generated free groups. If $ \widehat{F} \cong \widehat{F'} $ then $ F \cong F' $.
\end{proposition}

\begin{proof}
From earlier, if $ \widehat{F} \cong \widehat{F'} $ then $ \ZZ^{\rk F} = F_{\ab} \cong F_{\ab}' = \ZZ^{\rk F'} $. Thus $ \rk F = \rk F' $, so $ F \cong F' $.
\end{proof}

How about surface groups? If $ \S_g $ is the fundamental group of an orientable surface of genus $ g $, then
$$ \S_g = \abr{a_1, b_1, \dots, a_g, b_g \st \sbr{a_1, b_1} \dots \sbr{a_g, b_g} = 1}. $$
Then the abelianisation of $ \S_g $ is $ \ZZ^{2g} $. Hence $ \widehat{\S_g} \not\cong \widehat{\F_r} $, unless possibly $ r = 2g $.

\begin{theorem}[Basic correspondence]
Let $ G_1 $ and $ G_2 $ be finitely generated residually finite groups, and suppose $ \phi : \widehat{G_1} \cong \widehat{G_2} $. Then there is a bijection
$$ \psi : \cbr{\text{finite index subgroups of} \ G_1} \to \cbr{\text{finite index subgroups of} \ G_2}, $$
such that, if $ K \le_\f H \le_\f G_1 $, then
\begin{itemize}
\item $ \psi\br{K} \le \psi\br{H} $ and $ \sbr{H : K} = \sbr{\psi\br{H} : \psi\br{K}} $,
\item $ K \triangleleft H $ if and only if $ \psi\br{K} \triangleleft \psi\br{H} $,
\item if $ K \triangleleft H $, then $ H / K \cong \psi\br{H} / \psi\br{K} $, and
\item $ \widehat{H} \cong \widehat{\psi\br{H}} $.
\end{itemize}
\end{theorem}

By the Nielsen-Schreier theorem, $ \F_{2g} $ has an index two subgroup, which is free of rank $ 4g - 1 $, so has abelianisation odd rank. Any finite index subgroup of a surface group is a surface group, so it has even rank abelianisation, contradicting the basic correspondence, so $ \widehat{\F_{2g}} \not\cong \widehat{\S_g} $.

\lecture{11}{Saturday}{13/02/21}

\begin{remark}
\hfill
\begin{itemize}
\item Residually finite is not actually necessary, by replacing $ G_1 $ by $ G_1 / \ker \iota_{G_1} $ for $ \iota_{G_1} : G_1 \to \widehat{G_1} $.
\item $ \phi $ and $ \psi $ do not depend on any homomorphism $ G_1 \to G_2 $.
\end{itemize}
\end{remark}

\begin{proposition}
Let $ G $ be a finitely generated residually finite group. Let $ \psi $ be the function
$$ \function[\psi]{\cbr{\text{finite index subgroups} \ H \le G}}{\cbr{\text{open subgroups of} \ \widehat{G}}}{H}{\overline{H}}. $$
Then, if $ K \le_\f H \le_\f G $,
\begin{enumerate}
\item $ \psi $ is a bijection,
\item $ \sbr{H : K} = \sbr{\overline{H} : \overline{K}} $,
\item $ K \triangleleft H $ if and only if $ \overline{K} \triangleleft \overline{H} $,
\item if $ K \triangleleft H $, then $ H / K \cong \overline{H} / \overline{K} $, and
\item $ \overline{H} \cong \widehat{H} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ H \le_\f G $ and take coset representatives $ \cbr{g_i} $ of $ H $ in $ G $. Since $ \widehat{G} = \overline{\bigcup_i g_iH} = \bigcup_i g_i\overline{H} $, $ \overline{H} $ is finite index, so open. Conversely, if $ U \le_\o \widehat{G} $ then $ U = \overline{G \cap U} $, since $ G $ is dense and $ U $ is open and closed, so let $ H = G \cap U $. So $ \psi $ is surjective. To show $ \psi $ is injective, we show $ \overline{H} \cap G = H $. Considering the action of $ G $ on $ G / H $, gives a continuous homomorphism
$$
\begin{tikzcd}[row sep=tiny]
G \arrow{r} \arrow[subset]{d} & \Sym \br{G / H} \\
\widehat{G} \arrow{ur} &
\end{tikzcd}.
$$
Then $ H $ fixes the coset $ 1H $. By continuity of the action, $ \overline{H} $ fixes $ 1H $. But if $ g \in G \setminus H $, then $ g \cdot 1H = gH \ne 1H $, so $ g \notin \overline{H} $. So $ \overline{H} \cap G = H $.

\pagebreak

\item Let $ \cbr{g_i} $ be a set of coset representatives. We know that the $ g_i\overline{H} $ cover $ \widehat{G} $. They are distinct cosets, since if $ g_i\overline{H} = g_j\overline{H} $, then $ g_i^{-1}g_j \in \overline{H} \cap G = H $. So $ g_iH = g_jH $, so $ g_i = g_j $, so $ \sbr{\widehat{G} : \overline{H}} = \sbr{G : H} $. Also, there is a natural bijection of coset spaces $ G / H \to \widehat{G} / \overline{H} $.
\item If $ \overline{K} \triangleleft \overline{H} $ then $ K = \overline{K} \cap G \triangleleft \overline{H} \cap G = H $. Conversely, if $ K \triangleleft H $, consider the action of $ \overline{H} $ on $ \Sym \br{\overline{H} / \overline{K}} = \Sym \br{H / K} \le \Sym \br{G / K} $. Then $ K \triangleleft H $ if and only if $ K $ acts trivially on $ H / K $, since $ k \cdot hK = hK $ if and only if $ h^{-1}kh \in K $. By continuity of the action, $ \overline{K} $ acts trivially, so $ \overline{K} \triangleleft \overline{H} $.
\item If $ K \triangleleft H $, we already have our bijection $ H / K \to \overline{H} / \overline{K} $, and this is an isomorphism of groups.
\item $ \overline{H} $ maps onto all finite quotients $ H / K $ in a natural way, so we get a continuous homomorphism $ \overline{H} \to \widehat{H} $. This is surjective because $ H $ is dense in $ \widehat{H} $. For injectivity, if $ h \in \overline{H} \setminus \cbr{1} $, then there is $ U \triangleleft_\o \widehat{H} $ such that $ h \notin U $, and the map
$$
\begin{tikzcd}
\overline{H} \arrow{rr} \arrow{dr} & & H / \br{U \cap H} \\
& \widehat{H} \arrow{ur} &
\end{tikzcd}
$$
shows that $ h \not\mapsto 1 \in \widehat{H} $.
\end{enumerate}
\end{proof}

\begin{remark}
$ \overline{H} \cap G = H $ and $ \overline{H} \cong \widehat{H} $ are not always true if $ H $ is not of finite index.
\end{remark}

\begin{definition}
A topological group $ G $ is \textbf{Hopfian}, or \textbf{has the Hopf property}, if every continuous surjection from $ G $ to itself is an isomorphism of topological groups.
\end{definition}

\begin{example}
Finite groups, by the pigeonhole principle.
\end{example}

\begin{proposition}
Let $ G $ be a topologically finitely generated profinite group. Let $ f : G \to G $ be a continuous surjection. Then $ f $ is an isomorphism.
\end{proposition}

\begin{proof}
Let $ G_n $ be the intersection of open subgroups of $ G $ of index at most $ n $. Then $ G_n \triangleleft_\o G $, and $ G \cong \varprojlim_n G / G_n $. Since $ f $ is a surjection, $ \sbr{G : f^{-1}\br{U}} = \sbr{G : U} $ for all $ U \le_\o G $. If $ U $ has index at most $ n $, then $ f^{-1}\br{U} $ has index at most $ n $, so $ f^{-1}\br{U} \ge G_n $, so $ f^{-1}\br{G_n} \ge G_n $, so $ f\br{G_n} \le G_n $. So we have a quotient map $ f_n : G / G_n \twoheadrightarrow G / G_n $, which are surjections, hence isomorphisms. So $ \br{f_n} $ are a morphism of inverse systems giving $ f $, so $ f = \varprojlim_n f_n $ is an isomorphism. Or, if $ g \in G \setminus \cbr{1} $, then $ g \notin G_n $ for some $ n $ and then $ p_n\br{f\br{g}} = f_n\br{p_n\br{g}} \ne 1 $ so $ g \notin \ker f $.
\end{proof}

\begin{corollary}
Finitely generated residually finite groups are Hopfian.
\end{corollary}

\begin{proof}
Let $ f : G \to G $ be a surjection where $ G $ is finitely generated residually finite. By Proposition \ref{prop:3.1.2}, we get an induced map
$$
\begin{tikzcd}
\widehat{G} \arrow{r}{\widehat{f}} & \widehat{G} \\
G \arrow[hookrightarrow]{u} \arrow{r}[swap]{f} & G \arrow[hookrightarrow]{u}
\end{tikzcd}.
$$
Then $ \widehat{f} $ is surjective, so it is an isomorphism. Thus $ f $ is injective.
\end{proof}

\begin{proposition}
Let $ G $ be a Hopfian topological group and let $ H $ be a topological group. Suppose there exist continuous surjections $ f : G \to H $ and $ f' : H \to G $. Then $ f $ and $ f' $ are isomorphisms of topological groups.
\end{proposition}

\begin{proof}
$ f' \circ f : G \to G $ is a surjection, hence an isomorphism, and a homeomorphism. So $ f $ is injective and $ f' $ is injective, because $ f $ is a surjection, so isomorphisms. Also $ f^{-1} = \br{f' \circ f}^{-1} \circ f' $ and $ f'^{-1} = f \circ \br{f' \circ f}^{-1} $ are continuous.
\end{proof}

\pagebreak

Let $ \d $ be the minimal size of a generating set.

\begin{proposition}
Let $ G $ be a finitely generated residually finite group. Assume there is a finite quotient $ Q $ of $ G $ such that $ \d\br{Q} = \d\br{G} $. If $ \widehat{G} $ is isomorphic to $ \widehat{F} $ for $ F $ a free group, then $ G \cong F $.
\end{proposition}

\begin{proof}
Assume $ \widehat{G} \cong \widehat{F} $. Then $ Q $ is a quotient of $ F $, so $ \d\br{F} \ge \d\br{Q} = \d\br{G} $. So there is a surjection $ f : F \to G $. This induces $ \widehat{f} : \widehat{F} \to \widehat{G} $. Then $ \widehat{f} $ is surjective, so by the Hopf property, since $ \widehat{F} \cong \widehat{G} $, $ \widehat{f} $ is an isomorphism. Thus $ f $ is an isomorphism, since
$$
\begin{tikzcd}
F \arrow{r}{f} \arrow[hookrightarrow]{d} & G \arrow[hookrightarrow]{d} \\
\widehat{F} \arrow{r}[swap]{\sim} & \widehat{G}
\end{tikzcd}.
$$
\end{proof}

\begin{corollary}
$ \widehat{\S_g} \not\cong \widehat{\F_{2g}} $.
\end{corollary}

\begin{proof}
$ \S_g $ has rank $ 2g $, and maps onto $ Q = \br{\ZZ / 2\ZZ}^{2g} $.
\end{proof}

\begin{example}
Let $ n $ and $ m $ be coprime integers such that $ \abs{n}, \abs{m} > 1 $. Define
$$ \BS\br{n, m} = \abr{a, t \st ta^nt^{-1} = a^m}, $$
a HNN extension. Define
$$ \functions[f]{\BS\br{n, m}}{\BS\br{n, m}}{t}{t}{a}{a^n}. $$
This is well-defined, since
$$ f : ta^nt^{-1}a^{-m} \mapsto ta^{n^2}t^{-1}a^{mn} = \br{ta^nt^{-1}}^na^{-mn} = a^{mn}a^{-mn} = 1. $$
\begin{itemize}
\item $ f $ is surjective. Since $ \im f \ni a^n, t $, $ \im f \ni ta^nt^{-1} = a^m $, and so $ \im f \ni a $, since there exist $ r $ and $ s $ such that $ nr + ms = 1 $ so $ a = \br{a^n}^r\br{a^m}^s $.
\item But $ f $ is not injective. By Britton's lemma, $ tat^{-1} $ does not commute with $ a $, so $ \sbr{tat^{-1}, a} \ne 1 $. But $ f\br{\sbr{tat^{-1}, a}} = \sbr{ta^nt^{-1}, a^n} = \sbr{a^m, a^n} = 1 $.
\end{itemize}
So $ \BS\br{m, n} $ is not Hopfian, hence not residually finite.
\end{example}

\subsection{Finite quotients of free groups}

\lecture{12}{Tuesday}{16/02/21}

\begin{theorem}
Free groups are residually finite.
\end{theorem}

Previously, $ \F_2 \hookrightarrow \SL_2 \ZZ \to \SL_2 \br{\ZZ / n\ZZ} $.

\begin{remark}
This is true for infinitely generated free groups. If $ F = \abr{a_i}_{i \in I} $, take some $ g \in F \setminus \cbr{1} $. Then $ g $ can be written as a finite product of $ a_i^{\pm 1} $, so you need only finitely many $ a_i $. Factoring out the others gives $ F \twoheadrightarrow F' \twoheadrightarrow Q $, where $ F' $ is a finitely generated free group in which $ g $ is mapped to a non-trivial element.
\end{remark}

Residual finiteness if and only if $ \iota : G \hookrightarrow \widehat{G} $. Residual $ p $-finiteness, stronger than residual finiteness, is $ \iota : G \hookrightarrow \widehat{G_{\br{p}}} $, if and only if for all $ g \in G \setminus \cbr{1} $, there exists $ \phi : G \to Q $ where $ \abs{Q} = p^m $ such that $ \phi\br{g} \ne 1 $.

\begin{proof}[Proof 1 (non-examinable)]
Let $ p $ be a prime. Let $ X $ be a wedge of $ k $ circles, and $ F = \pi_1\br{X} $. Construct $ F_n \triangleleft F $ inductively, by
$$ F_1 = F, \qquad F_{n + 1} = \bigcap \cbr{\ker f \st f : F_n \to \ZZ / p\ZZ} = \ker \br{F_n \to \prod_f \ZZ / p\ZZ}. $$

\pagebreak

Then $ F_n $ are characteristic subgroups, so normal, and $ \sbr{F : F_n} $ is a power of $ p $, by induction. Let $ X_n \to X $ be the cover corresponding to $ F_n \triangleleft F $. Claim that $ \girth X_{n + 1} > \girth X_n $, so $ \girth X_n \ge n $. Let $ l $ be any loop in $ X_n $ of minimal length, $ \girth X_n $. We show $ l $ does not lift to $ X_{n + 1} $. Because $ l $ is minimal length, there exists an edge $ e $ which it crosses once exactly. Collapsing everything except $ e $,
$$ \function{F_n = \pi_1\br{X_n}}{\pi_1\br{\S^1} = \ZZ}{\sbr{l}}{1}. $$
So we have a homomorphism
$$ \function{F_n}{\ZZ / p\ZZ}{\sbr{l}}{1 \ne 0}, $$
so $ \sbr{l} \notin F_{n + 1} $, hence $ l $ does not lift to $ X_{n + 1} $. Let $ g \in F \setminus \cbr{1} $. Write $ g $ as a loop in $ X $. Let $ n $ be the number of edges of $ l $. Then $ l $ cannot lift to $ X_{n + 1} $, with girth at least $ n + 1 $. So $ g \notin F_{n + 1} $.
\end{proof}

\begin{proof}[Proof 2]
Let $ F = \abr{a_1, \dots, a_k} $ be a free group. Let $ X $ be a bouquet of $ k $ circles with $ \pi_1\br{X} = F $. Let $ g \in F \setminus \cbr{1} $. Write $ g $ as a product $ g = s_1 \dots s_m $ where $ s_i $ is $ a_j^{\pm 1} $. Let $ Y $ be a line segment labelled $ s_1 \dots s_m $. We add edges to $ Y $ to make it a covering space of $ X $. This covering space $ \widetilde{X} $ does not lift $ g $, so $ g \notin \pi_1\br{\widetilde{X}} $.
\end{proof}

\begin{example}
Let $ F = \abr{a, b} $, and let $ X $ be
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\draw (0, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (0, 0);
\draw (0, 0) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ b $} (0, 0);
\end{tikzpicture}.
$$
If $ g = aba^{-1}b $, then $ \widetilde{X} $ is
$$
\begin{tikzpicture}
\fill (1, 0) circle (0.05) node[above]{$ 1 $};
\fill (2, 0) circle (0.05) node[above]{$ 2 $};
\fill (3, 0) circle (0.05) node[above]{$ 3 $};
\fill (4, 0) circle (0.05) node[above]{$ 4 $};
\fill (5, 0) circle (0.05) node[above]{$ 5 $};
\draw (1, 0) to node{$ > $} node[above]{$ a $} (2, 0);
\draw (2, 0) to node{$ > $} node[above]{$ b $} (3, 0);
\draw (3, 0) to node{$ < $} node[above]{$ a $} (4, 0);
\draw (4, 0) to node{$ > $} node[above]{$ b $} (5, 0);
\draw [dashed] (1, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ b $} (1, 0);
\draw [dashed] (1, 0) to [in=-90, out=-90] node{$ < $} node[below]{$ a $} (2, 0);
\draw [dashed] (2, 0) to [in=-90, out=-90] node{$ < $} node[below]{$ b $} (3, 0);
\draw [dashed] (3, 0) to [in=-90, out=-90] node{$ > $} node[below]{$ a $} (4, 0);
\draw [dashed] (4, 0) to [in=-90, out=-90] node{$ < $} node[below]{$ b $} (5, 0);
\draw [dashed] (5, 0) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ a $} (5, 0);
\end{tikzpicture}.
$$
We get a homomorphism
$$ \functions[\phi]{F}{\Sym 5}{a}{\br{12}\br{34}\br{5}}{b}{\br{1}\br{23}\br{45}}, $$
acting on the right. Then
$$ \phi\br{g} : \qquad 1 \mapsto 5, \qquad 2 \mapsto 3, \qquad 3 \mapsto 4, \qquad 4 \mapsto 1, \qquad 5 \mapsto 2, $$
so $ \phi\br{g} = \br{15234} $.
\end{example}

We can also answer stronger questions.
\begin{itemize}
\item Given $ S \subseteq F $, does $ S $ generate $ F $? Given $ g \in F \setminus \cbr{1} $, does $ g \in \abr{S} $?
\item Does $ \cbr{abcb^2cb^{-1}c^{-1}b^{-1}a^{-1}, bc^{-1}b^{-1}abc, bcb^{-1}} $ or $ \cbr{abcb^2cb^{-1}c^{-1}b^{-1}a^{-1}, bc^{-1}b^{-1}a^{-1}bc, bcb^{-1}} $ generate $ \abr{a, b, c} $?
\end{itemize}

\begin{theorem}[Marshall Hall's theorem]
\label{thm:3.2.7}
Let $ S $ be a finite subset of a finitely generated free group $ F $. Let $ y \notin \abr{S} $. Then there exists a finite group $ Q $ and $ f : F \to Q $ such that $ f\br{y} \notin f\br{\abr{S}} $.
\end{theorem}

\begin{corollary}
A finite subset $ S \subset F $ generates $ F $ if and only if $ S $ topologically generates $ \widehat{F} $.
\end{corollary}

\begin{proof}
If $ S $ generates $ F $, it generates $ \widehat{F} $ topologically since $ \abr{S} = F $ is dense in $ \widehat{F} $. If $ \abr{S} \ne F $, there exists $ y \notin \abr{S} $. Take a finite group $ Q $ and $ f : F \to Q $ as in Theorem \ref{thm:3.2.7}. Then $ f\br{y} \notin f\br{\abr{S}} $, so $ f\br{\abr{S}} \ne f\br{F} $. Thus $ \abr{S} $ is not dense in $ \widehat{F} $.
\end{proof}

Marshall Hall's theorem says there exists $ H \le_\f F $ such that $ H = \abr{S} * H' $.

\pagebreak

\lecture{13}{Thursday}{18/02/21}

\begin{example}
Let $ F = \abr{a, b} $, and let $ S = \cbr{aba, ba^2b} $. We will show $ \abr{S} \ne F $. Start by writing the elements of $ S $ as loops
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1);
\fill (-1, 1) circle (0.05);
\fill (-1, -1) circle (0.05);
\fill (1, -1) circle (0.05);
\fill (1, 1) circle (0.05);
\fill (2, 0) circle (0.05);
\draw (0, 0) to node{\rotatebox{45}{$ \wedge $}} node[above right]{$ a $} (-1, 1);
\draw (-1, 1) to node{$ \vee $} node[right]{$ b $} (-1, -1);
\draw (-1, -1) to node{\rotatebox{45}{$ > $}} node[below right]{$ a $} (0, 0);
\draw (0, 0) to node{\rotatebox{45}{$ > $}} node[above left]{$ b $} (1, 1);
\draw (1, 1) to node{\rotatebox{45}{$ \vee $}} node[above right]{$ a $} (2, 0);
\draw (2, 0) to node{\rotatebox{45}{$ < $}} node[below right]{$ a $} (1, -1);
\draw (1, -1) to node{\rotatebox{45}{$ \wedge $}} node[below left]{$ b $} (0, 0);
\end{tikzpicture},
$$
and call it $ Y $. We have a natural continuous map $ Y \to X $, where $ X $ is
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1);
\draw (0, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (0, 0);
\draw (0, 0) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ b $} (0, 0);
\end{tikzpicture}.
$$
Then $ \pi_1\br{Y} \to \abr{S} \le \pi_1\br{X} $. Now add edges to make a covering space
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1) node[right]{$ 1 $};
\fill (-1, 1) circle (0.05) node[above]{$ 2 $};
\fill (-1, -1) circle (0.05) node[below]{$ 3 $};
\fill (1, -1) circle (0.05) node[below]{$ 4 $};
\fill (1, 1) circle (0.05) node[above]{$ 5 $};
\fill (2, 0) circle (0.05) node[right]{$ 6 $};
\draw (0, 0) to node{\rotatebox{45}{$ \wedge $}} node[above right]{$ a $} (-1, 1);
\draw (-1, 1) to node{$ \vee $} node[right]{$ b $} (-1, -1);
\draw (-1, -1) to node{\rotatebox{45}{$ > $}} node[below right]{$ a $} (0, 0);
\draw (0, 0) to node{\rotatebox{45}{$ > $}} node[above left]{$ b $} (1, 1);
\draw (1, 1) to node{\rotatebox{45}{$ \vee $}} node[above right]{$ a $} (2, 0);
\draw (2, 0) to node{\rotatebox{45}{$ < $}} node[below right]{$ a $} (1, -1);
\draw (1, -1) to node{\rotatebox{45}{$ \wedge $}} node[below left]{$ b $} (0, 0);
\draw [dashed] (-1, 1) to [in=180, out=180] node{$ \vee $} node[left]{$ a $} (-1, -1);
\draw [dashed] (1, -1) to node{$ \wedge $} node[right]{$ a $} (1, 1);
\draw [dashed] (1, 1) to node{$ < $} node[above]{$ b $} (-1, 1);
\draw [dashed] (-1, -1) to node{$ > $} node[below]{$ b $} (1, -1);
\draw [dashed] (2, 0) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ b $} (2, 0);
\end{tikzpicture}.
$$
The explicit homomorphism to a finite group is
$$ \functions[\phi]{F}{\Sym 6}{a}{\br{123}\br{456}}{b}{\br{15234}\br{6}}. $$
Note that $ \phi\br{\abr{S}} \le \Stab 1 $ and $ \phi\br{a} \notin \Stab 1 $.
\end{example}

A \textbf{Stallings fold} is an operation on oriented, labelled graphs such that
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\fill (-1, 1) circle (0.05);
\fill (1, 1) circle (0.05);
\draw (0, 0) to (-0.35, -0.35);
\draw (0, -0.5) node{$ \dots $};
\draw (0, 0) to (0.35, -0.35);
\draw (-1, 1) to (-1.5, 1);
\draw (-1, 1) node[above left]{$ \iddots $};
\draw (-1, 1) to (-1, 1.5);
\draw (1, 1) to (1, 1.5);
\draw (1, 1) node[above right]{$ \ddots $};
\draw (1, 1) to (1.5, 1);
\draw (0, 0) to node{\rotatebox{45}{$ \wedge $}} node[below left]{$ a $} (-1, 1);
\draw (0, 0) to node{\rotatebox{45}{$ > $}} node[below right]{$ a $} (1, 1);
\draw (2.5, 0) node{$ \implies $};
\fill (4, 0) circle (0.05);
\fill (4, 1) circle (0.05);
\draw (4, 0) to (3.65, -0.35);
\draw (4, -0.5) node{$ \dots $};
\draw (4, 0) to (4.35, -0.35);
\draw (4, 1) to (3.65, 0.65);
\draw (3.5, 1.5) node[below]{$ \vdots $};
\draw (4, 1) to (3.65, 1.35);
\draw (4, 1) to (4.35, 1.35);
\draw (4.5, 1.5) node[below]{$ \vdots $};
\draw (4, 1) to (4.35, 0.65);
\draw [very thick] (4, 0) to node{$ \wedge $} node[right]{$ a $} (4, 1);
\end{tikzpicture},
\qquad \qquad \qquad
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\fill (-1, 1) circle (0.05);
\fill (1, 1) circle (0.05);
\draw (0, 0) to (-0.35, -0.35);
\draw (0, -0.5) node{$ \dots $};
\draw (0, 0) to (0.35, -0.35);
\draw (-1, 1) to (-1.5, 1);
\draw (-1, 1) node[above left]{$ \iddots $};
\draw (-1, 1) to (-1, 1.5);
\draw (1, 1) to (1, 1.5);
\draw (1, 1) node[above right]{$ \ddots $};
\draw (1, 1) to (1.5, 1);
\draw (-1, 1) to node{\rotatebox{45}{$ \vee $}} node[below left]{$ a $} (0, 0);
\draw (1, 1) to node{\rotatebox{45}{$ < $}} node[below right]{$ a $} (0, 0);
\draw (2.5, 0) node{$ \implies $};
\fill (4, 0) circle (0.05);
\fill (4, 1) circle (0.05);
\draw (4, 0) to (3.65, -0.35);
\draw (4, -0.5) node{$ \dots $};
\draw (4, 0) to (4.35, -0.35);
\draw (4, 1) to (3.65, 0.65);
\draw (3.5, 1.5) node[below]{$ \vdots $};
\draw (4, 1) to (3.65, 1.35);
\draw (4, 1) to (4.35, 1.35);
\draw (4.5, 1.5) node[below]{$ \vdots $};
\draw (4, 1) to (4.35, 0.65);
\draw [very thick] (4, 1) to node{$ \vee $} node[right]{$ a $} (4, 0);
\end{tikzpicture},
$$
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\fill (0, 1) circle (0.05);
\draw (0, 0) to (0.5, 0);
\draw (0, -0.5) node[above right]{$ \iddots $};
\draw (0, 0) to (0, -0.5);
\draw (0, 1) to (-0.35, 1.35);
\draw (0, 1.5) node{$ \dots $};
\draw (0, 1) to (0.35, 1.35);
\draw (0, 0) to node{$ \wedge $} node[left]{$ a $} (0, 1);
\draw (0, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[right]{$ a $} (0, 0);
\draw (1.5, 0) node{$ \implies $};
\fill (3.5, 0) circle (0.05);
\draw (3.5, 0) to (3.85, -0.35);
\draw (3.5, -0.5) node{$ \dots $};
\draw (3.5, 0) to (3.15, -0.35);
\draw (3.5, 0) to (3.15, 0.35);
\draw (3.5, 0.5) node{$ \dots $};
\draw (3.5, 0) to (3.85, 0.35);
\draw [very thick] (3.5, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (3.5, 0);
\end{tikzpicture},
\qquad \qquad \qquad
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\fill (0, 1) circle (0.05);
\draw (0, 0) to (0.5, 0);
\draw (0, -0.5) node[above right]{$ \iddots $};
\draw (0, 0) to (0, -0.5);
\draw (0, 1) to (-0.35, 1.35);
\draw (0, 1.5) node{$ \dots $};
\draw (0, 1) to (0.35, 1.35);
\draw (0, 1) to node{$ \vee $} node[left]{$ a $} (0, 0);
\draw (0, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[right]{$ a $} (0, 0);
\draw (1.5, 0) node{$ \implies $};
\fill (3.5, 0) circle (0.05);
\draw (3.5, 0) to (3.85, -0.35);
\draw (3.5, -0.5) node{$ \dots $};
\draw (3.5, 0) to (3.15, -0.35);
\draw (3.5, 0) to (3.15, 0.35);
\draw (3.5, 0.5) node{$ \dots $};
\draw (3.5, 0) to (3.85, 0.35);
\draw [very thick] (3.5, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (3.5, 0);
\end{tikzpicture},
$$
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.05);
\draw (0, 0) to (0.5, 0);
\draw (0, -0.5) node[above right]{$ \iddots $};
\draw (0, 0) to (0, -0.5);
\draw (0, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (0, 0);
\draw (0, 0) to [in=45, out=135, distance=45] node{$ > $} node[above]{$ a $} (0, 0);
\draw (1.5, 0) node{$ \implies $};
\fill (3.5, 0) circle (0.05);
\draw (3.5, 0) to (3.85, -0.35);
\draw (4, 0.5) node[below]{$ \vdots $};
\draw (3.5, 0) to (3.85, 0.35);
\draw [very thick] (3.5, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (3.5, 0);
\end{tikzpicture}.
$$

\begin{fact}
Folding $ Y $ gives a new graph $ Y' $ such that the image of $ \pi_1\br{Y} \to \pi_1\br{Y'} \to \pi_1\br{X} $ is still $ \abr{S} $.
\end{fact}

\pagebreak

\begin{example}
Let $ F = \abr{a, b} $, and let $ S = \cbr{a^3, ab^2aba^{-1}, ab^{-1}ab^3} $. Folding,
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1);
\fill (-0.5, -1) circle (0.05);
\fill (0.5, -1) circle (0.05);
\fill (-1, 0) circle (0.05);
\fill (-2, 0.5) circle (0.05);
\fill (-2.5, 1.5) circle (0.05);
\fill (-1.5, 1.5) circle (0.05);
\fill (-0.5, 1) circle (0.05);
\fill (0.5, 1) circle (0.05);
\fill (1.5, 1.5) circle (0.05);
\fill (2.5, 1.5) circle (0.05);
\fill (2, 0.5) circle (0.05);
\fill (1, 0) circle (0.05);
\draw (0, 0) to node{\rotatebox{60}{$ < $}} node[left]{$ a $} (-0.5, -1);
\draw (-0.5, -1) to node{$ > $} node[below]{$ a $} (0.5, -1);
\draw (0.5, -1) to node{\rotatebox{30}{$ \wedge $}} node[right]{$ a $} (0, 0);
\draw (0, 0) to node{$ < $} node[below]{$ a $} (-1, 0);
\draw (-1, 0) to node{\rotatebox{60}{$ \wedge $}} node[below]{$ b $} (-2, 0.5);
\draw (-2, 0.5) to node{\rotatebox{30}{$ \wedge $}} node[left]{$ b $} (-2.5, 1.5);
\draw (-2.5, 1.5) to node{$ > $} node[above]{$ a $} (-1.5, 1.5);
\draw (-1.5, 1.5) to node{\rotatebox{60}{$ \vee $}} node[above]{$ b $} (-0.5, 1);
\draw (0, 0) to node{\rotatebox{30}{$ \wedge $}} node[left]{$ a $} (-0.5, 1);
\draw (0, 0) to node{\rotatebox{60}{$ > $}} node[right]{$ a $} (0.5, 1);
\draw (1.5, 1.5) to node{\rotatebox{30}{$ < $}} node[above]{$ b $} (0.5, 1);
\draw (1.5, 1.5) to node{$ > $} node[above]{$ a $} (2.5, 1.5);
\draw (2.5, 1.5) to node{\rotatebox{60}{$ < $}} node[right]{$ b $} (2, 0.5);
\draw (2, 0.5) to node{\rotatebox{30}{$ < $}} node[below]{$ b $} (1, 0);
\draw (1, 0) to node{$ < $} node[below]{$ b $} (0, 0);
\end{tikzpicture}
\begin{tikzpicture}
\draw (-3, 0) node{$ \implies $};
\fill (0, 0) circle (0.1);
\fill (-1, 0) circle (0.05);
\fill (-0.5, -1) circle (0.05);
\fill (-2, 0) circle (0.05);
\fill (-2.5, 1) circle (0.05);
\fill (-1.5, 1) circle (0.05);
\fill (-0.5, 1) circle (0.05);
\fill (0.5, 1) circle (0.05);
\fill (1.5, 1) circle (0.05);
\fill (1, 0) circle (0.05);
\draw [very thick] (0, 0) to node{$ < $} node[below]{$ a $} (-1, 0);
\draw (-1, 0) to node{\rotatebox{30}{$ \vee $}} node[left]{$ a $} (-0.5, -1);
\draw (-0.5, -1) to node{\rotatebox{60}{$ > $}} node[right]{$ a $} (0, 0);
\draw (-1, 0) to node{$ < $} node[below]{$ b $} (-2, 0);
\draw (-2, 0) to node{\rotatebox{30}{$ \wedge $}} node[left]{$ b $} (-2.5, 1);
\draw (-2.5, 1) to node{$ > $} node[above]{$ a $} (-1.5, 1);
\draw (-1.5, 1) to node{\rotatebox{30}{$ \vee $}} node[left]{$ b $} (-1, 0);
\draw (-0.5, 1) to node{\rotatebox{60}{$ < $}} node[right]{$ b $} (-1, 0);
\draw (-0.5, 1) to node{$ > $} node[above]{$ a $} (0.5, 1);
\draw (0.5, 1) to node{$ > $} node[above]{$ b $} (1.5, 1);
\draw (1.5, 1) to node{\rotatebox{60}{$ < $}} node[right]{$ b $} (1, 0);
\draw (1, 0) to node{$ < $} node[below]{$ b $} (0, 0);
\end{tikzpicture}
\begin{tikzpicture}
\draw (-3, 0) node{$ \implies $};
\fill (0, 0) circle (0.1);
\fill (-1, 0) circle (0.05);
\fill (-0.5, -1) circle (0.05);
\fill (-2, 0) circle (0.05);
\fill (-2, 1) circle (0.05);
\fill (-1, 1) circle (0.05);
\fill (0, 1) circle (0.05);
\fill (1, 1) circle (0.05);
\fill (1, 0) circle (0.05);
\draw (0, 0) to node{$ < $} node[below]{$ a $} (-1, 0);
\draw (-1, 0) to node{\rotatebox{30}{$ \vee $}} node[left]{$ a $} (-0.5, -1);
\draw (-0.5, -1) to node{\rotatebox{60}{$ > $}} node[right]{$ a $} (0, 0);
\draw (-1, 0) to node{$ < $} node[below]{$ b $} (-2, 0);
\draw (-2, 0) to node{$ \wedge $} node[left]{$ b $} (-2, 1);
\draw (-2, 1) to node{$ > $} node[above]{$ a $} (-1, 1);
\draw [very thick] (-1, 1) to node{$ \vee $} node[right]{$ b $} (-1, 0);
\draw (-1, 1) to node{$ > $} node[above]{$ a $} (0, 1);
\draw (0, 1) to node{$ > $} node[above]{$ b $} (1, 1);
\draw (1, 1) to node{$ \vee $} node[right]{$ b $} (1, 0);
\draw (1, 0) to node{$ < $} node[below]{$ b $} (0, 0);
\end{tikzpicture}.
$$
Now can add edges to make a covering
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1) node[below right]{$ 1 $};
\fill (-1, 0) circle (0.05) node[below left]{$ 7 $};
\fill (-0.5, -1) circle (0.05) node[below]{$ 9 $};
\fill (-2, 0) circle (0.05) node[below]{$ 6 $};
\fill (-2, 1) circle (0.05) node[above left]{$ 2 $};
\fill (-1, 1) circle (0.05) node[above]{$ 3 $};
\fill (0, 1) circle (0.05) node[above right]{$ 4 $};
\fill (1, 1) circle (0.05) node[above]{$ 5 $};
\fill (1, 0) circle (0.05) node[below]{$ 8 $};
\draw (0, 0) to node{$ < $} node[below]{$ a $} (-1, 0);
\draw (-1, 0) to node{\rotatebox{30}{$ \vee $}} node[left]{$ a $} (-0.5, -1);
\draw (-0.5, -1) to node{\rotatebox{60}{$ > $}} node[right]{$ a $} (0, 0);
\draw (-1, 0) to node{$ < $} node[below]{$ b $} (-2, 0);
\draw (-2, 0) to node{$ \wedge $} node[left]{$ b $} (-2, 1);
\draw (-2, 1) to node{$ > $} node[above]{$ a $} (-1, 1);
\draw (-1, 1) to node{$ \vee $} node[right]{$ b $} (-1, 0);
\draw (-1, 1) to node{$ > $} node[above]{$ a $} (0, 1);
\draw (0, 1) to node{$ > $} node[above]{$ b $} (1, 1);
\draw (1, 1) to node{$ \vee $} node[right]{$ b $} (1, 0);
\draw (1, 0) to node{$ < $} node[below]{$ b $} (0, 0);
\draw [dashed] (0, 0) to node{$ \wedge $} node[right]{$ b $} (0, 1);
\draw [dashed] (-2, 1) to [in=-90, out=-90] node{$ > $} node[below]{$ b $} (-1, 1);
\draw [dashed] (0, 1) to [in=90, out=90] node{$ < $} node[above]{$ a $} (-2, 1);
\draw [dashed] (1, 1) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ a $} (1, 1);
\draw [dashed] (-2, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (-2, 0);
\draw [dashed] (1, 0) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ a $} (1, 0);
\draw [dashed] (-0.5, -1) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ b $} (-0.5, -1);
\end{tikzpicture}.
$$
The homomorphism is
$$ \functions[\phi]{F}{\Sym 9}{a}{\br{179}\br{234}\br{5}\br{6}\br{8}}{b}{\br{1458}\br{2376}\br{9}}. $$
Then $ \phi\br{\abr{S}} \le \Stab 1 $ and $ \phi\br{a} \notin \Stab 1 $, so $ \phi\br{\abr{S}} \ne \phi\br{F} $. Thus $ \abr{S} \ne F $. The other case is that folding gives a one-vertex graph, then $ \abr{S} $ is generated by some standard generators of $ F $.
\end{example}

What if we want to know if a specific $ y $ lies in $ \abr{S} $? Add $ y $ into the starting graph as a line.

\begin{example}
Let $ y = a^{-1}ba $. Fold
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1);
\fill (-0.5, -1) circle (0.05);
\fill (0.5, -1) circle (0.05);
\fill (-1, 0) circle (0.05);
\fill (-2, 0.5) circle (0.05);
\fill (-2.5, 1.5) circle (0.05);
\fill (-1.5, 1.5) circle (0.05);
\fill (-0.5, 1) circle (0.05);
\fill (0.5, 1) circle (0.05);
\fill (1.5, 1.5) circle (0.05);
\fill (2.5, 1.5) circle (0.05);
\fill (2, 0.5) circle (0.05);
\fill (1, 0) circle (0.05);
\fill (1.5, -1) circle (0.05);
\fill (2.5, -1) circle (0.05);
\fill (3.5, -1) circle (0.05);
\draw (0, 0) to node{\rotatebox{60}{$ < $}} node[left]{$ a $} (-0.5, -1);
\draw (-0.5, -1) to node{$ > $} node[below]{$ a $} (0.5, -1);
\draw (0.5, -1) to node{\rotatebox{30}{$ \wedge $}} node[right]{$ a $} (0, 0);
\draw (0, 0) to node{$ < $} node[below]{$ a $} (-1, 0);
\draw (-1, 0) to node{\rotatebox{60}{$ \wedge $}} node[below]{$ b $} (-2, 0.5);
\draw (-2, 0.5) to node{\rotatebox{30}{$ \wedge $}} node[left]{$ b $} (-2.5, 1.5);
\draw (-2.5, 1.5) to node{$ > $} node[above]{$ a $} (-1.5, 1.5);
\draw (-1.5, 1.5) to node{\rotatebox{60}{$ \vee $}} node[above]{$ b $} (-0.5, 1);
\draw (0, 0) to node{\rotatebox{30}{$ \wedge $}} node[left]{$ a $} (-0.5, 1);
\draw (0, 0) to node{\rotatebox{60}{$ > $}} node[right]{$ a $} (0.5, 1);
\draw (1.5, 1.5) to node{\rotatebox{30}{$ < $}} node[above]{$ b $} (0.5, 1);
\draw (1.5, 1.5) to node{$ > $} node[above]{$ a $} (2.5, 1.5);
\draw (2.5, 1.5) to node{\rotatebox{60}{$ < $}} node[right]{$ b $} (2, 0.5);
\draw (2, 0.5) to node{\rotatebox{30}{$ < $}} node[below]{$ b $} (1, 0);
\draw (1, 0) to node{$ < $} node[below]{$ b $} (0, 0);
\draw (1.5, -1) to node{\rotatebox{50}{$ \wedge $}} node[right]{$ a $} (0, 0);
\draw (1.5, -1) to node{$ > $} node[below]{$ b $} (2.5, -1);
\draw (2.5, -1) to node{$ > $} node[below]{$ a $} (3.5, -1);
\end{tikzpicture},
$$
and make a covering space
$$
\begin{tikzpicture}
\fill (0, 0) circle (0.1) node[below right]{$ 1 $};
\fill (-1, 0) circle (0.05) node[below left]{$ 7 $};
\fill (-0.5, -1) circle (0.05) node[below]{$ 9 $};
\fill (-2, 0) circle (0.05) node[below]{$ 6 $};
\fill (-2, 1) circle (0.05) node[above left]{$ 2 $};
\fill (-1, 1) circle (0.05) node[above]{$ 3 $};
\fill (0, 1) circle (0.05) node[above right]{$ 4 $};
\fill (1, 1) circle (0.05) node[above]{$ 5 $};
\fill (1, 0) circle (0.05) node[below]{$ 8 $};
\fill (0.5, -1) circle (0.05) node[below]{$ 10 $};
\fill (1.5, -1) circle (0.05) node[below]{$ 11 $};
\draw (0, 0) to node{$ < $} node[below]{$ a $} (-1, 0);
\draw (-1, 0) to node{\rotatebox{30}{$ \vee $}} node[left]{$ a $} (-0.5, -1);
\draw [very thick] (-0.5, -1) to node{\rotatebox{60}{$ > $}} node[right]{$ a $} (0, 0);
\draw (-1, 0) to node{$ < $} node[below]{$ b $} (-2, 0);
\draw (-2, 0) to node{$ \wedge $} node[left]{$ b $} (-2, 1);
\draw (-2, 1) to node{$ > $} node[above]{$ a $} (-1, 1);
\draw (-1, 1) to node{$ \vee $} node[right]{$ b $} (-1, 0);
\draw (-1, 1) to node{$ > $} node[above]{$ a $} (0, 1);
\draw (0, 1) to node{$ > $} node[above]{$ b $} (1, 1);
\draw (1, 1) to node{$ \vee $} node[right]{$ b $} (1, 0);
\draw (1, 0) to node{$ < $} node[below]{$ b $} (0, 0);
\draw (-0.5, -1) to node{$ > $} node[above]{$ b $} (0.5, -1);
\draw (0.5, -1) to node{$ > $} node[above]{$ a $} (1.5, -1);
\draw [dashed] (0, 0) to node{$ \wedge $} node[right]{$ b $} (0, 1);
\draw [dashed] (-2, 1) to [in=-135, out=-45] node{$ > $} node[below]{$ b $} (-1, 1);
\draw [dashed] (0, 1) to [in=90, out=90] node{$ < $} node[above]{$ a $} (-2, 1);
\draw [dashed] (1, 1) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ a $} (1, 1);
\draw [dashed] (-2, 0) to [in=-135, out=135, distance=45] node{$ \vee $} node[left]{$ a $} (-2, 0);
\draw [dashed] (1, 0) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ a $} (1, 0);
\draw [dashed] (0.5, -1) to [in=-45, out=-135] node{$ < $} node[below]{$ b $} (-0.5, -1);
\draw [dashed] (1.5, -1) to [in=-45, out=-135] node{$ < $} node[below]{$ a $} (0.5, -1);
\draw [dashed] (1.5, -1) to [in=-45, out=45, distance=45] node{$ \vee $} node[right]{$ b $} (1.5, -1);
\end{tikzpicture}.
$$
Thus $ \phi\br{\abr{S}} \le \Stab 1 $ and $ \phi\br{y} = \br{1 \mapsto 11} \notin \Stab 1 $. The other option is that $ y $ gets folded into being a loop, then $ y \in \abr{S} $.
\end{example}

\pagebreak

\section{Pro-\texorpdfstring{$ p $}{p} groups}

Recall that a pro-$ p $ group is an inverse limit of finite $ p $-groups, groups of order $ p^n $ for $ p $ a fixed prime. For example, the pro-$ p $ completion of a group such as $ \ZZ_p = \widehat{\ZZ_{\br{p}}} $.

\subsection{Generators of pro-\texorpdfstring{$ p $}{p} groups}

\begin{definition}
Let $ G $ be a finite group. The \textbf{Frattini subgroup} of $ G $, denoted $ \Phi\br{G} $, is
$$ \Phi\br{G} = \bigcap \cbr{M \st M \ \text{is a maximal proper subgroup of} \ G}, $$
such that if $ M \le H \le G $ then $ M = H $ or $ H = G $.
\end{definition}

Importantly, if $ G $ is finite, then every proper subgroup is contained in a maximal proper subgroup.

\begin{proposition}
For $ G $ a finite group and $ S \subseteq G $, the following are equivalent.
\begin{enumerate}
\item $ S $ generates $ G $.
\item $ S\Phi\br{G} $ generates $ G $, so $ \Phi\br{G} $ are non-generators.
\item The image of $ S $ in $ G / \Phi\br{G} $ generates $ G / \Phi\br{G} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] Trivial.
\item[$ 2 \implies 3 $.] Trivial.
\item[$ 3 \implies 1 $.] Suppose $ S $ does not generate $ G $. Then $ \abr{S} $ is a proper subgroup, so, since $ G $ is finite, $ \abr{S} $ is contained in a maximal proper subgroup $ M $ of $ G $. Since $ \Phi = \Phi\br{G} \le M $, $ M / \Phi \ne G / \Phi $, so $ S\Phi / \Phi \le M / \Phi \ne G / \Phi $, so $ S\Phi / \Phi $ does not generate $ G / \Phi $.
\end{itemize}
\end{proof}

\lecture{14}{Saturday}{20/02/21}

\begin{proposition}
Let $ f : G \to H $ be a surjection of finite groups. Then $ f\br{\Phi\br{G}} \le \Phi\br{H} $. Hence, $ \Phi\br{G} $ is a characteristic subgroup of $ G $.
\end{proposition}

\begin{remark}
Surjection is necessary. For example, let $ \ZZ / 4\ZZ = \CCC_4 \hookrightarrow \Sym 5 $. Then $ \Phi\br{\ZZ / 4\ZZ} = 2\ZZ / 4\ZZ = \abr{2} $ and $ \Phi\br{\Sym 5} = 1 $, since $ \AAA_5 $ is ruled out by $ \Stab 1 $, a maximal proper subgroup not containing $ \AAA_5 $.
\end{remark}

\begin{proof}
Let $ M $ be a maximal proper subgroup of $ H $. We claim $ f^{-1}\br{M} $ is a maximal proper subgroup of $ G $. Properness follows from surjectivity. If $ \ker f \le f^{-1}\br{M} < G' \le G $, then $ M < f\br{G'} \le H = f\br{G} $. Since $ M $ is maximal, $ f\br{G'} = H $. Then $ G' = G $, since if $ g \in G $, then $ f\br{g} = f\br{g'} \in H $, for some $ g' \in G' $, then $ gg'^{-1} \in \ker f $, so $ g \in g'\ker f \le G' $. Thus $ \Phi\br{G} \le f^{-1}\br{M} $, so $ f\br{\Phi\br{G}} \le M $, so $ f\br{\Phi\br{G}} \le \Phi\br{H} $.
\end{proof}

\begin{definition}
Let $ G $ be a group and $ H, K \le G $. Let $ m $ be an integer. Define
$$ \sbr{H, K} = \abr{\cbr{\sbr{h, k} \st h \in H, \ k \in K}}, \qquad H^m = \abr{\cbr{h^m \st h \in H}}, \qquad HK = \cbr{hk \st h \in H, \ k \in K}. $$
\end{definition}

If $ H \triangleleft G $ then $ HK $ is a subgroup and $ H^m $ is normal. If $ H \triangleleft G $ and $ K \triangleleft G $ then $ HK \triangleleft G $ and $ H \cap K \ge \sbr{H, K} \triangleleft G $.

\begin{proposition}
Let $ G $ be a finite $ p $-group. Then
$$ \Phi\br{G} = \sbr{G, G}G^p = \abr{\cbr{\sbr{g_1, g_2}g_3^p \st g_1, g_2, g_3 \in G}} = \ker \br{G \to G_{\ab} \to G_{\ab} / pG_{\ab}}, $$
where $ \H_1\br{G, \FF_p} = G_{\ab} / pG_{\ab} $ is a vector space $ \FF_p^{\d\br{G}} $ over $ \FF_p $.
\end{proposition}

\begin{proof}
On example sheet $ 2 $.
\end{proof}

\pagebreak

\begin{definition}
Let $ G $ be a profinite group. Define the \textbf{Frattini subgroup}
$$ \Phi\br{G} = \bigcap \cbr{M \st M \ \text{is a maximal proper closed subgroup of} \ G}, $$
which is closed, where if $ M \le_\c H \le_\c G $ then $ H = M $ or $ H = G $.
\end{definition}

\begin{proposition}
Any proper closed subgroup of a profinite group $ G $ is contained in a proper open subgroup. Hence a maximal proper closed subgroup is open, and any closed subgroup is contained in a maximal proper closed subgroup.
\end{proposition}

\begin{proof}
Let $ H \le_\c G $ such that $ H \ne G $. Then by Corollary \ref{cor:1.2.30}, there exists $ p : G \to Q $ for $ Q $ finite such that $ p\br{H} \ne p\br{G} $. Then $ p^{-1}\br{p\br{H}} $ is open and proper, and contains $ H $. Open subgroups have finite index, so maximal if and only if smallest index.
\end{proof}

\begin{proposition}
Let $ f : G \to H $ be a surjective continuous homomorphism of profinite groups. Then $ f\br{\Phi\br{G}} \le \Phi\br{H} $.
\end{proposition}

\begin{proposition}
Let $ G $ be profinite and $ S \subseteq G $. Then the following are equivalent.
\begin{itemize}
\item $ S $ topologically generates $ G $.
\item $ S\Phi\br{G} $ topologically generates $ G $.
\item $ S\Phi\br{G} / \Phi\br{G} $ topologically generates $ G / \Phi\br{G} $.
\end{itemize}
\end{proposition}

\begin{proposition}
Let $ \br{G_j}_{j \in J} $ be a surjective inverse system of finite groups and $ G = \varprojlim_j G_j $. Then
$$ \Phi\br{G} = \varprojlim_j \Phi\br{G_j}. $$
\end{proposition}

\begin{proof}
$ \Phi\br{G} = \varprojlim_j p_j\br{\Phi\br{G}} \le \varprojlim_j \Phi\br{G_j} $. Let $ M $ be a maximal proper closed subgroup of $ G $. Since $ M $ is open, there exists $ i \in J $ such that $ \ker p_i \le M $. This implies $ \ker p_j \le M $ for $ j \le i $. Then $ p_j\br{M} $ is a maximal proper subgroup of $ G_j $ for all $ j \le i $, so $ \Phi\br{G_j} \le p_j\br{M} $ for all $ j \le i $. Pass to the cofinal subsystem $ \cbr{j \le i} $. Now $ \varprojlim_j \Phi\br{G_j} \le \varprojlim_j p_j\br{M} = M $. So $ \varprojlim_{j \in J} \Phi\br{G_j} \le M $ for all $ M $, so $ \varprojlim_{j \in J} \Phi\br{G_j} \le \Phi\br{G} $.
\end{proof}

\begin{proposition}
Let $ G $ be a topologically finitely generated pro-$ p $ group. Then
$$ \Phi\br{G} = \overline{\sbr{G, G}G^p} = \H_1\br{G, \FF_p}, \qquad G / \Phi\br{G} \cong \FF_p^d, $$
where $ d = \d\br{G} $ is the minimal size of a topological generating set of $ G $.
\end{proposition}

\begin{proof}
Write $ G = \varprojlim_j G_j $ as a surjective inverse system of finite $ p $-groups. We know $ \Phi\br{G} = \varprojlim_j \sbr{G_j, G_j}G_j^p $. For any $ \sbr{g_1, g_2}g_3^p $ for $ g_1, g_2, g_3 \in G $ we have $ p_j\br{\sbr{g_1, g_2}g_3^p} = \sbr{p_j\br{g_1}, p_j\br{g_2}}p_j\br{g_3}^p \in \sbr{G_j, G_j}G_j^p $, so $ \overline{\sbr{G, G}G^p} \le \varprojlim_j \sbr{G_j, G_j}G_j^p = \Phi\br{G} $. Since $ G / \overline{\sbr{G, G}G^p} $ is topologically finitely generated, abelian, and every element has order $ p $, it is finite and equal to $ \FF_p^d $ for some $ d $. But $ \Phi\br{\FF_p^d} = \cbr{0} $, so $ \Phi\br{G} \le \overline{\sbr{G, G}G^p} $.
\end{proof}

\begin{example}
Generation of $ \widehat{F_{\br{p}}} $ is easy. Let $ F = \abr{a, b} $. Then
$$ \functions{\widehat{F_{\br{p}}}}{\widehat{F_{\br{p}}} / \Phi = \FF_p^2}{a}{\br{1, 0}}{b}{\br{0, 1}}. $$
\end{example}

\begin{corollary}
Let $ f : G \to H $ be a continuous homomorphism of topologically finitely generated pro-$ p $ groups. Then $ f\br{\Phi\br{G}} \le \Phi\br{H} $. So $ f $ induces a map
$$ f_* : G / \Phi\br{G} \to H / \Phi\br{H}, $$
and $ f $ is surjective if and only if $ f_* $ is surjective.
\end{corollary}

\begin{proof}
$ f\br{\sbr{g_1, g_2}g_3^p} = \sbr{f\br{g_1}, f\br{g_2}}f\br{g_3}^p \in \Phi\br{H} $ for all $ g_1, g_2, g_3 \in G $. Then $ f\br{\sbr{G, G}G^p} \le \Phi\br{H} $, so $ f\br{\Phi\br{G}} = f\br{\overline{\sbr{G, G}G^p}} \le \Phi\br{H} $. If $ f_* $ is surjective, then the image of $ f\br{G} $ in $ H / \Phi\br{H} $ generates $ H / \Phi\br{H} $, so $ f\br{G} $ topologically generates $ H $. So $ f\br{G} = H $.
\end{proof}

\pagebreak

\subsection{Nilpotent groups}

\lecture{15}{Tuesday}{23/02/21}

\begin{definition}
The \textbf{lower central series} of a group $ G $ is the sequence $ G_n = \gamma_n\br{G} $ defined by
$$ \gamma_1\br{G} = G, \qquad \gamma_{n + 1}\br{G} = \sbr{G, \gamma_n\br{G}}, \qquad \gamma_{n + 1}\br{G} \le \gamma_n\br{G}. $$
Then $ G $ is \textbf{nilpotent of class $ c $} if $ \gamma_{c + 1}\br{G} = 1 $ but $ \gamma_c\br{G} \ne 1 $.
\end{definition}

The following are properties.

\begin{proposition}
$ \gamma_n\br{G} $ is \textbf{fully characteristic}, so if $ f : G \to H $ then $ f\br{\gamma_n\br{G}} \le \gamma_n\br{H} $. If $ f $ is surjective, we have equality.
\end{proposition}

\begin{proposition}
Subgroups and quotients of nilpotent groups are nilpotent.
\end{proposition}

\begin{proposition}
Finite $ p $-groups $ G $ are nilpotent.
\end{proposition}

\begin{proof}
Proof by induction on $ \abs{G} $.
\begin{itemize}
\item $ \gamma_2\br{\FF_p} = 1 $.
\item There exists $ z \in \Z\br{G} \setminus \cbr{1} $. Then $ G / \abr{z} $ is nilpotent, so $ \gamma_{c + 1}\br{G / \abr{z}} = 1 $ for some $ c $. Thus $ \gamma_{c + 1}\br{G} \le \abr{z} $, so $ \gamma_{c + 2}\br{G} = \sbr{G, \gamma_{c + 1}\br{G}} = 1 $.
\end{itemize}
\end{proof}

The following is a variant. For pro-$ p $ groups, the \textbf{lower central $ p $-series} is
$$ \gamma_1^{\br{p}}\br{G} = G, \qquad \gamma_{n + 1}^{\br{p}}\br{G} = \overline{\sbr{G, \gamma_n^{\br{p}}\br{G}}\br{\gamma_n^{\br{p}}\br{G}}^p}, $$
so $ \gamma_2^{\br{p}}\br{G} = \Phi\br{G} $. Then $ \gamma_n^{\br{p}}\br{G} $ is open for topologically finitely generated pro-$ p $ groups, since by induction, $ \gamma_{n + 1}^{\br{p}}\br{G} \ge \Phi\br{\gamma_n^{\br{p}}\br{G}} $.

\begin{proposition}
Let $ G $ be a $ p $-group. Then $ \gamma_n^{\br{p}}\br{G} = 1 $ for some $ n $.
\end{proposition}

\begin{proposition}
Let $ G $ be a topologically finitely generated pro-$ p $ group, then $ \cbr{\gamma_n^{\br{p}}\br{G}} $ are a basis of open normal subgroups of $ G $.
\end{proposition}

\begin{proof}
If $ N \triangleleft_\o G $, then $ G / N $ is a $ p $-group, so $ \gamma_n^{\br{p}}\br{G / N} = 1 $. Thus $ N \ge \gamma_n^{\br{p}}\br{G} $.
\end{proof}

\subsection{Invariance of topology}

\begin{theorem}[Serre]
\label{thm:4.3.1}
Let $ G $ be a topologically finitely generated pro-$ p $ group. Then all finite index subgroups are open.
\end{theorem}

Thus
\begin{itemize}
\item every homomorphism to a finite group is continuous,
\item by Proposition \ref{prop:1.2.25} every homomorphism to a profinite group is continuous, and
\item no other topology on $ G $ makes it a profinite group, by applying Theorem \ref{thm:4.3.1} to $ \id : G \to G $.
\end{itemize}

\begin{proposition}
Let $ G $ be a pro-$ p $ group and let $ K \le_\f G $. Then $ \sbr{G : K} $ is a power of $ p $.
\end{proposition}

\begin{proof}
Without loss of generality $ K $ is normal. Let $ \sbr{G : K} = m = p^rm' $ for $ m' $ coprime to $ p $. Let
$$ X = G^{\cbr{m}} = \cbr{g^m \st g \in G} \subseteq K. $$
Then $ X $ is closed, since it is the image of $ G $ under $ g \mapsto g^m $. Thus $ X = \overline{X} = \bigcap_{N \triangleleft_\o G} XN $, by Proposition \ref{prop:1.2.32}. Let $ g \in G $. We will show $ g^{p^r} \in K $ for all $ g \in G $. This implies the result by Cauchy's theorem. Let $ N \triangleleft_\o G $. Let $ \sbr{G : N} = p^s $. Let $ t = \max\br{r, s} $. Then $ g^{p^t} \in N $ and $ \gcd\br{p^t, m} = p^r $. So there exist $ a, b \in \ZZ $ such that $ p^r = ma + p^tb $. Then $ g^{p^r} = \br{g^a}^m\br{g^{p^t}}^b \in XN $.
\end{proof}

\pagebreak

\begin{lemma}
Let $ G $ be a nilpotent group with a finite generating set $ a_1, \dots, a_d $. Then every $ g \in \sbr{G, G} $ may be written
$$ g = \sbr{a_1, x_1} \dots \sbr{a_d, x_d}, \qquad x_1, \dots, x_d \in G. $$
\end{lemma}

\begin{proof}
We induct on the nilpotency class $ c $ of $ G $.
\begin{itemize}
\item If $ c = 1 $, then $ 1 = \gamma_2\br{G} = \sbr{G, G} $, so $ G $ is abelian, which is trivial.
\item The result is true for $ G / \gamma_c\br{G} $. So there exist $ x_1, \dots, x_d \in G $ and $ u \in \gamma_c\br{G} = \sbr{G, \gamma_{c - 1}\br{G}} $ such that
$$ g = \sbr{a_1, x_1} \dots \sbr{a_d, x_d}u. $$
Seek a nice form of $ u $. There are commutator relations
$$ \sbr{xy, z} = \sbr{x, z}^y\sbr{y, z}, \qquad \sbr{x, yz} = \sbr{x, z}\sbr{x, y}^z. $$
For any $ v \in \gamma_{c - 1}\br{G} $, these imply that
$$ \sbr{a_ia_j, v} = \sbr{a_i, v}\sbr{a_j, v}, \qquad \sbr{a_i, v}^2 = \sbr{a_i, v^2}, $$
$$ \sbr{a_i^{-1}, v} = \sbr{a_i, v}^{-1} = \sbr{a_i, v^{-1}}, \qquad \sbr{a_i, v}\sbr{a_i, w} = \sbr{a_i, vw}, $$
since $ \sbr{\cdot, v} \in \gamma_c\br{G} $ is central in $ G $. We can write $ u $ in the form
$$ u = \sbr{a_1, v_1} \dots \sbr{a_d, v_d}, \qquad v_i \in \gamma_{c - 1}\br{G}. $$
Finally,
$$ g = \sbr{a_1, x_1} \dots \sbr{a_d, x_d}\sbr{a_1, v_1} \dots \sbr{a_d, v_d} = \sbr{a_1, x_1v_1} \dots \sbr{a_d, x_dv_d}. $$
\end{itemize}
\end{proof}

\begin{proposition}
If $ G $ is a topologically finitely generated pro-$ p $ group, then $ \sbr{G, G}G^p $ is open and closed, and equals $ \Phi\br{G} $.
\end{proposition}

\begin{proof}
Let
$$ G^{\cbr{p}} = \cbr{g^p \st g \in G} \subseteq G^p. $$
Then $ G / \sbr{G, G} $ is abelian, and in abelian groups we have $ g^ph^p = \br{gh}^p $, so $ g^ph^p\br{gh}^{-p} \in \sbr{G, G} $, so $ \sbr{G, G}G^p = \sbr{G, G}G^{\cbr{p}} $. Claim that $ \sbr{G, G} $ is closed. Let $ a_1, \dots, a_d $ be a topological generating set of $ G $. Let
$$ X = \cbr{\sbr{a_1, x_1} \dots \sbr{a_d, x_d} \st x_1, \dots, x_d \in G}. $$
Then $ X $ is closed, since it is the image of a continuous map $ G^d \to G $. So $ X = \overline{X} = \bigcap_{N \triangleleft_\o G} XN $. We show $ X = \sbr{G, G} $. Let $ g \in \sbr{G, G} $. For any $ N \triangleleft_\o G $, $ gN \in \sbr{G / N, G / N} $. Since $ G / N $ is nilpotent,
$$ gN = \sbr{a_1N, x_1N} \dots \sbr{a_dN, x_dN}, \qquad x_iN \in G / N. $$
Then $ g \in XN $ for all $ N \triangleleft_\o G $, so $ g \in \bigcap_N XN = \overline{X} = X $. Thus $ \sbr{G, G}G^{\cbr{p}} $ is the image of $ \sbr{G, G} \times G $ under the continuous function
$$ \function{\sbr{G, G} \times G}{G}{\br{x, g}}{xg^p}, $$
so $ \sbr{G, G}G^{\cbr{p}} $ is closed.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:4.3.1}]
Proof by contradiction. Suppose $ G $ is topologically finitely generated pro-$ p $ and $ K $ is finite index but not open, such that $ \sbr{G : K} $ is as small as possible. Without loss of generality $ K $ is normal. Consider
$$ M = \Phi\br{G}K = \sbr{G, G}G^pK. $$
Then $ G / K $ is a non-trivial $ p $-group. So the image of $ M $ is $ \Phi\br{G / K} = \sbr{G / K, G / K}\br{G / K}^p < G / K $. So $ M $ is proper in $ G $, so $ M = K $, otherwise $ K <_\o M <_\o G $. Hence $ \Phi\br{G} \le K $ is open, so $ K $ is open.
\end{proof}

\pagebreak

\subsection{Hensel's lemma and \texorpdfstring{$ p $}{p}-adic arithmetic}

\lecture{16}{Thursday}{25/02/21}

Previously, there exists $ x $ such that $ \alpha x = 1 $ if and only if $ \alpha \not\equiv 0 \mod p $.

\begin{lemma}
Let $ f\br{X} $ be a polynomial with coefficients in $ \ZZ_p $. Then $ f $ has a root in $ \ZZ_p $ if and only if $ f $ has a root modulo $ p^k $ for all $ k $.
\end{lemma}

\begin{example}
Hensel lifting. Let $ p = 7 $. Then $ 3^2 = 9 \equiv 2 \mod 7 $, so $ X^2 - 2 $ has a root modulo $ 7 $. To get a root modulo $ 49 $, consider $ 3 + 7a $ for $ 0 \le a \le p - 1 = 6 $. Then
$$ \br{3 + 7a}^2 = 3^2 + 7\br{6a} + 49a^2 \equiv 2 + 7\br{1 + 6a} \mod 49. $$
Choose the unique $ a $ such that $ 1 + 6a \equiv 0 \mod 7 $, so $ a = 1 $. Then $ 3 + 7\br{1} = 10 $ is a root of $ X^2 - 2 \mod 49 $, and $ 10^2 = 49\br{2} + 2 $. Now we can repeat. To solve modulo $ 7^3 $,
$$ \br{10 + 49a}^2 = 10^2 + 49\br{20a} + 49^2a^2 \equiv 2 + 49\br{2 + 20a} \mod 7^3, $$
and solve for $ a = 2 $.
\end{example}

\begin{proposition}[Hensel's lemma for square roots]
Let $ p \ne 2 $ be prime. Suppose $ \lambda \in \ZZ_p $ is congruent to a non-zero square $ r_1^2 \mod p $, where $ r_1 \in \ZZ $. Then there is a unique $ \rho \in \ZZ_p $ such that $ \rho^2 = \lambda $ and $ \rho \equiv r_1 \mod p $.
\end{proposition}

\begin{proof}
Construct elements $ r_k \in \ZZ $, unique modulo $ p^k $, such that $ r_k^2 \equiv \lambda \mod p^k $ and $ r_{k + 1} \equiv r_k \mod p^k $. Then $ \br{r_k} $ is Cauchy, so there exists $ \rho \in \ZZ_p $ such that $ r_k \to \rho $ and $ \rho^2 = \lambda $.
\begin{itemize}
\item $ r_1 $ is given.
\item Suppose we have $ r_k $. Consider $ r_k + p^ka $ for $ 0 \le a \le p - 1 $. We have $ r_k^2 = \lambda + p^kb_k $ for $ b_k \in \ZZ_p $. Then
$$ \br{r_k + p^ka}^2 = r_k^2 + 2r_kap^k + p^{2k}a^2 \equiv \lambda + \br{b_k + 2r_ka}p^k \mod p^{k + 1}. $$
Now $ 2r_k \equiv 2r_1 \not\equiv 0 \mod p $, so we can solve $ b_k + 2r_ka \equiv 0 \mod p $ and find $ a_k $ such that $ \br{r_k + p^ka_k}^2 \equiv \lambda \mod p^{k + 1} $. Set $ r_{k + 1} = r_k + p^ka_k $.
\end{itemize}
\end{proof}

\begin{proposition}[Hensel's lemma]
\label{prop:4.4.7}
Let $ f\br{x} $ be a polynomial with coefficients in $ \ZZ_p $. Let $ r \in \ZZ_p $ such that $ f\br{r} \equiv 0 \mod p^k $ for some $ k $ and $ f'\br{r} \not\equiv 0 \mod p $, where $ f' : \sum_n a_nx^n \mapsto \sum_n na_nx^{n - 1} $ is the formal derivative, and $ f'\br{r} $ only depends on $ r \mod p $. There there exists a unique $ \rho \in \ZZ_p $ such that $ f\br{\rho} = 0 $ and $ \rho \equiv r \mod p^k $.
\end{proposition}

\begin{lemma}
For $ r, a \in \ZZ_p $ and $ k \ge 1 $ we have
$$ f\br{r + p^ka} \equiv f\br{r} + p^kaf'\br{r} \mod p^{k + 1}. $$
\end{lemma}

\begin{proof}
It suffices to do $ f\br{x} = x^n $. Then
$$ \br{r + p^ka}^n = r^n + nr^{n - 1}p^ka + \sum_{i = 2}^n \binom{n}{i}p^{ki}a^ir^{n - i}, $$
and $ p^{k + 1} \mid p^{2k} \mid p^{ki} $.
\end{proof}

\begin{proof}[Proof of Proposition \ref{prop:4.4.7}]
Construct $ r_k $ for $ k \ge K $, such that $ f\br{r_k} \equiv 0 \mod p^k $ and $ r_{k + 1} \equiv r_k \mod p^k $, and $ r_{k + 1} $ will be unique modulo $ p^{k + 1} $ with these properties. Then $ \br{r_k} $ is Cauchy and $ r_k \to \rho $, so $ f\br{\rho} = 0 $.
\begin{itemize}
\item $ r_K $ is given.
\item If $ r_k $ is constructed, consider $ r_k + p^ka $ for $ 0 \le a \le p - 1 $. We have $ f\br{r_k} = b_kp^k $ for some $ b_k \in \ZZ_p $. Now
$$ f\br{r_k + p^ka} \equiv f\br{r_k} + p^kaf'\br{r_k} \equiv p^k\br{b_k + af'\br{r_k}} \mod p^{k + 1}. $$
Can solve $ b_k + af'\br{r_k} \equiv 0 \mod p $ since $ f'\br{r_k} \equiv f'\br{r} \not\equiv 0 \mod p $ is invertible modulo $ p $. So set $ a_k $ such that $ b_k + a_kf'\br{r_k} \equiv 0 \mod p $ and set $ r_{k + 1} = r_k + p^ka_k $.
\end{itemize}
\end{proof}

\pagebreak

We can also do Hensel-type things in $ \GL_N \ZZ_p $.

\begin{definition}
Let
$$ \GL_N^{\br{k}} \ZZ_p = \ker \br{\GL_N \ZZ_p \to \GL_N \br{\ZZ / p^k\ZZ}} = \cbr{\I + p^kA \st A \in \Mat_{N \times N} \ZZ_p}, $$
$$ \SL_N^{\br{k}} \ZZ_p = \ker \br{\SL_N \ZZ_p \to \SL_N \br{\ZZ / p^k\ZZ}}. $$
\end{definition}

\begin{proposition}
$ \GL_N^{\br{1}} \ZZ_p $ and $ \SL_N^{\br{1}} \ZZ_p $ are pro-$ p $ groups.
\end{proposition}

\begin{proof}
$ \abs{\GL_N^{\br{1}} \br{\ZZ / p^m\ZZ}} = p^{\br{m - 1}N^2} $, and
$$ \SL_N^{\br{1}} \ZZ_p \le \GL_N^{\br{1}} \ZZ_p = \varprojlim_m \GL_N^{\br{1}} \br{\ZZ / p^m\ZZ}. $$
\end{proof}

\begin{remark}
$ \GL_N \ZZ_p $ and $ \SL_N \ZZ_p $ are not pro-$ p $ groups, since $ \SL_N \br{\ZZ / p\ZZ} $ is not a $ p $-group.
\end{remark}

\begin{proposition}
Let $ p \ne 2 $. The continuous function
$$ \function{\GL_N^{\br{k}} \ZZ_p}{\GL_N^{\br{k + 1}} \ZZ_p}{A}{A^p} $$
maps surjectively for $ k \ge 1 $. Also for $ \SL_N^{\br{k}} \ZZ_p \twoheadrightarrow \SL_N^{\br{k + 1}} \ZZ_p $.
\end{proposition}

\begin{proof}
For $ r \ge 1 $ and $ A $ a matrix over $ \ZZ_p $, we have
$$ \br{\I + p^rA}^p = \I + p^{r + 1}A + \sum_{l = 2}^p p^{rl}\binom{p}{p - l}A^l = \I + p^{r + 1}A + p^{r + 2}B, $$
for some $ B $ which commutes with $ A $, unless $ p = 2 $, $ l = 2 $, and $ r = 1 $. Let $ \I + p^{k + 1}A \in \GL_N^{\br{k + 1}} \ZZ_p $. We show the following inductive statement for $ n \ge 1 $. There exist $ B_n $ and $ E_n $, which are polynomials in $ A $, hence commute with $ A $ and each other, such that
$$ B_{n + 1} \equiv B_n \mod p^n, \qquad \br{\I + p^kB_n}^p = \I + p^{k + 1}A + p^{k + n + 1}E_n. $$
Then $ \br{B_n} $ is Cauchy so $ B_n \to B_\infty \in \Mat_{N \times N} \ZZ_p $, and $ \br{\I + p^kB_\infty}^p = \I + p^{k + 1}A $.
\begin{itemize}
\item Start with $ B_1 = A $. Then
$$ \br{\I + p^kA}^p = \I + p^{k + 1}A + p^{k + 2}E_1. $$
\item Assume $ B_n $ and $ E_n $ are given. Set $ B_{n + 1} = B_n - p^nE_n $. Then
\begin{align*}
\br{\I + p^kB_{n + 1}}^p
& = \br{\I + p^kB_n - p^{k + n}E_n}^p
= \br{\I + p^kB_n}^p - p\br{\I + p^kB_n}^{p - 1}p^{k + n}E_n + \dots \\
& = \I + p^{k + 1}A + p^{k + n + 1}E_n - p^{k + n + 1}E_n + \dots
= \I + p^{k + 1}A + p^{k + n + 2}E_{n + 1}.
\end{align*}
\end{itemize}
\end{proof}

\begin{proposition}[non-examinable]
$$ \Phi\br{\GL_N^{\br{k}} \ZZ_p} = \GL_N^{\br{k + 1}} \ZZ_p, \qquad \GL_N^{\br{k}} \ZZ_p / \GL_N^{\br{k + 1}} \ZZ_p \cong \FF_p^{N^2}, $$
a \textbf{uniform pro-$ p $ group}, with isomorphisms
$$ \function{\GL_N^{\br{k}} \ZZ_p / \GL_N^{\br{k + 1}} \ZZ_p}{\GL_N^{\br{k + 1}} \ZZ_p / \GL_N^{\br{k + 2}} \ZZ_p}{x}{x^p}. $$
\end{proposition}

\begin{theorem}[non-examinable]
Let $ H $ be any closed subgroup of $ \GL_N^{\br{1}} \ZZ_p $. Then $ \d\br{H} \le N^2 $.
\end{theorem}

Compare to a free group as a subgroup of $ \SL_2 \ZZ $.

\begin{theorem}[non-examinable]
If $ G $ is a pro-$ p $ group, such that $ \d\br{H} \le R $ for all $ H \le_\c G $, then
$$ G / \ZZ_p^a \hookrightarrow \GL_R \ZZ_p \times F, $$
where $ F $ is finite.
\end{theorem}

\pagebreak

\section{Cohomology of groups}

\lecture{17}{Saturday}{27/02/21}

In the homology of spaces, a simplicial complex $ X $ gives a family of abelian groups $ \H_n\br{X} $ with $ \ZZ $ coefficients. In the cohomology of groups, a group $ G $ gives a family of abelian groups $ \H^n\br{G, M} $ with $ M $ coefficients.

\subsection{Group rings and chain complexes}

Let $ G $ be an abstract group.

\begin{definition}
The \textbf{group ring} of $ G $ is a ring $ \ZZ G $ defined as follows. The additive group of $ \ZZ G $ is the free abelian group with basis $ \cbr{g \st g \in G} $, so an element is a finite formal sum $ \sum_{g \in G} n_gg $ for $ n_g \in \ZZ $. The ring multiplication is defined on the basis by $ g \cdot h = gh $ and extended bilinearly.
\end{definition}

Thus $ \ZZ G $ is non-commutative unless $ G $ is abelian, and has an identity $ e $, the multiplicative identity in $ \ZZ\sbr{G} $, usually called $ 1 $.

\begin{example}
If $ e $ is the identity of $ G $, then $ \br{e + g}\br{e - 2h} = e + g - 2h - 2gh $.
\end{example}

\begin{definition}
A \textbf{left $ G $-module}, or \textbf{$ \ZZ G $-module}, is an abelian group $ M $ equipped with a $ G $-action, a function
$$ \function{\ZZ G \times M}{M}{\br{r, m}}{r \cdot m}, $$
such that for all $ r_1, r_2 \in \ZZ G $ and for all $ m_1, m_2 \in M $,
$$ r_1 \cdot \br{m_1 + m_2} = r_1 \cdot m_1 + r_1 \cdot m_2, \qquad \br{r_1 + r_2} \cdot m_1 = r_1 \cdot m_1 + r_2 \cdot m_1, \qquad \br{r_1r_2} \cdot m_1 = r_1 \cdot \br{r_2 \cdot m}. $$
A \textbf{trivial module}, or a \textbf{module with trivial $ G $-action}, is a module such that $ g \cdot m = m $ for all $ g \in G $ and for all $ m \in M $.
\end{definition}

\begin{definition}
Let $ M_1 $ and $ M_2 $ be $ G $-modules. A \textbf{morphism of $ G $-modules}, or \textbf{$ G $-linear map}, is an abelian group homomorphism $ \alpha : M_1 \to M_2 $ such that $ \alpha\br{r \cdot m} = r \cdot \alpha\br{m} $ for all $ r \in \ZZ G $ and $ m \in M $.
\end{definition}

Note that only need to check this for basis elements $ r = g $.

\begin{definition}
Let $ M $ and $ N $ be $ G $-modules. Define the \textbf{Hom-group}
$$ \Hom_G\br{M, N} = \cbr{\text{$ G $-linear maps} \ \alpha : M \to N}, $$
with abelian group structure $ \br{\alpha + \beta}\br{m} = \alpha\br{m} + \beta\br{m} $. If $ \Hom\br{M, N} $, this means $ \Hom_1\br{M, N} $, the abelian group homomorphisms.
\end{definition}

\begin{definition}
If $ f : M_1 \to M_2 $ is a morphism of $ G $-modules then we have a \textbf{dual map}
$$ \function[f^*]{\Hom_G\br{M_2, N}}{\Hom_G\br{M_1, N}}{\alpha}{\alpha \circ f}. $$
Also, we have an \textbf{induced map}
$$ \function[f_*]{\Hom_G\br{N, M_1}}{\Hom_G\br{N, M_2}}{\beta}{f \circ \beta}. $$
\end{definition}

Thus
$$
\begin{tikzcd}
& N \arrow{dl}[swap]{\beta} \arrow[dashed]{dr}{f_*\beta} & \\
M_1 \arrow{rr}{f} \arrow[dashed]{dr}[swap]{f^*\alpha} & & M_2 \arrow{dl}{\alpha} \\
& N &
\end{tikzcd}.
$$
Submodules and quotients are the obvious things.

\begin{definition}
Let $ M $ be a $ G $-module. Then a \textbf{$ G $-submodule} is a subgroup $ N \le M $ such that $ g \cdot n \in N $ for all $ g \in G $ and $ n \in N $. If $ N $ is a submodule, we have a \textbf{quotient module} $ M / N $, the abelian group $ M / N $, with the $ G $-action $ g \cdot \br{m + N} = g \cdot m + N $.
\end{definition}

\pagebreak

\begin{definition}
A \textbf{chain complex of $ G $-modules} $ \br{M_n} = \br{M_n, d_n}_{t \le n \le s} $ is a sequence of $ G $-modules
$$ M_s \xrightarrow{d_s} M_{s - 1} \to \dots \to M_{t + 1} \xrightarrow{d_{t + 1}} M_t, $$
where $ s = \infty $ or $ t = -\infty $ are possible, such that $ d_n \circ d_{n + 1} = 0 $, so $ \im d_{n + 1} \le \ker d_n $. The complex is \textbf{exact at $ M_n $} if $ \im d_{n + 1} = \ker d_n $. The complex is \textbf{exact} if it is exact at $ M_n $ for all $ t < n < s $. The \textbf{homology} of the chain complex is the family of $ G $-modules
$$ \H_n\br{M_\bullet} =
\begin{cases}
\ker d_s & n = s \\
\ker d_n / \im d_{n + 1} & t < n < s \\
M_t / \im d_{t + 1} & n = t
\end{cases}.
$$
\end{definition}

\begin{example}
\hfill
\begin{itemize}
\item The complex
$$ 0 \to M_1 \xrightarrow{\alpha} M_2 $$
is exact if and only if $ \alpha $ is injective.
\item The complex
$$ M_1 \xrightarrow{\alpha} M_2 \to 0 $$
is exact if and only if $ \alpha $ is surjective.
\item A \textbf{short exact sequence} is an exact sequence
$$ 0 \to M_1 \xrightarrow{\alpha} M_2 \xrightarrow{\beta} M_3 \to 0, $$
that is $ \alpha $ is injective, $ \beta $ is surjective, and $ \ker \beta = \im \alpha $, such as
$$ 0 \to N \to M \to M / N \to 0. $$
\end{itemize}
\end{example}

\begin{definition}
Given a set $ X $, the \textbf{free $ \ZZ G $-module on $ X $}, denoted $ \ZZ G\cbr{X} $, is set of finite formal sums $ \sum_{x \in X} r_xx $ for $ r_x \in \ZZ G $. The $ G $-action is the obvious one $ g \cdot \br{\sum_x r_xx} = \sum_x \br{gr_x}x $.
\end{definition}

If $ X $ is finite, $ \ZZ G\cbr{X} \cong \br{\ZZ G}^{\abs{X}} $.

\begin{definition}
A $ G $-module $ P $ is \textbf{projective} if, for every surjective $ G $-linear map $ \alpha : M_1 \twoheadrightarrow M_2 $ and every $ G $-linear $ \beta : P \to M_2 $ there exists a $ G $-linear $ \overline{\beta} : P \to M_1 $ such that $ \alpha \circ \overline{\beta} = \beta $, so
$$
\begin{tikzcd}
& P \arrow[dashed]{dl}[swap]{\overline{\beta}} \arrow{d}{\beta} & \\
M_1 \arrow[twoheadrightarrow]{r}[swap]{\alpha} & M_2 \arrow{r} & 0
\end{tikzcd}.
$$
\end{definition}

\begin{proposition}
Free modules are projective.
\end{proposition}

\begin{proof}
Let $ \ZZ G\cbr{X} $ be a free module and take $ \alpha : M_1 \twoheadrightarrow M_2 $ and $ \beta : \ZZ G\cbr{X} \to M_2 $. For each $ x \in X $ choose $ m_x \in M_1 $ such that $ \alpha\br{m_x} = \beta\br{x} $, since $ \alpha $ is surjective. Define
$$ \function[\overline{\beta}]{\ZZ G\cbr{X}}{M_1}{x}{m_x}, $$
and extend linearly, so $ \overline{\beta}\br{\sum_{x \in X} r_xx} = \sum_{x \in X} r_xm_x $.
\end{proof}

\begin{definition}
A \textbf{projective resolution of $ \ZZ $ by $ \ZZ G $-modules} is an exact sequence
$$ \dots \xrightarrow{d_2} F_1 \xrightarrow{d_1} F_0 \xrightarrow{d_0} \ZZ \to 0, $$
where each $ F_n $ is projective, and $ \ZZ $ has trivial $ G $-action.
\end{definition}

\pagebreak

\begin{definition}
Take a projective resolution as above. Let $ M $ be a $ G $-module. Apply the functor $ \Hom_G\br{-, M} $ to get a sequence
$$ \dots \xleftarrow{d^2 = d_2^*} \Hom_G\br{F_1, M} \xleftarrow{d^1 = d_1^*} \Hom_G\br{F_0, M}, $$
where $ d^n = d_n^* $ is the dual map, so $ C_n = \Hom_G\br{F_{-n}, M} $ for $ n \le 0 $ is a chain complex. The \textbf{$ n $-th cohomology group of $ G $ with coefficients in $ M $} is
$$ \H^n\br{G, M} =
\begin{cases}
\ker d^1 & n = 0 \\
\ker d^{n + 1} / \im d^n & n > 0
\end{cases}.
$$
Elements of $ \ker d^{n + 1} $ are called \textbf{$ n $-cocycles}. Elements of $ \im d^n $ are called \textbf{$ n $-coboundaries}.
\end{definition}

\lecture{18}{Tuesday}{02/03/21}

Where do these come from? From topology. Consider a connected simplicial complex $ X $ whose universal cover $ \widetilde{X} $ is contractible, with $ \pi_1\br{X} = G $. Let $ X_n $ be the set of $ n $-simplices of $ X $. Then $ G $ acts on $ \widetilde{X} $ with quotient $ X $, and without fixing any points. Therefore the $ n $-simplices of $ \widetilde{X} $ are in bijection with $ G \times X_n $. The simplicial chain complex of $ \widetilde{X} $ is of the form
$$ \dots \xrightarrow{d_2} \ZZ G\cbr{X_1} \xrightarrow{d_1} \ZZ G\cbr{X_0} \to \ZZ \to 0. $$
Since $ \widetilde{X} $ is contractible, $ \H_n\br{\widetilde{X}} = 0 $ for $ n > 0 $, so exact at $ \ZZ G\cbr{X_n} $ for $ n > 0 $, and $ \H_0\br{\widetilde{X}} \cong \ZZ $. So we get a free resolution of $ \ZZ $. Applying $ \Hom_G\br{-, M} $ gives $ \Hom_G\br{\ZZ G\cbr{X_n}, M} $. Take the case $ M = \ZZ $. Then $ \Hom_G\br{\ZZ G\cbr{X_n}, M} \cong \Hom\br{\ZZ\cbr{X_n}, \ZZ} $, so
$$ \dots \gets \Hom\br{\ZZ\cbr{X_1}, \ZZ} \gets \Hom\br{\ZZ\cbr{X_0}, \ZZ}, $$
which gives $ \H^n\br{G, \ZZ} $. The dual is
$$ \dots \to \ZZ\cbr{X_1} \to \ZZ\cbr{X_0}, $$
which gives $ \H_n\br{X} $.

\begin{example}
Let $ G = \ZZ = \abr{t} $. Consider the sequence
$$ 0 \to \ZZ G \xrightarrow{d_1} \ZZ G \xrightarrow{\epsilon} \ZZ \to 0, $$
where $ d_1\br{x} = x\br{t - 1} $ and
$$ \epsilon\br{\sum_{g \in G} n_gg} = \sum_{g \in G} n_g $$
is the \textbf{augmentation map}. Claim that this is a free resolution of $ \ZZ $.
\begin{itemize}
\item $ \epsilon $ is obviously surjective.
\item $ \ker \epsilon \ge \im d_1 $. If $ x = \sum_g n_gg $, then
$$ \epsilon\br{d_1\br{x}} = \epsilon\br{x\br{t - 1}} = \epsilon\br{xt} - \epsilon\br{x} = \epsilon\br{\sum_g n_g\br{gt}} - \epsilon\br{\sum_g n_gg} = \sum_g n_g - \sum_g n_g = 0. $$
\item $ \ker \epsilon \le \im d_1 $. Let $ x = \sum_g n_gg $ such that $ \sum_g n_g = 0 $. Relabel each $ g = t^k $ for some $ k $, so rewriting,
\begin{align*}
x
= \sum_k n_kt^k
& = n_Lt^L + \dots + n_Kt^K \\
& = n_Lt^{L - 1}\br{t - 1} + \dots + \br{n_L + \dots + n_{K - 2}}t^{K - 1}\br{t - 1} + \br{n_L + \dots + n_K}t^K \\
& = \br{n_Lt^{L - 1} + \dots + \br{n_L + \dots + n_{K - 2}}t^{K - 1}}\br{t - 1}
\in \im d_1.
\end{align*}
\item $ d_1 $ is injective. Let $ x = \sum_k n_kt^k = n_Lt^L + \dots $ for $ n_L \ne 0 $. Then $ x\br{t - 1} $ has highest coefficient $ n_Lt^{L + 1} \ne 0 $.
\end{itemize}

\pagebreak

Let $ M $ be a $ G $-module. Then
$$
\begin{tikzcd}
0 & \Hom_G\br{\ZZ G, M} \arrow{l} \arrow{d}{\sim}[swap]{\iota} & \Hom_G\br{\ZZ G, M} \arrow{l}[swap]{d^1} \arrow{d}{\iota}[swap]{\sim} \\
0 & M \arrow{l} & M \arrow{l}
\end{tikzcd},
$$
where $ \iota\br{\phi} = \phi\br{1} $. Let $ m \in M $, and let $ \phi \in \Hom_G\br{\ZZ G, M} $ such that $ \iota\br{\phi} = \phi\br{1} = m $. Then
$$ \iota\br{d^1\br{\phi}} = d^1\br{\phi}\br{1} = \phi\br{d_1\br{1}} = \phi\br{t - 1} = \br{t - 1}\phi\br{1} = \br{t - 1}m. $$
Thus
\begin{itemize}
\item $ \H^0\br{G, M} = \cbr{m \in M \st tm = m} = M^G $ are the \textbf{invariants}, the elements on which $ G $ acts trivially,
\item $ \H^1\br{G, M} = M / \br{t - 1}M = M_G $ are the \textbf{coinvariants}, and
\item $ \H^n\br{G, M} = 0 $ for $ n \ge 2 $.
\end{itemize}
\end{example}

Let $ \alpha : \ZZ G\cbr{X} \to \ZZ G\cbr{Y} $ be $ G $-linear for $ X = \cbr{x_1, \dots, x_n} $ and $ Y = \cbr{y_1, \dots, y_m} $ finite, so $ \ZZ G\cbr{X} \cong \br{\ZZ G}^n $ and $ \ZZ G\cbr{Y} \cong \br{\ZZ G}^m $. Then $ \alpha $ can be written as a matrix multiplication
$$ \alpha\br{x_i} = \sum_j a_{ij}y_j, \qquad a_{ij} \in \ZZ G. $$
If $ \onebythree{r_1}{\dots}{r_n} $ is a row vector corresponding to $ \sum_i r_ix_i $, then
$$ \alpha\br{\onebythree{r_1}{\dots}{r_n}} = \onebythree{\displaystyle\sum_i r_ia_{i1}}{\dots}{\displaystyle\sum_i r_ia_{im}} = \onebythree{r_1}{\dots}{r_n}\threebythree{a_{11}}{\dots}{a_{1m}}{\vdots}{\ddots}{\vdots}{a_{n1}}{\dots}{a_{nm}}. $$
Now if $ M $ is a $ G $-module, we have
$$ \function[\iota_X]{\Hom_G\br{\ZZ G\cbr{X}, M}}{M^n}{\psi}{\threebyone{\psi\br{x_1}}{\vdots}{\psi\br{x_n}}}, \qquad \function[\iota_Y]{\Hom_G\br{\ZZ G\cbr{Y}, M}}{M^m}{\phi}{\threebyone{\phi\br{y_1}}{\vdots}{\phi\br{y_m}}}. $$
Then
$$
\begin{tikzcd}
\Hom_G\br{\ZZ G\cbr{X}, M} \arrow{d}{\sim}[swap]{\iota_X} & \Hom_G\br{\ZZ G\cbr{Y}, M} \arrow{l}[swap]{\alpha^*} \arrow{d}{\iota_Y}[swap]{\sim} \\
M^n & M^m \arrow{l}{\widetilde{\alpha}}
\end{tikzcd}.
$$
Let $ \onebythree{b_1}{\dots}{b_m}^\intercal \in M^m $, and let $ \phi \in \Hom_G\br{\ZZ G\cbr{Y}, M} $ such that $ \iota_Y\br{\phi} = \onebythree{b_1}{\dots}{b_m}^\intercal $, so $ \phi\br{y_i} = b_i $. Then
\begin{align*}
\widetilde{\alpha}\br{\threebyone{b_1}{\vdots}{b_m}}
& = \iota_X\br{\alpha^*\br{\phi}}
= \threebyone{\alpha^*\br{\phi}\br{x_1}}{\vdots}{\alpha^*\br{\phi}\br{x_n}}
= \threebyone{\phi\br{\alpha\br{x_1}}}{\vdots}{\phi\br{\alpha\br{x_n}}}
= \threebyone{\phi\br{\displaystyle\sum_j a_{1j}y_j}}{\vdots}{\phi\br{\displaystyle\sum_j a_{nj}y_j}} \\
& = \threebyone{\displaystyle\sum_j a_{1j}\phi\br{y_j}}{\vdots}{\displaystyle\sum_j a_{nj}\phi\br{y_j}}
= \threebyone{\displaystyle\sum_j a_{1j}b_j}{\vdots}{\displaystyle\sum_j a_{nj}b_j}
= \threebythree{a_{11}}{\dots}{a_{1m}}{\vdots}{\ddots}{\vdots}{a_{n1}}{\dots}{a_{nm}}\threebyone{b_1}{\vdots}{b_m}.
\end{align*}

\pagebreak

\begin{proposition}
Let $ G $ be a finitely generated free group. If $ n \ge 2 $ then $ \H^n\br{G, M} = 0 $ for all $ G $-modules $ M $.
\end{proposition}

\begin{proof}
Let $ X $ be a wedge of circles with $ \pi_1\br{X} = G $. Then $ \widetilde{X} $ is a tree, so contractible, which gives a free resolution of $ G $
$$ 0 \to \ZZ G\cbr{X_1} \to \ZZ G\cbr{X_0} \to \ZZ \to 0, $$
where $ \abs{X_0} = 1 $ and $ \abs{X_1} = \rk G $. Thus $ \H^n\br{G, M} = 0 $ for all $ n \ge 2 $.
\end{proof}

\begin{definition}
A group $ G $ has \textbf{cohomological dimension} $ \cd G = n $ if $ \H^m\br{G, M} = 0 $ for all $ m > n $ and all $ G $-modules $ M $ but there exists $ M $ such that $ \H^n\br{G, M} \ne 0 $. If no $ n $ exists then $ \cd G = \infty $.
\end{definition}

Free groups have cohomological dimension one. By Stallings, groups with cohomological dimension one are free.

\begin{definition}
Let $ \br{A_n, \alpha_n} $ and $ \br{B_n, \beta_n} $ be chain complexes. A \textbf{chain map} $ \br{f_n} $ is a sequence of $ G $-linear maps $ f_n : A_n \to B_n $ such that $ f_{n - 1} \circ \alpha_n = \beta_n \circ f_n $, so
$$
\begin{tikzcd}
A_n \arrow{r}{\alpha_n} \arrow{d}[swap]{f_n} & A_{n - 1} \arrow{d}{f_{n - 1}} \\
B_n \arrow{r}[swap]{\beta_n} & B_{n - 1}
\end{tikzcd}
$$
commutes.
\end{definition}

\begin{proposition}
If $ \br{f_n} $ is a chain map, then $ \br{f_n} $ gives induced maps
$$ \br{f_*}_n : \H_n\br{A_\bullet} \to \H_n\br{B_\bullet}. $$
These maps are functorial, so if $ \br{g_n} : \br{B_n} \to \br{C_n} $ then $ \br{g_*}_n \circ \br{f_*}_n = \br{\br{g \circ f}_*}_n : \H_n\br{A_\bullet} \to \H_n\br{C_\bullet} $.
\end{proposition}

\begin{proof}
Take $ x \in \ker \alpha_n $. Define
$$ \br{f_*}_n\br{\sbr{x}} = \sbr{f_n\br{x}}, \qquad \sbr{x} = x + \im \alpha_{n + 1} \in \H_n\br{A_\bullet}. $$
Then $ \beta_n\br{f_n\br{x}} = f_{n - 1}\br{\alpha_n\br{x}} = 0 $, so $ f_n\br{x} \in \ker \beta_n $. The choice of $ x $ does not matter, since if $ x' = x + \alpha_{n + 1}\br{y} $, then
$$ f_n\br{x'} + \im \beta_{n + 1} = f_n\br{x} + f_n\br{\alpha_{n + 1}\br{y}} + \im \beta_{n + 1} = f_n\br{x} + \beta_{n + 1}\br{f_{n + 1}\br{y}} + \im \beta_{n + 1} = f_n\br{x} + \im \beta_{n + 1}. $$
\end{proof}

\begin{corollary}
Let $ f : M \to N $ be a map of $ G $-modules. Then we get maps
$$ \function[\br{f_*}_n]{\Hom_G\br{F_n, M}}{\Hom_G\br{F_n, N}}{\phi}{f \circ \phi}. $$
These are chain maps, so we have
$$ \br{f_*}_n : \H^n\br{G, M} \to \H^n\br{G, N}. $$
\end{corollary}

\lecture{19}{Thursday}{04/03/21}

\begin{lemma}[Snake lemma]
If
$$ 0 \to A_\bullet \xrightarrow{f_\bullet} B_\bullet \xrightarrow{g_\bullet} C_\bullet \to 0 $$
is a short exact sequence of chain complexes, where $ f_\bullet $ and $ g_\bullet $ are chain maps and each
$$ 0 \to A_n \to B_n \to C_n \to 0 $$
is exact. Then there exists $ \delta_n : \H_{n + 1}\br{C_\bullet} \to \H_n\br{A_\bullet} $ such that
$$ \dots \to \H_{n + 1}\br{C_\bullet} \xrightarrow{\delta_n} \H_n\br{A_\bullet} \xrightarrow{\br{f_*}_n} \H_n\br{B_\bullet} \xrightarrow{\br{g_*}_n} \H_n\br{C_\bullet} \to \dots. $$
\end{lemma}

\begin{proof}[Proof (non-examinable)]
See algebraic topology.
\end{proof}

\pagebreak

\begin{proposition}
\label{prop:5.1.28}
Let
$$ 0 \to M_1 \xrightarrow{\alpha} M_2 \xrightarrow{\beta} M_3 \to 0 $$
be a short exact sequence of $ G $-modules. There is a \textbf{long exact sequence}
$$ \dots \to \H^n\br{G, M_1} \xrightarrow{\br{\alpha_*}_n} \H^n\br{G, M_2} \xrightarrow{\br{\beta_*}_n} \H^n\br{G, M_3} \xrightarrow{\delta} \H^{n + 1}\br{G, M_1} \to \dots, $$
where $ \delta $ are \textbf{connecting homomorphisms}.
\end{proposition}

\begin{proof}
Apply the snake lemma to
$$ 0 \to \Hom_G\br{F_\bullet, M_1} \xrightarrow{\br{\alpha_*}_\bullet} \Hom_G\br{F_\bullet, M_2} \xrightarrow{\br{\beta_*}_\bullet} \Hom_G\br{F_\bullet, M_3} \to 0, $$
where $ F_\bullet $ is a projective resolution of $ \ZZ $ by $ G $-modules. It remains to prove
$$ 0 \to \Hom_G\br{F_n, M_1} \xrightarrow{\br{\alpha_*}_n} \Hom_G\br{F_n, M_2} \xrightarrow{\br{\beta_*}_n} \Hom_G\br{F_n, M_3} \to 0 $$
is exact for each $ n $.
\begin{itemize}
\item $ \ker \br{\alpha_*}_n = 0 $. Let $ \phi : F_n \to M_1 $. If $ \br{\alpha_*}_n\br{\phi} = 0 $ then $ 0 = \alpha \circ \phi $, so for all $ x \in F_n $, $ 0 = \alpha\br{\phi\br{x}} $, so $ 0 = \phi\br{x} $ for all $ x $, so $ \phi = 0 $.
\item $ \ker \br{\beta_*}_n = \im \br{\alpha_*}_n $. Let $ \phi : F_n \to M_2 $ be in the kernel of $ \br{\beta_*}_n $. Then $ \beta\br{\phi\br{x}} = 0 $ for all $ x \in F_n $, so $ \phi\br{x} \in \ker \beta = \im \alpha $, so there exists a unique $ y_x \in M_1 $ such that $ \alpha\br{y_x} = \phi\br{x} $. Declare
$$ \function[\psi]{F_n}{M_1}{x}{y_x}. $$
Then $ \br{\alpha_*}_n\br{\psi} = \phi $, and $ \psi $ is $ G $-linear follows from uniqueness of $ y_x $, since $ \alpha\br{gy_x} = g\alpha\br{y_x} = g\phi\br{x} = \phi\br{gx} $ implies that $ gy_x = y_{gx} $.
\item $ \br{\beta_*}_n $ is surjective. Exactly the definition of $ F_n $ projective.
\end{itemize}
\end{proof}

\subsection{Different projective resolutions}

\begin{theorem}
\label{thm:5.2.1}
The definition of $ \H^n\br{G, M} $ is independent of the choice of projective resolution.
\end{theorem}

\begin{proof}[Proof (non-examinable)]
Take two projective resolutions $ \br{F_n, d_n} $ and $ \br{F_n', d_n'} $ of $ \ZZ $ by $ G $-modules. Suppose we construct chain maps
\begin{itemize}
\item $ f_n : F_n \to F_n' $ such that $ f_{n - 1} \circ d_n = d_n' \circ f_n $,
\item $ g_n : F_n' \to F_n $ such that $ g_{n - 1} \circ d_n' = d_n \circ g_n $,
\item $ s_n : F_n \to F_{n + 1} $ such that $ d_{n + 1} \circ s_n + s_{n - 1} \circ d_n = g_n \circ f_n - \id $, and
\item $ s_n' : F_n' \to F_{n + 1}' $ such that $ d_{n + 1}' \circ s_n' + s_{n - 1}' \circ d_n' = f_n \circ g_n - \id $.
\end{itemize}
These maps prove Theorem \ref{thm:5.2.1}. Take a $ G $-module $ M $. Chain maps $ \br{f_n} $ and $ \br{g_n} $ give homomorphisms $ f_n^* : \Hom_G\br{F_n', M} \to \Hom_G\br{F_n, M} $, which give homomorphisms $ f_n^* : \H_{F_n'}^n\br{G, M} \to \H_{F_n}^n\br{G, M} $. Take $ \phi : F_n \to M $ such that $ \phi \in \ker d^{n + 1} $. Then
\begin{align*}
f_n^*\br{g_n^*\br{\phi}}
& = \phi \circ g_n \circ f_n
= \phi \circ \br{\id + d_{n + 1} \circ s_n + s_{n - 1} \circ d_n}
= \phi + \phi \circ d_{n + 1} \circ s_n + \phi \circ s_{n - 1} \circ d_n \\
& = \phi + s_n^*\br{d^{n + 1}\br{\phi}} + d^n\br{s_{n - 1}^*\br{\phi}}
= \phi + d^n\br{s_{n - 1}^*\br{\phi}}
\in \phi + \im d^n.
\end{align*}
So $ f_n^*\br{g_n^*\br{\phi + \im d^n}} = \phi + \im d^n $, that is $ f_n^* \circ g_n^* = \id $, on cohomology.

\pagebreak

Construct $ f_n $, inductively.
\begin{itemize}
\item Start with the identity $ f_{-1} : \ZZ \to \ZZ $ and $ f_{-2} : 0 \to 0 $.
\item Suppose we have $ f_n $ and $ f_{n - 1} $. Build $ f_{n + 1} $. Since $ d_n' \circ f_n \circ d_{n + 1} = f_{n - 1} \circ d_n \circ d_{n + 1} = 0 $, there exists $ f_{n + 1} : F_{n + 1} \to F_{n + 1}' $ such that $ d_{n + 1}' \circ f_{n + 1} = f_n \circ d_{n + 1} $, so
$$
\begin{tikzcd}
& F_{n + 1} \arrow{r}{d_{n + 1}} \arrow[dashed]{dl}[swap]{f_{n + 1}} \arrow{d}{f_n \circ d_{n + 1}} & F_n \arrow{r}{d_n} \arrow{d}{f_n} & F_{n - 1} \arrow{d}{f_{n - 1}} \\
F_{n + 1}' \arrow[twoheadrightarrow]{r}[swap]{d_{n + 1}'} & \ker d_n' = \im d_{n + 1}' \arrow[subset]{r} & F_n' \arrow{r}[swap]{d_n'} & F_{n - 1}'
\end{tikzcd}.
$$
\end{itemize}
Construct $ s_n $ such that $ d_{n + 1} \circ s_n + s_{n - 1} \circ d_n = g_n \circ f_n - \id = h_n $.
\begin{itemize}
\item Start with the zero map $ s_{-1} : \ZZ \to F_0 $.
\item Assume $ s_{n - 1} $ and $ s_{n - 2} $ are constructed. Define $ t_n = h_n - s_{n - 1} \circ d_n $. Since
$$ d_n \circ t_n = d_n \circ h_n - d_n \circ s_{n - 1} \circ d_n = h_{n - 1} \circ d_n - \br{-s_{n - 2} \circ d_{n - 1} + h_{n - 1}} \circ d_n = s_{n - 2} \circ d_{n - 1} \circ d_n = 0, $$
there exists $ s_n $ such that $ d_{n + 1} \circ s_n = t_n = h_n - s_{n - 1} \circ d_n $, so
$$
\begin{tikzcd}
& F_n \arrow{rr}{d_n} \arrow[dashed]{dl}[swap]{s_n} \arrow{d}{t_n} \arrow{dr}{h_n} & & F_{n - 1} \arrow{r}{d_{n - 1}} \arrow{dl}[swap]{s_{n - 1}} \arrow{d}[swap]{h_{n - 1}} & F_{n - 2} \arrow{dl}[swap]{s_{n - 2}} \arrow{d}[swap]{h_{n - 2}} \\
F_{n + 1} \arrow[twoheadrightarrow]{r}[swap]{d_{n + 1}} & \ker d_n = \im d_{n + 1} \arrow[subset]{r} & F_n \arrow{r}[swap]{d_n} & F_{n - 1} \arrow{r}[swap]{d_{n - 1}} & F_{n - 2}
\end{tikzcd}.
$$
\end{itemize}
\end{proof}

\begin{definition}
Let
$$ G^{\br{n}} = \cbr{\sbr{g_1 \mid \dots \mid g_n} \st g_1, \dots, g_n \in G}, \qquad G^{\br{0}} = \cbr{\sbr{}}. $$
The \textbf{bar resolution} is $ \F_n = \ZZ G\cbr{G^{\br{n}}} $, the free module with basis $ G^{\br{n}} $, with
$$ \function[\d_n]{\F_n}{\F_{n - 1}}{\sbr{g_1 \mid \dots \mid g_n}}{
\begin{array}{rl}
& g_1\sbr{g_2 \mid \dots \mid g_n} \\
- & \sbr{g_1g_2 \mid \dots \mid g_n} \\
+ & \dots \\
+ & \br{-1}^{n - 1}\sbr{g_1 \mid \dots \mid g_{n - 1}g_n} \\
+ & \br{-1}^n\sbr{g_1 \mid \dots \mid g_{n - 1}}
\end{array}
}, $$
and the augmentation map
$$ \function[\epsilon]{\F_0 = \ZZ G\cbr{\sbr{}}}{\ZZ}{g\sbr{}}{1}. $$
\end{definition}

\begin{fact}
This is a chain complex, so $ \d_{n - 1} \circ \d_n = 0 $.
\end{fact}

\begin{proposition}
The bar resolution is exact.
\end{proposition}

\begin{proof}[Proof (non-examinable)]
Forget the $ G $-action. Then $ \F_n $ is free abelian on the set $ G \times G^{\br{n}} = \cbr{g\sbr{g_1 \mid \dots \mid g_n}} $. Define abelian group homomorphisms
$$ \function[s_n]{\F_n}{\F_{n + 1}}{g\sbr{g_1 \mid \dots \mid g_n}}{\sbr{g \mid g_1 \mid \dots \mid g_{n + 1}}}. $$
By a calculation, $ \d_{n + 1} \circ s_n + s_{n - 1} \circ \d_n = \id_{\F_n} $. If $ x \in \ker \d_n $, then
$$ x = \id\br{x} = \d_{n + 1}\br{s_n\br{x}} + s_{n - 1}\br{\d_n\br{x}} = \d_{n + 1}\br{s_n\br{x}} \in \im \d_{n + 1}, $$
so $ \ker \d_n = \im \d_{n + 1} $.
\end{proof}

\pagebreak

Let $ M $ be a $ G $-module. The \textbf{cochain group} is
$$ \C^n\br{G, M} = \cbr{\text{functions} \ \phi : G^n \to M} \cong \Hom_G\br{\F_n, M}. $$
The dual of the $ \d_n $ in the bar resolution is
$$ \function[\d^n]{\C^{n - 1}\br{G, M}}{\C^n\br{G, M}}{\phi}{\br{\br{g_1, \dots, g_n} \mapsto
\begin{array}{rl}
& g_1\phi\br{g_2, \dots, g_n} \\
- & \phi\br{g_1g_2, \dots, g_n} \\
+ & \dots \\
+ & \br{-1}^{n - 1}\phi\br{g_1, \dots, g_{n - 1}g_n} \\
+ & \br{-1}^n\phi\br{g_1, \dots, g_{n - 1}}
\end{array}
}}. $$
The \textbf{group of $ n $-cocycles} is
$$ \Z^n\br{G, M} = \ker \d^{n + 1} \le \C^n\br{G, M}. $$
The \textbf{group of $ n $-coboundaries} is
$$ \B^n\br{G, M} = \im \d^n \le \C^n\br{G, M}. $$
Then
$$ \H^n\br{G, M} = \Z^n\br{G, M} / \B^n\br{G, M}. $$

\lecture{20}{Saturday}{06/03/21}

\begin{corollary}
Let $ G $ be a group and $ M $ a $ G $-module. Then
$$ \H^0\br{G, M} = \Z^0\br{G, M} = \ker \d^1 = \cbr{m \in M \st \forall g, \ gm = m} = M^G, $$
the invariants. A function $ \phi : G \to M $ is a \textbf{crossed homomorphism} if $ \phi\br{gh} = g\phi\br{h} + \phi\br{g} $, and a \textbf{principal crossed homomorphism} if $ \phi\br{g} = gm - m $ for some $ m \in M $. Then
$$ \H^1\br{G, M} = \cbr{\text{crossed homomorphisms}} / \cbr{\text{principal crossed homomorphisms}}, $$
which is $ \Hom\br{G, M} $ if $ M $ is trivial.
\end{corollary}

\begin{proof}
Take $ \phi \in \C^0\br{G, M} $ such that $ \phi\br{1} = m $. Then
$$ \d^1\br{\phi}\br{g} = g\phi\br{1} - \phi\br{1} = gm - m. $$
Let $ \phi \in \C^1\br{G, M} $. Then
$$ \d^2\br{\phi}\br{g, h} = g\phi\br{h} - \phi\br{gh} + \phi\br{g}, $$
so $ \phi \in \ker \d^2 $ if and only if $ \phi\br{gh} = g\phi\br{h} + \phi\br{g} $. If $ M $ has trivial $ G $-action, $ \phi $ is a homomorphism $ G \to M $.
\end{proof}

\begin{proposition}
Let $ \alpha : G_1 \to G_2 $ be a group homomorphism. Let $ M $ be a $ G_2 $-module and make $ M $ into a $ G_1 $-module via
$$ g_1 \cdot m = \alpha\br{g_1}m, \qquad g_1 \in G_1, \qquad m \in M. $$
Then there is a natural homomorphism
$$ \alpha^* : \H^n\br{G_2, M} \to \H^n\br{G_1, M}. $$
If $ \beta : G_0 \to G_1 $ then $ \br{\alpha \circ \beta}^* = \beta^* \circ \alpha^* $.
\end{proposition}

\begin{proof}
Define maps by
$$ \function[\alpha^*]{\C^n\br{G_2, M}}{\C^n\br{G_1, M}}{\phi}{\br{\br{g_1, \dots, g_n} \mapsto \phi\br{\alpha\br{g_1}, \dots, \alpha\br{g_2}}}}. $$
Then $ \d^n \circ \alpha^* = \alpha^* \circ \d^n $, so
$$
\begin{tikzcd}
\C^n\br{G_2, M} \arrow{r}{\alpha^*} \arrow{d}[swap]{\d^n} & \C^n\br{G_1, M} \arrow{d}{\d^n} \\
\C^{n + 1}\br{G_2, M} \arrow{r}[swap]{\alpha^*} & \C^{n + 1}\br{G_1, M}
\end{tikzcd}.
$$
Thus $ \alpha^* $ induce maps on cohomology.
\end{proof}

\pagebreak

We might like a sequence of groups
$$ 1 \to H \to G \to Q \to 1, \qquad H \triangleleft G, \qquad G / H = Q $$
to give a long exact sequence in cohomology. This is false.

\begin{example}
Let
$$ 1 \to \ZZ \to \ZZ^2 \to \ZZ \to 1. $$
Then
$$
\begin{tikzcd}[row sep=tiny]
\dots \arrow{r} & \H^2\br{\ZZ, M} \arrow{r} \arrow[cong]{d} & \H^2\br{\ZZ^2, M} \arrow{r} & \H^2\br{\ZZ, M} \arrow{r} \arrow[cong]{d} & \dots \\
& 0 & & 0 &
\end{tikzcd},
$$
and there exists $ M $ such that $ \H^2\br{\ZZ^2, M} \ne 0 $.
\end{example}

\begin{lemma}
Let $ H \triangleleft G $. Let $ M $ be a $ G $-module. Let $ G $ act on $ \C^n\br{H, M} $ by
$$ g \cdot \phi = \br{\br{h_1, \dots, h_n} \mapsto g\phi\br{g^{-1}h_1g, \dots, g^{-1}h_ng}}. $$
Then this descends to an action of $ G $ on $ \H^n\br{H, M} $, and $ H $ acts trivially, so this is an action of $ G / H $.
\end{lemma}

\begin{proof}
We want $ g \cdot \d^n\br{\phi} = \d^n\br{g \cdot \phi} $, which holds by direct computation. So the action of $ G $ is by chain maps, so gives an action on cohomology. For $ H $ acts trivially, we will just do $ n = 1 $. Take $ \phi \in \Z^1\br{H, M} $ and let $ \eta, h \in H $. Then
\begin{align*}
\br{\eta \cdot \phi}\br{h} - \phi\br{h}
& = \eta\phi\br{\eta^{-1}h\eta} - \phi\br{h}
= \eta\br{\eta^{-1}\phi\br{h\eta} + \phi\br{\eta^{-1}}} - \phi\br{h}
= \phi\br{h\eta} + \eta\phi\br{\eta^{-1}} - \phi\br{h} \\
& = h\phi\br{\eta} + \phi\br{h} + \eta\phi\br{\eta^{-1}} - \phi\br{h}
= h\phi\br{\eta} + \eta\phi\br{\eta^{-1}}
= h\phi\br{\eta} - \phi\br{\eta}
= \d^1\br{\phi\br{\eta}}\br{h},
\end{align*}
since $ \phi\br{1 \cdot 1} = 1\phi\br{1} + \phi\br{1} $ so $ \phi\br{1} = 0 $ and $ 0 = \phi\br{1} = \phi\br{\eta\eta^{-1}} = \eta\phi\br{\eta^{-1}} + \phi\br{\eta} $.
\end{proof}

The useful case is $ n = 1 $. If $ \phi : H \to M $ is a crossed homomorphism $ \br{g \cdot \phi}\br{h} = g\phi\br{g^{-1}hg} $. If $ M $ is trivial, this reads $ \br{g \cdot \phi}\br{h} = \phi\br{g^{-1}hg} $ so the homomorphism $ \phi $ is \textbf{$ G $-invariant}.

\begin{theorem}[Five-term inflation-restriction exact sequence]
Let $ H \triangleleft G $ and $ Q = G / H $ and let $ M $ be a $ G $-module. There is an exact sequence
$$ 0 \to \H^1\br{Q, M^H} \to \H^1\br{G, M} \to \H^1\br{H, M}^Q \to \H^2\br{Q, M^H} \to \H^2\br{G, M}. $$
\end{theorem}

\begin{proof}[Proof (non-examinable)]
Just define the maps.
\begin{itemize}
\item \textbf{Restriction maps}
$$ \function[\Res]{\H^k\br{G, M}}{\H^k\br{H, M}^Q}{\br{f : G^k \to M}}{\br{\Res f : H^k \le G^k \xrightarrow{f} M}}. $$
\item \textbf{Inflation maps}
$$ \function[\Inf]{\H^k\br{Q, M^H}}{\H^k\br{G, M}}{\br{f : Q^k \to M^H}}{\br{\Inf f : G^k \twoheadrightarrow Q^k \xrightarrow{f} M^H \le M}}. $$
\item \textbf{Transgression maps}. Let $ s : Q \to G $ be a set-theoretic section, so $ \br{Q \to G \to Q} = \id_Q $, with $ s\br{1} = 1 $. Define
$$ \function[\rho]{G}{H}{g}{gs\br{gH}^{-1}}. $$
If $ f : H \to M $ represents a $ Q $-invariant cohomology class define
$$ \function[\Tg]{\H^1\br{H, M}^Q}{\H^2\br{Q, M^H}}{f}{\br{\br{g_1, g_2} \mapsto f\br{\rho\br{g_1}\rho\br{g_2}} - f\br{\rho\br{g_1g_2}}}}. $$
\end{itemize}
\end{proof}

\pagebreak

If $ G $ is a free group, $ \H^2\br{G, M} = 0 $ for all $ M $.

\begin{corollary}[Hopf's formula]
Let $ F $ be a free group and $ R \triangleleft F $ and $ Q = F / R $. Let $ A $ be an abelian group, viewed as a trivial module. Then
$$ \H^2\br{Q, A} \cong \cbr{\text{$ F $-invariant homomorphisms} \ R \to A} / \cbr{\text{homomorphisms} \ F \to A}. $$
\end{corollary}

\begin{proof}
There is an exact sequence
$$ \Hom\br{F, A} \to \Hom\br{R, A}^F \to \H^2\br{Q, A} \to 0. $$
\end{proof}

If $ Q = \abr{x_1, \dots, x_d \st r_1, \dots, r_m} $ is a presentation, then $ F = \abr{x_1, \dots, x_d} $ is free and $ R = \abr{\abr{r_1, \dots, r_m}} $ is the normal subgroup generated by $ r_i $. Then $ \d\br{\H^1\br{Q, \ZZ}} = \d\br{\Hom\br{Q, \ZZ}} \le d $. An $ F $-invariant homomorphism $ R \to \ZZ $ is determined by images of $ r_i $, so $ \d\br{\H^2\br{Q, \ZZ}} \le m $.

\begin{example}
Let $ Q = \ZZ / 3\ZZ $ and let $ Q $ act on $ M = \ZZ^2 $ via the order three matrix $ A = \twobytwosmall{-1}{1}{-1}{0} $. Consider the short exact sequence of groups
$$
\begin{tikzcd}[row sep=tiny]
1 \arrow{r} & H \arrow{r}{\cdot 3} \arrow[cong]{d} & G \arrow{r} \arrow[cong]{d} & Q \arrow{r} \arrow[cong]{d} & 1 \\
& \ZZ & \ZZ & \ZZ / 3\ZZ &
\end{tikzcd}.
$$
Since $ H $ acts trivially on $ M $, $ \H^1\br{H, M} = \Hom\br{H, M} \cong \ZZ^2 $ by $ f \mapsto f\br{1} $. Then $ f \in \H^1\br{H, M}^Q $ if and only if $ f\br{1} $ is $ Q $-invariant, if and only if $ Af\br{1} = f\br{1} $. If $ Ax = x $, then $ x = 0 $, so $ \H^1\br{H, M}^Q = 0 $ and $ \H^2\br{G, M} = 0 $. By the five-term exact sequence, $ \H^2\br{Q, M} = 0 $.
\end{example}

\subsection{Cohomology and group extensions}

\lecture{21}{Tuesday}{09/03/21}

Take a group $ E $, with an abelian normal subgroup $ M $. Let $ E / M = G $. Then $ E $ is an \textbf{extension of $ G $ by $ M $}, and $ E $ and $ E' $ are \textbf{equivalent} extensions if there is a commuting diagram
$$
\begin{tikzcd}[row sep=tiny]
& & E \arrow{dr}{\pi} \arrow{dd}{\sim} & & \\
1 \arrow{r} & M \arrow{ur} \arrow{dr} & & G \arrow{r} & 1 \\
& & E' \arrow{ur} & &
\end{tikzcd}.
$$
The action of $ G $ on $ M $ is by conjugation in $ E $. If $ m \in M $ and $ e \in E $, then $ eme^{-1} \in M $, which gives an action of $ E $ on $ M $, and $ M $ is abelian, so $ M $ acts trivially on itself, which gives an action of $ G $ on $ M $. If $ g \in G $, take $ e $ such that $ \pi\br{e} = g $ and set
$$ g \bullet m = eme^{-1}. $$
If this action is trivial, then $ E $ is a \textbf{central extension}. Given $ G $ and a $ G $-module $ M $, can construct the semidirect product $ M \rtimes G $, where the set of elements is $ M \times G $ with multiplication
$$ \br{m_1, g_1} * \br{m_2, g_2} = \br{m_1 + g_1 \bullet m_2, g_1g_2}. $$
Then $ M \triangleleft M \rtimes G $, with the correct action, and quotient $ G $. So $ M \rtimes G $ is an extension, called the \textbf{split extension}
$$ 1 \to M \to M \rtimes G \to G \to 1, $$
where the \textbf{splitting} is the group homomorphism
$$ \function{G}{M \rtimes G}{g}{\br{0, g}}. $$

\begin{notation}
$ M $ is a $ G $-module, written additively, and $ M \le E $, which is non-abelian.
\end{notation}

\begin{proposition}
Let $ E $ be an extension of $ G $ by $ M $. Assume there exists a splitting $ s : G \to E $, a group homomorphism such that $ \pi \circ s = \id_G $. Then $ E $ is equivalent to $ M \rtimes G $.
\end{proposition}

\begin{proof}
Write down the equivalence $ \br{m, g} \mapsto ms\br{g} $, which is a group homomorphism.
\end{proof}

\pagebreak

\begin{theorem}
We have a bijection
$$ \correspondence{\text{equivalence classes of} \\ \text{extensions of} \ G \ \text{by} \ M}{\sbr{\phi} \in \H^2\br{G, M}}. $$
\end{theorem}

\begin{proof}
Let $ E $ be an extension of $ G $ by $ M $. Let $ \pi : E \to G $ be the quotient. Choose a set-theoretic section $ s : G \to E $, a function such that $ \pi \circ s = \id_G $, so $ \pi\br{s\br{g}} = g $. Choose $ s\br{1} = 1 $. Consider the function
$$ \function[\phi]{G^2}{M}{\br{g_1, g_2}}{s\br{g_1}s\br{g_2}s\br{g_1g_2}^{-1}}, $$
since $ \pi\br{s\br{g_1}s\br{g_2}s\br{g_1g_2}^{-1}} = g_1g_2\br{g_1g_2}^{-1} = 1 $, and $ \phi \equiv 1 $ if and only if $ s $ is a homomorphism.
\begin{itemize}
\item The $ 2 $-cochain $ \phi \in \C^2\br{G, M} $ is a cocycle, that is $ \d^3\br{\phi} = 0 $. Since $ s\br{g_1}s\br{g_2} = \phi\br{g_1, g_2}s\br{g_1g_2} $,
\begin{align*}
\phi\br{g_1, g_2}\phi\br{g_1g_2, g_3}s\br{g_1g_2g_3}
& = \phi\br{g_1, g_2}s\br{g_1g_2}s\br{g_3}
= s\br{g_1}s\br{g_2}s\br{g_3} \\
& = s\br{g_1}\phi\br{g_2, g_3}s\br{g_2g_3}
= s\br{g_1}\phi\br{g_2, g_3}s\br{g_1}^{-1}s\br{g_1}s\br{g_2g_3} \\
& = s\br{g_1}\phi\br{g_2, g_3}s\br{g_1}^{-1}\phi\br{g_1, g_2g_3}s\br{g_1g_2g_3}.
\end{align*}
Rewriting in $ M $,
$$ \phi\br{g_1, g_2} + \phi\br{g_1g_2, g_3} = g_1 \bullet \phi\br{g_2, g_3} + \phi\br{g_1, g_2g_3}, $$
so
$$ 0 = g_1 \bullet \phi\br{g_2, g_3} - \phi\br{g_1g_2, g_3} + \phi\br{g_1, g_2g_3} - \phi\br{g_1, g_2} = \d^3\br{\phi}\br{g_1, g_2, g_3}. $$
Thus $ \phi $ is a cocycle, and it is a \textbf{normalised cocycle}, since $ \phi\br{1, g} = \phi\br{g, 1} = 0 $ for all $ g \in G $.
\item Let $ s' : G \to E $ be another section, with $ s'\br{1} = 1 $. Then $ \pi\br{s'\br{g}s\br{g}^{-1}} = 1 $ so define
$$ \function[\psi]{G}{M}{g}{s'\br{g}s\br{g}^{-1}}. $$
Now let us compute the cocycle $ \phi' $ coming from $ s' $. Since $ s'\br{g} = \psi\br{g}s\br{g} $,
\begin{align*}
s'\br{g_1}s'\br{g_2}
& = \psi\br{g_1}s\br{g_1}\psi\br{g_2}s\br{g_2}
= \psi\br{g_1}s\br{g_1}\psi\br{g_2}s\br{g_1}^{-1}s\br{g_1}s\br{g_2} \\
& = \psi\br{g_1}s\br{g_1}\psi\br{g_2}s\br{g_1}^{-1}\phi\br{g_1, g_2}s\br{g_1g_2} \\
& = \psi\br{g_1}s\br{g_1}\psi\br{g_2}s\br{g_1}^{-1}\phi\br{g_1, g_2}\psi\br{g_1g_2}^{-1}s'\br{g_1g_2}
\end{align*}
Back to $ M $,
$$ \phi'\br{g_1, g_2} = \psi\br{g_1} + g_1 \bullet \psi\br{g_2} + \phi\br{g_1, g_2} - \psi\br{g_1g_2} = \phi\br{g_1, g_2} + \d^2\br{\psi}\br{g_1, g_2}, $$
so $ \sbr{\phi} = \phi + \im \d^2 = \phi' + \im \d^2 = \sbr{\phi'} \in \H^2\br{G, M} $.
\end{itemize}
It remains to show that equivalent extensions give the same cohomology class, to construct an inverse, and show it is the inverse. Let $ \zeta \in \H^2\br{G, M} $ and choose a normalised cocycle $ \phi $ such that $ \zeta = \sbr{\phi} $. Can always choose normalised. \footnote{Exercise: if $ \phi \in \Z^2\br{G, M} $, set $ \psi\br{g} = -\phi\br{1, g} $ and then $ \phi + \d^2\br{\psi} $ turns out to be normalised} Define $ E_\phi $, where the set is $ M \times G $ with group operation
$$ \br{m_1, g_1} *_\phi \br{m_2, g_2} = \br{m_1 + g_1 \bullet m_2 + \phi\br{g_1, g_2}, g_1g_2}. $$
\begin{itemize}
\item If $ s\br{g} = \br{0, g} $, then $ s\br{g_1} *_\phi s\br{g_2} = \br{\phi\br{g_1, g_2}, 1} *_\phi s\br{g_1g_2} $.
\begin{itemize}
\item Associativity since $ \phi $ is a cocycle.
\item $ \br{0, 1} $ is an identity since $ \phi $ is normalised.
\item Existence of inverses since $ \phi $ is a normalised cocycle.
\end{itemize}
Then $ E_\phi $ is an extension, since $ M \triangleleft E_\phi $, with the right action, and $ E_\phi / M = G $.

\pagebreak

\item If $ \sbr{\phi} = \sbr{\phi'} $, where $ \phi' $ is also normalised, then $ \phi - \phi' = \d^2\br{\psi} $ for some $ \psi $. Define
$$ \function{E_\phi}{E_{\phi'}}{\br{m, g}}{\br{m + \psi\br{g}, g}}, $$
which is an equivalence of extensions.
\end{itemize}
\end{proof}

Back to Hopf's formula. Suppose $ G = \abr{x_1, \dots, x_n \st r_1, \dots, r_m} $. Take an abelian group $ A $, a trivial $ G $-module. Let $ E $ be a central extension of $ G $ by $ A $. Then $ E $ is generated by $ A $, and some choices $ \overline{x_1}, \dots, \overline{x_n} $ of preimages of the $ x_i $. Define $ \overline{r_i} $ as $ r_i $ with bars on top. Then in $ E $, $ \overline{r_i} = a_i \in A $. Writing a presentation of $ E $,
$$ \overline{E} = \abr{\overline{x_1}, \dots, \overline{x_n}, A \st \overline{r_1}a_1^{-1}, \dots, \overline{r_m}a_m^{-1}, \ A \ \text{central}, \ \text{relations of} \ A}. $$
Then
$$
\begin{tikzcd}
& A \arrow{r} \arrow[cong]{d} & \overline{E} \arrow[twoheadrightarrow]{r} \arrow{d} & G \arrow[cong]{d} & \\
1 \arrow{r} & A \arrow{r} & E \arrow{r} & G \arrow{r} & 1
\end{tikzcd},
$$
so $ A \hookrightarrow \overline{E} $, and $ \overline{E} \cong E $. Set $ F = \abr{\overline{x_1}, \dots, \overline{x_n}} $ and $ R = \ker \br{F \to G} = \abr{\abr{\overline{r_1}, \dots, \overline{r_m}}} $. Define an $ F $-invariant homomorphism
$$ \function{R}{A}{\overline{r_i}}{a_i}, $$
since $ E $ is an extension. If we choose $ \overline{x_i}' $ instead of $ \overline{x_i} $, then $ \overline{x_i}' = \overline{x_i}b_i $ for some $ b_i \in A $. Then
$$ \function{F}{A}{\overline{x_i}}{b_i} $$
is a homomorphism, and the homomorphism $ R \to A $ is changed by subtracting the restriction of $ F \to A $. Thus
$$ \H^2\br{G, A} = \cbr{\text{$ F $-invariant homomorphisms} \ R \to A} / \cbr{\text{restrictions of homomorphisms} \ F \to A}. $$

\begin{example}
\label{eg:5.3.5}
Let $ G = \abr{x_1, x_2 \st x_1x_2x_1^{-1}x_2^{-1}x_1} $. Any extension of $ G $ by $ \ZZ $ has a presentation
$$ E = \abr{\overline{x_1}, \overline{x_2}, a \st \overline{x_1}\overline{x_2}\overline{x_1}^{-1}\overline{x_2}^{-1}\overline{x_1} = a^k, \ a \ \text{central}}. $$
Then $ E $ is equivalent to the direct product, since by $ \overline{x_1} \mapsto \overline{x_1}' = \overline{x_1}a^k $,
$$ E \cong \abr{\overline{x_1}', \overline{x_2}, a \st \overline{x_1}'\overline{x_2}\overline{x_1}'^{-1}\overline{x_2}^{-1}\overline{x_1}' = 1, \ a \ \text{central}} \cong \ZZ \times G. $$
Thus $ \H^2\br{G, \ZZ} = 0 $.
\end{example}

\subsubsection{Worked example: extensions of \texorpdfstring{$ \ZZ^2 $}{Z2} by \texorpdfstring{$ \ZZ $}{Z}}

\lecture{22}{Thursday}{11/03/21}

Let $ T = \ZZ^2 = \abr{a, b} $. Take the free resolution of $ \ZZ $ by $ \ZZ T $-modules
$$ 0 \to \ZZ T \xrightarrow{\beta} \ZZ T^2 \xrightarrow{\alpha} \ZZ T \xrightarrow{\epsilon} \ZZ \to 0, $$
where $ \epsilon $ is the augmentation $ \epsilon\br{g} = 1 $ for all $ g \in T $, and
$$ \alpha\br{x, y} = x\br{a - 1} + y\br{b - 1} = \onebytwo{x}{y}\twobyone{a - 1}{b - 1}, \qquad \beta\br{z} = \onebytwo{z\br{1 - b}}{z\br{a - 1}} = z\onebytwo{1 - b}{a - 1}. $$
Exactness comes from topology, since it is the chain complex for the square tiling of the plane. Applying $ \Hom_T\br{-, \ZZ} $,
$$
\begin{tikzcd}
0 & \Hom_T\br{\ZZ T, \ZZ} \arrow{l} \arrow{d}{\phi \mapsto \phi\br{1}}[swap]{\sim} & \Hom_T\br{\ZZ T^2, \ZZ} \arrow{l}[swap]{\beta^*} \arrow{d}{\phi \mapsto \br{\phi\br{1, 0}, \phi\br{0, 1}}}[swap]{\sim} & \Hom_T\br{\ZZ T, \ZZ} \arrow{l}[swap]{\alpha^*} \arrow{d}{\phi \mapsto \phi\br{1}}[swap]{\sim} \\
0 & \ZZ \arrow{l} & \ZZ^2 \arrow{l}{\beta^*} & \ZZ \arrow{l}{\alpha^*}
\end{tikzcd}.
$$

\pagebreak

Then
$$ \alpha^*\br{z} = \twobyone{a - 1}{b - 1}z = 0, \qquad \beta^*\br{\twobyone{x}{y}} = \onebytwo{1 - b}{a - 1}\twobyone{x}{y} = 0, $$
so
$$ \H^n\br{T, \ZZ} =
\begin{cases}
\ZZ & n = 0, 2 \\
\ZZ^2 & n = 1 \\
0 & n > 2
\end{cases}.
$$
Comparing the bar resolution and the topological resolution,
$$
\begin{tikzcd}
\dots \arrow{r} & \ZZ T\cbr{T^{\br{2}}} \arrow{r}{\d_2} \arrow{d}{f_2} & \ZZ T\cbr{T^{\br{1}}} \arrow{r}{\d_1} \arrow{d}{f_1} & \ZZ T\cbr{T^{\br{0}}} \arrow{r}{\epsilon} \arrow{d}{f_0} & \ZZ \arrow{r} \arrow{d}{\id} & 0 \\
0 \arrow{r} & \ZZ T \arrow{r}[swap]{\beta} & \ZZ T^2 \arrow{r}[swap]{\alpha} & \ZZ T \arrow{r}[swap]{\epsilon} & \ZZ \arrow{r} & 0
\end{tikzcd}.
$$
\begin{itemize}
\item $ f_0\br{\sbr{}} = 1 $.
\item Let $ \sbr{a^rb^s} \in T^{\br{1}} $ for $ r, s \in \ZZ $. We want to set $ f_1\br{\sbr{a^rb^s}} = \br{x_{r, s}, y_{r, s}} \in \ZZ T^2 $ such that $ \alpha\br{x_{r, s}, y_{r, s}} = f_0\br{\d_1\br{\sbr{a^rb^s}}} $, and
$$ x_{r, s}\br{a - 1} + y_{r, s}\br{b - 1} = f_0\br{a^rb^s\sbr{} - \sbr{}} = a^rb^s - 1 = \br{a^r - 1}b^s + b^s - 1. $$
Set
$$ \S\br{a, r} =
\begin{cases}
1 + \dots + a^{r - 1} & r > 0 \\
0 & r = 0 \\
-a^{-1} - \dots - a^r & r < 0
\end{cases},
$$
so $ \S\br{a, r}\br{a - 1} = a^r - 1 $. Then $ x_{r, s} = \S\br{a, r}b^s $ and $ y_{r, s} = \S\br{b, s} $, so
$$ f_1\br{\sbr{a^rb^s}} = \br{\S\br{a, r}b^s, \S\br{b, s}}. $$
\item We want $ f_2\br{\sbr{a^rb^s \mid a^tb^u}} = z_{r, s, t, u} $ such that $ \beta\br{z_{r, s, t, u}} = f_1\br{\d_2\br{\sbr{a^rb^s \mid a^tb^u}}} $, and
\begin{align*}
& \br{\br{1 - b}z_{r, s, t, u}, \br{a - 1}z_{r, s, t, u}} \\
= \ & f_1\br{a^rb^s\sbr{a^tb^u} - \sbr{a^{r + t}b^{s + u}} + \sbr{a^rb^s}} \\
= \ & \br{a^rb^s\S\br{a, t}b^u - \S\br{a, r + t}b^{s + u} + \S\br{a, r}b^s, a^rb^s\S\br{b, u} - \S\br{b, s + u} + \S\br{b, s}}.
\end{align*}
By computation, $ z_{r, s, t, u} = \S\br{a, r}b^s\S\br{b, u} $, so
$$ f_2\br{\sbr{a^rb^s \mid a^tb^u}} = \S\br{a, r}b^s\S\br{b, u}. $$
\end{itemize}
A useful fact is that $ \epsilon $ is a ring homomorphism, and $ \epsilon\br{\S\br{a, r}} = r $, so the cochain representing $ p \in \ZZ \cong \H^2\br{T, \ZZ} $ is
$$
\begin{array}{ccccc}
T^{\br{2}} \subseteq \ZZ T\cbr{T^{\br{2}}} & \xrightarrow{f_2} & \ZZ T & \xrightarrow{p\epsilon} & \ZZ \\
\sbr{a^rb^s \mid a^tb^u} & \longmapsto & \S\br{a, r}b^s\S\br{b, u} & \longmapsto & pru
\end{array}.
$$
The corresponding central extension of $ T $ by $ \ZZ $ is the set $ \ZZ \times T $ with group operation
$$ \br{m, a^rb^s} * \br{n, a^tb^u} = \br{m + n + pru, a^{r + t}b^{s + u}}, $$
which is
$$ \threebythree{1}{pr}{m}{0}{1}{s}{0}{0}{1}\threebythree{1}{pt}{n}{0}{1}{u}{0}{0}{1} = \threebythree{1}{p\br{r + t}}{m + n + pru}{0}{1}{s + u}{0}{0}{1}. $$
Thus the extension is isomorphic to
$$ \cbr{\threebythree{1}{pr}{m}{0}{1}{s}{0}{0}{1} \st r, m, s \in \ZZ}. $$

\pagebreak

\subsection{Cohomology of profinite groups}

\begin{definition}
Let $ G $ be a profinite group. A \textbf{finite $ G $-module} is a finite abelian group with an action
$$ \function{G \times M}{M}{\br{g, m}}{g \cdot m}, $$
which is continuous.
\end{definition}

\begin{definition}
Let
$$ \C^n\br{G, M} = \cbr{\text{continuous functions} \ G^n \to M}, $$
with $ \d^n : \C^{n - 1}\br{G, M} \to \C^n\br{G, M} $ by the same formula, and let
$$ \Z^n\br{G, M} = \ker \d^{n + 1}, \qquad \B^n\br{G, M} = \im \d^n, \qquad \H^n\br{G, M} = \Z^n\br{G, M} / \B^n\br{G, M}. $$
\end{definition}

\begin{theorem}[Course convention]
All general results from section $ 5.1 $ to section $ 5.3 $ and from example sheet $ 4 $, can be applied to profinite groups, with substitutions groups to profinite groups, functions to continuous functions, and modules to finite modules.
\end{theorem}

If $ E $ and $ E' $ are profinite groups, then extensions
$$
\begin{tikzcd}[row sep=tiny]
& & E \arrow{dr} \arrow{dd} & & \\
1 \arrow{r} & M \arrow{ur} \arrow{dr} & & G \arrow{r} & 1 \\
& & E' \arrow{ur} & &
\end{tikzcd}
$$
correspond to $ \H^2\br{G, M} $.

\begin{remark}
Let $ G = \widehat{\ZZ} $. Consider the short exact sequence of modules
$$ 0 \to \ZZ \to \QQ \to \QQ / \ZZ \to 0. $$
By the course convention, $ \H^1\br{G, M} = \Hom\br{G, M} $ and there is a long exact sequence in cohomology. By common sense, $ \H^2\br{\widehat{\ZZ}, M} = 0 $. Then $ \H^1\br{\widehat{\ZZ}, \ZZ} = \H^1\br{\widehat{\ZZ}, \QQ} = 0 $, since any continuous homomorphism $ \widehat{\ZZ} \to \QQ $ has compact image, so must be trivial. There is an isomorphism
$$ \function{\H^1\br{\widehat{\ZZ}, \QQ / \ZZ}}{\QQ / \ZZ}{a + n\ZZ}{\dfrac{am}{n} + \ZZ}. $$
Thus
$$
\begin{tikzcd}[row sep=tiny]
\H^1\br{\widehat{\ZZ}, \QQ} \arrow{r} \arrow[cong]{d} & \H^1\br{\widehat{\ZZ}, \QQ / \ZZ} \arrow{r} \arrow[cong]{d} & \H^2\br{\widehat{\ZZ}, \ZZ} \\
0 & \QQ / \ZZ &
\end{tikzcd},
$$
so $ \H^2\br{\widehat{\ZZ}, \ZZ} $ would be infinite, which is silly.
\end{remark}

\subsubsection{Pro-\texorpdfstring{$ p $}{p} groups of cohomological dimension one}

\lecture{23}{Saturday}{13/03/21}

\begin{definition}
A profinite group $ G $ has \textbf{cohomological dimension} $ \cd G = n $ if $ \H^m\br{G, M} = 0 $ for all $ m > n $ and for all finite modules $ M $ but there exists $ M $ such that $ \H^n\br{G, M} \ne 0 $.
\end{definition}

\begin{theorem}
Let $ G $ be a pro-$ p $ group. Then
$$ \cd G = \max\cbr{n \st \H^n\br{G, \FF_p} \ne 0}. $$
\end{theorem}

\begin{corollary}
If $ G \ne 1 $, then $ \cd G = 1 $ if and only if $ \H^2\br{G, \FF_p} = 0 $.
\end{corollary}

\begin{proof}
$ \H^1\br{G, \FF_p} = \Hom\br{G, \FF_p} \ne 0 $.
\end{proof}

\pagebreak

\begin{definition}
A $ G $-module $ M $ is \textbf{simple} if the only $ G $-submodules of $ M $ are zero and $ M $.
\end{definition}

\begin{proposition}
Let $ G $ be a profinite group. Suppose $ \H^n\br{G, S} = 0 $ for all finite simple modules $ S $. Then $ \H^n\br{G, M} = 0 $ for all finite $ M $.
\end{proposition}

\begin{proof}
Suppose not, and let $ M $ be the smallest $ G $-module such that $ \H^n\br{G, M} \ne 0 $. Since $ M $ is not simple, there exists a non-trivial submodule $ N \subsetneq G $. Then we have a short exact sequence of $ G $-modules
$$ 0 \to N \to M \to M / N \to 0. $$
By Proposition \ref{prop:5.1.28}, there is a long exact sequence, of which part is
$$
\begin{tikzcd}[row sep=tiny]
\dots \arrow{r} & \H^n\br{G, N} \arrow{r} \arrow[cong]{d} & \H^n\br{G, M} \arrow{r} & \H^n\br{G, M / N} \arrow{r} \arrow[cong]{d} & \dots \\
& 0 & & 0 &
\end{tikzcd},
$$
so $ \H^n\br{G, M} = 0 $, a contradiction.
\end{proof}

\begin{definition}
Let $ M $ be a finite $ G $-module. For a prime $ p $, $ M $ is called \textbf{$ p $-primary} if $ \abs{M} $ is a power of $ p $.
\end{definition}

If $ M $ is finite, then
$$ M = \bigoplus_{p \ \text{prime}} M_p, $$
where $ M_p $ are $ p $-Sylow subgroups or $ p $-primary components, in a unique way, so this decomposition is invariant under $ G $, so all $ M_p $ are $ G $-submodules of $ M $.

\begin{proposition}
Let $ G $ be a pro-$ p $ group and let $ M $ be a finite $ G $-module. Then
$$ \H^n\br{G, M} = \H^n\br{G, M_p}, \qquad n \ge 1. $$
\end{proposition}

\begin{proof}
Write $ M = M_p \oplus M' $. Then
$$ \H^n\br{G, M} = \H^n\br{G, M_p} \oplus \H^n\br{G, M'}. $$
So we need $ \H^n\br{G, M'} = 0 $.
\begin{enumerate}[leftmargin=0.5in, label=Part \arabic*.]
\item If $ G $ is finite, this is on exercise sheet $ 4 $, since $ \abs{G} $ and $ \abs{M'} $ are coprime.
\item Let $ G $ be a pro-$ p $ group. Let $ \phi : G^n \to M' $ be a continuous function. We will find $ K \triangleleft_\o G $ such that $ K $ acts trivially on $ M' $, and such that $ \phi $ factors through $ \br{G / K}^n $, so $ \phi\br{g_1, \dots, g_n} = \phi\br{g_1k_1, \dots, g_nk_n} $. Then
$$ \function{0 = \H^n\br{G / K, M'}}{\H^n\br{G, M'}}{\overline{\phi}}{\phi}. $$
The preimages of $ m \in M' $ are closed and open subsets of $ G^n $, so they are unions of basic open subsets, cosets of open subgroups $ K_{i, m}^n $ where $ K_{i, m} \triangleleft G $. By compactness, for each $ m $ only finitely many $ K_{i, m} $ are needed. Take the intersection of all of these to get the required $ K $. All preimages of $ m \in M' $ are now unions of cosets of $ K^n $, so $ \phi $ factors through $ \br{G / K}^n $. Making $ K $ smaller, by intersecting with the kernel of $ G \to \Aut M' $, makes $ K $ act trivially. Now
$$ \phi : G^n \xrightarrow{\pi} \br{G / K}^n \xrightarrow{\overline{\phi}} M'. $$
If $ \d^{n + 1}\br{\phi} = 0 $, then $ \overline{\phi} = \d^n\br{\psi} $ for some $ \psi : \br{G / K}^{n - 1} \to M' $, by part $ 1 $. It follows that $ \phi = \d^n\br{\psi \circ \pi} $.
\end{enumerate}
\end{proof}

\begin{remark}
In proving that all cocycles factor through some $ \br{G / K}^n $, we really show that
$$ \H^n\br{G, M} = \H^n\br{\varprojlim_{K \triangleleft_\o G, \ K \ \text{acts trivially}} G / K, M} = \varinjlim_K \H^n\br{G / K, M}. $$
\end{remark}

\pagebreak

\begin{proposition}
Let $ G $ be a pro-$ p $ group. The only finite simple $ p $-primary $ G $-module is $ \FF_p $.
\end{proposition}

\begin{proposition}
Let $ G $ be a pro-$ p $ group. If $ \H^n\br{G, \FF_p} = 0 $ for some $ n $, then $ \H^n\br{G, M} = 0 $ for all finite $ G $-modules $ M $.
\end{proposition}

\begin{proposition}
Suppose there exists $ N \ge 1 $ such that $ \H^N\br{G, M} = 0 $ for all finite $ G $-modules $ M $. Then $ \cd G \le N - 1 $.
\end{proposition}

Proof for abstract groups, then apply course convention.

\begin{proof}[Proof (non-examinable)]
We show $ \H^{N + 1}\br{G, M} = 0 $ for all $ M $, then induct. Consider the \textbf{coinduced module}
$$ \Coind_G^K M = \Hom_K\br{\ZZ G, M}, \qquad K \le G. $$
By \textbf{Shapiro's lemma},
$$ \H^n\br{G, \Coind_G^K M} = \H^n\br{K, M}, $$
since $ \Hom_G\br{F, \Coind_G^K M} \cong \Hom_K\br{F, M} $ for $ F $ a $ G $-module. Consider $ K = 1 $. Consider
$$ \function[\alpha]{M}{\Coind_G^1 M}{m}{\br{x \mapsto xm}}, $$
which is injective and $ G $-linear. So there exists a short exact sequence of modules
$$ 0 \to M \xrightarrow{\alpha} \Coind_G^1 M \to M' \to 0, $$
where $ M' $ is the quotient, which gives a long exact sequence
$$
\begin{tikzcd}[row sep=tiny]
\H^n\br{G, \Coind_G^1 M} \arrow{r} \arrow[cong]{d} & \H^n\br{G, M'} \arrow{r}{\sim} & \H^{n + 1}\br{G, M} \arrow{r} & \H^{n + 1}\br{G, \Coind_G^1 M} \arrow[cong]{d} \\
\H^n\br{1, M} = 0 & & & \H^{n + 1}\br{1, M} = 0,
\end{tikzcd},
\qquad n \ge 1.
$$
Since $ \H^N\br{G, M'} = 0 $ for all $ M' $ by hypothesis, $ \H^{N + 1}\br{G, M} = 0 $.
\end{proof}

We have now proved the following.

\begin{theorem}
Let $ G $ be a pro-$ p $ group. If $ \H^n\br{G, \FF_p} = 0 $ then $ \cd G \le n - 1 $.
\end{theorem}

\begin{corollary}
Topologically finitely generated free pro-$ p $ groups have cohomological dimension one.
\end{corollary}

\begin{proof}
To show $ \H^2\br{G, \FF_p} = 0 $, if and only if every extension is a split extension. Let
$$ 1 \to \FF_p \to E \to G \to 1. $$

If $ \cbr{x_1, \dots, x_d} $ is a generating set of $ G $, choose preimages $ e_i $ of $ x_i $ in $ E $. Then the function $ x_i \mapsto e_i $ extends to a continuous homomorphism $ G \to E $ by freeness. So $ E $ is a split extension, and $ \H^2\br{G, \FF_p} = 0 $.
\end{proof}

\begin{theorem}
\label{thm:5.4.20}
Let $ f : G \to G' $ be a continuous homomorphism of topologically finitely generated pro-$ p $ groups. Assume that
$$ f_1^* : \H^1\br{G', \FF_p} \to \H^1\br{G, \FF_p} $$
is an isomorphism and
$$ f_2^* : \H^2\br{G', \FF_p} \to \H^2\br{G, \FF_p} $$
is injective. Then $ f $ is an isomorphism.
\end{theorem}

\begin{corollary}
Let $ f : \Gamma \to \Gamma' $ be a homomorphism of finitely generated abstract groups. Assume that
$$ f_1^* : \H^1\br{\Gamma', \FF_p} \to \H^1\br{\Gamma, \FF_p} $$
is an isomorphism and
$$ f_2^* : \H^2\br{\Gamma', \FF_p} \to \H^2\br{\Gamma, \FF_p} $$
is injective. Then $ f $ yields an isomorphism of pro-$ p $ completions $ \widehat{\Gamma_{\br{p}}} \to \widehat{\Gamma_{\br{p}}'} $.
\end{corollary}

\pagebreak

\begin{corollary}
Let $ G $ be a topologically finitely generated pro-$ p $ group of cohomological dimension one. Then $ G $ is free.
\end{corollary}

\begin{proof}
If $ \d\br{G} = d $, there is a surjection $ f : F \twoheadrightarrow G $ where $ F $ is free of rank $ d $. Then $ F $ gives an isomorphism $ f_* : F / \Phi\br{F} \xrightarrow{\sim} G / \Phi\br{G} \cong \FF_p^d $. Since
$$ \H^1\br{G, \FF_p} = \Hom\br{G, \FF_p} = \Hom\br{G / \Phi\br{G}, \FF_p}, $$
the dual spaces are
$$ f_1^* : \Hom\br{G / \Phi\br{G}, \FF_p} = \H^1\br{G, \FF_p} \xrightarrow{\sim} \Hom\br{F / \Phi\br{F}, \FF_p} = \H^1\br{F, \FF_p}, $$
and
$$ f_2^* : \H^2\br{G, \FF_p} = 0 \to \H^2\br{F, \FF_p} $$
is an injection. Thus $ f $ is an isomorphism.
\end{proof}

\lecture{24}{Tuesday}{16/03/21}

\begin{proof}[Proof of Theorem \ref{thm:5.4.20} (non-examinable)]
Let $ G_n = \gamma_n^{\br{p}}\br{G} $ be the lower central $ p $-series, where $ G_1 = G $ and $ G_{n + 1} = \overline{\sbr{G, G_n}G_n^p} $, which are open in $ G $. Since $ f\br{G_n} \le G_n' $, there are $ f_n : G / G_n \to G' / G_n' $. We show all $ f_n $ are isomorphisms, so $ f = \varprojlim_n f_n $ is an isomorphism, by induction.
\begin{itemize}
\item $ n = 1 $ is trivial.
\item Consider $ G_n / G_{n + 1} $, which is a finite-dimensional vector space over $ \FF_p $. Then $ f $ induces an isomorphism $ G_n / G_{n + 1} \to G_n' / G_{n + 1}' $ if and only if $ f^* : \Hom\br{G_n' / G_{n + 1}', \FF_p} \to \Hom\br{G_n / G_{n + 1}, \FF_p} $ is an isomorphism. A continuous homomorphism $ \phi : G_n \to \FF_p $ factors through $ G_{n + 1} $ if and only if $ \phi\br{\sbr{g, g_n}} = 0 $ for all $ g \in G $ and $ g_n \in G_n $, if and only if $ \phi\br{g_n} = \phi\br{g^{-1}g_ng} $, that is $ \phi $ is $ G $-invariant, so
$$ \Hom\br{G_n / G_{n + 1}, \FF_p} \cong \Hom\br{G_n, \FF_p}^G = \H^1\br{G_n, \FF_p}^G. $$
For the short exact sequence
$$ 1 \to G_n \to G \to G / G_n \to 1, $$
we have a five-term exact sequence
$$
\begin{tikzcd}[column sep=small]
0 \arrow{r} & \H^1\br{G / G_n, \FF_p} \arrow{r} & \H^1\br{G, \FF_p} \arrow{r} & \H^1\br{G_n, \FF_p}^G \arrow{r} & \H^2\br{G / G_n, \FF_p} \arrow{r} & \H^2\br{G, \FF_p} \\
0 \arrow{r} & \H^1\br{G' / G_n', \FF_p} \arrow{u}{\sim} \arrow{r} & \H^1\br{G', \FF_p} \arrow{u}{\sim} \arrow{r} & \H^1\br{G_n', \FF_p}^{G'} \arrow{u} \arrow{r} & \H^2\br{G' / G_n', \FF_p} \arrow{u}{\sim} \arrow{r} & \H^2\br{G', \FF_p} \arrow{u}{\hookrightarrow}
\end{tikzcd}.
$$
By the five lemma, the middle map is an isomorphism, so $ G_n / G_{n + 1} \xrightarrow{\sim} G_n' / G_{n + 1}' $. Then
$$
\begin{tikzcd}
1 \arrow{r} & G_n / G_{n + 1} \arrow{r} \arrow{d}{\sim} & G / G_{n + 1} \arrow{r} \arrow{d} & G / G_n \arrow{r} \arrow{d}{\sim} & 1 \\
1 \arrow{r} & G_n' / G_{n + 1}' \arrow{r} & G' / G_{n + 1}' \arrow{r} & G' / G_n' \arrow{r} & 1
\end{tikzcd}.
$$
By the five lemma, $ G / G_{n + 1} \xrightarrow{\sim} G' / G_{n + 1}' $.
\end{itemize}
\end{proof}

\begin{example}
Let $ \Gamma = \abr{x_1, x_2 \st x_1x_2x_1^{-1}x_2^{-1}x_1} $. By Example \ref{eg:5.3.5}, $ \H^2\br{\Gamma, \FF_p} = 0 $. Then $ \Gamma_{\ab} \cong \ZZ $, generated by $ x_2 $, and $ \H^1\br{\Gamma, \FF_p} \cong \FF_p $, generated by $ \br{x_1, x_2} \mapsto \br{0, 1} $. Let
$$ \function[f]{\ZZ}{\Gamma}{1}{x_2}. $$
Then $ f_1^* : \H^1\br{\Gamma, \FF_p} \to \H^1\br{\ZZ, \FF_p} $ is an isomorphism and $ f_2^* : \H^2\br{\Gamma, \FF_p} \to \H^2\br{\ZZ, \FF_p} $ is an injection, so $ \widehat{\Gamma_{\br{p}}} \cong \ZZ_p $.
\end{example}

\pagebreak

\subsubsection{Presentations of pro-\texorpdfstring{$ p $}{p} groups}

\begin{definition}
Let $ X $ be a finite set and $ F $ the free pro-$ p $ group on the set $ X $. Let $ R \subseteq F $. The pro-$ p $ group with presentation $ G = \fbr{X \st R}_p $ is defined to be $ G = F / \overline{\abr{\abr{R}}} $.
\end{definition}

\begin{lemma}
Let $ F' \subseteq \widehat{F_{\br{p}}} = F $ be the free abstract group on $ X $, and $ R \subseteq F' $. Let $ \Gamma = \abr{X \st R} $ be an abstract group, and let $ G = \fbr{X \st R}_p $. Then $ G = \widehat{\Gamma_{\br{p}}} $.
\end{lemma}

\begin{proof}
Since $ F' \xrightarrow{\subseteq} F $ such that $ \abr{\abr{R}} \to \overline{\abr{\abr{R}}} $, $ F' / \abr{\abr{R}} \to \widehat{\Gamma_{\br{p}}} \twoheadrightarrow G $. There exists $ F \to \widehat{\Gamma_{\br{p}}} $ sending $ X \to X $ such that $ R \to 1 $, so $ G \twoheadrightarrow \widehat{\Gamma_{\br{p}}} $. By the Hopf property, surjections are isomorphisms.
\end{proof}

How many generators does a pro-$ p $ group need? Since
$$ \H^1\br{G, \FF_p} \cong \Hom\br{G, \FF_p} \cong \Hom\br{G / \Phi\br{G}, \FF_p} \cong \Hom\br{\FF_p^d, \FF_p}, $$
the minimal number of generators is $ \dim_{\FF_p} \H^1\br{G, \FF_p} $.

\begin{theorem}
\label{thm:5.4.28}
Let $ G $ be a topologically finitely generated pro-$ p $ group, and let $ X $ be a finite topological generating set for $ G $, so $ \F\br{X} \twoheadrightarrow G $. Let $ \r_X $ be the minimal size of a set $ R \subseteq \F\br{X} $ such that $ G = \fbr{X \st R}_p $. Then
$$ \abs{X} - \r_X = \dim_{\FF_p} \H^1\br{G, \FF_p} - \dim_{\FF_p} \H^2\br{G, \FF_p}. $$
\end{theorem}

\begin{remark}
\hfill
\begin{itemize}
\item Not true for abstract groups, since $ \abs{X} - \rho_X $ is not a constant for abstract groups, where $ \rho_X $ is the minimal size of $ R $ such that $ \Gamma = \abr{X \st R} $, and different $ X $'s need different numbers of relators.
\item If $ G $ is a finite $ p $-group, then $ \r_X \le \rho_X $. Not known if equality holds.
\end{itemize}
\end{remark}

\begin{lemma}[Non-examinable]
\label{lem:5.4.32}
Let $ F $ be a pro-$ p $ group and $ N \triangleleft_\c F $. Then there exists $ R \subseteq F $ of size $ r $ such that $ N = \overline{\abr{\abr{R}}} $ if and only if $ \dim_{\FF_p} \H^1\br{N, \FF_p}^{F / N} \le r $.
\end{lemma}

\begin{proof}
If $ N = \overline{\abr{\abr{R}}} $, then any $ \phi $ is determined by $ \phi\br{r} $ for $ r \in R $. Then there is an injection $ \H^1\br{N, \FF_p}^{F / N} \hookrightarrow \FF_p^{\abs{R}} $, so $ \dim_{\FF_p} \H^1\br{N, \FF_p}^{F / N} \le \abs{R} $. Suppose $ \dim_{\FF_p} \H^1\br{N, \FF_p}^{F / N} = r $, so there exists $ R \subseteq N $ such that an $ F $-invariant $ \phi : N \to \FF_p $ vanishes if and only if $ \phi $ vanishes on $ R $. Let $ N' = \overline{\abr{\abr{R}}} \subseteq N $. Suppose $ N' \ne N $. Then $ N'\Phi\br{N} \ne N $, so $ M = N / N'\Phi\br{N} $ is a non-trivial abelian pro-$ p $ group, and $ F $ acts by conjugation. So \footnote{Exercise: pure topology} there exists an $ F $-invariant $ M \twoheadrightarrow \FF_p $, since the only simple $ F $-module is $ \FF_p $, a contradiction.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:5.4.28}]
By Lemma \ref{lem:5.4.32}, $ \r_X = \dim_{\FF_p} \H^1\br{N, \FF_p}^{F / N} $. By the five-term exact sequence,
$$
\begin{tikzcd}[row sep=tiny]
0 \arrow{r} & \H^1\br{G, \FF_p} \arrow{r} & \H^1\br{F, \FF_p} \arrow{r}{\alpha} \arrow[cong]{d} & \H^1\br{N, \FF_p}^{F / N} \arrow{r}{\beta} & \H^2\br{G, \FF_p} \arrow{r} & \H^2\br{F, \FF_p} \arrow[cong]{d} \\
& & \FF_p^{\abs{X}} & & & 0
\end{tikzcd},
$$
where $ \dim_{\FF_p} \H^1\br{N, \FF_p}^{F / N} = \r_X $. Then
$$ \dim_{\FF_p} \im \alpha = \dim_{\FF_p} \H^1\br{F, \FF_p} - \dim_{\FF_p} \H^1\br{G, \FF_p} = \abs{X} - \dim_{\FF_p} \H^1\br{G, \FF_p}, $$
and
$$ \dim_{\FF_p} \ker \beta = \dim_{\FF_p} \H^1\br{N, \FF_p}^{F / N} - \dim_{\FF_p} \H^2\br{G, \FF_p} = \r_X - \dim_{\FF_p} \H^2\br{G, \FF_p}. $$
Thus
$$ \abs{X} - \r_X = \dim_{\FF_p} \H^1\br{G, \FF_p} - \dim_{\FF_p} \H^2\br{G, \FF_p}. $$
\end{proof}

\end{document}