\def\module{Local Fields}
\def\lecturer{Dr Rong Zhou}
\def\term{Michaelmas 2020}
\def\cover{}
\def\syllabus{}
\def\thm{subsection}

\input{../style/header}

% Macros
\newcommand{\pp}{\mathfrak{P}}

\begin{document}

\input{../style/cover}

\setcounter{section}{0}

\section{Basic theory}

\lecture{1}{Friday}{09/10/20}

How can we find solutions to Diophantine equations? Let $ f\br{X_1, \dots, X_r} \in \ZZ\sbr{X_1, \dots, X_r} $ be a polynomial with integer coefficients. What are integer or rational solutions to $ f\br{X_1, \dots, X_r} = 0 $? Finding solutions to Diophantine equations in general is a very difficult problem. Consider a related but much simpler problem of solving the congruences
$$ f\br{X_1, \dots, X_r} \equiv 0 \mod p, \qquad \dots, \qquad f\br{X_1, \dots, X_r} \equiv 0 \mod p^n, \qquad \dots. $$
Now this is just a finite computation, since modulo primes there are only finitely many choices for solutions, so this is a much easier problem. Local fields give a way to package all this information together.

\subsection{Absolute values}

\begin{definition}
Let $ K $ be a field. An \textbf{absolute value} on $ K $ is a function $ \abs{\cdot} : K \to \RR_{\ge 0} $ such that
\begin{enumerate}
\item $ \abs{x} = 0 $ if and only if $ x = 0 $,
\item $ \abs{xy} = \abs{x}\abs{y} $ for all $ x, y \in K $, and
\item the triangle inequality $ \abs{x + y} \le \abs{x} + \abs{y} $ for all $ x, y \in K $.
\end{enumerate}
We say $ \br{K, \abs{\cdot}} $ is a \textbf{valued field}.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item Let $ K = \RR, \CC $ with the usual absolute value. Write $ \abs{\cdot}_\infty $ for this absolute value.
\item Let $ K $ be any field. The \textbf{trivial absolute value} on $ K $ is defined by
$$ \abs{x} =
\begin{cases}
0 & x = 0 \\
1 & x \ne 0
\end{cases}.
$$
Ignore this case in this course.
\item Let $ K = \QQ $ and $ p $ a prime. For $ 0 \ne x \in \QQ $, write $ x = p^n\br{a / b} $, where $ a, b \in \ZZ $ such that $ \br{a, p} = 1 $ and $ \br{b, p} = 1 $. The \textbf{p-adic absolute value} is defined to be
$$ \abs{x}_p =
\begin{cases}
0 & x = 0 \\
p^{-n} & x = p^n\dfrac{a}{b}
\end{cases}.
$$
Axiom $ 1 $ is clear. Write $ y = p^m\br{c / d} $. Axiom $ 2 $ is
$$ \abs{xy}_p = \abs{p^{m + n}\dfrac{ac}{bd}}_p = p^{-m - n} = \abs{x}_p\abs{y}_p. $$
Without loss of generality $ m \ge n $. Axiom $ 3 $ is
$$ \abs{x + y}_p = \abs{p^n\dfrac{ad + p^{m - n}bc}{bd}}_p = \abs{p^n}_p\abs{\dfrac{ad + p^{m - n}bc}{bd}}_p \le p^{-n} = \max\br{\abs{x}_p, \abs{y}_p}. $$
\end{itemize}
\end{example*}

An absolute value on $ K $ induces a metric $ \d\br{x, y} = \abs{x - y} $ on $ K $, hence induces a topology on $ K $.

\begin{exercise*}
$ + $ and $ \cdot $ are continuous.
\end{exercise*}

\begin{definition}
Let $ \abs{\cdot} $ and $ \abs{\cdot}' $ be absolute values on a field $ K $. We say $ \abs{\cdot} $ and $ \abs{\cdot}' $ are \textbf{equivalent} if they induce the same topology. An equivalence class of absolute values is called a \textbf{place}.
\end{definition}

\pagebreak

\begin{proposition}
Let $ \abs{\cdot} $ and $ \abs{\cdot}' $ be non-trivial absolute values on $ K $. The following are equivalent.
\begin{enumerate}
\item $ \abs{\cdot} $ and $ \abs{\cdot}' $ are equivalent.
\item $ \abs{x} < 1 $ if and only if $ \abs{x}' < 1 $ for all $ x \in K $.
\item There exists $ c \in \RR_{> 0} $ such that $ \abs{x}^c = \abs{x}' $ for all $ x \in K $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] $ \abs{x} < 1 $ if and only if $ x^n \to 0 $ with respect to $ \abs{\cdot} $, if and only if $ x^n \to 0 $ with respect to $ \abs{\cdot}' $, if and only if $ \abs{x}' < 1 $.
\item[$ 2 \implies 3 $.] Let $ a \in K^\times $ such that $ \abs{a} < 1 $, which exists since $ \abs{\cdot} $ is non-trivial. We need to show that
$$ \dfrac{\log \abs{x}}{\log \abs{a}} = \dfrac{\log \abs{x}'}{\log \abs{a}'}, \qquad x \in K^\times. $$
Assume $ \log \abs{x} / \log \abs{a} < \log \abs{x}' / \log \abs{a}' $. Choose $ m, n \in \ZZ $ such that
$$ \dfrac{\log \abs{x}}{\log \abs{a}} < \dfrac{m}{n} < \dfrac{\log \abs{x}'}{\log \abs{a}'}. $$
Then we have $ n\log \abs{x} < m\log \abs{a} $ and $ n\log \abs{x}' > m\log \abs{a}' $, so $ \abs{x^n / a^m} < 1 $ and $ \abs{x^n / a^m}' > 1 $, a contradiction. Similarly for $ \log \abs{x} / \log \abs{a} > \log \abs{x}' / \log \abs{a}' $.
\item[$ 3 \implies 1 $.] Clear.
\end{itemize}
\end{proof}

This course is mainly interested in the following types of absolute values.

\begin{definition}
An absolute value $ \abs{\cdot} $ on $ K $ is said to be \textbf{non-archimedean} if it satisfies the \textbf{ultrametric inequality}
$$ \abs{x + y} \le \max\br{\abs{x}, \abs{y}}. $$
If $ \abs{\cdot} $ is not non-archimedean, then it is \textbf{archimedean}.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item $ \abs{\cdot}_\infty $ on $ \RR $ is archimedean.
\item $ \abs{\cdot}_p $ is a non-archimedean absolute value on $ \QQ $.
\end{itemize}
\end{example*}

\begin{lemma}[All triangles are isosceles]
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field and $ x, y \in K $. If $ \abs{x} < \abs{y} $, then $ \abs{x - y} = \abs{y} $.
\end{lemma}

\begin{fact*}
\hfill
\begin{itemize}
\item $ \abs{1} = \abs{-1} = 1 $.
\item $ \abs{-y} = \abs{y} $.
\end{itemize}
\end{fact*}

\begin{proof}
$ \abs{x - y} \le \max\br{\abs{x}, \abs{y}} = \abs{y} $, and $ \abs{y} \le \max\br{\abs{x}, \abs{x - y}} $, so $ \abs{y} \le \abs{x - y} $.
\end{proof}

Convergence is easier for non-archimedean $ \abs{\cdot} $.

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be non-archimedean and $ \br{x_n}_{n = 1}^\infty $ a sequence in $ K $. If $ \abs{x_n - x_{n + 1}} \to 0 $, then $ \br{x_n}_{n = 1}^\infty $ is Cauchy. In particular, if $ K $ is in addition complete, then $ \br{x_n}_{n = 1}^\infty $ converges.
\end{proposition}

\begin{proof}
For $ \epsilon > 0 $, choose $ N $ such that $ \abs{x_n - x_{n + 1}} < \epsilon $ for all $ n > N $. Then for $ N < n < m $,
$$ \abs{x_n - x_m} = \abs{\br{x_n - x_{n + 1}} + \dots + \br{x_{m - 1} - x_m}} < \epsilon, $$
so $ \br{x_n}_{n = 1}^\infty $ is Cauchy.
\end{proof}

\pagebreak

\begin{example*}
Let $ p = 5 $. Construct a sequence $ \br{x_n}_{n = 1}^\infty $ such that
\begin{enumerate}
\item $ x_n^2 + 1 \equiv 0 \mod 5^n $, and
\item $ x_n \equiv x_{n + 1} \mod 5^n $,
\end{enumerate}
as follows. Take $ x_1 = 2 $. Suppose have constructed $ x_n $. Let $ x_n^2 + 1 = a5^n $ and set $ x_{n + 1} = x_n + b5^n $. Then
$$ x_{n + 1}^2 + 1 = x_n^2 + 2bx_n5^n + b^25^{2n} + 1 = a5^n + 2x_nb5^n + b^25^{2n} \equiv \br{a + 2x_nb}5^n \mod 5^{n + 1}. $$
We choose $ b $ such that $ a + 2x_nb \equiv 0 \mod 5 $. Then we have $ x_{n + 1}^2 + 1 \equiv 0 \mod 5^{n + 1} $ as desired. By $ 2 $, $ \br{x_n}_{n = 1}^\infty $ is Cauchy. Suppose $ x_n \to L \in \QQ $. Then $ x_n^2 \to L^2 $. But by $ 1 $, $ x_n^2 \to -1 $, so $ L^2 = -1 $, a contradiction. Thus $ \br{\QQ, \abs{\cdot}_5} $ is not complete.
\end{example*}

\begin{definition}
The \textbf{$ p $-adic numbers} $ \QQ_p $ is the completion of $ \QQ $ with respect to $ \abs{\cdot}_p $.
\end{definition}

\begin{remark*}
By analogy, $ \RR $ is the completion of $ \QQ $ with respect to $ \abs{\cdot}_\infty $.
\end{remark*}

\lecture{2}{Monday}{12/10/20}

Let $ K $ be a non-archimedean valued field. For $ x \in K $ and $ r \in \RR_{> 0} $, define
$$ \B\br{x, r} = \cbr{y \in K \st \abs{x - y} < r}, \qquad \overline{\B}\br{x, r} = \cbr{y \in K \st \abs{x - y} \le r}. $$

\begin{lemma}
Let $ \br{K, \abs{\cdot}} $ be non-archimedean.
\begin{enumerate}
\item If $ z \in \B\br{x, r} $, then $ \B\br{z, r} = \B\br{x, r} $, so open balls do not have centres.
\item If $ z \in \overline{\B}\br{x, r} $, then $ \overline{\B}\br{z, r} = \overline{\B}\br{x, r} $.
\item $ \B\br{x, r} $ is closed.
\item $ \overline{\B}\br{x, r} $ is open.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ y \in \B\br{x, r} $. Then $ \abs{x - y} < r $, so $ \abs{z - y} = \abs{\br{z - x} + \br{x - y}} \le \max\br{\abs{z - x}, \abs{x - y}} < r $. Thus $ \B\br{x, r} \subseteq \B\br{z, r} $. The reverse inclusion follows by symmetry.
\item Same as $ 1 $.
\item Let $ y \notin \B\br{x, r} $. If $ z \in \B\br{x, r} \cap \B\br{y, r} $, then $ \B\br{x, r} = \B\br{z, r} = \B\br{y, r} $, so $ y \in \B\br{x, r} $, a contradiction. Thus $ \B\br{x, r} \cap \B\br{y, r} = \emptyset $.
\item If $ z \in \overline{\B}\br{x, r} $, then $ \B\br{z, r} \subseteq \overline{\B}\br{z, r} = \overline{\B}\br{x, r} $, by $ 2 $.
\end{enumerate}
\end{proof}

\subsection{Valuation rings}

\begin{definition}
Let $ K $ be a field. A \textbf{valuation} on $ K $ is a function $ v : K^\times \to \RR $ such that
\begin{itemize}
\item $ v\br{xy} = v\br{x} + v\br{y} $, and
\item $ v\br{x + y} \ge \min\br{v\br{x}, v\br{y}} $.
\end{itemize}
\end{definition}

Fix $ 0 < \alpha < 1 $. If $ v $ is a valuation on $ K $, then
$$ \abs{x} =
\begin{cases}
\alpha^{v\br{x}} & x \ne 0 \\
0 & x = 0
\end{cases}
$$
determines a non-archimedean absolute value. Conversely, a non-archimedean absolute value determines a valuation $ v\br{x} = \log_a \abs{x} $.

\begin{remark*}
\hfill
\begin{itemize}
\item We ignore the trivial valuation $ v\br{x} = 0 $ for all $ x \in K^\times $, which corresponds to the trivial absolute value.
\item Say $ v_1 $ and $ v_2 $ are \textbf{equivalent} if there exists $ c \in \RR_{> 0} $ such that $ v_1\br{x} = cv_2\br{x} $ for all $ x \in K^\times $.
\end{itemize}
\end{remark*}

\pagebreak

\begin{example*}
\hfill
\begin{itemize}
\item If $ K = \QQ $, then $ \v_p\br{x} = -\log_p \abs{x}_p $ is the \textbf{$ p $-adic valuation}.
\item If $ k $ is a field and $ K = k\br{t} = \Frac k\sbr{t} $ is the \textbf{rational function field}, then
$$ \v\br{t^n\dfrac{f\br{t}}{g\br{t}}} = n, \qquad f, g \in k\sbr{t}, \qquad f\br{0}, g\br{0} \ne 0 $$
is the \textbf{$ t $-adic valuation}.
\item If $ K = k\br{\br{t}} = \Frac k\sbr{\sbr{t}} = \cbr{\sum_{i = n}^\infty a_it^i \st a_i \in k, \ n \in \ZZ} $ is the \textbf{field of formal Laurent series} over $ k $, then
$$ \v\br{\sum_i a_it^i} = \min \cbr{i \st a_i \ne 0} $$
is the $ t $-adic valuation on $ K $.
\end{itemize}
\end{example*}

\begin{definition}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field. The \textbf{valuation ring} of $ K $ is defined to be
$$ \OOO_K = \overline{\B}\br{0, 1} = \cbr{x \in K \st \abs{x} \le 1} = \cbr{x \in K^\times \st v\br{x} \ge 0} \cup \cbr{0}. $$
\end{definition}

\begin{proposition}
\hfill
\begin{enumerate}
\item $ \OOO_K $ is an open subring of $ K $.
\item The subsets $ \cbr{x \in K \st \abs{x} \le r} $ and $ \cbr{x \in K \st \abs{x} < r} $ for $ r \le 1 $ are open ideals in $ \OOO_K $.
\item $ \OOO_K^\times = \cbr{x \in K \st \abs{x} = 1} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item By last lecture, $ \abs{1} = 1 $, so $ 1 \in \OOO_K $. Since $ \abs{0} = 0 $, $ 0 \in \OOO_K $. Since $ \abs{-1} = 1 $, $ \abs{-x} = \abs{x} $. Thus if $ x \in \OOO_K $, then $ -x \in \OOO_K $. If $ x, y \in \OOO_K $, then $ \abs{x + y} \le \max\br{\abs{x}, \abs{y}} \le 1 $, so $ x + y \in \OOO_K $. If $ x, y \in \OOO_K $, then $ \abs{xy} = \abs{x}\abs{y} \le 1 $, so $ xy \in \OOO_K $. Thus $ \OOO_K $ is a ring. Since $ \OOO_K = \overline{\B}\br{0, 1} $ it is open.
\item Similar to $ 1 $.
\item Note that $ \abs{x}\abs{x^{-1}} = \abs{xx^{-1}} = 1 $. Thus $ \abs{x} = 1 $ if and only if $ \abs{x^{-1}} = 1 $, if and only if $ x, x^{-1} \in \OOO_K $, if and only if $ x \in \OOO_K^\times $.
\end{enumerate}
\end{proof}

\begin{notation*}
\hfill
\begin{itemize}
\item $ \mmm = \cbr{x \in \OOO_K \st \abs{x} < 1} $ is a maximal ideal of $ \OOO_K $.
\item $ k = \OOO_K / \mmm $ is the \textbf{residue field}.
\end{itemize}
\end{notation*}

A ring is \textbf{local} if it has a unique maximal ideal.

\begin{exercise*}
$ R $ is local if and only if $ R \setminus R^\times $ is an ideal.
\end{exercise*}

\begin{corollary}
$ \OOO_K $ is a local ring with unique maximal ideal $ \mmm $.
\end{corollary}

\begin{example*}
\hfill
\begin{itemize}
\item If $ K = k\br{\br{t}} $, then $ \OOO_K = k\sbr{\sbr{t}} $, $ \mmm = \abr{t} $, and the residue field is $ k $.
\item If $ K = \QQ $ with $ \abs{\cdot}_p $, then $ \OOO_K = \ZZ_{\br{\abr{p}}} $, $ \mmm = p\ZZ_{\br{\abr{p}}} $, and $ k = \FF_p $.
\end{itemize}
\end{example*}

\begin{definition}
Let $ v : K^\times \to \RR $ be a valuation. If $ v\br{K^\times} \cong \ZZ $, we say $ v $ is a \textbf{discrete valuation}, and $ K $ is said to be a \textbf{discretely valued field}. An element $ \pi \in \OOO_K $ is a \textbf{uniformiser} if $ v\br{\pi} > 0 $ and $ v\br{\pi} $ generates $ v\br{K^\times} $.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item $ K = \QQ $ with the $ p $-adic valuation.
\item $ K = k\br{t} $ with the $ t $-adic valuation.
\end{itemize}
\end{example*}

\pagebreak

\begin{remark*}
If $ v $ is a discrete valuation, we can replace it with an equivalent one such that $ v\br{K^\times} = \ZZ \subseteq \RR $. Such $ v $ are called \textbf{normalised valuations}. Then $ v\br{\pi} = 1 $ for $ \pi $ a uniformiser.
\end{remark*}

\begin{lemma}
\label{lem:2.6}
Let $ v $ be a valuation on $ K $. The following are equivalent.
\begin{enumerate}
\item $ v $ is discrete.
\item $ \OOO_K $ is a PID.
\item $ \OOO_K $ is Noetherian.
\item $ \mmm $ is principal.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] Let $ I \subseteq \OOO_K $ be a non-zero ideal. Let $ x \in I $ such that $ v\br{x} = \min \cbr{v\br{a} \st a \in I} $ which exists since $ v $ is discrete. Then $ x\OOO_K = \cbr{a \in \OOO_K \st v\br{a} \ge v\br{x}} \subseteq I $, and hence $ x\OOO_K = I $ by definition of $ x $.
\item[$ 2 \implies 3 $.] Clear.
\item[$ 3 \implies 4 $.] Write $ \mmm = \OOO_Kx_1 + \dots + \OOO_Kx_n $. Without loss of generality $ v\br{x_1} \le \dots \le v\br{x_n} $. Then $ \mmm = \OOO_Kx_1 $.
\item[$ 4 \implies 1 $.] Let $ \mmm = \OOO_K\pi $ for some $ \pi \in \OOO_K $ and let $ c = v\br{\pi} $. Then if $ v\br{x} > 0 $, then $ x \in \mmm $ and hence $ v\br{x} \ge c $. Thus $ v\br{K^\times} \cap \br{0, c} = \emptyset $. Since $ v\br{K^\times} $ is a subgroup of $ \br{\RR, +} $, we have $ v\br{K^\times} = c\ZZ $.
\end{itemize}
\end{proof}

\begin{lemma}
Let $ v $ be a discrete valuation on $ K $ and $ \pi \in \OOO_K $ a uniformiser. For all $ x \in K^\times $, there exist $ n \in \ZZ $ and $ u \in \OOO_K^\times $ such that $ x = \pi^nu $. In particular $ K = \OOO_K\sbr{1 / x} $ for any $ x \in \mmm $ and hence $ K = \Frac \OOO_K $.
\end{lemma}

\begin{proof}
For $ x \in K^\times $, let $ n $ such that $ v\br{x} = nv\br{\pi} = v\br{\pi^n} $, then $ v\br{x\pi^{-n}} = 0 $, so $ u = x\pi^{-n} \in \OOO_K^\times $.
\end{proof}

\begin{definition}
A ring $ R $ is called a \textbf{discrete valuation ring (DVR)} if it is a PID with exactly one non-zero prime ideal, necessarily maximal.
\end{definition}

\begin{lemma}
\hfill
\begin{enumerate}
\item Let $ v $ be a discrete valuation on $ K $. Then $ \OOO_K $ is a DVR.
\item Let $ R $ be a DVR. Then there exists a valuation $ v $ on $ K = \Frac R $ such that $ R = \OOO_K $.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{enumerate}
\item $ \OOO_K $ is a PID by Lemma \ref{lem:2.6}. Let $ 0 \ne I \subseteq \OOO_K $ be an ideal, then $ I = \abr{x} $. If $ x = \pi^nu $ for $ \pi $ a uniformiser, then $ \abr{x} $ is prime if and only if $ n = 1 $ and $ I = \abr{\pi} = \mmm $.
\item Let $ R $ be a DVR with maximal ideal $ \mmm $. Then $ \mmm = \abr{\pi} $ for some $ \pi \in R $. By unique factorisation of PIDs, we may write any $ x \in R \setminus \cbr{0} $ uniquely as $ \pi^nu $ for $ n \ge 0 $ and $ u \in R^\times $. Then any $ y \in K \setminus \cbr{0} $ can be written uniquely as $ \pi^mu $ for $ u \in R^\times $ and $ m \in \ZZ $. Define $ v\br{\pi^mu} = m $. It is easy to check $ v $ is a valuation and $ \OOO_K = R $.
\end{enumerate}
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item $ \ZZ_{\br{\abr{p}}} $ is a DVR, the valuation ring of $ \abs{\cdot}_p $ on $ \QQ $.
\item The ring of formal power series $ k\sbr{\sbr{t}} = \cbr{\sum_{n \ge 0} a_nt^n \st a_n \in k} $ is a DVR, the valuation ring for the $ t $-adic absolute value on $ k\br{\br{t}} $.
\item Non-example. If $ K = k\br{t} $ is the rational function field and $ K' = K\br{t^{1 / 2}, t^{1 / 4}, \dots} $, then the $ t $-adic valuation extends to $ K' $, and $ \v\br{t^{1 / 2^n}} = 1 / 2^n $ is not discrete.
\end{itemize}
\end{example*}

\pagebreak

\subsection{The \texorpdfstring{$ p $}{p}-adic numbers}

\lecture{3}{Wednesday}{14/10/20}

Recall that $ \QQ_p $ is defined to be the completion of $ \QQ $ with respect to the metric induced by $ \abs{\cdot}_p $. By example sheet $ 1 $, $ \QQ_p $ is a field, $ \abs{\cdot}_p $ extends to $ \QQ_p $, and the associated valuation is discrete, so $ \QQ_p $ is a discretely valued field.

\begin{definition}
The ring of \textbf{$ p $-adic integers} $ \ZZ_p $ is the valuation ring
$$ \ZZ_p = \cbr{x \in \QQ_p \st \abs{x}_p \le 1}. $$
\end{definition}

\begin{fact*}
\hfill
\begin{itemize}
\item $ \ZZ_p $ is a DVR with maximal ideal $ p\ZZ_p $.
\item The non-zero ideals in $ \ZZ_p $ are $ p^n\ZZ_p $ for $ n \in \NN $.
\end{itemize}
\end{fact*}

\begin{proposition}
$ \ZZ_p $ is the closure of $ \ZZ $ inside $ \QQ_p $. In particular $ \ZZ_p $ is the completion of $ \ZZ $ with respect to $ \abs{\cdot}_p $.
\end{proposition}

\begin{proof}
Need to show $ \ZZ $ is dense in $ \ZZ_p $. Since $ \QQ $ is dense in $ \QQ_p $ and $ \ZZ_p \subseteq \QQ_p $ is open, $ \ZZ_p \cap \QQ $ is dense in $ \ZZ_p $. Then
$$ \ZZ_p \cap \QQ = \cbr{x \in \QQ \st \abs{x}_p \le 1} = \cbr{\dfrac{a}{b} \in \QQ \st p \nmid b} = \ZZ_{\br{\abr{p}}}, $$
the localisation at $ \abr{p} $. Thus it suffices to show $ \ZZ $ is dense in $ \ZZ_{\br{\abr{p}}} $. Let $ a / b \in \ZZ_{\br{\abr{p}}} $ for $ a, b \in \ZZ $ and $ p \nmid b $. For $ n \in \NN $, choose $ y_n \in \ZZ $ such that $ by_n \equiv a \mod p^n $. Then $ y_n \to a / b $ as $ n \to \infty $. In particular, $ \ZZ $ is dense in $ \ZZ_p $, which is complete.
\end{proof}

Let $ \br{A_n}_{n = 1}^\infty $ be a sequence of sets or groups or rings together with homomorphisms $ \phi_n : A_{n + 1} \to A_n $, the \textbf{transition maps}. The \textbf{inverse limit} of $ \br{A_n}_{n = 1}^\infty $ is the set or group or ring
$$ \varprojlim_n A_n = \cbr{\br{a_n}_{n = 1}^\infty \in \prod_{n = 1}^\infty A_n \st \phi_n\br{a_{n + 1}} = a_n}, $$
so
$$
\begin{array}{ccccc}
A_{n + 1} & \xrightarrow{\phi_n} & A_n & \xrightarrow{\phi_{n - 1}} & A_{n - 1} \\
a_{n + 1} & \longmapsto & a_n & \longmapsto & a_{n - 1}
\end{array}.
$$

\begin{fact*}
If $ A_n $ is a group or ring, then $ \varprojlim_n A_n $ is a group or ring.
\end{fact*}

Let $ \theta_m : \varprojlim_n A_n \to A_m $ denote the natural projection. The inverse limit satisfies the following universal property.

\begin{proposition}
Let $ \br{\br{A_n}_{n = 1}^\infty, \br{\phi_n}_{n = 1}^\infty} $ as above. Then for any set or group or ring $ B $ together with homomorphisms $ \psi_n : B \to A_n $ such that
$$
\begin{tikzcd}
B \arrow{r}{\psi_{n + 1}} \arrow{dr}[swap]{\psi_n} & A_{n + 1} \arrow{d}{\phi_n} \\
& A_n
\end{tikzcd}
$$
commutes for all $ n $, there is a unique homomorphism $ \psi : B \to \varprojlim_n A_n $ such that $ \theta_n \circ \psi = \psi_n $.
\end{proposition}

\begin{proof}
Define
$$ \function[\psi]{B}{\displaystyle\prod_{n = 1}^\infty A_n}{b}{\displaystyle\prod_{n = 1}^\infty \psi_n\br{b}}. $$
Then $ \psi_n = \phi_n \circ \psi_{n + 1} $ implies that $ \psi\br{b} \in \varprojlim_n A_n $. The map is clearly unique, determined by $ \psi_n = \phi_n \circ \psi_{n + 1} $, and is a homomorphism of rings.
\end{proof}

\pagebreak

\begin{definition}
Let $ R $ be a ring and $ I \subseteq R $ an ideal. The \textbf{$ I $-adic completion} of $ R $ is the ring
$$ \widehat{R} = \varprojlim_n R / I^n, $$
where $ \phi_n : R / I^{n + 1} \to R / I^n $ is the natural projection. Note there is a natural map $ \iota : R \to \widehat{R} $ by the universal property. We say that $ R $ is \textbf{$ I $-adically complete} if $ \iota $ is an isomorphism.
\end{definition}

\begin{fact*}
$ \ker \br{\iota : R \to \widehat{R}} = \bigcap_{n = 1}^\infty I^n $.
\end{fact*}

Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field and $ \pi \in \OOO_K $ such that $ \abs{\pi} < 1 $.

\begin{proposition}
\label{prop:3.5}
Assume $ K $ is complete.
\begin{enumerate}
\item Then $ \OOO_K \cong \varprojlim_n \OOO_K / \pi^n\OOO_K $, so $ \OOO_K $ is $ \pi $-adically complete.
\item If in addition $ K $ is discretely valued and $ \pi $ is a uniformiser, then every $ x \in \OOO_K $ can be written uniquely as $ x = \sum_{i = 0}^\infty a_i\pi^i $ for $ a_i \in A $, where $ A $ is a set of coset representatives for $ k = \OOO_K / \pi\OOO_K $. Moreover, any series $ \sum_{i = 0}^\infty a_i\pi^i $ converges to an element in $ \OOO_K $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ \iota : \OOO_K \to \varprojlim_n \OOO_K / \pi^n\OOO_K $. Since $ \bigcap_{n = 1}^\infty \pi^n\OOO_K = \cbr{0} $, $ \iota $ is injective. Let $ \br{x_n}_{n = 1}^\infty \in \varprojlim_n \OOO_K / \pi^n\OOO_K $ and for each $ n $, choose $ y_n \in \OOO_K $ a lift of $ x_n \in \OOO_K / \pi^n\OOO_K $. Let $ v $ be the valuation on $ K $ normalised such that $ v\br{\pi} = 1 $, then $ v\br{y_n - y_{n + 1}} \ge n $, since $ y_n - y_{n + 1} \in \pi^n\OOO_K $, so $ \br{y_n}_{n = 1}^\infty $ is a Cauchy sequence in $ \OOO_K $. But $ \OOO_K $ is complete, since $ \OOO_K \subseteq K $ is closed, so $ y_n \to y $, and $ y $ maps to $ \br{x_n}_{n = 1}^\infty $. Thus $ \iota $ is surjective.
\item Let $ x \in \OOO_K $. Choose $ a_i $ inductively. Choose $ a_0 \in A $ such that $ a_0 \equiv x \mod \pi $. Suppose have chosen $ a_0, \dots, a_k $ such that $ \sum_{i = 0}^k a_i\pi^i \equiv x \mod \pi^{k + 1} $. Then $ \sum_{i = 0}^k a_i\pi^i - x = c\pi^{k + 1} $ for $ c \in \OOO_K $. Choose $ a_{k + 1} \equiv -c \mod \pi $. Then $ \sum_{i = 0}^{k + 1} a_i\pi^i \equiv x \mod \pi^{k + 2} $, so $ \sum_{i = 0}^\infty a_i\pi^i = x $. For uniqueness, assume $ \sum_{i = 0}^\infty a_i\pi^i = \sum_{i = 0}^\infty b_i\pi^i \in \OOO_K $. Then let $ n $ be minimal such that $ a_n \ne b_n $. Then $ \sum_{i = 0}^\infty a_i\pi^i \not\equiv \sum_{i = 0}^\infty b_i\pi^i \mod \pi^{n + 1} $, a contradiction.
\end{enumerate}
\end{proof}

A warning is if $ \br{K, \abs{\cdot}} $ is not discretely valued, $ \OOO_K $ is not necessarily $ \mmm $-adically complete.

\begin{corollary}
\label{cor:3.6}
If $ K $ is as in Proposition \ref{prop:3.5}.$ 2 $, then every $ x \in K $ can be written uniquely as $ \sum_{i = n}^\infty a_i\pi^i $ for $ a_i \in A $. Conversely any such expression defines an element of $ K $.
\end{corollary}

\begin{proof}
Use $ K = \OOO_K\sbr{1 / \pi} $.
\end{proof}

\begin{corollary}
\hfill
\begin{enumerate}
\item $ \ZZ_p \cong \varprojlim_n \ZZ / p^n\ZZ $.
\item Every element of $ \QQ_p $ can be written uniquely as $ \sum_{i = n}^\infty a_ip^i $ for $ a_i \in \cbr{0, \dots, p - 1} $.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item By Proposition \ref{prop:3.5}, it suffices to show that $ \ZZ_p / p^n\ZZ_p \cong \ZZ / p^n\ZZ $. Let $ f_n : \ZZ \to \ZZ_p / p^n\ZZ_p $ be the natural map. We have $ \ker f_n = \cbr{x \in \ZZ \st \abs{x}_p \le p^{-n}} = p^n\ZZ $, so $ \ZZ / p^n\ZZ \to \ZZ_p / p^n\ZZ_p $ is injective. Let $ \overline{c} \in \ZZ_p / p^n\ZZ_p $, and $ c \in \ZZ_p $ a lift. Since $ \ZZ $ is dense in $ \ZZ_p $, can choose $ x \in \ZZ $ such that $ x \in c + p^n\ZZ_p $, which is open in $ \ZZ_p $, so $ f_n\br{x} = \overline{c} $. Thus $ \ZZ / p^n\ZZ \to \ZZ_p / p^n\ZZ_p $ is surjective.
\item Follows from Corollary \ref{cor:3.6} noting that $ \ZZ_p / p\ZZ_p \cong \FF_p $.
\end{enumerate}
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item $ 1 / \br{1 - p} = 1 + p + \dots \in \QQ_p $.
\item Let $ K = k\br{\br{t}} $ with the $ t $-adic valuation. Then $ \OOO_K = k\sbr{\sbr{t}} = \varprojlim_n k\sbr{\sbr{t}} / \abr{t^n} $. Moreover $ \OOO_K $ is the $ t $-adic completion of $ k\sbr{t} $.
\end{itemize}
\end{example*}

\pagebreak

\section{Complete valued fields}

\subsection{Hensel's lemma}

\lecture{4}{Friday}{16/10/20}

For complete valued fields, there is a nice way to produce solutions in $ \OOO_K $ to certain equations from solutions modulo $ \mmm $.

\begin{theorem}[Hensel's lemma version $ 1 $]
\label{thm:4.1}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field. Let $ f\br{X} \in \OOO_K\sbr{X} $ and assume there exists $ a \in \OOO_K $ such that $ \abs{f\br{a}} < \abs{f'\br{a}}^2 $, where $ f'\br{a} $ is the \textbf{formal derivative} such that if $ f\br{X} = X^n $ then $ f'\br{X} = nX^{n - 1} $. Then there exists a unique $ x \in \OOO_K $ such that $ f\br{x} = 0 $ and $ \abs{x - a} < \abs{f'\br{a}} $.
\end{theorem}

\begin{proof}
Let $ \pi \in \OOO_K $ be a uniformiser and let $ r = v\br{f'\br{a}} $. We construct a sequence $ \br{x_n}_{n = 1}^\infty $ in $ \OOO_K $ such that
\begin{enumerate}
\item $ f\br{x_n} \equiv 0 \mod \pi^{n + 2r} $, and
\item $ x_{n + 1} \equiv x_n \mod \pi^{n + r} $.
\end{enumerate}
Take $ x_1 = a $, then $ f\br{x_1} \equiv 0 \mod \pi^{1 + 2r} $. Suppose have constructed $ x_1, \dots, x_n $ satisfying $ 1 $ and $ 2 $. Define
$$ x_{n + 1} = x_n - \dfrac{f\br{x_n}}{f'\br{x_n}}. $$
\begin{itemize}
\item[$ 2 $.] Since $ x_n \equiv x_1 \mod \pi^{1 + r} $, $ v\br{f'\br{x_n}} = r $ and hence $ f\br{x_n} / f'\br{x_n} \equiv 0 \mod \pi^{n + r} $ by $ 1 $. It follows that $ x_{n + 1} \equiv x_n \mod \pi^{n + r} $ so $ 2 $ holds.
\item[$ 1 $.] Note that for $ X $ and $ Y $ indeterminates,
$$ f\br{X + Y} = f_0\br{X} + f_1\br{X}Y + \dots, \qquad f_i\br{X} \in \OOO_K\sbr{X}, \qquad f_0\br{X} = f\br{X}, \qquad f_1\br{X} = f'\br{X}. $$
Thus
$$ f\br{x_{n + 1}} = f\br{x_n} + f'\br{x_n}c + \dots, \qquad c = -\dfrac{f\br{x_n}}{f'\br{x_n}}. $$
Since $ c \equiv 0 \mod \pi^{n + r} $ and $ v\br{f_i\br{x_n}} \ge 0 $, we have $ f\br{x_{n + 1}} \equiv f\br{x_n} + f'\br{x_n}c \equiv 0 \mod \pi^{n + 2r + 1} $, so $ 1 $ holds.
\end{itemize}
This gives the construction of $ \br{x_n}_{n = 1}^\infty $.
\begin{itemize}
\item By property $ 2 $, $ \br{x_n}_{n = 1}^\infty $ is Cauchy, so let $ x \in \OOO_K $ such that $ x_n \to x $. Then $ f\br{x} = \lim_{n \to \infty} f\br{x_n} = 0 $ by $ 1 $. Moreover $ 2 $ implies $ a = x_1 \equiv x_n \mod \pi^{1 + r} $ for all $ n $, so $ a \equiv x \mod \pi^{1 + r} $, so $ \abs{x - a} < \abs{f'\br{a}} $. This proves existence.
\item For uniqueness, suppose $ x' $ also satisfies $ f\br{x'} = 0 $ and $ \abs{x' - a} < \abs{f'\br{a}} $. Set $ \delta = x' - x \ne 0 $. Then $ \abs{x' - a} < \abs{f'\br{a}} $, $ \abs{x - a} < \abs{f'\br{a}} $, and the ultrametric inequality implies $ \abs{\delta} = \abs{x - x'} < \abs{f'\br{a}} = \abs{f'\br{x}} $. But
$$ 0 = f\br{x'} = f\br{x + \delta} = f\br{x} + f'\br{x}\delta + \underbrace{\dots}_{\abs{\cdot} \le \abs{\delta}^2}, $$
where $ f\br{x} = 0 $. Hence $ \abs{f'\br{x}\delta} \le \abs{\delta}^2 $, so $ \abs{f'\br{x}} \le \abs{\delta} $, a contradiction.
\end{itemize}
\end{proof}

\begin{corollary}
\label{cor:4.2}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field. Let $ f\br{X} \in \OOO_K\sbr{X} $ and $ \overline{c} \in k = \OOO_K / \mmm $ a simple root of $ \overline{f}\br{X} = f\br{X} \mod \mmm \in k\sbr{X} $. Then there exists a unique $ x \in \OOO_K $ such that $ f\br{x} = 0 $ and $ x \equiv \overline{c} \mod \mmm $.
\end{corollary}

\begin{proof}
Apply Theorem \ref{thm:4.1} to a lift $ c \in \OOO_K $ of $ \overline{c} $. Then $ \abs{f\br{c}} < \abs{f'\br{c}}^2 = 1 $ since $ \overline{c} $ is a simple root.
\end{proof}

\begin{example*}
$ f\br{X} = X^2 - 2 $ has a simple root modulo seven. Thus $ \sqrt{2} \in \ZZ_7 \subseteq \QQ_7 $.
\end{example*}

\pagebreak

\begin{corollary}
$$ \QQ_p^\times / \br{\QQ_p^\times}^2 \cong
\begin{cases}
\br{\ZZ / 2\ZZ}^2 & p > 2 \\
\br{\ZZ / 2\ZZ}^3 & p = 2
\end{cases}.
$$
\end{corollary}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ p > 2 $.] Let $ b \in \ZZ_p^\times $. Applying Corollary \ref{cor:4.2} to $ f\br{X} = X^2 - b $, we find that $ b \in \br{\ZZ_p^\times}^2 $ if and only if $ b \in \br{\FF_p^\times}^2 $. Thus $ \ZZ_p^\times / \br{\ZZ_p^\times}^2 \cong \FF_p^\times / \br{\FF_p^\times}^2 \cong \ZZ / 2\ZZ $ since $ \FF_p^\times \cong \ZZ / \br{p - 1}\ZZ $. We have an isomorphism $ \QQ_p^\times \cong \ZZ_p^\times \times \ZZ $ given by $ \br{u, n} \mapsto up^n $. Thus $ \QQ_p^\times / \br{\QQ_p^\times}^2 \cong \br{\ZZ / 2\ZZ}^2 $.
\item[$ p = 2 $.] Let $ b \in \ZZ_2^\times $. Consider $ f\br{X} = X^2 - b $. Then $ f'\br{X} = 2X \equiv 0 \mod 2 $. Let $ b \equiv 1 \mod 8 $. Then $ \abs{f\br{1}}_2 \le 2^{-3} < \abs{f'\br{1}}_2^2 = 2^{-2} $. By Hensel's lemma, $ f\br{X} $ has a root in $ \ZZ_2 $, so $ b \in \br{\ZZ_2^\times}^2 $ if and only if $ b \equiv 1 \mod 8 $. Thus $ \ZZ_2^\times / \br{\ZZ_2^\times}^2 \cong \br{\ZZ / 8\ZZ}^\times \cong \br{\ZZ / 2\ZZ}^2 $. Again using $ \QQ_2^\times \cong \ZZ_2^\times \times \ZZ $, we find that $ \QQ_2^\times / \br{\QQ_2^\times}^2 \cong \br{\ZZ / 2\ZZ}^3 $.
\end{itemize}
\end{proof}

\begin{remark*}
The proof of Hensel's lemma uses the iteration $ x_{n + 1} = x_n - f\br{x_n} / f'\br{x_n} $, the non-archimedean analogue of the Newton-Raphson method.
\end{remark*}

For later applications, we need the following version of Hensel's lemma.

\begin{theorem}[Hensel's lemma version $ 2 $]
\label{thm:4.4}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field and $ f\br{X} \in \OOO_K\sbr{X} $. Suppose $ \overline{f}\br{X} = f\br{X} \mod \mmm \in k\sbr{X} $ factorises as $ \overline{f}\br{X} = \overline{g}\br{X}\overline{h}\br{X} $ in $ k\sbr{X} $, with $ \overline{g}\br{X} $ and $ \overline{h}\br{X} $ coprime. Then there is a factorisation $ f\br{X} = g\br{X}h\br{X} $ in $ \OOO_K\sbr{X} $, with $ \overline{g}\br{X} = g\br{X} \mod \mmm $, $ \overline{h}\br{X} = h\br{X} \mod \mmm $, and $ \deg \overline{g} = \deg g $.
\end{theorem}

\begin{proof}
Example sheet $ 1 $.
\end{proof}

\begin{corollary}
\label{cor:4.5}
Let $ f\br{X} = a_nX^n + \dots + a_0 \in K\sbr{X} $ with $ a_0, a_n \ne 0 $. If $ f\br{X} $ is irreducible, then $ \abs{a_i} \le \max\br{\abs{a_0}, \abs{a_n}} $ for all $ i $.
\end{corollary}

\begin{proof}
Upon scaling, we may assume $ f\br{X} \in \OOO_K\sbr{X} $ with $ \max_i \br{\abs{a_i}} = 1 $. Thus we need to show that $ \max\br{\abs{a_0}, \abs{a_n}} = 1 $. If not, let $ r $ be minimal such that $ \abs{a_r} = 1 $, then $ 0 < r < n $. Thus we have $ \overline{f}\br{X} = X^r\br{a_r + \dots + a_nX^{n - r}} \mod \mmm $. Then Theorem \ref{thm:4.4} implies $ f\br{X} = g\br{X}h\br{X} $ and $ 0 < \deg g < n $.
\end{proof}

\subsection{Teichm\"uller lifts}

\lecture{5}{Monday}{19/10/20}

Recall that in lecture $ 3 $ every element of $ x \in \QQ_p $ can be written as $ x = \sum_{i = n}^\infty a_ip^i $ for $ a_i \in A = \cbr{0, \dots, p - 1} $, but $ \FF_p \to A \subseteq \ZZ_p $ does not respect any algebraic structure. It turns out there is a natural choice of coset representatives in many cases which does respect some algebraic structure.

\begin{definition}
A ring $ R $ of characteristic $ p $ is a \textbf{perfect ring} if the Frobenius $ x \mapsto x^p $ is an automorphism of $ R $. A field of characteristic $ p $ is a \textbf{perfect field} if it is perfect as a ring.
\end{definition}

\begin{remark*}
Since $ \ch R = p $, $ \br{x + y}^p = x^p + y^p $, so Frobenius is a ring homomorphism.
\end{remark*}

\begin{example*}
\hfill
\begin{itemize}
\item $ \FF_{p^n} $ and $ \overline{\FF_p} $ are perfect fields.
\item $ \FF_p\sbr{t} $ is not perfect, since $ t \notin \im \Frob $.
\item $ \FF_p\br{t^{1 / p^\infty}} = \FF_p\br{t, t^{1 / p}, \dots} $ is a perfect field, the \textbf{perfection} of $ \FF_p\br{t} $. The $ t $-adic absolute value extends to $ \FF_p\br{t^{1 / p^\infty}} $, and the completion of $ \FF_p\br{t^{1 / p^\infty}} $ is a \textbf{perfectoid field}.
\end{itemize}
\end{example*}

\begin{fact*}
A field $ k $ is perfect if and only if any finite extension of $ k $ is separable.
\end{fact*}

\pagebreak

\begin{theorem}
\label{thm:5.2}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field such that $ k = \OOO_K / \mmm $ is a perfect field of characteristic $ p $. Then there exists a unique map $ \sbr{\cdot} : k \to \OOO_K $ such that
\begin{enumerate}
\item $ a \equiv \sbr{a} \mod \mmm $ for all $ a \in k $, and
\item $ \sbr{ab} \equiv \sbr{a}\sbr{b} \mod \mmm $ for all $ a, b \in k $.
\end{enumerate}
Moreover if $ \ch \OOO_K = p $, then $ \sbr{\cdot} $ is a ring homomorphism.
\end{theorem}

\begin{definition}
The element $ \sbr{a} \in \OOO_K $ constructed in Theorem \ref{thm:5.2} is called the \textbf{Teichm\"uller lift} of $ a $.
\end{definition}

The following is the idea of the proof. Let $ \alpha \in \OOO_K $ be any lift of $ a \in k $. Then $ \alpha $ is well-defined up to $ \pi\OOO_K $. Let $ \beta \in \OOO_K $ be a lift of $ a^{1 / p} $. We claim that $ \beta $ is a better lift. Why? Let $ \beta' \in \OOO_K $ be another lift of $ a^{1 / p} $, then $ \beta = \beta' + \pi u $ for $ u \in \OOO_K $, so
$$ \beta^p = \br{\beta' + \pi u}^p = \beta'^p + \underbrace{\sum_{i = 1}^p \binom{p}{i}\beta'^{p - i}\br{\pi u}^i}_{\in \pi^2\OOO_K}, $$
using $ p \in \abr{\pi} $, so $ \beta^p $ is well-defined up to $ \pi^2\OOO_K $. Repeat this process to get better and better lifts.

\begin{lemma}
\label{lem:5.4}
Let $ \br{K, \abs{\cdot}} $ be as in Theorem \ref{thm:5.2}, and fix $ \pi \in \OOO_K $ a uniformiser. Let $ x, y \in \OOO_K $ such that $ x \equiv y \mod \pi^k $ for $ k \ge 1 $. Then $ x^p \equiv y^p \mod \pi^{k + 1} $.
\end{lemma}

\begin{proof}
Let $ x = y + u\pi^k $ for $ u \in \OOO_K $. Then
$$ x^p = \sum_{i = 0}^p \binom{p}{i}\br{u\pi^k}^iy^{p - i} = y^p + pu\pi^ky^{p - 1} + \sum_{i = 2}^p \binom{p}{i}\br{u\pi^k}^iy^{p - i}. $$
Since $ \OOO_K / \pi\OOO_K $ has characteristic $ p $, we have $ p \in \abr{\pi} $. Thus $ pu\pi^ky^{p - 1} \in \pi^{k + 1}\OOO_K $. For $ i \ge 2 $, $ \br{u\pi^k}^i \in \pi^{k + 1}\OOO_K $, so $ x^p \equiv y^p \mod \pi^{k + 1} $.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:5.2}]
Let $ a \in k $. For each $ i \ge 0 $ we choose a lift $ y_i \in \OOO_K $ of $ a^{1 / p^i} $, and we define
$$ x_i = y_i^{p^i}. $$
Then $ x_i \equiv y_i^{p^i} \equiv \br{a^{1 / p^i}}^{p^i} \equiv a \mod \pi $. We claim that $ \br{x_i}_{i = 1}^\infty $ is a Cauchy sequence, and its limit $ x_i \to x $ is independent of the choice of $ y_i $.
\begin{itemize}
\item By construction $ y_i \equiv y_{i + 1}^p \mod \pi $. By Lemma \ref{lem:5.4} and induction on $ k $, we have $ y_i^{p^k} \equiv y_{i + 1}^{p^{k + 1}} \mod \pi^{k + 1} $, and hence $ x_i \equiv x_{i + 1} \mod \pi^{i + 1} $, by taking $ k = i $, so $ \abs{x_i - x_{i + 1}} \to 0 $. Then $ \br{x_i}_{i = 1}^\infty $ is Cauchy, so $ x_i \to x \in \OOO_K $.
\item Suppose $ \br{x_i'}_{i = 1}^\infty $ arises from another choice of $ y_i' $ lifting $ a^{1 / p^i} $. Then $ x_i' $ is Cauchy, and $ x_i' \to x' \in \OOO_K $. Let
$$ x_i'' =
\begin{cases}
x_i & i \ \text{even} \\
x_i' & i \ \text{odd}
\end{cases}.
$$
Then $ x_i'' $ arises from lifting
$$ y_i'' =
\begin{cases}
y_i & i \ \text{even} \\
y_i' & i \ \text{odd}
\end{cases}.
$$
Then $ \br{x_i''}_{i = 1}^\infty $ is Cauchy and $ x_i'' \to x $ and $ x_i'' \to x' $, so $ x = x' $, hence $ x $ is independent of $ y_i $.
\end{itemize}
We define $ \sbr{a} = x $.
\begin{enumerate}
\item $ x \equiv a \mod \pi $, so $ 1 $ is satisfied.
\item We let $ b \in k $ and we choose $ u_i \in \OOO_K $ a lift of $ b^{1 / p^i} $, and let $ z_i = u_i^{p^i} $. Then $ \lim_{i \to \infty} z_i = \sbr{b} $. Now $ u_iy_i $ is a lift of $ \br{ab}^{1 / p^i} $, hence
$$ \sbr{ab} = \lim_{i \to \infty} x_iz_i = \lim_{i \to \infty} x_i\lim_{i \to \infty} z_i = \sbr{a}\sbr{b}, $$
so $ 2 $ is satisfied.
\end{enumerate}

\pagebreak

If $ \ch \OOO_K = p $, then $ y_i + u_i $ is a lift of $ a^{1 / p^i} + b^{1 / p^i} = \br{a + b}^{1 / p^i} $. Then
$$ \sbr{a + b} = \lim_{i \to \infty} \br{y_i + u_i}^{p^i} = \lim_{i \to \infty} \br{y_i^{p^i} + u_i^{p^i}} = \lim_{i \to \infty} \br{x_i + z_i} = \sbr{a} + \sbr{b}. $$
It is easy to check that $ \sbr{0} = 0 $ and $ \sbr{1} = 1 $, so $ \sbr{\cdot} $ is a ring homomorphism. For uniqueness, let $ \phi : k \to \OOO_K $ be another such map. Then for $ a \in k $, $ \phi\br{a^{1 / p^i}} $ is a lift of $ a^{1 / p^i} $, it follows that
$$ \sbr{a} = \lim_{i \to \infty} \phi\br{a^{1 / p^i}}^{p^i} = \lim_{i \to \infty} \phi\br{a} = \phi\br{a}. $$
\end{proof}

\begin{example}
Let $ K = \QQ_p $, and let $ \sbr{\cdot} : \FF_p \to \ZZ_p $. If $ a \in \FF_p^\times $, then $ \sbr{a}^{p - 1} = \sbr{a^{p - 1}} = \sbr{1} = 1 $, so $ \sbr{a} $ is a $ \br{p - 1} $-th root of unity.
\end{example}

More generally is the following.

\begin{lemma}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field. If $ k = \OOO_K / \mmm \subseteq \overline{\FF_p} $, then $ \sbr{a} \in \OOO_K^\times $ is a root of unity.
\end{lemma}

\begin{proof}
If $ a \in k $, then $ a \in \FF_{p^n} $ for some $ n $, so $ \sbr{a}^{p^n - 1} = \sbr{a^{p^n - 1}} = \sbr{1} = 1 $.
\end{proof}

\begin{theorem}
\label{thm:5.7}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field such that $ k $ is perfect with $ \ch k = p > 0 $. Then $ K \cong k\br{\br{t}} $.
\end{theorem}

\begin{proof}
Since $ K = \Frac \OOO_K $, it suffices to show $ \OOO_K \cong k\sbr{\sbr{t}} $. Fix $ \pi \in \OOO_K $ a uniformiser, let $ \sbr{\cdot} : k \to \OOO_K $ be the Teichm\"uller map, and define
$$ \function[\phi]{k\sbr{\sbr{t}}}{\OOO_K}{\displaystyle\sum_{i = 0}^\infty a_it^i}{\displaystyle\sum_{i = 0}^\infty \sbr{a_i}\pi^i}. $$
Then $ \phi $ is a ring homomorphism since $ \sbr{\cdot} $ is a ring homomorphism and it is a bijection by Proposition \ref{prop:3.5}.$ 2 $.
\end{proof}

\subsection{Extensions of complete valued fields}

\lecture{6}{Wednesday}{21/10/20}

\begin{theorem}
\label{thm:6.1}
Let $ \br{K, \abs{\cdot}} $ be a complete non-archimedean discretely valued field and $ L / K $ a finite extension of degree $ n $.
\begin{enumerate}
\item $ \abs{\cdot} $ extends uniquely to an absolute value $ \abs{\cdot}_L $ on $ L $ defined by
$$ \abs{y}_L = \abs{\N_{L / K}\br{y}}^{\tfrac{1}{n}}, \qquad y \in L. $$
\item $ L $ is complete with respect to $ \abs{\cdot}_L $.
\end{enumerate}
\end{theorem}

Recall that if $ L / K $ is finite,
$$ \function[\N_{L / K}]{L}{K}{y}{\det_K \br{\cdot y}}, $$
where $ \cdot y : L \to L $ is the $ K $-linear map induced by multiplication by $ y $.

\begin{fact*}
\hfill
\begin{itemize}
\item $ \N_{L / K}\br{xy} = \N_{L / K}\br{x}\N_{L / K}\br{y} $.
\item Let $ X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in K\sbr{X} $ be the minimal polynomial of $ y \in L $. Then $ \N_{L / K}\br{y} = \pm a_0^m $ for $ m \ge 1 $.
\end{itemize}
\end{fact*}

\pagebreak

\begin{definition}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field and $ V $ a vector space over $ K $. A \textbf{norm} on $ V $ is a function $ \norm{\cdot} : V \to \RR_{\ge 0} $ satisfying
\begin{itemize}
\item $ \norm{x} = 0 $ if and only if $ x = 0 $,
\item $ \norm{\lambda x} = \abs{\lambda}\norm{x} $ for all $ \lambda \in K $ and $ x \in V $, and
\item $ \norm{x + y} \le \max\br{\norm{x}, \norm{y}} $ for all $ x, y \in V $.
\end{itemize}
\end{definition}

\begin{example*}
If $ V $ is finite dimensional and $ e_1, \dots, e_n $ is a basis of $ V $, the \textbf{sup norm} on $ V $ is defined by
$$ \norm{x}_{\sup} = \max_i \abs{x_i}, \qquad x = \sum_{i = 1}^n x_ie_i. $$
\end{example*}

\begin{exercise*}
$ \norm{\cdot}_{\sup} $ is a norm.
\end{exercise*}

\begin{definition}
Two norms $ \norm{\cdot}_1 $ and $ \norm{\cdot}_2 $ on $ V $ are \textbf{equivalent} if there exists $ C, D > 0 $ such that
$$ C\norm{x}_1 \le \norm{x}_2 \le D\norm{x}_1, \qquad x \in V. $$
\end{definition}

\begin{fact*}
A norm defines a topology on $ V $, and equivalent norms induce the same topology.
\end{fact*}

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be complete non-archimedean and $ V $ a finite dimensional vector space over $ K $. Then $ V $ is complete with respect to $ \norm{\cdot}_{\sup} $.
\end{proposition}

\begin{proof}
Let $ \br{v_i}_{i = 1}^\infty $ be a Cauchy sequence in $ V $ and $ e_1, \dots, e_n $ a basis for $ V $. Write $ v_i = \sum_{j = 1}^n x_j^ie_j $. Then $ \br{x_j^i}_{i = 0}^\infty $ is a Cauchy sequence in $ K $. Let $ x_j^i \to x_j \in K $, then $ v_i \to v = \sum_{j = 1}^n x_je_j $.
\end{proof}

\begin{theorem}
\label{thm:6.5}
Let $ \br{K, \abs{\cdot}} $ be complete non-archimedean and $ V $ a finite dimensional vector space over $ K $. Then any two norms on $ V $ are equivalent. In particular $ V $ is complete with respect to any norm.
\end{theorem}

\begin{proof}
Since equivalence defines an equivalence relation on the set of norms, it suffices to show any norm $ \norm{\cdot} $ is equivalent to $ \norm{\cdot}_{\sup} $. Let $ e_1, \dots, e_n $ be a basis for $ V $, and set $ D = \max_i \norm{e_i} $. Then for $ x = \sum_{i = 1}^n x_ie_i $, we have
$$ \norm{x} \le \max_i \norm{x_ie_i} = \max_i \abs{x_i}\norm{e_i} \le D\max_i \abs{x_i} = D\norm{x}_{\sup}. $$
To find $ C $ such that $ C\norm{\cdot}_{\sup} \le \norm{\cdot} $, we induct on $ n = \dim V $.
\begin{itemize}[leftmargin=0.5in]
\item[$ n = 1 $.] $ \norm{x} = \norm{x_1e_1} = \abs{x_1}\norm{e_1} $ so take $ C = \norm{e_1} $, since $ \abs{x_1} = \norm{x}_{\sup} $.
\item[$ n > 1 $.] Set $ V_i = \abr{e_1, \dots, e_{i - 1}, e_{i + 1}, \dots, e_n} $. By induction, $ V_i $ is complete with respect to $ \norm{\cdot} $, hence closed. Then $ e_i + V_i $ is closed for all $ i $, and hence $ S = \bigcup_{i = 1}^n \br{e_i + V_i} $ is a closed subset not containing zero. Thus there exists $ C > 0 $ such that $ \B\br{0, C} \cap S = \emptyset $ where $ \B\br{0, C} = \cbr{x \in V \st \norm{x} < C} $. Let $ x = \sum_{i = 1}^n x_ie_i $ and suppose $ \abs{x_j} = \max_i \abs{x_i} $. Then $ \norm{x}_{\sup} = \abs{x_j} $, and $ \br{1 / x_j}x \in S $. Thus $ \norm{\br{1 / x_j}x} \ge C $, so $ \norm{x} \ge C\abs{x_j} = C\norm{x}_{\sup} $.
\end{itemize}
The completeness of $ V $ follows since $ V $ is complete with respect to $ \norm{\cdot}_{\sup} $.
\end{proof}

\begin{definition}
Let $ R \subseteq S $ be rings.
\begin{itemize}
\item We say $ s \in S $ is \textbf{integral} over $ R $ if there exists a monic polynomial $ f\br{X} \in R\sbr{X} $ such that $ f\br{s} = 0 $.
\item The \textbf{integral closure} $ R^{\Int S} $ of $ R $ inside $ S $ is defined to be
$$ R^{\Int S} = \cbr{s \in S \st s \ \text{is integral over} \ R}. $$
\item We say $ R $ is \textbf{integrally closed} in $ S $ if $ R^{\Int S} = R $.
\end{itemize}
\end{definition}

\begin{proposition}
$ R^{\Int S} $ is a subring of $ S $. Moreover $ R^{\Int S} $ is integrally closed in $ S $.
\end{proposition}

\begin{proof}
Example sheet $ 2 $.
\end{proof}

\begin{lemma}
\label{lem:6.8}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field. Then $ \OOO_K $ is integrally closed in $ K $.
\end{lemma}

\begin{proof}
Let $ x \in K $ be integral over $ \OOO_K $, and without loss of generality $ x \ne 0 $. Let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in \OOO_K\sbr{X} $ such that $ f\br{x} = 0 $. Then $ x = -a_{n - 1} - \dots - a_0 / x^{n - 1} $. If $ \abs{x} > 1 $, we have $ \abs{-a_{n - 1} - \dots - a_0 / x^{n - 1}} \le 1 $, a contradiction. Thus $ \abs{x} \le 1 $, so $ x \in \OOO_K $.
\end{proof}

\pagebreak

\begin{proof}[Proof of Theorem \ref{thm:6.1}]
\hfill
\begin{enumerate}
\item We show $ \abs{\cdot}_L = \abs{\N_{L / K}\br{\cdot}} $ satisfies the three axioms in the definition of absolute values.
\begin{enumerate}[label=\arabic*.]
\item $ \abs{y}_L = 0 $ if and only if $ \abs{\N_{L / K}\br{y}} = 0 $, if and only if $ \N_{L / K}\br{y} = 0 $, if and only if $ y = 0 $, by property of $ \N_{L / K} $.
\item $ \abs{y_1y_2}_L = \abs{\N_{L / K}\br{y_1y_2}} = \abs{\N_{L / K}\br{y_1}\N_{L / K}\br{y_2}} = \abs{\N_{L / K}\br{y_1}}\abs{\N_{L / K}\br{y_2}} = \abs{y_1}_L\abs{y_2}_L $.
\item Set $ \OOO_L = \cbr{y \in L \st \abs{y}_L \le 1} $. Claim that $ \OOO_L $ is the integral closure of $ \OOO_K $ inside $ L $.
\begin{itemize}
\item Let $ 0 \ne y \in \OOO_L $ and let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in K\sbr{X} $ be the minimal polynomial of $ y $. By property of $ \N_{L / K} $, there exists $ m \ge 1 $ such that $ \N_{L / K}\br{y} = \pm a_0^m $. By Corollary \ref{cor:4.5}, we have $ \abs{a_i} \le \max\br{\abs{\N_{L / K}\br{y}}^{1 / m}, 1} = 1 $, since $ \abs{\N_{L / K}\br{y}} \le 1 $. Thus $ a_i \in \OOO_K $ for all $ i $, so $ f \in \OOO_K\sbr{X} $, so $ y $ is integral over $ \OOO_K $.
\item Conversely let $ y \in L $ be integral over $ \OOO_K $. Again by property of $ \N_{L / K} $, we have
$$ \N_{L / K}\br{y} = \br{\prod_{\sigma : L \to \overline{K}} \sigma\br{y}}^d, \qquad d \ge 1, $$
where $ \overline{K} $ is an algebraic closure of $ K $ and $ \sigma $ runs over $ K $-algebra homomorphisms. For all such $ \sigma : L \to \overline{K} $, $ \sigma\br{y} $ is integral over $ \OOO_K $. Thus $ \N_{L / K}\br{y} \in K $ is integral over $ \OOO_K $. By Lemma \ref{lem:6.8}, $ \N_{L / K}\br{y} \in \OOO_K $, so $ \abs{\N_{L / K}\br{y}} \le 1 $, so $ y \in \OOO_L $.
\end{itemize}
Thus $ \OOO_K^{\Int L} = \OOO_L $ and proves the claim. Now we prove $ 3 $. Let $ x, y \in L $. Without loss of generality assume $ \abs{x}_L \le \abs{y}_L $, then $ \abs{x / y}_L \le 1 $, so $ x / y \in \OOO_L $. Since $ 1 \in \OOO_L = \OOO_K^{\Int L} $, we have $ 1 + x / y \in \OOO_L $ and hence $ \abs{1 + x / y}_L \le 1 $, so $ \abs{x + y}_L \le \abs{y}_L = \max\br{\abs{y}_L, \abs{x}_L} $. Thus $ 3 $ is satisfied. If $ \abs{\cdot}_L' $ is another absolute value on $ L $ extending $ \abs{\cdot} $, then note that $ \abs{\cdot}_L $ and $ \abs{\cdot}_L' $ are norms on $ L $. By Theorem \ref{thm:6.5}, $ \abs{\cdot}_L' $ and $ \abs{\cdot}_L $ induce the same topology on $ L $, so $ \abs{\cdot}_L' = \abs{\cdot}_L^c $ for some $ c > 0 $. Since $ \abs{\cdot}_L' $ extends $ \abs{\cdot} $, we have $ c = 1 $.
\end{enumerate}
\item Since $ \abs{\cdot}_L $ defines a norm on $ K $, Theorem \ref{thm:6.5} implies $ L $ is complete with respect to $ \abs{\cdot}_L $.
\end{enumerate}
\end{proof}

\lecture{7}{Friday}{23/10/20}

\begin{corollary}
Let $ \br{K, \abs{\cdot}} $ be a complete non-archimedean discretely valued field and $ L / K $ a finite extension. Then
\begin{enumerate}
\item $ L $ is discretely valued with respect to $ \abs{\cdot}_L $, and
\item $ \OOO_L $ is the integral closure of $ \OOO_K $ in $ L $.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ v $ be a valuation on $ K $, and let $ v_L $ be a valuation on $ L $ such that $ v_L $ extends $ v $. If $ y \in L^\times $, then $ \abs{y}_L = \abs{\N_{L / K}\br{y}}^{1 / n} $ for $ n = \sbr{L : K} $, so $ v_L\br{y} = \br{1 / n}v\br{\N_{L / K}\br{y}} $. Thus $ v_L\br{L^\times} \subseteq \br{1 / n}v\br{K^\times} $, so $ v_L $ is discrete.
\item Proved in in the last lecture.
\end{enumerate}
\end{proof}

\begin{corollary}
Let $ \br{K, \abs{\cdot}} $ be a complete non-archimedean discretely valued field and $ \overline{K} / K $ an algebraic closure. Then $ \abs{\cdot} $ extends to a unique absolute value $ \abs{\cdot}_{\overline{K}} $ on $ \overline{K} $.
\end{corollary}

\begin{proof}
If $ x \in \overline{K} $, then $ x \in L $ for some $ L / K $ finite. Define $ \abs{x}_{\overline{K}} = \abs{x}_L $. Well-defined, that is independent of $ L $, by the uniqueness in Theorem \ref{thm:6.1}. The axioms for $ \abs{\cdot}_{\overline{K}} $ to be an absolute value can be checked over finite extensions. Uniqueness is clear.
\end{proof}

\begin{remark*}
$ \abs{\cdot}_{\overline{K}} $ on $ \overline{K} $ is never discrete. For example, if $ K = \QQ_p $, then $ \sqrt[n]{p} \in \overline{\QQ_p} $ for all $ n \in \NN_{> 0} $, so $ \v_p\br{\sqrt[n]{p}} = \br{1 / n}\v_p\br{p} = 1 / n $. Then $ \overline{\QQ_p} $ is not complete with respect to $ \abs{\cdot}_{\overline{\QQ_p}} $. By example sheet $ 2 $, if $ \CC_p $ is the completion of $ \overline{\QQ_p} $ with respect to $ \abs{\cdot}_{\overline{\QQ_p}} $, then $ \CC_p $ is algebraically closed.
\end{remark*}

\pagebreak

\section{Local fields}

\begin{definition}
Let $ \br{K, \abs{\cdot}} $ be a valued field. Then $ K $ is a \textbf{local field} if it is complete and locally compact.
\end{definition}

\begin{example*}
$ \RR $ and $ \CC $ are local fields.
\end{example*}

\subsection{Non-archimedean local fields}

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean complete valued field. The following are equivalent.
\begin{enumerate}
\item $ K $ is locally compact.
\item $ \OOO_K $ is compact.
\item $ v $ is discrete and $ k = \OOO_K / \mmm $ is finite.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] Let $ U \ni 0 $ be a compact neighbourhood of zero. Then there exists $ x \in \OOO_K $ such that $ x\OOO_K \subseteq U $. Since $ x\OOO_K $ is closed, $ x\OOO_K $ is compact, so $ \OOO_K $ is compact, since $ x^{-1} : x\OOO_K \to \OOO_K $ is homeomorphism.
\item[$ 2 \implies 1 $.] If $ \OOO_K $ is compact, then $ a + \OOO_K $ compact for all $ a \in K $, so $ K $ is locally compact.
\item[$ 2 \implies 3 $.] Let $ x \in \mmm $, and $ A_x \subseteq \OOO_K $ be a set of coset representatives for $ \OOO_K / x\OOO_K $. Then
$$ \OOO_K = \bigcup_{y \in A_x} \br{y + x\OOO_K} $$
is a disjoint open cover, so $ A_x $ is finite by compactness of $ \OOO_K $, so $ \OOO_K / x\OOO_K $ is finite, so $ \OOO_K / \mmm $ is finite. Suppose $ v $ is not discrete. Let $ x = x_1, x_2, \dots $ such that $ v\br{x_1} > v\br{x_2} > \dots > 0 $. Then $ x_1\OOO_K \subsetneq x_2\OOO_K \subsetneq \dots \subsetneq \OOO_K $. But $ \OOO_K / x\OOO_K $ is finite so can only have finitely many subgroups, a contradiction.
\item[$ 3 \implies 2 $.] Since $ \OOO_K $ is a metric space, it suffices to show $ \OOO_K $ is sequentially compact. Let $ \br{x_n}_{n = 1}^\infty $ be a sequence in $ \OOO_K $ and fix $ \pi \in \OOO_K $ a uniformiser in $ \OOO_K $. Since $ \pi^i\OOO_K / \pi^{i + 1}\OOO_K \cong k $, $ \OOO_K / \pi^i\OOO_K $ is finite for all $ i $, since $ \OOO_K \supseteq \dots \supseteq \pi^i\OOO_K $. Since $ \OOO_K / \pi\OOO_K $ is finite, there exists $ a_1 \in \OOO_K / \pi\OOO_K $ and a subsequence $ \br{x_{1, n}}_{n = 1}^\infty $ such that $ x_{1, n} \equiv a_1 \mod \pi $. We define $ y_1 = x_{1, 1} $. Since $ \OOO_K / \pi^2\OOO_K $ is finite, there exists $ a_2 \in \OOO_K / \pi^2\OOO_K $ and a subsequence $ \br{x_{2, n}}_{n = 1}^\infty $ of $ \br{x_{1, n}}_{n = 1}^\infty $ such that $ x_{2, n} \equiv a_2 \mod \pi^2 $. Define $ y_2 = x_{2, 2} $. Continuing in this fashion, we obtain sequences $ \br{x_{i, n}}_{n = 1}^\infty $ for $ i = 1, 2, \dots $ such that
\begin{itemize}
\item $ \br{x_{i + 1, n}}_{n = 1}^\infty $ is a subsequence of $ \br{x_{i, n}}_{n = 1}^\infty $, and
\item for any $ i $, there exists $ a_i \in \OOO_K / \pi^i\OOO_K $ such that $ x_{i, n} \equiv a_i \mod \pi^i $ for all $ n $.
\end{itemize}
Then necessarily $ a_i \equiv a_{i + 1} \mod \pi^i $ for all $ i $. Now choose $ y_i = x_{ii} $. This defines a subsequence $ \br{y_n}_{n = 1}^\infty $. Moreover $ y_i \equiv a_i \equiv a_{i + 1} \equiv y_{i + 1} \mod \pi^i $. Thus $ y_i $ is Cauchy, hence converges by completeness.
\end{itemize}
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item $ \QQ_p $ is a local field.
\item $ \FF_p\br{\br{t}} $ is a local field.
\end{itemize}
\end{example*}

Let $ \br{A_n}_{n = 1}^\infty $ be a sequence of sets or groups or rings and $ \phi_n : A_{n + 1} \to A_n $ homomorphisms.

\begin{definition}
Assume $ A_n $ is finite. The \textbf{profinite topology} on $ A = \varprojlim_n A_n $ is the weakest topology on $ A $ such that $ A \to A_n $ is continuous for all $ n $, where $ A_n $ are equipped with the discrete topology.
\end{definition}

\begin{fact*}
$ A = \varprojlim_n A_n $ with profinite topology is compact, totally disconnected, and Hausdorff.
\end{fact*}

\pagebreak

\begin{proposition}
Let $ K $ be a local field. Under the isomorphism $ \OOO_K \cong \varprojlim_n \OOO_K / \pi^n\OOO_K $ for $ \pi \in \OOO_K $ a uniformiser, the topology on $ \OOO_K $ coincides with the profinite topology.
\end{proposition}

\begin{proof}
One checks that the sets
$$ B = \cbr{a + \pi^n\OOO_K \st n \in \NN_{\ge 1}, \ a \in A_{\pi^n}}, $$
where $ A_{\pi^n} $ is a set of coset representatives for $ \OOO_K / \pi^n\OOO_K $, is a basis of open sets in both topologies. For $ \abs{\cdot} $, this is clear. For the profinite topology, $ \OOO_K \to \OOO_K / \pi^n\OOO_K $ is continuous if and only if $ a + \pi^n\OOO_K $ is open for all $ a \in A_{\pi^n} $. Thus $ B $ is a basis for the profinite topology.
\end{proof}

\begin{remark*}
This gives another proof that $ \OOO_K $ is compact.
\end{remark*}

\lecture{8}{Monday}{26/10/20}

\begin{lemma}
Let $ K $ be a non-archimedean local field and $ L / K $ a finite extension. Then $ L $ is a local field.
\end{lemma}

\begin{proof}
By Theorem \ref{thm:6.1}, $ L $ is complete and discretely valued. It suffices to show $ k_L = \OOO_L / \mmm_L $ is finite. Let $ \alpha_1, \dots, \alpha_n $ be a basis for $ L $ as a $ K $-vector space. The sup norm $ \norm{\cdot}_{\sup} $ is equivalent to $ \abs{\cdot}_L $ implies there exists $ r > 0 $ such that $ \OOO_L \subseteq \cbr{x \in L \st \norm{x}_{\sup} \le r} $. Take $ a \in K $ such that $ \abs{a} \ge r $, then $ \OOO_L \subseteq \bigoplus_{i = 1}^n a\alpha_i\OOO_K $, so $ \OOO_L $ is finitely generated as a module over $ \OOO_K $. Thus $ k_L $ is finitely generated over $ k $.
\end{proof}

\begin{theorem}
\label{thm:8.2}
Let $ K $ be a local field. Then either
\begin{itemize}
\item $ K \cong \RR $ or $ K \cong \CC $,
\item $ K $ is a finite extension of $ \QQ_p $, or
\item $ K \cong \FF_{p^n}\br{\br{t}} $ for $ p $ prime and $ n \ge 1 $.
\end{itemize}
\end{theorem}

\begin{definition}
A discretely valued field $ \br{K, \abs{\cdot}} $ has \textbf{equal characteristic} if $ \ch K = \ch k $. Otherwise it has \textbf{mixed characteristic}.
\end{definition}

\begin{example*}
$ \ch \QQ_p = 0 $ and $ \ch \FF_p = p $, so $ \QQ_p $ has mixed characteristic.
\end{example*}

Note that if $ K $ is a non-archimedean local field, $ \ch k = p > 0 $ and hence $ K $ has equal characteristic if $ \ch K = p $, or mixed characteristic if $ \ch K = 0 $.

\begin{theorem}
\label{thm:8.4}
Let $ K $ be a non-archimedean local field of equal characteristic $ p > 0 $. Then $ K \cong \FF_{p^n}\br{\br{t}} $ for some $ n \ge 1 $.
\end{theorem}

\begin{proof}
$ K $ is complete discretely valued and $ \ch K > 0 $. Moreover $ k \cong \FF_{p^n} $ is finite, hence perfect. By Theorem \ref{thm:5.7}, $ K \cong \FF_{p^n}\br{\br{t}} $.
\end{proof}

\subsection{Witt vectors*}

For motivation, consider $ \ZZ_p $. Let $ x = \sum_{i = 0}^\infty \sbr{x_i}p^i \in \ZZ_p $ and $ y = \sum_{i = 0}^\infty \sbr{y_i}p^i \in \ZZ_p $ for $ x_i, y_i \in \FF_p $. Suppose $ x + y = s = \sum_{i = 0}^\infty \sbr{s_i}p^i $. Can we write $ s_i $ in terms of $ x_j $ and $ y_j $? Reducing modulo $ p $ we obtain
$$ x_0 + y_0 = s_0 \in \FF_p, $$
so $ s_0 $ is determined by $ x_0 $ and $ y_0 $. What about $ s_1 $? Reducing modulo $ p^2 $, $ \sbr{x_0} + \sbr{y_0} + p\sbr{x_1} + p\sbr{y_1} \equiv \sbr{s_0} + p\sbr{s_1} \mod p^2 $, so
$$ p\sbr{s_1} \equiv \sbr{x_0} + \sbr{y_0} - \sbr{s_0} + p\sbr{x_1} + p\sbr{y_1} \mod p^2, $$
and $ \sbr{x_0} + \sbr{y_0} - \sbr{s_0} \in p\ZZ_p $. So we need $ \sbr{x_0} + \sbr{y_0} - \sbr{s_0} $ modulo $ p^2 $. Note $ \sbr{x_0^{1 / p}} + \sbr{y_0^{1 / p}} \equiv \sbr{s_0^{1 / p}} \mod p $, so by Lemma \ref{lem:5.4}
$$ \sbr{s_0} \equiv \br{\sbr{x_0^{\tfrac{1}{p}}} + \sbr{y_0^{\tfrac{1}{p}}}}^p \equiv \sbr{x_0} + \sbr{y_0} + \sum_{d = 1}^{p - 1} \binom{p}{d}\sbr{x_0^{\tfrac{d}{p}}}\sbr{y_0^{\tfrac{p - d}{p}}} \mod p^2. $$
Thus
$$ s_1 = x_1 + y_1 - \sum_{d = 1}^{p - 1} \dfrac{1}{p}\binom{p}{d}\sbr{x_0^{\tfrac{d}{p}}}\sbr{y_0^{\tfrac{p - d}{p}}}. $$
Can find similar expressions for $ s_2, s_3, \dots $. Witt noticed the general pattern.

\pagebreak

\begin{definition}
The \textbf{$ n $-th Witt polynomial} $ \w_n $ is defined by
$$ \w_n\br{X_0, \dots, X_n} = \sum_{i = 0}^n p^iX_i^{p^{n - i}} \in \ZZ\sbr{X_0, \dots, X_n}. $$
\end{definition}

Define $ \S_n \in \QQ\sbr{X_0, Y_0, \dots, X_n, Y_n} $ inductively by the equation
$$ \w_n\br{\S_0, \dots, \S_n} = \w_n\br{X_0, \dots, X_n} + \w_n\br{Y_0, \dots, Y_n}, $$
where the only term containing $ \S_n $ is $ p^n\S_n $.

\begin{fact*}[Witt]
$ \S_n \in \ZZ\sbr{X_0, Y_0, \dots, X_n, Y_n} $.
\end{fact*}

\begin{example*}
$ \S_0 = X_0 + Y_0 $ and
$$ \S_1 = X_1 + Y_1 + \sum_{d = 1}^{p - 1} \dfrac{1}{p}\binom{p}{d}X_0^dY_0^{p - d}. $$
\end{example*}

\begin{theorem}
Suppose that
$$ \sum_{i = 0}^\infty \sbr{x_i}p^i + \sum_{i = 0}^\infty \sbr{y_i}p^i = \sum_{i = 0}^\infty \sbr{s_i}p^i \in \ZZ_p. $$
Then we have
$$ s_n = \S_n\br{x_0^{\tfrac{1}{p^n}}, y_0^{\tfrac{1}{p^n}}, \dots, x_n, y_n}. $$
\end{theorem}

\begin{proof}
Example sheet $ 2 $. A hint is Lemma \ref{lem:5.4}.
\end{proof}

Similarly, defines $ \Z_n \in \QQ\sbr{X_0, Y_0, \dots, X_n, Y_n} $ by
$$ \w_n\br{\Z_0, \dots, \Z_n} = \w_n\br{X_0, \dots, X_n}\w_n\br{Y_0, \dots, Y_n}, $$

\begin{fact*}[Witt]
$ \Z_n \in \ZZ\sbr{X_0, Y_0, \dots, X_n, Y_n} $.
\end{fact*}

We have
$$ \sum_{i = 0}^\infty \sbr{x_i}p^i\sum_{i = 0}^\infty \sbr{y_i}p^i = \sum_{i = 0}^\infty \sbr{z_i}p^i, $$
where
$$ z_n = \Z_n\br{x_0^{\tfrac{1}{p^n}}, y_0^{\tfrac{1}{p^n}}, \dots, x_n, y_n}. $$
The conclusion is that the ring structure on $ \ZZ_p $ can be reconstructed from the arithmetic of $ \FF_p $.

\begin{definition}
A ring $ A $ is a \textbf{strict $ p $-ring} if it is $ p $-adically complete, $ p $ is not a zero divisor in $ A $, and $ A / pA $ is a perfect ring of characteristic $ p $.
\end{definition}

\begin{theorem}[Existence of Witt vectors]
Let $ R $ be a perfect ring of characteristic $ p $.
\begin{enumerate}
\item There exists a strict $ p $-ring $ \W\br{R} $, called the \textbf{Witt vectors} of $ R $, such that $ \W\br{R} / p\W\br{R} \cong R $ which is unique up to isomorphism.
\item If $ R' $ is another perfect ring and $ f : R \to R' $ is a ring homomorphism. Then there exists a unique ring homomorphism $ F : \W\br{R} \to \W\br{R'} $ such that the diagram
$$
\begin{tikzcd}
\W\br{R} \arrow{r}{F} \arrow{d} & \W\br{R'} \arrow{d} \\
R \arrow{r}[swap]{f} & R'
\end{tikzcd}
$$
commutes, so $ \W\br{R} $ is the mixed characteristic analogue of $ R\sbr{\sbr{t}} $.
\end{enumerate}
\end{theorem}

\pagebreak

\begin{proof}
See Rabinoff's The theory of Witt vectors.
\begin{enumerate}
\item Define
$$ \W\br{R} = \cbr{\br{a_n}_{n = 0}^\infty \st a_n \in R}. $$
Define addition and multiplication by $ \br{a_n}_{n = 0}^\infty + \br{b_n}_{n = 0}^\infty = \br{s_n}_{n = 0}^\infty $ and $ \br{a_n}_{n = 0}^\infty\br{b_n}_{n = 0}^\infty = \br{z_n}_{n = 0}^\infty $ where
$$ s_n = \S_n\br{a_0, b_0, \dots, a_n, b_n}, \qquad z_n = \Z_n\br{a_0, b_0, \dots, a_n, b_n}. $$
Check this defines a ring structure. For $ a = \br{a_0, a_1, \dots} \in \W\br{R} $, we compute
$$ pa = \br{0, a_0^p, a_1^p, \dots}, $$
so $ p $ is not a zero divisor. Moreover
$$ \W\br{R} / p^i\W\br{R} = \cbr{\br{a_n}_{n = 0}^{i - 1} \st a_n \in R}. $$
Compute explicitly
$$ \W\br{R} \cong \varprojlim_i \W\br{R} / p^i\W\br{R}. $$
\item For $ f : R \to R' $, define
$$ \function[F]{\W\br{R}}{\W\br{R'}}{\br{a_0, a_1, \dots}}{\br{f\br{a_0}, f\br{a_1}, \dots}}. $$
\end{enumerate}
\end{proof}

\begin{remark*}
If $ R = \FF_p $, then $ \W\br{\FF_p} \cong \ZZ_p $. The isomorphism is given by
$$ \br{a_0, a_1, \dots} \mapsto \sum_{i = 0}^\infty \sbr{a_i^{\tfrac{1}{p^i}}}p^i. $$
\end{remark*}

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field such that $ p \in \OOO_K $ is a uniformiser and $ k = \OOO_K / \mmm $ is perfect. Then $ \OOO_K \cong \W\br{k} $.
\end{proposition}

\begin{proof}
By uniqueness of $ \W\br{k} $, it suffices to check that $ \OOO_K $ is a strict $ p $-ring. This is clear from properties of $ \OOO_K $.
\end{proof}

\lecture{9}{Wednesday}{28/10/20}

\begin{remark*}
Let $ k $ be a perfect field. If $ K = \Frac \W\br{k} $, then $ K $ is a complete discretely valued field with $ \OOO_K \cong \W\br{k} $ and $ p = \ch k \in \OOO_K $ is a uniformiser.
\end{remark*}

\begin{proposition}
\label{prop:9.1}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field with $ k = \OOO_K / \mmm $ perfect of characteristic $ p $, then $ \OOO_K $ is finite over $ \W\br{k} $.
\end{proposition}

\begin{proof}
Consider the subset $ R \subseteq \OOO_K $ defined by
$$ R = \cbr{\sum_{i = 0}^\infty \sbr{a_i}p^i \st a_i \in k}. $$
Calculating as in the example of $ \ZZ_p $ shows that $ R \cong \W\br{k} $. Let $ \pi $ be a uniformiser in $ \OOO_K $ and let $ e \in \NN $ such that $ ev\br{\pi} = v\br{p} $. Let
$$ M = \bigoplus_{i = 0}^{e - 1} \pi^iR \subseteq \OOO_K, $$
an $ R $-submodule. Since $ \sum_{n = 0}^\infty \sbr{x_n}\pi^n \equiv \sum_{n = 0}^{e - 1} \sbr{x_n}\pi^n \mod p $, $ M $ generates $ \OOO_K / p\OOO_K $ as an $ R $-module, so $ \OOO_K = M + p\OOO_K $. Iterating, $ \OOO_K = M + \dots + p^{m - 1}M + p^m\OOO_K = M + p^m\OOO_K $, so $ M \to \OOO_K / p^m\OOO_K $ is surjective for all $ m $. Then since $ M \cong \varprojlim_n M / p^nM $, we have $ M \to \OOO_K \cong \varprojlim_n \OOO_K / p^n\OOO_K $ is surjective. Thus $ M = \OOO_K $.
\end{proof}

\pagebreak

\begin{theorem}
\label{thm:9.2}
Let $ K $ be a non-archimedean local field of mixed characteristic. Then $ K $ is a finite extension of $ \QQ_p $.
\end{theorem}

\begin{proof}
Let $ k = \FF_{p^n} $ for some prime $ p $. Then by Proposition \ref{prop:9.1}, $ K $ is a finite extension of $ \Frac \W\br{\FF_{p^n}} $. It suffices to show that $ \W\br{\FF_{p^n}} $ is finite over $ \ZZ_p $. Let $ e_1, \dots, e_n \in \FF_{p^n} $ be a basis of $ \FF_{p^n} $ as an $ \FF_p $-vector space, and we write
$$ M = \bigoplus_{i = 1}^n \W\br{\FF_p}\sbr{e_i} \subseteq \W\br{\FF_{p^n}}, $$
a $ \W\br{\FF_p} $-submodule. For $ x = \sum_{i = 0}^\infty \sbr{x_i}p^i \in \W\br{\FF_{p^n}} $, let $ x_0 = \sum_{i = 1}^n \lambda_ie_i $ for $ \lambda_i \in \FF_p $. Then $ x - \sum_{i = 1}^n \sbr{\lambda_i}\sbr{e_i} \in p\W\br{\FF_{p^n}} $, since $ \sbr{\lambda_i} \in \W\br{\FF_p} $ by commutativity of
$$
\begin{tikzcd}
\FF_p \arrow{r}{\sbr{\cdot}} \arrow{d} & \W\br{\FF_p} \arrow{d} \\
\FF_{p^n} \arrow{r}[swap]{\sbr{\cdot}} & \W\br{\FF_{p^n}}
\end{tikzcd},
$$
so $ \W\br{\FF_{p^n}} = M + p\W\br{\FF_{p^n}} $. Arguing as in Proposition \ref{prop:9.1} shows $ M = \W\br{\FF_{p^n}} $.
\end{proof}

\subsection{Classification of local fields}

We consider the archimedean case.

\begin{lemma}
\label{lem:9.3}
An absolute value $ \abs{\cdot} $ on a field is non-archimedean if and only if $ \abs{n} $ is bounded for all $ n \in \ZZ $.
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \implies $] Since $ \abs{-1} = 1 $, $ \abs{-n} = \abs{n} $, thus it suffices to show that $ \abs{n} $ is bounded for $ n \ge 1 $. Then $ \abs{n} = \abs{1 + \dots + 1} \le 1 $.
\item[$ \impliedby $] Suppose $ \abs{n} \le B $ for all $ n \in \ZZ $. Let $ x, y \in K $ with $ \abs{x} \le \abs{y} $. Then we have
$$ \abs{x + y}^m = \abs{\sum_{i = 0}^m \binom{m}{i}x^iy^{m - i}} \le \sum_{i = 0}^m \abs{\binom{m}{i}x^iy^{m - i}} \le \abs{y}^m\br{m + 1}B. $$
Taking $ m $-th roots gives
$$ \abs{x + y} \le \abs{y}\abs{\br{m + 1}B}^{\tfrac{1}{m}}, $$
and $ \abs{\br{m + 1}B}^{1 / m} \to 1 $ as $ m \to \infty $. Thus $ \abs{x + y} \le \abs{y} = \max\br{\abs{x}, \abs{y}} $.
\end{itemize}
\end{proof}

\begin{corollary}
\label{cor:9.4}
If $ \br{K, \abs{\cdot}} $ is a valued field with $ \ch K > 0 $, then $ K $ is non-archimedean.
\end{corollary}

\begin{theorem}[Ostrowski's theorem]
Any non-trivial absolute value on $ \QQ $ is equivalent to either the usual absolute value $ \abs{\cdot}_\infty $ or the $ p $-adic absolute value $ \abs{\cdot}_p $ for some prime $ p $.
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \abs{\cdot} $ is archimedean. We fix $ b > 1 $ an integer such that $ \abs{b} > 1 $, which exists by Lemma \ref{lem:9.3}. Let $ a > 1 $ be an integer and write $ b^n $ in base $ a $, so $ b^n = c_ma^m + \dots + c_0 $ for $ 0 \le c_i < a $. Let $ B = \max_{0 \le c < a} \abs{c} $, then we have $ \abs{b^n} \le \br{m + 1}B\max\br{\abs{a}^m, 1} $, so
$$ \abs{b} \le \br{\br{n\log_a b + 1}B}^{\tfrac{1}{n}}\max\br{\abs{a}^{\log_a b}, 1}, $$
and $ \br{\br{n\log_a b + 1}B}^{1 / n} \to 1 $ as $ n \to \infty $, so $ \abs{b} \le \max\br{\abs{a}^{\log_a b}, 1} $. Then $ \abs{a} > 1 $ and
\begin{equation}
\label{eq:1}
\abs{b} \le \abs{a}^{\log_a b}.
\end{equation}

\pagebreak

Switching the roles of $ a $ and $ b $, we obtain
\begin{equation}
\label{eq:2}
\abs{a} \le \abs{b}^{\log_b a}.
\end{equation}
By $ \br{\ref{eq:1}} $ and $ \br{\ref{eq:2}} $,
$$ \dfrac{\log \abs{a}}{\log a} = \dfrac{\log \abs{b}}{\log b} = \lambda \in \RR_{> 0}, $$
using $ \log_a b = \log b / \log a $, so $ \abs{a} = a^\lambda $ for all $ a \in \ZZ $ such that $ a > 1 $, so $ \abs{x} = \abs{x}_\infty^\lambda $ for all $ x \in \QQ $. Hence $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_\infty $.
\item $ \abs{\cdot} $ is non-archimedean. As in Lemma \ref{lem:9.3}, we have $ \abs{n} \le 1 $ for all $ n \in \ZZ $. Since $ \abs{\cdot} $ is non-trivial, there exists $ n \in \ZZ_{> 1} $ such that $ \abs{n} < 1 $. Write $ n = p_1^{e_1} \dots p_r^{e_r} $, a decomposition into prime factors. Then $ \abs{p} < 1 $ for some $ p \in \cbr{p_1, \dots, p_r} $. Suppose $ \abs{q} < 1 $ for some prime $ q $ such that $ q \ne p $. Write $ 1 = rp + sq $ for $ r, s \in \ZZ $. Then $ 1 = \abs{rp + sq} \le \max\br{\abs{rp}, \abs{sq}} < 1 $, a contradiction. Thus $ \abs{p} = \alpha < 1 $ and $ \abs{q} = 1 $ for all primes $ q \ne p $, so $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_p $.
\end{enumerate}
\end{proof}

\begin{theorem}
\label{thm:9.6}
Let $ \br{K, \abs{\cdot}} $ be an archimedean local field. Then $ K = \RR $ or $ K = \CC $ and $ \abs{\cdot} $ is equivalent to the usual absolute value $ \abs{\cdot}_\infty $.
\end{theorem}

\begin{proof}
If $ \ch K > 0 $, then $ K $ is non-archimedean by Corollary \ref{cor:9.4}. Therefore $ \ch K = 0 $, and hence $ \QQ \subseteq K $. Since $ \abs{\cdot} $ is archimedean, $ \eval{\abs{\cdot}}_\QQ $ is equivalent to $ \abs{\cdot}_\infty $ by Ostrowski. Therefore, since $ K $ is complete, we have $ \RR \subseteq K $.
\begin{itemize}
\item We first consider the case $ \CC \subseteq K $. Then by uniqueness of extensions of absolute values, $ \eval{\abs{\cdot}}_\CC $ is equivalent to $ \abs{\cdot}_\infty $. Suppose $ \alpha \in K \setminus \CC $. Then $ f\br{X} = \abs{X - \alpha} $ is a continuous function on $ \CC $, hence attains a lower bound at $ b \in \CC $ say, since $ \CC \subseteq K $ is closed. Set $ \beta = \alpha - b $ and we let $ c \in \CC $ such that $ 0 < \abs{c} < \abs{\beta} $. We have $ \abs{\beta - a} \ge \abs{\beta} $ for all $ a \in \CC $. Hence
$$ \dfrac{\abs{\beta - c}}{\abs{\beta}} \le \dfrac{\abs{\beta - c}}{\abs{\beta}}\prod_{\zeta^n = 1, \ \zeta \ne 1} \dfrac{\abs{\beta - \zeta c}}{\abs{\beta}} = \dfrac{\abs{\beta^n - c^n}}{\abs{\beta}^n} = \abs{1 - \br{\dfrac{c}{\beta}}^n} \to 1, $$
as $ n \to \infty $, since $ \abs{c / \beta} < 1 $ implies that $ \br{c / \beta}^n \to 0 $. Then $ \abs{\beta - c} \le \abs{\beta} $, so $ \abs{\beta - c} = \abs{\beta} $. Replacing $ \beta $ by $ \beta - c $ and iterating, we obtain $ \abs{\beta - mc} = \abs{\beta} $ for all $ m \in \NN $, so
$$ \abs{m}\abs{c} = \abs{mc} \le \abs{\beta - mc} + \abs{\beta} = 2\abs{\beta}. $$
This contradicts Lemma \ref{lem:9.3}, hence $ K = \CC $.
\item Now suppose $ K $ does not contain $ \CC $. Define $ L = K\br{i} $ where $ i^2 = -1 $. Can extend $ \abs{\cdot} $ to an absolute value $ \abs{\cdot}_L $ on $ L $ given by
$$ \abs{a + ib}_L = \sqrt{\abs{a}^2 + \abs{b}^2}, \qquad a, b \in K. $$
Applying the above argument gives $ K\br{i} = L = \CC $, hence $ K = \RR $.
\end{itemize}
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:8.2}]
\hfill
\begin{itemize}
\item $ \abs{\cdot} $ archimedean is Theorem \ref{thm:9.6}.
\item $ \abs{\cdot} $ non-archimedean and $ \ch K = 0 $ is Theorem \ref{thm:9.2}.
\item $ \abs{\cdot} $ non-archimedean and $ \ch K > 0 $ is Theorem \ref{thm:8.4}.
\end{itemize}
\end{proof}

\pagebreak

\subsection{Global fields}

\lecture{10}{Friday}{30/10/20}

\begin{definition}
A \textbf{global field} is a field which is either
\begin{itemize}
\item an algebraic number field, or
\item a \textbf{global function field}, the rational function field of an algebraic curve over a finite field, or equivalently a finite extension of $ \FF_p\br{t} $.
\end{itemize}
\end{definition}

We mainly focus on the number field. We show that local fields are completions of global fields.

\begin{lemma}
\label{lem:10.2}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field and $ L / K $ a Galois extension and $ \abs{\cdot}_L $ the unique extension of $ \abs{\cdot} $ to $ L $. Then for $ x \in L $ and $ \sigma \in \Gal\br{L / K} $, we have $ \abs{\sigma\br{x}}_L = \abs{x}_L $.
\end{lemma}

\begin{proof}
Since $ x \mapsto \abs{\sigma\br{x}}_L $ is also another absolute value on $ L $ extending $ \abs{\cdot} $ on $ K $, Lemma \ref{lem:10.2} follows from uniqueness of $ \abs{\cdot}_L $.
\end{proof}

\begin{lemma}[Krasner's lemma]
Let $ \br{K, \abs{\cdot}} $ a complete discretely valued field. Let $ f\br{X} \in K\sbr{X} $ be a separable irreducible polynomial with roots $ \alpha_1, \dots, \alpha_n \in \overline{K} $, the separable closure of $ K $. Suppose $ \beta \in \overline{K} $ with $ \abs{\beta - \alpha_1} < \abs{\beta - \alpha_i} $ for $ i = 2, \dots, n $. Then $ \alpha_1 \in K\br{\beta} $.
\end{lemma}

\begin{proof}
Let $ L = K\br{\beta} $ and $ L' = L\br{\alpha_1, \dots, \alpha_n} $. Then $ L' / L $ is a Galois extension. Let $ \sigma \in \Gal\br{L' / L} $. We have $ \abs{\beta - \sigma\br{\alpha_1}} = \abs{\sigma\br{\beta - \alpha_1}} = \abs{\beta - \alpha_1} $, by Lemma \ref{lem:10.2}. Thus $ \sigma\br{\alpha_1} = \alpha_1 $, so $ \alpha_1 \in K\br{\beta} $.
\end{proof}

\begin{proposition}[Nearby polynomials define the same extension]
\label{prop:10.4}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field and $ f\br{X} = \sum_{i = 0}^n a_iX^i \in \OOO_K\sbr{X} $ be a separable irreducible monic polynomial. Let $ \alpha \in \overline{K} $ be a root of $ f $. Then there exists $ \epsilon > 0 $ such that for any $ g\br{X} = \sum_{i = 0}^n b_iX^i \in \OOO_K\sbr{X} $ monic with $ \abs{a_i - b_i} < \epsilon $, there exists a root $ \beta $ of $ g\br{X} $ such that $ K\br{\alpha} = K\br{\beta} $.
\end{proposition}

\begin{proof}
Let $ \alpha = \alpha_1, \dots, \alpha_n \in \overline{K} $ be the roots of $ f $ which are necessarily distinct. Then $ f'\br{\alpha} \ne 0 $. We choose $ \epsilon $ sufficiently small such that $ \abs{g\br{\alpha_1}} < \abs{f'\br{\alpha_1}}^2 $ and $ \abs{f'\br{\alpha_1} - g'\br{\alpha_1}} < \abs{f'\br{\alpha_1}} $. Then we have $ \abs{g\br{\alpha_1}} < \abs{f'\br{\alpha_1}}^2 = \abs{g'\br{\alpha_1}}^2 $. By Hensel's lemma applied to the field $ K\br{\alpha_1} $, there exists $ \beta \in K\br{\alpha_1} $ such that $ g\br{\beta} = 0 $ and $ \abs{\beta - \alpha_1} < \abs{g'\br{\alpha_1}} $. Then
$$ \abs{g'\br{\alpha_1}} = \abs{f'\br{\alpha_1}} = \prod_{i = 2}^n \abs{\alpha_1 - \alpha_i} \le \abs{\alpha_1 - \alpha_i}, \qquad i = 2, \dots, n, $$
using $ \abs{\alpha_1 - \alpha_i} \le 1 $. Since $ \abs{\beta - \alpha_1} < \abs{g'\br{\alpha_1}} = \abs{f'\br{\alpha_1}} \le \abs{\alpha_1 - \alpha_i} = \abs{\beta - \alpha_i} $ for $ i = 2, \dots, n $, by Krasner's lemma, $ \alpha \in K\br{\beta} $, so $ K\br{\alpha} = K\br{\beta} $.
\end{proof}

\begin{theorem}
Let $ K $ be a local field, then $ K $ is the completion of a global field.
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \abs{\cdot} $ is archimedean. Then $ \RR $ is the completion of $ \QQ $ with respect to $ \abs{\cdot}_\infty $ and $ \CC $ is the completion of $ \QQ\br{i} $ with respect to $ \abs{\cdot}_\infty $.
\item $ \abs{\cdot} $ is non-archimedean of equal characteristic. Then $ K \cong \FF_q\br{\br{t}} $, so $ K $ is the completion of $ \FF_q\br{t} $ with respect to the $ t $-adic absolute value.
\item $ \abs{\cdot} $ is non-archimedean of mixed characteristic. Then $ K \cong \QQ_p\br{\alpha} $ for $ \alpha $ a root of a monic irreducible polynomial $ f\br{X} \in \ZZ_p\sbr{X} $. Since $ \ZZ $ is dense in $ \ZZ_p $, we choose $ g\br{X} \in \ZZ\sbr{X} $ as in Proposition \ref{prop:10.4}. Then $ K = \QQ_p\br{\beta} $ for $ \beta $ a root of $ g\br{X} $. Since $ \beta \in \overline{\QQ} $, we have $ \QQ\br{\beta} \subseteq \QQ_p\br{\beta} = K $, so $ K $ is the completion of $ \QQ\br{\beta} $.
\end{enumerate}
\end{proof}

\pagebreak

\section{Dedekind domains}

The global analogue of a DVR is a Dedekind domain.

\subsection{Dedekind domains and DVRs}

\begin{definition}
A \textbf{Dedekind domain} is a ring $ R $ such that
\begin{itemize}
\item $ R $ is a Noetherian integral domain,
\item $ R $ is integrally closed in $ \Frac R $, and
\item every non-zero prime ideal is maximal.
\end{itemize}
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item The ring of integers in a number field is a Dedekind domain.
\item Any PID, hence DVR, is a Dedekind domain.
\end{itemize}
\end{example*}

\begin{theorem}
\label{thm:10.7}
A ring $ R $ is a DVR if and only if $ R $ is a Dedekind domain with exactly one non-zero prime ideal.
\end{theorem}

\begin{lemma}
\label{lem:10.8}
Let $ R $ be a Noetherian ring and $ I \subseteq R $ a non-zero ideal. Then there exist non-zero prime ideals $ \ppp_1, \dots, \ppp_r \subseteq R $ such that $ \ppp_1 \dots \ppp_r \subseteq I $.
\end{lemma}

\begin{proof}
Suppose not. Since $ R $ is Noetherian, we may choose $ I $ maximal without this property. Then $ I $ is not prime, so there exists $ x, y \in R \setminus I $ such that $ xy \in I $. Let $ I_1 = I + \abr{x} $ and $ I_2 = I + \abr{y} $. Then by maximality of $ I $, there exists $ \ppp_1, \dots, \ppp_r $ and $ \qqq_1, \dots, \qqq_s $ prime ideals such that $ \ppp_1 \dots \ppp_r \subseteq I_1 $ and $ \qqq_1 \dots \qqq_s \subseteq I_2 $, so $ \ppp_1 \dots \ppp_r\qqq_1 \dots \qqq_s \subseteq I_1I_2 \subseteq I $, a contradiction.
\end{proof}

\begin{lemma}
\label{lem:10.9}
Let $ R $ be an integral domain which is integrally closed in $ K = \Frac R $. Let $ I \subseteq R $ be a non-zero finitely generated ideal and $ x \in K $. Then if $ xI \subseteq I $, we have $ x \in R $.
\end{lemma}

\begin{proof}
Let $ I = \abr{c_1, \dots, c_n} $. We write $ xc_i = \sum_{i = 1}^n a_{ij}c_i $ for some $ a_{ij} \in R $. Let $ A $ be the matrix $ A = \br{a_{ij}}_{1 \le i, j \le n} $ and set $ B = x\I_n - A \in \Mat_{n \times n} K $. Then $ B\onebythree{c_1}{\dots}{c_n}^\intercal = 0 $ in $ K^n $. Multiplying by the adjugate matrix for $ B $, $ \br{\det B}\I_n\onebythree{c_1}{\dots}{c_n}^\intercal = 0 $, so $ \det B = 0 $. But $ \det B $ is a monic polynomial in $ x $ with coefficients in $ R $. Thus $ x $ is integral over $ R $, so $ x \in R $.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:10.7}]
\hfill
\begin{itemize}
\item[$ \implies $] Clear.
\item[$ \impliedby $] We need to show $ R $ is a PID. The assumption implies $ R $ is a local ring with unique maximal ideal $ \mmm $.
\begin{enumerate}[leftmargin=0.5in, label=Step \arabic*.]
\item $ \mmm $ is principal. Let $ 0 \ne x \in \mmm $. By Lemma \ref{lem:10.8}, $ \abr{x} \supseteq \mmm^n $ for some $ n \ge 1 $. Let $ n $ be minimal such that $ \abr{x} \supseteq \mmm^n $, then we may choose $ y \in \mmm^{n - 1} \setminus \abr{x} $. Set $ \pi = x / y $. Then we have $ y\mmm \subseteq \mmm^n \subseteq \abr{x} $, so $ \pi^{-1}\mmm \subseteq R $. If $ \pi^{-1}\mmm \subseteq \mmm $, then $ \pi^{-1} \in R $ by Lemma \ref{lem:10.9} and $ y \in \abr{x} $, a contradiction. Hence $ \pi^{-1}\mmm = R $, so $ \mmm = \pi R $ is principal.
\item $ R $ is a PID. Let $ I \subseteq R $ be a non-zero ideal. Consider the sequence of ideals $ I \subseteq \pi^{-1}I \subseteq \dots $ in $ K $. Then $ \pi^{-k}I \ne \pi^{-\br{k + 1}}I $ for all $ k $ by Lemma \ref{lem:10.9}. Therefore since $ R $ is Noetherian, we may choose $ n $ maximal such that $ \pi^{-n}I \subseteq R $. If $ \pi^{-n}I \subseteq \mmm = \abr{\pi} $, then $ \pi^{-\br{n + 1}}I \subseteq R $, a contradiction. Thus $ \pi^{-n}I = R $, so $ I = \abr{\pi^n} $.
\end{enumerate}
\end{itemize}
\end{proof}

\lecture{11}{Monday}{02/11/20}

Let $ R $ be an integral domain and $ S \subseteq R $ a multiplicatively closed subset, so if $ x, y \in S $ then $ xy \in S $. The \textbf{localisation} $ S^{-1}R $ of $ R $ with respect to $ S $ is the ring
$$ S^{-1}R = \cbr{\dfrac{r}{s} \st r \in R, \ s \in S} \subseteq \Frac R. $$
If $ \ppp $ is a prime ideal in $ R $, we write $ R_{\br{\ppp}} $ for the localisation with respect to $ S = R \setminus \ppp $.

\pagebreak

\begin{example*}
\hfill
\begin{itemize}
\item If $ \ppp = 0 $, then $ R_{\br{\ppp}} = \Frac R $.
\item If $ R = \ZZ $, then $ \ZZ_{\br{\abr{p}}} = \cbr{a / p^n \st a \in \ZZ, \ n \in \ZZ_{\ge 0}} $.
\end{itemize}
\end{example*}

\begin{fact*}
\hfill
\begin{itemize}
\item If $ R $ is Noetherian, then $ S^{-1}R $ is Noetherian.
\item There exists a bijection
$$ \correspondence{\text{prime ideals} \ \ppp S^{-1}R \subseteq S^{-1}R}{\text{prime ideals} \ \ppp \subseteq R \ \text{such that} \ \ppp \cap S = \emptyset}. $$
\end{itemize}
\end{fact*}

\begin{corollary}
\label{cor:11.1}
Let $ R $ be a Dedekind domain and $ \ppp \subseteq R $ a non-zero prime ideal. Then $ R_{\br{\ppp}} $ is a DVR.
\end{corollary}

\begin{proof}
By properties of localisation, $ R_{\br{\ppp}} $ is a Noetherian integral domain with a unique non-zero prime ideal $ \ppp R_{\br{\ppp}} $. It suffices to show that $ R_{\br{\ppp}} $ is integrally closed in $ \Frac R_{\br{\ppp}} = \Frac R $, since then $ R_{\br{\ppp}} $ is Dedekind, so by Theorem \ref{thm:10.7}, $ R_{\br{\ppp}} $ is a DVR. Let $ x \in \Frac R $ be integral over $ R_{\br{\ppp}} $. Multiplying by denominators of a monic polynomial satisfied by $ x $, we obtain $ sx^n + a_{n - 1}x^{n - 1} + \dots + a_0 = 0 $ for $ a_i \in R $ and $ s \in S $. By multiplying by $ s^{n - 1} $, $ xs $ is integral over $ R $. Thus $ xs \in R $, so $ x \in R_{\br{\ppp}} $.
\end{proof}

\begin{definition}
If $ R $ is a Dedekind domain and $ \ppp \subseteq R $ a non-zero prime ideal, we write $ \v_\ppp $ for the normalised valuation on $ \Frac R = \Frac R_{\br{\ppp}} $ corresponding to the DVR $ R_{\br{\ppp}} $.
\end{definition}

\begin{example*}
If $ R = \ZZ $ and $ \ppp = \abr{p} $, then $ \v_\ppp $ is the $ p $-adic valuation.
\end{example*}

\begin{theorem}
Let $ R $ be a Dedekind domain. Then every non-zero ideal $ I \subseteq R $ can be written uniquely as a product of prime ideals, $ I = \ppp_1^{e_1} \dots \ppp_r^{e_r} $ for $ \ppp_i $ distinct.
\end{theorem}

\begin{remark*}
This is clear for PIDs, since PID implies UFD.
\end{remark*}

\begin{proof}
We quote the following properties of localisation.
\begin{enumerate}
\item If $ I \subsetneq J $ then $ IR_{\br{\ppp}} \subsetneq JR_{\br{\ppp}} $.
\item $ I = J $ if and only if $ IR_{\br{\ppp}} = JR_{\br{\ppp}} $, for all $ \ppp $ prime ideals.
\end{enumerate}
Let $ I \subseteq R $ be a non-zero ideal. Then by Lemma \ref{lem:10.8}, there are prime ideals $ \ppp_1, \dots, \ppp_r $ such that $ \ppp_1^{\beta_1} \dots \ppp_r^{\beta_r} \subseteq I $, where $ \beta_i > 0 $. Then
$$ IR_{\br{\ppp}} =
\begin{cases}
R_{\br{\ppp}} & \ppp \notin \cbr{\ppp_1, \dots, \ppp_r} \\
\ppp^{\alpha_i}R_{\br{\ppp}} & \ppp = \ppp_i
\end{cases}.
$$
Here, $ 0 < \alpha_i \le \beta_i $, and the second case follows from Corollary \ref{cor:11.1}. Thus $ I = \ppp_1^{\alpha_1} \dots \ppp_r^{\alpha_r} $ by property $ 2 $. For uniqueness, if $ I = \ppp_1^{\alpha_1} \dots \ppp_r^{\alpha_r} = \ppp_1^{\gamma_1} \dots \ppp_r^{\gamma_r} $ then $ \ppp_i^{\alpha_i}R_{\br{\ppp_i}} = \ppp_i^{\gamma_i}R_{\br{\ppp_i}} $, so $ \alpha_i = \gamma_i $ by unique factorisation in DVRs.
\end{proof}

\subsection{Extensions of Dedekind domains}

Let $ L / K $ be a finite extension. For $ x \in L $ we write $ \Tr_{L / K} x \in K $ for the trace of the $ K $-linear map
$$ \function{L}{L}{y}{xy}. $$
If $ L / K $ is separable such that $ \sbr{L : K} = n $ and $ \sigma_1, \dots, \sigma_n : L \to \overline{K} $ denote the embeddings of $ L $ into a separable closure $ \overline{K} $, then
$$ \Tr_{L / K} x = \sum_{i = 1}^n \sigma_i\br{x}. $$

\pagebreak

\begin{lemma}
Let $ L / K $ be a finite separable extension of fields. Then the symmetric bilinear pairing
$$ \function[\br{,}]{L \times L}{K}{\br{x, y}}{\Tr_{L / K} xy} $$
is non-degenerate.
\end{lemma}

\begin{proof}
By the primitive element theorem, $ L = K\br{\alpha} $ for some $ \alpha \in L $. We consider the matrix $ A $ for $ \br{,} $ in the $ K $-basis for $ L $ given by $ 1, \dots, \alpha^{n - 1} $. Then $ A_{ij} = \Tr_{L / K} \alpha^{i + j} = \sbr{BB^\intercal}_{ij} $ where $ B $ is the $ n \times n $ matrix with
$$ B = \threebythree{1}{\dots}{1}{\vdots}{\ddots}{\vdots}{\sigma_1\br{\alpha^{n - 1}}}{\dots}{\sigma_n\br{\alpha^{n - 1}}}, $$
so the Vandermonde determinant is
$$ \det A = \br{\det B}^2 = \sbr{\prod_{1 \le i < j \le n} \br{\sigma_i\br{\alpha} - \sigma_j\br{\alpha}}}^2 \ne 0, $$
since $ \sigma_i\br{\alpha} \ne \sigma_j\br{\alpha} $ for $ i \ne j $.
\end{proof}

\begin{remark*}
In fact a finite extension of fields $ L / K $ is separable if and only if the trace form is non-degenerate.
\end{remark*}

\begin{theorem}
\label{thm:11.5}
Let $ \OOO_K $ be a Dedekind domain and $ L $ a finite separable extension of $ K = \Frac \OOO_K $. Then the integral closure $ \OOO_L $ of $ \OOO_K $ in $ L $ is a Dedekind domain.
\end{theorem}

\begin{proof}
Since $ \OOO_L \subseteq L $, it is an integral domain. We need to show the following.
\begin{itemize}
\item $ \OOO_L $ is Noetherian. Let $ e_1, \dots, e_n \in L $ be a $ K $-basis for $ L $. Upon scaling by $ K $, we may assume $ e_i \in \OOO_L $, for all $ i $. Let $ f_i \in L $ be the dual basis with respect to the trace form $ \br{,} $. Let $ x \in \OOO_L $ and write $ x = \sum_{i = 1}^n \lambda_if_i $ for $ \lambda_i \in K $. Then $ \lambda_i = \Tr_{L / K} xe_i \in \OOO_K $, since for any $ z \in \OOO_L $, $ \Tr_{L / K} z $ is a sum of elements which are integral over $ \OOO_K $, so $ \Tr_{L / K} z $ is integral over $ \OOO_K $, so $ \Tr_{L / K} z \in \OOO_K $. Thus $ \OOO_L \subseteq \OOO_Kf_1 + \dots + \OOO_Kf_n $. Since $ \OOO_K $ is Noetherian, $ \OOO_L $ is finitely generated as an $ \OOO_K $-module, hence $ \OOO_L $ is Noetherian.
\item $ \OOO_L $ is integrally closed in $ L $. Example sheet $ 2 $.
\item Every non-zero prime ideal $ \pp $ in $ \OOO_L $ is maximal. Let $ \pp $ be a non-zero prime ideal of $ \OOO_L $, and define $ \ppp = \pp \cap \OOO_K $ a prime ideal of $ \OOO_K $. Let $ x \in \pp $, then $ x $ satisfies an equation $ x^n + a_{n - 1}x^{n - 1} + \dots + a_0 = 0 $ for $ a_i \in \OOO_K $ with $ a_0 \ne 0 $. Then $ a_0 \in \pp \cap \OOO_K $ is a non-zero element of $ \ppp $, so $ \ppp $ is non-zero, so $ \ppp $ is maximal. We have $ \OOO_K / \ppp \hookrightarrow \OOO_L / \pp $, and $ \OOO_L / \pp $ is a finite dimensional vector space over $ \OOO_K / \ppp $. Since $ \OOO_L / \pp $ is an integral domain, it is a field, using the rank-nullity theorem applied to the map $ y \mapsto zy $.
\end{itemize}
\end{proof}

\begin{remark*}
Theorem \ref{thm:11.5} in fact holds without the assumption that $ L / K $ is separable.
\end{remark*}

\begin{corollary}
The ring of integers inside a number field is a Dedekind domain.
\end{corollary}

By convention, if $ \OOO_K $ is the ring of integers of a number field and $ \ppp \subseteq \OOO_K $ is a non-zero prime ideal, we normalise $ \abs{\cdot}_\ppp $, the absolute value associated to $ \v_\ppp $, by
$$ \abs{x}_\ppp = \N_\ppp^{-\v_\ppp\br{x}}, \qquad \N_\ppp = \#\br{\OOO_K / \ppp}. $$

\lecture{12}{Wednesday}{04/11/20}

\begin{lemma}
\label{lem:12.1}
Let $ \OOO_K $ be a Dedekind domain. Let $ 0 \ne x \in \OOO_K $. Then
$$ \abr{x} = \prod_{\ppp \ne 0 \ \text{prime ideals}} \ppp^{\v_\ppp\br{x}}. $$
\end{lemma}

Note product is finite.

\begin{proof}
$ x\OOO_{K, \br{\ppp}} = \br{\ppp\OOO_{K, \br{\ppp}}}^{\v_\ppp\br{x}} $ by definition of $ \v_\ppp\br{x} $. Lemma \ref{lem:12.1} follows from properties of localisation, where $ I = J $ if and only if $ I\OOO_{K, \br{\ppp}} = J\OOO_{K, \br{\ppp}} $ for all prime ideals $ \ppp $.
\end{proof}

\pagebreak

\begin{notation*}
Let $ \OOO_K $ be a Dedekind domain, let $ L / K $ be a finite separable extension, and let $ \pp \subseteq \OOO_L $ and $ \ppp \subseteq \OOO_K $ be non-zero prime ideals. We write $ \pp \mid \ppp $ if
$$ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r}, \qquad \pp \in \cbr{\pp_1, \dots, \pp_r}, \qquad e_i > 0. $$
\end{notation*}

\begin{theorem}
\label{thm:12.2}
Let $ \OOO_K $ be a Dedekind domain and $ L $ a finite separable extension of $ K = \Frac \OOO_K $. For $ \ppp $ a non-zero prime ideal of $ \OOO_K $, we write $ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r} $ for $ e_i > 0 $. Then the absolute values on $ L $ extending $ \abs{\cdot}_\ppp $, up to equivalence, are precisely $ \abs{\cdot}_{\pp_1}, \dots, \abs{\cdot}_{\pp_r} $.
\end{theorem}

\begin{proof}
By Lemma \ref{lem:12.1}, for any $ x \in \OOO_K $ and $ i = 1, \dots, r $, we have $ \v_{\pp_i}\br{x} = e_i\v_\ppp\br{x} $. Hence up to equivalence, $ \abs{\cdot}_{\pp_i} $ extends $ \abs{\cdot}_\ppp $. Now suppose $ \abs{\cdot} $ is an absolute value on $ L $ extending $ \abs{\cdot}_\ppp $. Then $ \abs{\cdot} $ is bounded on $ \ZZ $, hence $ \abs{\cdot} $ is non-archimedean. Let $ R = \cbr{x \in L \st \abs{x} \le 1} \subseteq L $ be the valuation ring for $ L $ with respect to $ \abs{\cdot} $. Then $ \OOO_K \subseteq R $, and since $ R $ is integrally closed in $ L $, by lecture $ 6 $, we have $ \OOO_L \subseteq R $. Set
\begin{equation}
\label{eq:3}
\pp = \cbr{x \in \OOO_L \st \abs{x} < 1}.
\end{equation}
It is easy to check $ \pp $ is a non-zero prime ideal. For example,
\begin{itemize}
\item if $ x, y \in \pp $ then $ x + y \in \pp $ by $ \br{\ref{eq:3}} $,
\item if $ r \in \OOO_L $ and $ x \in \pp $ then $ rx \in \pp $ by $ \OOO_L \subseteq R $ and $ \br{\ref{eq:3}} $,
\item if $ x, y \in \OOO_L $ and $ xy \in \pp $ then $ x \in \pp $ or $ y \in \pp $ by $ \br{\ref{eq:3}} $, and
\item $ \ppp \subseteq \pp $, hence $ \pp $ is non-zero.
\end{itemize}
Then $ \OOO_{L, \br{\pp}} \subseteq R $, since if $ s \in \OOO_L \setminus \pp $ then $ \abs{s} = 1 $. But $ \OOO_{L, \br{\pp}} $ is a DVR, hence a maximal subring of $ L $, so $ \OOO_{L, \br{\pp}} = R $. Hence $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_\pp $. Since $ \abs{\cdot} $ extends $ \abs{\cdot}_\ppp $, $ \pp \cap \OOO_K = \ppp $. Thus $ \pp_1^{e_1} \dots \pp_r^{e_r} \subseteq \pp $, so $ \pp = \pp_i $ for some $ i $.
\end{proof}

Let $ K $ be a number field. If $ \sigma : K \to \RR, \CC $ is a real or complex embedding, then $ x \mapsto \abs{\sigma\br{x}}_\infty $ defines an absolute value on $ K $, by example sheet $ 2 $, denoted by $ \abs{\cdot}_\sigma $.

\begin{corollary}
Let $ K $ be a number field with ring of integers $ \OOO_K $. Then any absolute value on $ K $ is either
\begin{itemize}
\item $ \abs{\cdot}_\ppp $ for some non-zero prime ideal of $ \OOO_K $, or
\item $ \abs{\cdot}_\sigma $ for some $ \sigma : K \to \RR, \CC $.
\end{itemize}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \abs{\cdot} $ is non-archimedean. Then $ \eval{\abs{\cdot}}_\QQ $ is equivalent to $ \abs{\cdot}_p $ for some prime $ p $ by Ostrowski's theorem. Theorem \ref{thm:12.2} implies $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_\ppp $ for $ \ppp $ a prime ideal of $ \OOO_K $ dividing $ \abr{p} $.
\item $ \abs{\cdot} $ is archimedean. Example sheet.
\end{enumerate}
\end{proof}

\subsection{Completions of number fields}

Now let $ L / K $ be an extension of number fields with rings of integers $ \OOO_K $ and $ \OOO_L $ respectively. Let $ \ppp \subseteq \OOO_K $ and $ \pp \subseteq \OOO_L $ be non-zero prime ideals such that $ \pp $ divides $ \ppp $. We write $ K_\ppp $ and $ L_\pp $ for the completion of $ K $ and $ L $ with respect to $ \abs{\cdot}_\ppp $ and $ \abs{\cdot}_\pp $ respectively.

\begin{lemma}
\label{lem:12.4}
\hfill
\begin{itemize}
\item The natural map $ L \otimes_K K_\ppp \to L_\pp $ is surjective.
\item $ \sbr{L_\pp : K_\ppp} \le \sbr{L : K} $.
\end{itemize}
\end{lemma}

\begin{proof}
Let $ M = LK_\ppp \subseteq L_\pp $. Then $ M $ is a finite extension of $ K_\ppp $ and $ \sbr{M : K_\ppp} \le \sbr{L : K} $. Moreover $ M $ is complete and since $ L \subseteq M \subseteq L_\pp $, we have $ L_\pp = M $.
\end{proof}

\pagebreak

\begin{lemma}[Chinese remainder theorem]
Let $ R $ be a ring. Let $ I_1, \dots, I_n \subseteq R $ be ideals such that $ I_i + I_j = R $ for all $ i \ne j $. Then
\begin{itemize}
\item $ \bigcap_{i = 1}^n I_i = \prod_{i = 1}^n I_i = I $, and
\item $ R / I \cong \prod_{i = 1}^n R / I_i $.
\end{itemize}
\end{lemma}

\begin{proof}
Example sheet $ 2 $.
\end{proof}

\begin{theorem}
\label{thm:12.6}
$$ L \otimes_K K_\ppp \cong \prod_{\pp \mid \ppp} L_\pp. $$
\end{theorem}

\begin{proof}
Write $ L = K\br{\alpha} $, by separability, and let $ f\br{X} \in K\sbr{X} $ be the minimal polynomial of $ \alpha $. Let $ f\br{X} = f_1\br{X} \dots f_r\br{X} $ in $ K_\ppp\sbr{X} $ where $ f_i\br{X} \in K_\ppp\sbr{X} $ are distinct irreducible. Then $ L \cong K\sbr{X} / \abr{f\br{X}} $, and hence by CRT,
$$ L \otimes_K K_\ppp \cong K_\ppp\sbr{X} / \abr{f\br{X}} \cong \prod_{i = 1}^r K_\ppp\sbr{X} / \abr{f_i\br{X}}. $$
Set $ L_i = K_\ppp\sbr{X} / \abr{f_i\br{X}} $, a finite extension of $ K_\ppp $. Then $ L_i $ contains both $ L $ and $ K_\ppp $, using the map of fields $ K\sbr{X} / \abr{f\br{X}} \hookrightarrow K_\ppp\sbr{X} / \abr{f_i\br{X}} $ is injective. Moreover $ L $ is dense inside $ L_i $. Indeed since $ K $ is dense in $ K_\ppp $, can approximate coefficients of an element of $ K_\ppp\sbr{X} / \abr{f_i\br{X}} $ with an element of $ K\sbr{X} / \abr{f\br{X}} $. Then Theorem \ref{thm:12.6} follows from the following three claims.
\begin{itemize}
\item $ L_i \cong L_\pp $ for a prime $ \pp $ of $ \OOO_L $ dividing $ \ppp $. Since $ \sbr{L_i : K_\ppp} < \infty $, there is a unique absolute value $ \abs{\cdot} $ on $ L_i $ extending $ \abs{\cdot}_\ppp $. By Theorem \ref{thm:12.2}, $ \eval{\abs{\cdot}}_L $ is equivalent to $ \abs{\cdot}_\pp $ for some $ \pp \mid \ppp $. Since $ L $ is dense in $ L_i $ and $ L_i $ is complete, we have $ L_i \cong L_\pp $.
\item Each $ \pp $ appears at most once. Suppose $ \phi : L_i \cong L_j $ is an isomorphism preserving $ L $ and $ K_\ppp $, then $ \phi : K_\ppp\sbr{X} / \abr{f_i\br{X}} \xrightarrow{\sim} K_\ppp\sbr{X} / \abr{f_j\br{X}} $ takes $ X $ to $ X $. Hence $ f_i\br{X} = f_j\br{X} $, so $ i = j $.
\item Each $ \pp $ appears at least once. By Lemma \ref{lem:12.4}, the natural map $ \pi_\pp : L \otimes_K K_\ppp \to L_\pp $ is surjective for any $ \pp \mid \ppp $. Since $ L_\pp $ is a field, $ \pi_\pp $ factors through $ L_i $ for some $ i $, and hence $ L_i \cong L_\pp $ by surjectivity of $ \pi_\pp $.
\end{itemize}
\end{proof}

\begin{example*}
Let $ K = \QQ $, let $ L = \QQ\br{i} $, and let $ f\br{X} = X^2 + 1 $. By Hensel, $ \sqrt{-1} \in \QQ_5 $. Thus $ \abr{5} $ splits in $ \QQ\br{i} $, that is $ 5\OOO_L = \ppp_1\ppp_2 $.
\end{example*}

\begin{corollary}
For $ x \in L $,
$$ \N_{L / K}\br{x} = \prod_{\pp \mid \ppp} \N_{L_\pp / K_\ppp}\br{x}. $$
\end{corollary}

\begin{proof}
Let $ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r} $. Let $ \BBB_1, \dots, \BBB_r $ be bases for $ L_{\pp_1}, \dots, L_{\pp_r} $ as $ K_\ppp $-vector spaces. Then $ \BBB = \bigcup_{i = 1}^r \BBB_i $ is a basis for $ L \otimes_K K_\ppp $ over $ K_\ppp $. Let $ \sbr{\cdot x}_\BBB $ and $ \sbr{\cdot x}_{\BBB_i} $ denote the matrices for $ \cdot x : L \otimes_K K_\ppp \to L \otimes_K K_\ppp $ and $ \cdot x : L_{\pp_i} \to L_{\pp_i} $ with respect to the bases $ \BBB $ and $ \BBB_i $ respectively. Then
$$ \sbr{\cdot x}_\BBB = \threebythree{\sbr{\cdot x}_{\BBB_1}}{}{0}{}{\ddots}{}{0}{}{\sbr{\cdot x}_{\BBB_r}}, $$
so
$$ \N_{L / K}\br{x} = \det \sbr{\cdot x}_\BBB = \prod_{i = 1}^r \det \sbr{\cdot x}_{\BBB_i} = \prod_{i = 1}^r \N_{L_{\pp_i} / K_\ppp}\br{x}. $$
\end{proof}

\subsection{Decomposition groups}

\lecture{13}{Friday}{06/11/20}

Let $ \OOO_K $ be a Dedekind domain, $ L $ a finite separable extension of $ K = \Frac \OOO_K $, and $ \OOO_L $ the integral closure of $ \OOO_K $ in $ L $. By lecture $ 11 $, if $ 0 \ne \ppp \subseteq \OOO_K $ is a prime ideal, then $ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r} $ where $ \pp_i $ are distinct prime ideals of $ \OOO_L $. Note that for any $ i $, $ \ppp \subseteq \OOO_K \cap \pp_i \subsetneq \OOO_K $, hence $ \ppp = \OOO_K \cap \pp_i $.

\pagebreak

\begin{definition}
$ e_i $ is the \textbf{ramification index} of $ \pp_i $ over $ \ppp $. We say $ \ppp $ \textbf{ramifies} in $ L $ if some $ e_i > 1 $.
\end{definition}

\begin{example*}
Let $ \OOO_K = \CC\sbr{t} $, let $ \OOO_L = \CC\sbr{T} $, and let
$$ \function{\OOO_K}{\OOO_L}{t}{T^n}. $$
We have $ t\OOO_L = T^n\OOO_L $, so the ramification index of $ \abr{T} $ over $ \abr{t} $ is $ n $. Corresponds geometrically to the degree $ n $ covering of Riemann surfaces
$$ \function{\CC}{\CC}{x}{x^n}, $$
having a ramification at zero with ramification index $ n $.
\end{example*}

\begin{definition}
$ f_i = \sbr{\OOO_L / \pp_i : \OOO_K / \ppp} $ is the \textbf{residue class degree} of $ \pp_i $ over $ \ppp $.
\end{definition}

\begin{theorem}
\label{thm:13.3}
$$ \sum_{i = 1}^r e_if_i = \sbr{L : K}. $$
\end{theorem}

\begin{proof}
Let $ S = \OOO_K \setminus \ppp $. We have the following whose proofs are left as an exercise.
\begin{enumerate}
\item $ S^{-1}\OOO_L $ is the integral closure of $ S^{-1}\OOO_K $ in $ L $.
\item $ S^{-1}\ppp S^{-1}\OOO_L \cong S^{-1}\pp_1^{e_1} \dots \pp_r^{e_r} $.
\item $ S^{-1}\OOO_L / S^{-1}\pp_i \cong \OOO_L / \pp_i $ and $ S^{-1}\OOO_K / S^{-1}\ppp \cong \OOO_K / \ppp $.
\end{enumerate}
In particular, $ 2 $ and $ 3 $ imply $ e_i $ and $ f_i $ do not change when we replace $ \OOO_K $ and $ \OOO_L $ by $ S^{-1}\OOO_K $ and $ S^{-1}\OOO_L $. Thus we may assume that $ \OOO_K $ is a DVR, and hence a PID. By CRT, we have
\begin{equation}
\label{eq:4}
\OOO_L / \ppp\OOO_L \cong \prod_{i = 1}^r \OOO_L / \pp_i^{e_i}.
\end{equation}
Note that $ \OOO_L / \ppp\OOO_L $ is a $ k = \OOO_K / \ppp $-module, that is a $ k $-vector space. We count dimensions of both sides in $ \br{\ref{eq:4}} $. For each $ i $, we have a decreasing sequence of $ k $-subspaces
$$ 0 \subseteq \pp_i^{e_i - 1} / \pp_i^{e_i} \subseteq \dots \subseteq \pp_i / \pp_i^{e_i} \subseteq \OOO_L / \pp_i^{e_i}. $$
Thus $ \dim_k \OOO_L / \pp_i^{e_i} = \sum_{j = 0}^{e_i - 1} \dim_k \pp_i^j / \pp_i^{j + 1} $. Note that $ \pp_i^j / \pp_i^{j + 1} $ is an $ \OOO_L / \pp_i $-module and $ x \in \pp_i^j \setminus \pp_i^{j + 1} $ is a generator. For example, can prove this after localising at $ \pp_i $. Then $ \dim_k \pp_i^j / \pp_i^{j + 1} = f_i $ and we have $ \dim_k \OOO_L / \pp_i^{e_i} = e_if_i $. Recall that $ \OOO_K $ is a DVR. By the structure theorem for modules over PIDs, $ \OOO_L $ is a free module over $ \OOO_K $ of rank $ n = \sbr{L : K} $. Thus $ \OOO_L / \ppp\OOO_L \cong \br{\OOO_K / \ppp}^n $ as $ \OOO_K $-modules and hence $ \dim_k \OOO_L / \ppp\OOO_L = n $.
\end{proof}

Theorem \ref{thm:13.3} is the algebraic analogue of the fact that for a degree $ n $ covering $ X \to Y $ of compact Riemann surfaces, and $ y \in Y $ we have
$$ n = \sum_{x \in f^{-1}\br{y}} \e_x, $$
where $ \e_x $ is the ramification index of $ x $. Now assume $ L / K $ is Galois. Then for any $ \sigma \in \Gal\br{L / K} $, $ \sigma\br{\pp_i} \cap \OOO_K = \ppp $ and hence $ \sigma\br{\pp_i} \in \cbr{\pp_1, \dots, \pp_r} $, so $ \Gal\br{L / K} $ acts on $ \cbr{\pp_1, \dots, \pp_r} $.

\begin{proposition}
\label{prop:13.4}
The action of $ \Gal\br{L / K} $ on $ \cbr{\pp_1, \dots, \pp_r} $ is transitive.
\end{proposition}

\begin{proof}
Suppose not, so that there exist $ i \ne j $ such that $ \sigma\br{\pp_i} \ne \pp_j $ for all $ \sigma \in \Gal\br{L / K} $. By CRT, we may choose $ x \in \OOO_L $ such that $ x \equiv 0 \mod \pp_i $ and $ x \equiv 1 \mod \sigma\br{\pp_j} $ for all $ \sigma \in \Gal\br{L / K} $. Then
$$ \N_{L / K}\br{x} = \prod_{\sigma \in \Gal\br{L / K}} \sigma\br{x} \in \OOO_K \cap \pp_i = \ppp \subseteq \pp_j. $$
Since $ \pp_j $ is prime, there exists $ \tau \in \Gal\br{L / K} $ such that $ \tau\br{x} \in \pp_j $, so $ x \in \tau^{-1}\br{\pp_j} $, that is $ x \equiv 0 \mod \tau^{-1}\br{\pp_i} $, a contradiction.
\end{proof}

\pagebreak

\begin{corollary}
Suppose $ L / K $ is Galois. Then $ e_1 = \dots = e_r = \e $ and $ f_1 = \dots = f_r = \f $, and we have $ n = \e\f r $.
\end{corollary}

\begin{proof}
For any $ \sigma \in \Gal\br{L / K} $ we have
\begin{itemize}
\item $ \ppp = \sigma\br{\ppp} = \sigma\br{\pp_1}^{e_1} \dots \sigma\br{\pp_r}^{e_r} $, so $ e_1 = \dots = e_r $, and
\item $ \OOO_L / \pp_i = \OOO_L / \sigma\br{\pp_i} $, so $ f_1 = \dots = f_r $.
\end{itemize}
\end{proof}

Let $ L / K $ be complete discretely valued fields with normalised valuations $ \v_L $ and $ \v_K $ and uniformisers $ \pi_L $ and $ \pi_K $. The \textbf{ramification index} is $ \e = \e_{L / K} = \v_L\br{\pi_K} $, that is $ \pi_L^\e\OOO_L = \pi_K\OOO_L $. The \textbf{residue class degree} is $ \f = \f_{L / K} = \sbr{k_L : k} $.

\begin{corollary}
\label{cor:13.6}
Suppose either
\begin{enumerate}
\item $ L / K $ is finite separable, or
\item $ \f $ is finite.
\end{enumerate}
Then $ \sbr{L : K} = \e\f $.
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item Theorem \ref{thm:13.3}.
\item Can apply the same proof as in Theorem \ref{thm:13.3} if we know $ \OOO_L $ is finitely generated as an $ \OOO_K $-module. As before, $ \dim_k \OOO_L / \pi_K\OOO_L = \e\f < \infty $. Let $ x_1, \dots, x_m \in \OOO_L $ be a set of coset representatives for a $ k $-basis for $ \OOO_L / \pi_K\OOO_L $. For $ y \in \OOO_L $, can write
$$ y = \sum_{i = 0}^\infty \br{\sum_{j = 1}^m a_{ij}x_j}\pi_K^i = \sum_{j = 1}^m \br{\sum_{i = 0}^\infty a_{ij}\pi_K^i}x_j, \qquad a_{ij} \in \OOO_K, $$
by Proposition \ref{prop:3.5}, so $ \OOO_L $ is finitely generated over $ \OOO_K $.
\end{enumerate}
\end{proof}

Let $ \OOO_K $ be a Dedekind domain, $ L $ a finite separable extension of $ K = \Frac \OOO_K $, and $ \OOO_L $ the integral closure of $ \OOO_K $ in $ L $.

\begin{definition}
Let $ L / K $ be finite Galois. The \textbf{decomposition group} at a prime $ \pp $ of $ \OOO_L $ is the subgroup of $ \Gal\br{L / K} $ defined by
$$ \G_\pp = \cbr{\sigma \in \Gal\br{L / K} \st \sigma\br{\pp} = \pp}. $$
\end{definition}

Proposition \ref{prop:13.4} shows that for any $ \pp $ and $ \pp' $ dividing $ \ppp $, $ \G_\pp $ and $ \G_{\pp'} $ are conjugate and $ \G_\pp $ has size $ ef $. Recall we write $ L_\pp $ and $ K_\ppp $ for the completions of $ L $ and $ K $ with respect to $ \abs{\cdot}_\pp $ and $ \abs{\cdot}_\ppp $ respectively.

\begin{proposition}
Suppose $ L / K $ is finite Galois and $ \pp $ is a prime ideal of $ L $ dividing $ \ppp $. Then
\begin{enumerate}
\item $ L_\pp / K_\ppp $ is Galois, and
\item there is a natural map $ \res : \Gal\br{L_\pp / K_\ppp} \to \Gal\br{L / K} $ which is injective and has image $ \G_\pp $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Since $ L / K $ is Galois, $ L $ is the splitting field of a separable polynomial $ f\br{X} \in K\sbr{X} $. Then $ L_\pp $ is the splitting field of $ f $ considered as an element of $ K_\ppp\sbr{X} $, so $ L_\pp / K_\ppp $ is Galois.
\item Let $ \sigma \in \Gal\br{L_\pp / K_\ppp} $, then $ \sigma\br{L} = L $ since $ L / K $ is normal, hence we have a map $ \res : \Gal\br{L_\pp / K_\ppp} \to \Gal\br{L / K} $. Since $ L $ is dense in $ L_\pp $, $ \res $ is injective. By Lemma \ref{lem:10.2} $ \abs{\sigma\br{x}}_\pp = \abs{x}_\pp $ for all $ \sigma \in \Gal\br{L_\pp / K_\ppp} $ and $ x \in L_\pp $. Then $ \sigma\br{\pp} = \pp $ for all $ \sigma \in \Gal\br{L_\pp / K_\ppp} $, so $ \res \sigma \in \G_\pp $ for all $ \sigma \in \Gal\br{L_\pp / K_\ppp} $. To show surjectivity it suffices to show that $ \sbr{L_\pp : K_\ppp} = \e\f = \abs{\G_\pp} $. We have already seen $ \abs{\G_\pp} = \e\f $. We can apply Corollary \ref{cor:13.6} to $ L_\pp / K_\ppp $ noting that $ \e $ and $ \f $ do not change when we take completions.
\end{enumerate}
\end{proof}

\pagebreak

\section{Ramification theory}

\subsection{Unramified and totally ramified extensions}

\lecture{14}{Monday}{09/11/20}

Let $ K $ be a non-archimedean local field and $ L $ a finite separable extension of $ K $. Then $ L $ is a local field. Then
\begin{equation}
\label{eq:5}
\sbr{L : K} = \e_{L / K}\f_{L / K}.
\end{equation}

\begin{lemma}
Let $ M / L / K $ be finite separable extensions of local fields. Then
\begin{enumerate}
\item $ \e_{M / K} = \e_{M / L}\e_{L / K} $, and
\item $ \f_{M / K} = \f_{M / L}\f_{L / K} $.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}
\item[$ 2 $.] $ \f_{M / K} = \sbr{k_M : k} = \sbr{k_M : k_L}\sbr{k_L : k} = \f_{M / L}\f_{L / K} $.
\item[$ 1 $.] $ 2 $ and $ \br{\ref{eq:5}} $.
\end{itemize}
\end{proof}

\begin{definition}
The extension $ L / K $ is said to be
\begin{itemize}
\item \textbf{unramified} if $ \e_{L / K} = 1 $, if and only if $ \f_{L / K} = \sbr{L : K} $,
\item \textbf{ramified} if $ \e_{L / K} > 1 $, if and only if $ \f_{L / K} < \sbr{L : K} $, and
\item \textbf{totally ramified} if $ \e_{L / K} = \sbr{L : K} $, if and only if $ \f_{L / K} = 1 $.
\end{itemize}
\end{definition}

\begin{theorem}
\label{thm:14.3}
Let $ L / K $ be a finite separable extension of local fields, then there exists a field $ K_0 $ such that $ K \subseteq K_0 \subseteq L $ and such that
\begin{itemize}
\item $ K_0 / K $ is unramified, and
\item $ L / K_0 $ is totally ramified.
\end{itemize}
Moreover $ \sbr{K_0 : K} = \f_{L / K} $ and $ \sbr{L : K_0} = \e_{L / K} $, and $ K_0 / K $ is Galois.
\end{theorem}

\begin{proof}
Let $ k = \FF_q $, so that $ k_L = \FF_{q^\f} $ for $ \f = \f_{L / K} $. Set $ m = q^\f - 1 $. Let $ \sbr{\cdot} : \FF_{q^\f}^\times \to L^\times $ be the Teichm\"uller map for $ L $ and let $ \zeta_m = \sbr{a} $ where $ a $ is a generator of $ \FF_{q^\f}^\times $. Then $ \zeta_m $ is a primitive $ m $-th root of unity, by lecture $ 5 $. We set
$$ K_0 = K\br{\zeta_m} \subseteq L. $$
Then $ K_0 $ is the splitting field of the separable polynomial $ f\br{X} = X^m - 1 \in K\sbr{X} $, hence $ K_0 / K $ is Galois. Since $ \abs{\zeta_m} = 1 $, we have $ \zeta_m \in \OOO_{K_0}^\times $. It follows that $ k_0 = \OOO_{K_0} / \mmm_0 $ contains a primitive $ m $-th root of unity, so $ k_0 = \FF_{q^\f} \cong k_L $. Now $ \Gal\br{K_0 / K} $ preserves $ \OOO_{K_0} $ and $ \mmm_0 $, using $ \abs{x} = \abs{\sigma\br{x}} $ for all $ x \in K_0 $ and $ \sigma \in \Gal\br{K_0 / K} $. Thus there is a natural map $ \res : \Gal\br{K_0 / K} \to \Gal\br{k_0 / k} $. For $ \sigma \in \Gal\br{K_0 / K} $ we have $ \sigma\br{\zeta_m} = \zeta_m $ if $ \sigma\br{\zeta_m} \equiv \zeta_m \mod \mmm_0 $. This follows from the fact that $ \sigma\br{\zeta_m} = \sbr{\br{\res \sigma}\br{\zeta_m \mod \mmm_0}} $. Thus $ \res $ is injective. It follows that $ \abs{\Gal\br{K_0 / K}} \le \abs{\Gal\br{k_0 / k}} = \f = \f_{L / K} $, so $ \sbr{K_0 : K} = \f_{L / K} $ and $ \res $ is an isomorphism. Thus $ K_0 / K $ is unramified. Since $ k_0 \cong k_L $, $ \f_{L / K_0} = 1 $ and hence $ L / K_0 $ is totally ramified.
\end{proof}

We obtain the following description of unramified extensions.

\begin{theorem}
\label{thm:14.4}
Let $ K $ be a non-archimedean local field with $ k \cong \FF_q $. For any $ n \ge 1 $, there is a unique unramified extension $ L / K $ of degree $ n $. Moreover $ L / K $ is Galois and the natural map $ \Gal\br{L / K} \to \Gal\br{k_L / k} $ is an isomorphism. In particular $ \Gal\br{L / K} $ is cyclic group generated by an element $ \Frob_{L / K} $ such that
$$ \Frob_{L / K}\br{x} \equiv x^q \mod \mmm_L, \qquad x \in \OOO_L. $$
\end{theorem}

\begin{proof}
For $ n \ge 1 $, we take $ L = K\br{\zeta_m} $ where $ m = q^n - 1 $ and $ \zeta_m \in \overline{K}^\times $ is a primitive $ m $-th root of unity. Then as in the proof of Theorem \ref{thm:14.3}, $ \Gal\br{L / K} \xrightarrow{\sim} \Gal\br{k_L / k} \cong \Gal\br{\FF_{q^n} / \FF_q} $ and is cyclic and generated by a lift of $ x \mapsto x^q $. Uniqueness is clear since for $ L / K $ degree $ n $ unramified, we have $ \zeta_m \in L $ and hence $ L = K\br{\zeta_m} $ by degree reasons.
\end{proof}

\pagebreak

\begin{corollary}
Let $ K $ be a non-archimedean local field, and let $ L / K $ be finite Galois. Then the natural map $ \res : \Gal\br{L / K} \to \Gal\br{k_L / k} $ is surjective.
\end{corollary}

\begin{proof}
With the notation of Theorem \ref{thm:14.3} the map $ \res $ factors as
$$ \Gal\br{L / K} \twoheadrightarrow \Gal\br{K_0 / K} \xrightarrow{\sim} \Gal\br{k_L / k}. $$
\end{proof}

\begin{definition}
Let $ L / K $ be a finite Galois extension of local fields. The \textbf{inertia subgroup} $ \I_{L / K} \subseteq \Gal\br{L / K} $ is defined to be the kernel of the surjective map $ \Gal\br{L / K} \twoheadrightarrow \Gal\br{k_L / k} $.
\end{definition}

Since $ \e_{L / K}\f_{L / K} = \sbr{L : K} $, we have $ \abs{\I_{L / K}} = \e_{L / K} $. There is an exact sequence
$$ 0 \to \I_{L / K} \xrightarrow{\iota} \Gal\br{L / K} \xrightarrow{\rho} \Gal\br{k_L / k} \to 0. $$
By exactness, $ \I_{L / K} = \ker \rho $ and $ \Gal\br{k_L / k} = \coker \iota $. Then $ \I_{L / K} = \Gal\br{L / K_0} $, where $ L / K_0 $ is totally ramified.

\begin{definition}
Let $ K $ be a non-archimedean local field, with normalised valuation $ \v $. Let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in \OOO_K\sbr{X} $. We say $ f\br{X} $ is \textbf{Eisenstein} if $ \v\br{a_i} \ge 1 $ for all $ i $ and $ \v\br{a_0} = 1 $.
\end{definition}

\begin{fact*}
If $ f\br{X} $ is Eisenstein, then $ f\br{X} $ is irreducible.
\end{fact*}

\begin{theorem}
\label{thm:14.8}
\hfill
\begin{enumerate}
\item If $ L / K $ is a finite totally ramified extension of non-archimedean local fields, then the minimal polynomial of $ \pi_L \in \OOO_L $ is an Eisenstein polynomial and $ \OOO_L = \OOO_K\sbr{\pi_L} $, so $ L = K\br{\pi_L} $.
\item Conversely, if $ f\br{X} \in \OOO_K\sbr{X} $ is Eisenstein and $ \alpha $ is a root of $ f $, then $ L = K\br{\alpha} / K $ is totally ramified.
\end{enumerate}
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ \v_L $ be the normalised valuation for $ L $ and set $ \e = \sbr{L : K} $. Let $ f\br{X} = X^m + a_{m - 1}X^{m - 1} + \dots + a_0 \in \OOO_K\sbr{X} $ be the minimal polynomial for $ \pi_L $, which is monic since $ \OOO_L $ is integral over $ \OOO_K $. Then $ m \le \e $. Since $ \v_L\br{K^\times} = \e\ZZ $, we have $ \v_L\br{a_i\pi_L^i} \equiv i \mod \e $ for $ i < m $, so that these terms all have different residues modulo $ \e $. We have $ \pi_L^m = -\sum_{i = 0}^{m - 1} a_i\pi_L^i $ hence
$$ m = \v_L\br{\pi_L^m} = \min_{0 \le i \le m - 1} \br{i + \e\v_K\br{a_i}}, $$
so $ \v_K\br{a_i} \ge 1 $ for all $ i $, $ m = \e $, and $ \v_K\br{a_0} = 1 $. Thus $ f\br{X} $ is Eisenstein, and $ L = K\br{\pi_L} $. For $ y \in L $, we write $ y = \sum_{i = 0}^{\e - 1} \pi_L^ib_i $ for $ b_i \in K $. Then
$$ \v_L\br{y} = \min_{0 \le i \le m - 1} \br{i + \e\v_K\br{b_i}}. $$
Thus $ y \in \OOO_L $ if and only if $ \v_L\br{y} \ge 0 $, if and only if $ \v_K\br{b_i} \ge 0 $ for all $ i $, if and only if $ y \in \OOO_K\sbr{\pi_L} $.
\item Let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 $ be Eisenstein and let $ \e = \e_{L / K} $. Thus $ \v_L\br{a_i} \ge \e $ and $ \v_L\br{a_0} = \e $. If $ \v_L\br{\alpha} \le 0 $ we have $ \v_L\br{\alpha^n} < \v_L\br{\sum_{i = 0}^{n - 1} a_i\alpha^i} $ hence $ \v_L\br{\alpha} > 0 $. For $ i \ne 0 $, $ \v_L\br{a_i\alpha^i} > \e = \v_L\br{a_0} $. It follows that $ \v_L\br{-\sum_{i = 0}^{n - 1} a_i\alpha^i} = \e $ and hence $ \v_L\br{\alpha^n} = \e $, so $ n\v_L\br{\alpha} = \e $. But $ n = \sbr{L : K} \ge \e $, so $ n = \e $ and $ L $ is totally ramified.
\end{enumerate}
\end{proof}

\pagebreak

\subsection{Structure of units}

\lecture{15}{Wednesday}{11/11/20}

Let $ \sbr{K : \QQ_p} < \infty $, with normalised valuation $ \v_K $ and uniformiser $ \pi $, and let $ \e = \e_{K / \QQ_p} $, the \textbf{absolute ramification index}.

\begin{proposition}
If $ r > \e / \br{p - 1} $, then the series
$$ \exp x = \sum_{n = 0}^\infty \dfrac{x^n}{n!} $$
converges on $ \pi^r\OOO_K $ and $ \exp $ determines an isomorphism $ \br{\pi^r\OOO_K, +} \xrightarrow{\sim} \br{1 + \pi^r\OOO_K, \times} $.
\end{proposition}

\begin{proof}
By example sheet $ 1 $,
$$ \v_K\br{n!} = \e\v_p\br{n!} = \e\br{\dfrac{n - \s_p\br{n}}{p - 1}} \le \e\br{\dfrac{n - 1}{p - 1}}. $$
For $ x \in \pi^r\OOO_K $, we have for $ n \ge 1 $,
$$ \v_K\br{\dfrac{x^n}{n!}} \ge nr - \e\br{\dfrac{n - 1}{p - 1}} = r + \br{n - 1}\br{r - \dfrac{\e}{p - 1}} \to \infty, $$
as $ n \to \infty $. Thus $ \exp x $ converges. Since $ \v_K\br{x^n / n!} \ge r $ for $ n \ge 1 $, $ \exp x \in 1 + \pi^r\OOO_K $. Similarly consider
$$ \function[\log]{1 + \pi^r\OOO_K}{\pi^r\OOO_K}{1 + x}{\displaystyle\sum_{n = 1}^\infty \dfrac{\br{-1}^{n - 1}}{n}x^n}. $$
Can check convergence as before. Recall properties of power series
$$ \exp \br{X + Y} = \exp X\exp Y, \qquad \exp \log X = X, \qquad \log \exp X = X. $$
Thus $ \exp : \br{\pi^r\OOO_K, +} \to \br{1 + \pi^r\OOO_K, \times} $ is an isomorphism of groups.
\end{proof}

Now let $ K $ be a non-archimedean local field. We define a filtration on $ \OOO_K^\times $. Write $ \U_K = \OOO_K^\times $.

\begin{definition}
For $ s \in \ZZ_{\ge 1} $, the \textbf{$ s $-th unit group} $ \U_K^{\br{s}} $ is defined by
$$ \U_K^{\br{s}} = \br{1 + \pi^s\OOO_K, \times}. $$
We set $ \U_K^{\br{0}} = \U_K $. Then we have
$$ \dots \subseteq \U_K^{\br{s}} \subseteq \dots \subseteq \U_K^{\br{1}} \subseteq \U_K^{\br{0}} = \U_K. $$
\end{definition}

\begin{proposition}
\label{prop:15.3}
We have
\begin{enumerate}
\item $ \U_K^{\br{0}} / \U_K^{\br{1}} \cong \br{k^\times, \times} $ for $ k = \OOO_K / \pi\OOO_K $, and
\item $ \U_K^{\br{s}} / \U_K^{\br{s + 1}} \cong \br{k, +} $ for $ s \ge 1 $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Reduction modulo $ \pi $ gives a natural surjection $ \OOO_K^\times \to k^\times $. The kernel is $ 1 + \pi\OOO_K = \U_K^{\br{1}} $.
\item Define
$$ \function[f]{\U_K^{\br{s}}}{k}{1 + \pi^sx}{x \mod \pi}. $$
Then $ \br{1 + \pi^sx}\br{1 + \pi^sy} = \br{1 + \pi^s\br{x + y + \pi^sxy}} $ and $ x + y + \pi^sxy \equiv x + y \mod \pi $, hence $ f $ is a group homomorphism. It is easy to see $ f $ is surjective and $ \ker f = \U_K^{\br{s + 1}} $.
\end{enumerate}
\end{proof}

\pagebreak

\begin{corollary}
Let $ \sbr{K : \QQ_p} < \infty $. Then $ \OOO_K^\times $ has a subgroup of finite index isomorphic to $ \br{\OOO_K, +} $.
\end{corollary}

\begin{proof}
If $ r > \e / \br{p - 1} $, then $ \br{\OOO_K, +} \cong \U_K^{\br{r}} $, so $ \U_K^{\br{r}} \subseteq \U_K $ is finite index by Proposition \ref{prop:15.3}.
\end{proof}

\begin{example*}
If $ \ZZ_p $ for $ p > 2 $, then $ \e = 1 $ and can take $ r = 1 $. Then there is an isomorphism
$$ \function{\ZZ_p^\times}{\br{\ZZ / p\ZZ}^\times \times \br{1 + p\ZZ_p} \cong \ZZ / \br{p - 1}\ZZ \times \ZZ_p}{x}{\br{x \mod p, \dfrac{x}{\sbr{x \mod p}}}}. $$
If $ p = 2 $, take $ r = 2 $. Then
$$ \ZZ_2^\times \xrightarrow{\sim} \br{\ZZ / 4\ZZ}^\times \times \br{1 + 4\ZZ_2} \cong \ZZ / 2\ZZ \times \ZZ_2. $$
Get another proof that
$$ \ZZ_p^\times / \br{\ZZ_p^\times}^2 \cong
\begin{cases}
\ZZ / 2\ZZ & p > 2 \\
\br{\ZZ / 2\ZZ}^2 & p = 2
\end{cases}.
$$
\end{example*}

\subsection{Higher ramification groups}

Let $ L / K $ be a finite Galois extension of local fields. We define an analogous filtration of $ \Gal\br{L / K} $.

\begin{definition}
Let $ \v_L $ be the normalised valuation on $ L $. For $ s \in \RR_{\ge -1} $, we define the \textbf{$ s $-th ramification group} by
$$ \G_s\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \forall x \in \OOO_L, \ \v_L\br{\sigma\br{x} - x} \ge s + 1}. $$
\end{definition}

\begin{example*}
$ \G_{-1}\br{L / K} = \Gal\br{L / K} $. If $ \pi_L $ is a uniformiser in $ L $, then
$$ \G_0\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \forall x \in \OOO_L, \ \sigma\br{x} \equiv x \mod \pi_L} = \ker \br{\Gal\br{L / K} \twoheadrightarrow \Gal\br{k_L / k}} = \I_{L / K}. $$
\end{example*}

Note that for $ s \in \ZZ_{\ge 0} $
$$ \G_s\br{L / K} = \ker \br{\Gal\br{L / K} \to \Aut \br{\OOO_L / \pi_L^{s + 1}\OOO_L}}, $$
hence $ \G_s\br{L / K} $ is normal in $ G $. We have for $ s \in \ZZ_{\ge -1} $
$$ \dots \subseteq \G_s \subseteq \dots \subseteq \G_0 \subseteq \G_{-1} = \Gal\br{L / K}. $$

\begin{remark*}
$ \G_s $ only changes at the integers. The definition for $ s \in \RR_{\ge -1} $ will be used later.
\end{remark*}

\begin{theorem}
\label{thm:15.6}
\hfill
\begin{enumerate}
\item Let $ \pi_L \in \OOO_L $ be a uniformiser. For $ s \ge 0 $,
$$ \G_s = \cbr{\sigma \in \G_0 \st \v_L\br{\sigma\br{\pi_L} - \pi_L} \ge s + 1}. $$
\item $ \bigcap_{n = 0}^\infty \G_n = \cbr{1} $.
\item Let $ s \in \ZZ_{\ge 0} $. There is an injective group homomorphism $ \G_s / \G_{s + 1} \hookrightarrow \U_L^{\br{s}} / \U_L^{\br{s + 1}} $ induced by the map $ \sigma \mapsto \sigma\br{\pi_L} / \pi_L $. This map is independent of the choice of $ \pi_L $.
\end{enumerate}
\end{theorem}

\begin{proof}
Let $ K_0 \subseteq L $ be the maximal unramified extension of $ K $ contained in $ L $. Upon replacing $ K $ by $ K_0 $, we may assume $ L / K $ is totally ramified.
\begin{enumerate}
\item By Theorem \ref{thm:14.8}, $ \OOO_L = \OOO_K\sbr{\pi_L} $. Suppose $ \v_L\br{\sigma\br{\pi_L} - \pi_L} \ge s + 1 $. Let $ x \in \OOO_L $, then $ x = f\br{\pi_L} $ for $ f\br{X} \in \OOO_K\sbr{X} $. Then
$$ \sigma\br{x} - x = \sigma\br{f\br{\pi_L}} - f\br{\pi_L} = f\br{\sigma\br{\pi_L}} - f\br{\pi_L} = \br{\sigma\br{\pi_L} - \pi_L}g\br{\pi_L}, $$
where $ g\br{X} \in \OOO_K\sbr{X} $, using $ X^n - Y^n = \br{X - Y}\br{X^{n - 1} + \dots + Y^{n - 1}} $. Thus $ \v_L\br{\sigma\br{x} - x} = \v_L\br{\sigma\br{\pi_L} - \pi_L} + \v_L\br{g\br{\pi_L}} \ge s + 1 $.
\item Suppose $ \sigma \in \Gal\br{L / K} $ such that $ \sigma \ne \id $. Then $ \sigma\br{\pi_L} \ne \pi_L $ because $ L = K\br{\pi_L} $, and hence $ \v_L\br{\sigma\br{\pi_L} - \pi_L} < \infty $. Thus $ \sigma \notin \G_s $ for $ s \gg 0 $.

\pagebreak

\item Note that for $ \sigma \in \G_s $ and $ s \in \ZZ_{\ge 0} $, $ \sigma\br{\pi_L} \in \pi_L + \pi_L^{s + 1}\OOO_L $, so $ \sigma\br{\pi_L} / \pi_L \in 1 + \pi_L^s\OOO_L $. We claim
$$ \function[\phi]{\G_s}{\U_L^{\br{s}} / \U_L^{\br{s + 1}}}{\sigma}{\dfrac{\sigma\br{\pi_L}}{\pi_L}} $$
is a group homomorphism with kernel $ \G_{s + 1} $. For $ \sigma, \tau \in \G_s $, let $ \tau\br{\pi_L} = u\pi_L $ for $ u \in \OOO_L^\times $. Then
$$ \dfrac{\sigma\br{\tau\br{\pi_L}}}{\pi_L} = \dfrac{\sigma\br{\tau\br{\pi_L}}}{\tau\br{\pi_L}} \cdot \dfrac{\tau\br{\pi_L}}{\pi_L} = \dfrac{\sigma\br{u}}{u} \cdot \dfrac{\sigma\br{\pi_L}}{\pi_L} \cdot \dfrac{\tau\br{\pi_L}}{\pi_L}. $$
But $ \sigma\br{u} \in u + \pi_L^{s + 1}\OOO_L $ since $ \sigma \in \G_s $ thus $ \sigma\br{u} / u \in \U_L^{\br{s + 1}} $ and hence
$$ \dfrac{\sigma\br{\tau\br{\pi_L}}}{\pi_L} \equiv \dfrac{\sigma\br{\pi_L}}{\pi_L} \cdot \dfrac{\tau\br{\pi_L}}{\pi_L} \mod \U_L^{\br{s + 1}}, $$
so $ \phi $ is a group homomorphism. Moreover
$$ \ker \phi = \cbr{\sigma \in \G_s \st \sigma\br{\pi_L} \equiv \pi_L \mod \pi_L^{s + 2}} = \G_{s + 1}. $$
If $ \pi_L' = a\pi_L $ is another uniformiser for $ a \in \U_L $, then
$$ \dfrac{\sigma\br{\pi_L'}}{\pi_L'} = \dfrac{\sigma\br{a}}{a} \cdot \dfrac{\sigma\br{\pi_L}}{\pi_L} \equiv \dfrac{\sigma\br{\pi_L}}{\pi_L} \mod \U_L^{\br{s + 1}}. $$
\end{enumerate}
\end{proof}

\lecture{16}{Friday}{13/11/20}

\begin{corollary}
Let $ L / K $ be a finite Galois extension of non-archimedean local fields. Then $ \Gal\br{L / K} $ is solvable.
\end{corollary}

\begin{proof}
By Proposition \ref{prop:15.3}, Theorem \ref{thm:15.6}, and Theorem \ref{thm:14.4}, for $ s \in \ZZ_{\ge 1} $
$$ \G_s / \G_{s + 1} \hookrightarrow
\begin{cases}
\Gal\br{k_L / k} & s = -1 \\
\br{k_L^\times, \times} & s = 0 \\
\br{k_L, +} & s \ge 1
\end{cases}.
$$
Thus $ \G_s / \G_{s + 1} $ is abelian for $ s \ge -1 $. Conclude using Theorem \ref{thm:15.6}.$ 2 $.
\end{proof}

Let $ \ch k = p $. Then $ \abs{\G_0 / \G_1} $ is coprime to $ p $ and $ \abs{\G_1} = p^n $ for some $ n \ge 0 $. Thus $ \G_1 $ is the unique, since normal, Sylow $ p $-subgroup of $ \G_0 = \I_{L / K} $.

\begin{definition}
The group $ \G_1 $ is called the \textbf{wild inertia group} and $ \G_0 / \G_1 $ is the \textbf{tame quotient}. Say $ L / K $, not necessarily Galois, is \textbf{tamely ramified} if $ \ch k = p \nmid \e_{L / K} $, which is if and only if $ \G_1 = \cbr{1} $ if $ L / K $ is Galois. Otherwise it is \textbf{wildly ramified}. Thus
$$
\begin{tikzcd}
L \arrow[dash]{dr}{\text{totally wildly ramified}} \arrow[dash]{ddd} & \\
& K' \arrow[dash]{d}{\text{totally tamely ramified}} \\
& K_0 \arrow[dash]{dl}{\text{unramified}} \\
K &
\end{tikzcd}.
$$
\end{definition}

\pagebreak

\begin{example*}
Let $ K = \QQ_p $. Let $ \zeta_{p^n} $ be a primitive $ p^n $-th root of unity, and let $ L = \QQ_p\br{\zeta_{p^n}} $. Then the $ p^n $-th cyclotomic polynomial
$$ \Phi_{p^n}\br{X} = X^{p^{n - 1}\br{p - 1}} + \dots + 1 $$
is the minimal polynomial of $ \zeta_{p^n} $. By example sheet $ 3 $,
\begin{itemize}
\item $ \Phi_{p^n}\br{X} $ is irreducible,
\item $ L / \QQ_p $ is Galois and totally ramified of degree $ p^{n - 1}\br{p - 1} $, and
\item $ \pi = \zeta_{p^n} - 1 $ is a uniformiser of $ \OOO_L $, and hence $ \OOO_L = \ZZ_p\sbr{\zeta_{p^n} - 1} = \ZZ_p\sbr{\zeta_{p^n}} $.
\end{itemize}
We have an isomorphism of abelian groups
$$ \function{\br{\ZZ / p^n\ZZ}^\times}{\Gal\br{L / \QQ_p}}{m}{\sigma_m : \zeta_{p^n} \mapsto \zeta_{p^n}^m}. $$
Thus $ \sigma_m\br{\pi} - \pi = \zeta_{p^n}^m - \zeta_{p^n} = \br{\zeta_{p^n}^{m - 1} - 1}\zeta_{p^n} $. Let $ k $ be maximal such that $ p^k \mid m - 1 $. Then $ \zeta_{p^n}^{m - 1} $ is a primitive $ p^{n - k} $-th root of unity, and hence $ \zeta_{p^n}^{m - 1} - 1 $ is a uniformiser $ \pi' $ in $ L' = \QQ_p\br{\zeta_{p^n}^{m - 1}} $. Thus
$$ \v_L\br{\sigma_m\br{\pi} - \pi} = \v_L\br{\pi'} = \e_{L / L'} = \dfrac{\e_{L / \QQ_p}}{\e_{L' / \QQ_p}} = \dfrac{\sbr{L : \QQ_p}}{\sbr{L' : \QQ_p}} = \dfrac{p^{n - 1}\br{p - 1}}{p^{n - k - 1}\br{p - 1}} = p^k. $$
By Theorem \ref{thm:15.6}.$ 1 $, $ \sigma_m \in \G_i $ if and only if $ p^k \ge i + 1 $. Thus
$$ \G_i \cong
\begin{cases}
\br{\ZZ / p^n\ZZ}^\times & i \le 0 \\
\br{1 + p^k\ZZ} / p^n\ZZ & p^{k - 1} - 1 < i \le p^k - 1, \ 1 \le k \le n - 1 \\
\cbr{1} & p^{n - 1} - 1 < i
\end{cases},
$$
which is reminiscent of $ \U_{\QQ_p}^{\br{k}} $.
\end{example*}

\subsection{Upper numbering of ramification groups}

$ \G_s $ behaves well with respect to taking subgroups.

\begin{proposition}
\label{prop:16.3}
Let $ L / F / K $ be finite extensions of non-archimedean local fields, and let $ L / K $ be Galois. Then for $ s \in \RR_{\ge -1} $,
$$ \G_s\br{L / F} = \G_s\br{L / K} \cap \Gal\br{L / F}. $$
\end{proposition}

\begin{proof}
$ \G_s\br{L / F} = \cbr{\sigma \in \Gal\br{L / F} \st \forall x \in \OOO_L, \ \v_L\br{\sigma\br{x} - x} \ge s + 1} = \Gal\br{L / F} \cap \G_s\br{L / K} $.
\end{proof}

However $ \G_s $ behaves badly with respect to taking quotients. Fix this by renumbering. Let $ L / K $ be finite Galois. Define a function by
$$ \function[\phi = \phi_{L / K}]{\RR_{\ge -1}}{\RR}{s}{\displaystyle\intd{0}{s}{\dfrac{1}{\sbr{\G_0 : \G_t}}}{t}}. $$
By convention, if $ t \in \intco{-1, 0} $, then
$$ \dfrac{1}{\sbr{\G_0 : \G_t}} = \sbr{\G_t : \G_0}. $$
We have for $ m \le s < m + 1 $ for $ m \in \ZZ_{\ge -1} $,
$$ \phi\br{s} =
\begin{cases}
s & m = -1 \\
\dfrac{1}{\abs{\G_0}}\br{\abs{\G_1} + \dots + \abs{\G_m} + \br{s - m}\abs{\G_{m + 1}}} & m \ge 0
\end{cases}.
$$
Thus
\begin{itemize}
\item $ \phi $ is continuous and piecewise linear, and
\item $ \phi $ is strictly increasing.
\end{itemize}

\pagebreak

\begin{notation*}
Let $ L / F / K $ be finite extensions of non-archimedean local fields with $ L / K $ and $ F / K $ Galois, and let $ \G = \Gal\br{L / K} $ and $ \H = \Gal\br{L / F} $, so $ \G / \H = \Gal\br{F / K} $. If $ s \in \RR_{\ge -1} $, then $ \G_s $, $ \H_s $, and $ \br{\G / \H}_s $ are the $ s $-th higher ramification groups for $ \G $, $ \H $, and $ \G / \H $ respectively.
\end{notation*}

\begin{theorem}[Herbrand's theorem]
\label{thm:16.4}
Let $ L / F / K $ as above. Then for $ s \in \RR_{\ge -1} $ we have
$$ \G_s\H / \H = \br{\G / \H}_{\phi_{L / F}\br{s}}. $$
\end{theorem}

As $ \phi_{L / K} $ is continuous and strictly increasing, we may define $ \psi_{L / K} = \phi_{L / K}^{-1} $.

\begin{definition}
Let $ L / K $ be finite Galois. The \textbf{higher ramification groups in upper numbering} is defined by
$$ \G^s\br{L / K} = \G_{\psi_{L / K}\br{s}}\br{L / K}. $$
\end{definition}

Can rephrase Theorem \ref{thm:16.4} as follows.

\begin{lemma}
\label{lem:16.6}
Let $ L / F / K $ as above.
\begin{enumerate}
\item $ \phi_{L / K} = \phi_{F / K} \circ \phi_{L / F} $.
\item $ \psi_{L / K} = \psi_{L / F} \circ \psi_{F / K} $.
\end{enumerate}
\end{lemma}

\begin{proof}
Since $ \psi = \phi^{-1} $, it suffices to prove $ 1 $. Then $ \phi_{L / K} $ and $ \phi_{F / K} \circ \phi_{L / F} $ are continuous and piecewise linear and $ \phi_{L / K}\br{0} = \br{\phi_{F / K} \circ \phi_{L / F}}\br{0} = 0 $. Thus it suffices to show derivatives are equal. Let $ r = \phi_{L / F}\br{s} $. By the fundamental theorem of calculus,
$$ \br{\phi_{F / K} \circ \phi_{L / F}}'\br{s} = \phi_{L / F}'\br{s}\phi_{F / K}'\br{r} = \dfrac{\abs{\H_s}}{\abs{\H_0}} \cdot \dfrac{\abs{\br{\G / \H}_r}}{\abs{\br{\G / \H}_0}} = \dfrac{\abs{\H_s}}{\e_{L / F}} \cdot \dfrac{\abs{\br{\G / \H}_r}}{\e_{F / K}}. $$
Theorem \ref{thm:16.4} implies $ \br{\G / \H}_r = \G_s\H / \H = \G_s / \br{\G_s \cap \H} = \G_s / \H_s $, by Proposition \ref{prop:16.3}. Thus
$$ \phi_{L / K}'\br{s} = \dfrac{\abs{\G_s}}{\abs{\G_0}} = \dfrac{\abs{\H_s}\abs{\br{\G / \H}_r}}{\e_{L / K}} = \dfrac{\abs{\H_s}}{\e_{L / F}} \cdot \dfrac{\abs{\br{\G / \H}_r}}{\e_{F / K}}. $$
\end{proof}

\begin{corollary}
For $ t \in \intoc{-1, \infty} $
$$ \G^t\H / \H = \br{\G / \H}^t. $$
\end{corollary}

\begin{proof}
Let $ r = \psi_{F / K}\br{t} $. Then by Theorem \ref{thm:16.4},
$$ \br{\G / \H}^t = \br{\G / \H}_r = \G_{\psi_{L / F}\br{r}}\H / \H = \G^t\H / \H, $$
since $ \G_{\psi_{L / F}\br{r}} = \G_{\psi_{L / K}\br{t}} = \G^t $, by Lemma \ref{lem:16.6}.
\end{proof}

\end{document}