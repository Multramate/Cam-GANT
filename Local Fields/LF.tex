\def\module{Local Fields}
\def\lecturer{Dr Rong Zhou}
\def\term{Michaelmas 2020}
\def\cover{}
\def\syllabus{}
\def\thm{subsection}

\input{../style/header}

% Macros
\newcommand{\pp}{\mathfrak{P}}

\begin{document}

\input{../style/cover}

\setcounter{section}{0}

\section{Basic theory}

\lecture{1}{Friday}{09/10/20}

How can we find solutions to Diophantine equations? Let $ f\br{X_1, \dots, X_r} \in \ZZ\sbr{X_1, \dots, X_r} $ be a polynomial with integer coefficients. What are integer or rational solutions to $ f\br{X_1, \dots, X_r} = 0 $? Finding solutions to Diophantine equations in general is a very difficult problem. Consider a related but much simpler problem of solving the congruences
$$ f\br{X_1, \dots, X_r} \equiv 0 \mod p, \qquad \dots, \qquad f\br{X_1, \dots, X_r} \equiv 0 \mod p^n, \qquad \dots. $$
Now this is just a finite computation, since modulo primes there are only finitely many choices for solutions, so this is a much easier problem. Local fields give a way to package all this information together.

\subsection{Absolute values}

\begin{definition}
Let $ K $ be a field. An \textbf{absolute value} on $ K $ is a function $ \abs{\cdot} : K \to \RR_{\ge 0} $ such that
\begin{enumerate}
\item $ \abs{x} = 0 $ if and only if $ x = 0 $,
\item $ \abs{xy} = \abs{x}\abs{y} $ for all $ x, y \in K $, and
\item the triangle inequality $ \abs{x + y} \le \abs{x} + \abs{y} $ for all $ x, y \in K $.
\end{enumerate}
We say $ \br{K, \abs{\cdot}} $ is a \textbf{valued field}.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item Let $ K = \RR, \CC $ with the usual absolute value. Write $ \abs{\cdot}_\infty $ for this absolute value.
\item Let $ K $ be any field. The \textbf{trivial absolute value} on $ K $ is defined by
$$ \abs{x} =
\begin{cases}
0 & x = 0 \\
1 & x \ne 0
\end{cases}.
$$
Ignore this case in this course.
\item Let $ K = \QQ $ and $ p $ a prime. For $ 0 \ne x \in \QQ $, write $ x = p^n\br{a / b} $, where $ a, b \in \ZZ $ such that $ \br{a, p} = 1 $ and $ \br{b, p} = 1 $. The \textbf{p-adic absolute value} is defined to be
$$ \abs{x}_p =
\begin{cases}
0 & x = 0 \\
p^{-n} & x = p^n\dfrac{a}{b}
\end{cases}.
$$
Axiom $ 1 $ is clear. Write $ y = p^m\br{c / d} $. Axiom $ 2 $ is
$$ \abs{xy}_p = \abs{p^{m + n}\dfrac{ac}{bd}}_p = p^{-m - n} = \abs{x}_p\abs{y}_p. $$
Without loss of generality $ m \ge n $. Axiom $ 3 $ is
$$ \abs{x + y}_p = \abs{p^n\dfrac{ad + p^{m - n}bc}{bd}}_p = \abs{p^n}_p\abs{\dfrac{ad + p^{m - n}bc}{bd}}_p \le p^{-n} = \max\br{\abs{x}_p, \abs{y}_p}. $$
\end{itemize}
\end{example*}

An absolute value on $ K $ induces a metric $ \d\br{x, y} = \abs{x - y} $ on $ K $, hence induces a topology on $ K $.

\begin{exercise*}
$ + $ and $ \cdot $ are continuous.
\end{exercise*}

\begin{definition}
Let $ \abs{\cdot} $ and $ \abs{\cdot}' $ be absolute values on a field $ K $. We say $ \abs{\cdot} $ and $ \abs{\cdot}' $ are \textbf{equivalent} if they induce the same topology. An equivalence class of absolute values is called a \textbf{place}.
\end{definition}

\pagebreak

\begin{proposition}
Let $ \abs{\cdot} $ and $ \abs{\cdot}' $ be non-trivial absolute values on $ K $. The following are equivalent.
\begin{enumerate}
\item $ \abs{\cdot} $ and $ \abs{\cdot}' $ are equivalent.
\item $ \abs{x} < 1 $ if and only if $ \abs{x}' < 1 $ for all $ x \in K $.
\item There exists $ c \in \RR_{> 0} $ such that $ \abs{x}^c = \abs{x}' $ for all $ x \in K $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] $ \abs{x} < 1 $ if and only if $ x^n \to 0 $ with respect to $ \abs{\cdot} $, if and only if $ x^n \to 0 $ with respect to $ \abs{\cdot}' $, if and only if $ \abs{x}' < 1 $.
\item[$ 2 \implies 3 $.] Let $ a \in K^\times $ such that $ \abs{a} < 1 $, which exists since $ \abs{\cdot} $ is non-trivial. We need to show that
$$ \dfrac{\log \abs{x}}{\log \abs{a}} = \dfrac{\log \abs{x}'}{\log \abs{a}'}, \qquad x \in K^\times. $$
Assume $ \log \abs{x} / \log \abs{a} < \log \abs{x}' / \log \abs{a}' $. Choose $ m, n \in \ZZ $ such that
$$ \dfrac{\log \abs{x}}{\log \abs{a}} < \dfrac{m}{n} < \dfrac{\log \abs{x}'}{\log \abs{a}'}. $$
Then we have $ n\log \abs{x} < m\log \abs{a} $ and $ n\log \abs{x}' > m\log \abs{a}' $, so $ \abs{x^n / a^m} < 1 $ and $ \abs{x^n / a^m}' > 1 $, a contradiction. Similarly for $ \log \abs{x} / \log \abs{a} > \log \abs{x}' / \log \abs{a}' $.
\item[$ 3 \implies 1 $.] Clear.
\end{itemize}
\end{proof}

This course is mainly interested in the following types of absolute values.

\begin{definition}
An absolute value $ \abs{\cdot} $ on $ K $ is said to be \textbf{non-archimedean} if it satisfies the \textbf{ultrametric inequality}
$$ \abs{x + y} \le \max\br{\abs{x}, \abs{y}}. $$
If $ \abs{\cdot} $ is not non-archimedean, then it is \textbf{archimedean}.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item $ \abs{\cdot}_\infty $ on $ \RR $ is archimedean.
\item $ \abs{\cdot}_p $ is a non-archimedean absolute value on $ \QQ $.
\end{itemize}
\end{example*}

\begin{lemma}[All triangles are isosceles]
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field and $ x, y \in K $. If $ \abs{x} < \abs{y} $, then $ \abs{x - y} = \abs{y} $.
\end{lemma}

\begin{fact*}
\hfill
\begin{itemize}
\item $ \abs{1} = \abs{-1} = 1 $.
\item $ \abs{-y} = \abs{y} $.
\end{itemize}
\end{fact*}

\begin{proof}
$ \abs{x - y} \le \max\br{\abs{x}, \abs{y}} = \abs{y} $, and $ \abs{y} \le \max\br{\abs{x}, \abs{x - y}} $, so $ \abs{y} \le \abs{x - y} $.
\end{proof}

Convergence is easier for non-archimedean $ \abs{\cdot} $.

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be non-archimedean and $ \br{x_n}_{n = 1}^\infty $ a sequence in $ K $. If $ \abs{x_n - x_{n + 1}} \to 0 $, then $ \br{x_n}_{n = 1}^\infty $ is Cauchy. In particular, if $ K $ is in addition complete, then $ \br{x_n}_{n = 1}^\infty $ converges.
\end{proposition}

\begin{proof}
For $ \epsilon > 0 $, choose $ N $ such that $ \abs{x_n - x_{n + 1}} < \epsilon $ for all $ n > N $. Then for $ N < n < m $,
$$ \abs{x_n - x_m} = \abs{\br{x_n - x_{n + 1}} + \dots + \br{x_{m - 1} - x_m}} < \epsilon, $$
so $ \br{x_n}_{n = 1}^\infty $ is Cauchy.
\end{proof}

\pagebreak

\begin{example*}
Let $ p = 5 $. Construct a sequence $ \br{x_n}_{n = 1}^\infty $ such that
\begin{enumerate}
\item $ x_n^2 + 1 \equiv 0 \mod 5^n $, and
\item $ x_n \equiv x_{n + 1} \mod 5^n $,
\end{enumerate}
as follows. Take $ x_1 = 2 $. Suppose have constructed $ x_n $. Let $ x_n^2 + 1 = a5^n $ and set $ x_{n + 1} = x_n + b5^n $. Then
$$ x_{n + 1}^2 + 1 = x_n^2 + 2bx_n5^n + b^25^{2n} + 1 = a5^n + 2x_nb5^n + b^25^{2n} \equiv \br{a + 2x_nb}5^n \mod 5^{n + 1}. $$
We choose $ b $ such that $ a + 2x_nb \equiv 0 \mod 5 $. Then we have $ x_{n + 1}^2 + 1 \equiv 0 \mod 5^{n + 1} $ as desired. By $ 2 $, $ \br{x_n}_{n = 1}^\infty $ is Cauchy. Suppose $ x_n \to L \in \QQ $. Then $ x_n^2 \to L^2 $. But by $ 1 $, $ x_n^2 \to -1 $, so $ L^2 = -1 $, a contradiction. Thus $ \br{\QQ, \abs{\cdot}_5} $ is not complete.
\end{example*}

\begin{definition}
The \textbf{$ p $-adic numbers} $ \QQ_p $ is the completion of $ \QQ $ with respect to $ \abs{\cdot}_p $.
\end{definition}

\begin{remark*}
By analogy, $ \RR $ is the completion of $ \QQ $ with respect to $ \abs{\cdot}_\infty $.
\end{remark*}

\lecture{2}{Monday}{12/10/20}

Let $ K $ be a non-archimedean valued field. For $ x \in K $ and $ r \in \RR_{> 0} $, define
$$ \B\br{x, r} = \cbr{y \in K \st \abs{x - y} < r}, \qquad \overline{\B}\br{x, r} = \cbr{y \in K \st \abs{x - y} \le r}. $$

\begin{lemma}
Let $ \br{K, \abs{\cdot}} $ be non-archimedean.
\begin{enumerate}
\item If $ z \in \B\br{x, r} $, then $ \B\br{z, r} = \B\br{x, r} $, so open balls do not have centres.
\item If $ z \in \overline{\B}\br{x, r} $, then $ \overline{\B}\br{z, r} = \overline{\B}\br{x, r} $.
\item $ \B\br{x, r} $ is closed.
\item $ \overline{\B}\br{x, r} $ is open.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ y \in \B\br{x, r} $. Then $ \abs{x - y} < r $, so $ \abs{z - y} = \abs{\br{z - x} + \br{x - y}} \le \max\br{\abs{z - x}, \abs{x - y}} < r $. Thus $ \B\br{x, r} \subseteq \B\br{z, r} $. The reverse inclusion follows by symmetry.
\item Same as $ 1 $.
\item Let $ y \notin \B\br{x, r} $. If $ z \in \B\br{x, r} \cap \B\br{y, r} $, then $ \B\br{x, r} = \B\br{z, r} = \B\br{y, r} $, so $ y \in \B\br{x, r} $, a contradiction. Thus $ \B\br{x, r} \cap \B\br{y, r} = \emptyset $.
\item If $ z \in \overline{\B}\br{x, r} $, then $ \B\br{z, r} \subseteq \overline{\B}\br{z, r} = \overline{\B}\br{x, r} $, by $ 2 $.
\end{enumerate}
\end{proof}

\subsection{Valuation rings}

\begin{definition}
Let $ K $ be a field. A \textbf{valuation} on $ K $ is a function $ v : K^\times \to \RR $ such that
\begin{itemize}
\item $ v\br{xy} = v\br{x} + v\br{y} $, and
\item $ v\br{x + y} \ge \min\br{v\br{x}, v\br{y}} $.
\end{itemize}
\end{definition}

Fix $ 0 < \alpha < 1 $. If $ v $ is a valuation on $ K $, then
$$ \abs{x} =
\begin{cases}
\alpha^{v\br{x}} & x \ne 0 \\
0 & x = 0
\end{cases}
$$
determines a non-archimedean absolute value. Conversely, a non-archimedean absolute value determines a valuation $ v\br{x} = \log_a \abs{x} $.

\begin{remark*}
\hfill
\begin{itemize}
\item We ignore the trivial valuation $ v\br{x} = 0 $ for all $ x \in K^\times $ corresponding to the trivial absolute value.
\item Say $ v_1 $ and $ v_2 $ are \textbf{equivalent} if there exists $ c \in \RR_{> 0} $ such that $ v_1\br{x} = cv_2\br{x} $ for all $ x \in K^\times $.
\end{itemize}
\end{remark*}

\pagebreak

\begin{example*}
\hfill
\begin{itemize}
\item If $ K = \QQ $, then $ \v_p\br{x} = -\log_p \abs{x}_p $ is the \textbf{$ p $-adic valuation}.
\item If $ k $ is a field and $ K = k\br{t} = \Frac k\sbr{t} $ is the \textbf{rational function field}, then
$$ \v\br{t^n\dfrac{f\br{t}}{g\br{t}}} = n, \qquad f, g \in k\sbr{t}, \qquad f\br{0}, g\br{0} \ne 0 $$
is the \textbf{$ t $-adic valuation}.
\item If $ K = k\br{\br{t}} = \Frac k\sbr{\sbr{t}} = \cbr{\sum_{i = n}^\infty a_it^i \st a_i \in k, \ n \in \ZZ} $ is the \textbf{field of formal Laurent series} over $ k $, then
$$ \v\br{\sum_i a_it^i} = \min \cbr{i \st a_i \ne 0} $$
is the $ t $-adic valuation on $ K $.
\end{itemize}
\end{example*}

\begin{definition}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field. The \textbf{valuation ring} of $ K $ is defined to be
$$ \OOO_K = \overline{\B}\br{0, 1} = \cbr{x \in K \st \abs{x} \le 1} = \cbr{x \in K^\times \st v\br{x} \ge 0} \cup \cbr{0}. $$
\end{definition}

\begin{proposition}
\hfill
\begin{enumerate}
\item $ \OOO_K $ is an open subring of $ K $.
\item The subsets $ \cbr{x \in K \st \abs{x} \le r} $ and $ \cbr{x \in K \st \abs{x} < r} $ for $ r \le 1 $ are open ideals in $ \OOO_K $.
\item $ \OOO_K^\times = \cbr{x \in K \st \abs{x} = 1} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item By last lecture, $ \abs{1} = 1 $, so $ 1 \in \OOO_K $. Since $ \abs{0} = 0 $, $ 0 \in \OOO_K $. Since $ \abs{-1} = 1 $, $ \abs{-x} = \abs{x} $. Thus if $ x \in \OOO_K $, then $ -x \in \OOO_K $. If $ x, y \in \OOO_K $, then $ \abs{x + y} \le \max\br{\abs{x}, \abs{y}} \le 1 $, so $ x + y \in \OOO_K $. If $ x, y \in \OOO_K $, then $ \abs{xy} = \abs{x}\abs{y} \le 1 $, so $ xy \in \OOO_K $. Thus $ \OOO_K $ is a ring. Since $ \OOO_K = \overline{\B}\br{0, 1} $ it is open.
\item Similar to $ 1 $.
\item Note that $ \abs{x}\abs{x^{-1}} = \abs{xx^{-1}} = 1 $. Thus $ \abs{x} = 1 $ if and only if $ \abs{x^{-1}} = 1 $, if and only if $ x, x^{-1} \in \OOO_K $, if and only if $ x \in \OOO_K^\times $.
\end{enumerate}
\end{proof}

\begin{notation*}
\hfill
\begin{itemize}
\item $ \mmm = \cbr{x \in \OOO_K \st \abs{x} < 1} $ is a maximal ideal of $ \OOO_K $.
\item $ \kappa = \OOO_K / \mmm $ is the \textbf{residue field}.
\end{itemize}
\end{notation*}

A ring is \textbf{local} if it has a unique maximal ideal.

\begin{exercise*}
$ R $ is local if and only if $ R \setminus R^\times $ is an ideal.
\end{exercise*}

\begin{corollary}
$ \OOO_K $ is a local ring with unique maximal ideal $ \mmm $.
\end{corollary}

\begin{example*}
\hfill
\begin{itemize}
\item If $ K = k\br{\br{t}} $, then $ \OOO_K = k\sbr{\sbr{t}} $, $ \mmm = \abr{t} $, and $ \kappa = k $.
\item If $ K = \QQ $ with $ \abs{\cdot}_p $, then $ \OOO_K = \ZZ_{\br{\abr{p}}} $, $ \mmm = p\ZZ_{\br{\abr{p}}} $, and $ \kappa = \FF_p $.
\end{itemize}
\end{example*}

\begin{definition}
Let $ v : K^\times \to \RR $ be a valuation. If $ v\br{K^\times} \cong \ZZ $, we say $ v $ is a \textbf{discrete valuation}, and $ K $ is said to be a \textbf{discretely valued field}. An element $ \pi \in \OOO_K $ is a \textbf{uniformiser} if $ v\br{\pi} > 0 $ and $ v\br{\pi} $ generates $ v\br{K^\times} $.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item $ K = \QQ $ with the $ p $-adic valuation.
\item $ K = k\br{t} $ with the $ t $-adic valuation.
\end{itemize}
\end{example*}

\pagebreak

\begin{remark*}
If $ v $ is a discrete valuation, we can replace it with an equivalent one such that $ v\br{K^\times} = \ZZ \subseteq \RR $. Such $ v $ are called \textbf{normalised valuations}. Then $ v\br{\pi} = 1 $ for $ \pi $ a uniformiser.
\end{remark*}

\begin{lemma}
\label{lem:2.6}
Let $ v $ be a valuation on $ K $. The following are equivalent.
\begin{enumerate}
\item $ v $ is discrete.
\item $ \OOO_K $ is a PID.
\item $ \OOO_K $ is Noetherian.
\item $ \mmm $ is principal.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] Let $ I \subseteq \OOO_K $ be a non-zero ideal. Let $ x \in I $ such that $ v\br{x} = \min \cbr{v\br{a} \st a \in I} $ which exists since $ v $ is discrete. Then $ x\OOO_K = \cbr{a \in \OOO_K \st v\br{a} \ge v\br{x}} \subseteq I $, and hence $ x\OOO_K = I $ by definition of $ x $.
\item[$ 2 \implies 3 $.] Clear.
\item[$ 3 \implies 4 $.] Write $ \mmm = \OOO_Kx_1 + \dots + \OOO_Kx_n $. Without loss of generality $ v\br{x_1} \le \dots \le v\br{x_n} $. Then $ \mmm = \OOO_Kx_1 $.
\item[$ 4 \implies 1 $.] Let $ \mmm = \OOO_K\pi $ for some $ \pi \in \OOO_K $ and let $ c = v\br{\pi} $. Then if $ v\br{x} > 0 $, then $ x \in \mmm $ and hence $ v\br{x} \ge c $. Thus $ v\br{K^\times} \cap \br{0, c} = \emptyset $. Since $ v\br{K^\times} $ is a subgroup of $ \br{\RR, +} $, we have $ v\br{K^\times} = c\ZZ $.
\end{itemize}
\end{proof}

\begin{lemma}
Let $ v $ be a discrete valuation on $ K $ and $ \pi \in \OOO_K $ a uniformiser. For all $ x \in K^\times $, there exist $ n \in \ZZ $ and $ u \in \OOO_K^\times $ such that $ x = \pi^nu $. In particular $ K = \OOO_K\sbr{1 / x} $ for any $ x \in \mmm $ and hence $ K = \Frac \OOO_K $.
\end{lemma}

\begin{proof}
For $ x \in K^\times $, let $ n $ such that $ v\br{x} = nv\br{\pi} = v\br{\pi^n} $, then $ v\br{x\pi^{-n}} = 0 $, so $ u = x\pi^{-n} \in \OOO_K^\times $.
\end{proof}

\begin{definition}
A ring $ R $ is called a \textbf{discrete valuation ring (DVR)} if it is a PID with exactly one non-zero prime ideal, necessarily maximal.
\end{definition}

\begin{lemma}
\hfill
\begin{enumerate}
\item Let $ v $ be a discrete valuation on $ K $. Then $ \OOO_K $ is a DVR.
\item Let $ R $ be a DVR. Then there exists a valuation $ v $ on $ K = \Frac R $ such that $ R = \OOO_K $.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{enumerate}
\item $ \OOO_K $ is a PID by Lemma \ref{lem:2.6}. Let $ 0 \ne I \subseteq \OOO_K $ be an ideal, then $ I = \abr{x} $. If $ x = \pi^nu $ for $ \pi $ a uniformiser, then $ \abr{x} $ is prime if and only if $ n = 1 $ and $ I = \abr{\pi} = \mmm $.
\item Let $ R $ be a DVR with maximal ideal $ \mmm $. Then $ \mmm = \abr{\pi} $ for some $ \pi \in R $. By unique factorisation of PIDs, we may write any $ x \in R \setminus \cbr{0} $ uniquely as $ \pi^nu $ for $ n \ge 0 $ and $ u \in R^\times $. Then any $ y \in K \setminus \cbr{0} $ can be written uniquely as $ \pi^mu $ for $ u \in R^\times $ and $ m \in \ZZ $. Define $ v\br{\pi^mu} = m $. It is easy to check $ v $ is a valuation and $ \OOO_K = R $.
\end{enumerate}
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item $ \ZZ_{\br{\abr{p}}} $ is a DVR, the valuation ring of $ \abs{\cdot}_p $ on $ \QQ $.
\item The ring of formal power series $ k\sbr{\sbr{t}} = \cbr{\sum_{n \ge 0} a_nt^n \st a_n \in k} $ is a DVR, the valuation ring for the $ t $-adic absolute value on $ k\br{\br{t}} $.
\item Non-example. If $ K = k\br{t} $ is the rational function field and $ K' = K\br{t^{1 / 2}, t^{1 / 4}, \dots} $, then the $ t $-adic valuation extends to $ K' $, and $ \v\br{t^{1 / 2^n}} = 1 / 2^n $ is not discrete.
\end{itemize}
\end{example*}

\pagebreak

\subsection{The \texorpdfstring{$ p $}{p}-adic numbers}

\lecture{3}{Wednesday}{14/10/20}

Recall that $ \QQ_p $ is defined to be the completion of $ \QQ $ with respect to the metric induced by $ \abs{\cdot}_p $. By example sheet $ 1 $, $ \QQ_p $ is a field, $ \abs{\cdot}_p $ extends to $ \QQ_p $, and the associated valuation is discrete, so $ \QQ_p $ is a discretely valued field.

\begin{definition}
The ring of \textbf{$ p $-adic integers} $ \ZZ_p $ is the valuation ring
$$ \ZZ_p = \cbr{x \in \QQ_p \st \abs{x}_p \le 1}. $$
\end{definition}

\begin{fact*}
\hfill
\begin{itemize}
\item $ \ZZ_p $ is a DVR with maximal ideal $ p\ZZ_p $.
\item The non-zero ideals in $ \ZZ_p $ are $ p^n\ZZ_p $ for $ n \in \NN $.
\end{itemize}
\end{fact*}

\begin{proposition}
$ \ZZ_p $ is the closure of $ \ZZ $ inside $ \QQ_p $. In particular $ \ZZ_p $ is the completion of $ \ZZ $ with respect to $ \abs{\cdot}_p $.
\end{proposition}

\begin{proof}
Need to show $ \ZZ $ is dense in $ \ZZ_p $. Since $ \QQ $ is dense in $ \QQ_p $ and $ \ZZ_p \subseteq \QQ_p $ is open, $ \ZZ_p \cap \QQ $ is dense in $ \ZZ_p $. Then
$$ \ZZ_p \cap \QQ = \cbr{x \in \QQ \st \abs{x}_p \le 1} = \cbr{\dfrac{a}{b} \in \QQ \st p \nmid b} = \ZZ_{\br{\abr{p}}}, $$
the localisation at $ \abr{p} $. Thus it suffices to show $ \ZZ $ is dense in $ \ZZ_{\br{\abr{p}}} $. Let $ a / b \in \ZZ_{\br{\abr{p}}} $ for $ a, b \in \ZZ $ and $ p \nmid b $. For $ n \in \NN $, choose $ y_n \in \ZZ $ such that $ by_n \equiv a \mod p^n $. Then $ y_n \to a / b $ as $ n \to \infty $. In particular, $ \ZZ $ is dense in $ \ZZ_p $, which is complete.
\end{proof}

Let $ \br{A_n}_{n = 1}^\infty $ be a sequence of sets or groups or rings together with homomorphisms $ \phi_n : A_{n + 1} \to A_n $, the \textbf{transition maps}. The \textbf{inverse limit} of $ \br{A_n}_{n = 1}^\infty $ is the set or group or ring
$$ \varprojlim_n A_n = \cbr{\br{a_n}_{n = 1}^\infty \in \prod_{n = 1}^\infty A_n \st \phi_n\br{a_{n + 1}} = a_n}, $$
so
$$
\begin{array}{ccccc}
A_{n + 1} & \xrightarrow{\phi_n} & A_n & \xrightarrow{\phi_{n - 1}} & A_{n - 1} \\
a_{n + 1} & \longmapsto & a_n & \longmapsto & a_{n - 1}
\end{array}.
$$

\begin{fact*}
If $ A_n $ is a group or ring, then $ \varprojlim_n A_n $ is a group or ring.
\end{fact*}

Let $ \theta_m : \varprojlim_n A_n \to A_m $ denote the natural projection. The inverse limit satisfies the following universal property.

\begin{proposition}
Let $ \br{\br{A_n}_{n = 1}^\infty, \br{\phi_n}_{n = 1}^\infty} $ as above. Then for any set or group or ring $ B $ together with homomorphisms $ \psi_n : B \to A_n $ such that
$$
\begin{tikzcd}
B \arrow{r}{\psi_{n + 1}} \arrow{dr}[swap]{\psi_n} & A_{n + 1} \arrow{d}{\phi_n} \\
& A_n
\end{tikzcd}
$$
commutes for all $ n $, there is a unique homomorphism $ \psi : B \to \varprojlim_n A_n $ such that $ \theta_n \circ \psi = \psi_n $.
\end{proposition}

\begin{proof}
Define
$$ \function[\psi]{B}{\prod_{n = 1}^\infty A_n}{b}{\prod_{n = 1}^\infty \psi_n\br{b}}. $$
Then $ \psi_n = \phi_n \circ \psi_{n + 1} $ implies that $ \psi\br{b} \in \varprojlim_n A_n $. The map is clearly unique, determined by $ \psi_n = \phi_n \circ \psi_{n + 1} $, and is a homomorphism of rings.
\end{proof}

\pagebreak

\begin{definition}
Let $ R $ be a ring and $ I \subseteq R $ an ideal. The \textbf{$ I $-adic completion} of $ R $ is the ring
$$ \widehat{R} = \varprojlim_n R / I^n, $$
where $ \phi_n : R / I^{n + 1} \to R / I^n $ is the natural projection. Note there is a natural map $ \iota : R \to \widehat{R} $ by the universal property. We say that $ R $ is \textbf{$ I $-adically complete} if $ \iota $ is an isomorphism.
\end{definition}

\begin{fact*}
$ \ker \br{\iota : R \to \widehat{R}} = \bigcap_{n = 1}^\infty I^n $.
\end{fact*}

Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field and $ \pi \in \OOO_K $ such that $ \abs{\pi} < 1 $.

\begin{proposition}
\label{prop:3.5}
Assume $ K $ is complete.
\begin{enumerate}
\item Then $ \OOO_K \cong \varprojlim_n \OOO_K / \pi^n\OOO_K $, so $ \OOO_K $ is $ \pi $-adically complete.
\item If in addition $ K $ is discretely valued and $ \pi $ is a uniformiser, then every $ x \in \OOO_K $ can be written uniquely as $ x = \sum_{i = 0}^\infty a_i\pi^i $ for $ a_i \in A $, where $ A $ is a set of coset representatives for $ \kappa = \OOO_K / \pi\OOO_K $. Moreover, any series $ \sum_{i = 0}^\infty a_i\pi^i $ converges to an element in $ \OOO_K $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ \iota : \OOO_K \to \varprojlim_n \OOO_K / \pi^n\OOO_K $. Since $ \bigcap_{n = 1}^\infty \pi^n\OOO_K = \cbr{0} $, $ \iota $ is injective. Let $ \br{x_n}_{n = 1}^\infty \in \varprojlim_n \OOO_K / \pi^n\OOO_K $ and for each $ n $, choose $ y_n \in \OOO_K $ a lift of $ x_n \in \OOO_K / \pi^n\OOO_K $. Let $ v $ be the valuation on $ K $ normalised such that $ v\br{\pi} = 1 $, then $ v\br{y_n - y_{n + 1}} \ge n $, since $ y_n - y_{n + 1} \in \pi^n\OOO_K $, so $ \br{y_n}_{n = 1}^\infty $ is a Cauchy sequence in $ \OOO_K $. But $ \OOO_K $ is complete, since $ \OOO_K \subseteq K $ is closed, so $ y_n \to y $, and $ y $ maps to $ \br{x_n}_{n = 1}^\infty $. Thus $ \iota $ is surjective.
\item Let $ x \in \OOO_K $. Choose $ a_i $ inductively. Choose $ a_0 \in A $ such that $ a_0 \equiv x \mod \pi $. Suppose have chosen $ a_0, \dots, a_k $ such that $ \sum_{i = 0}^k a_i\pi^i \equiv x \mod \pi^{k + 1} $. Then $ \sum_{i = 0}^k a_i\pi^i - x = c\pi^{k + 1} $ for $ c \in \OOO_K $. Choose $ a_{k + 1} \equiv -c \mod \pi $. Then $ \sum_{i = 0}^{k + 1} a_i\pi^i \equiv x \mod \pi^{k + 2} $, so $ \sum_{i = 0}^\infty a_i\pi^i = x $. For uniqueness, assume $ \sum_{i = 0}^\infty a_i\pi^i = \sum_{i = 0}^\infty b_i\pi^i \in \OOO_K $. Then let $ n $ be minimal such that $ a_n \ne b_n $. Then $ \sum_{i = 0}^\infty a_i\pi^i \not\equiv \sum_{i = 0}^\infty b_i\pi^i \mod \pi^{n + 1} $, a contradiction.
\end{enumerate}
\end{proof}

A warning is if $ \br{K, \abs{\cdot}} $ is not discretely valued, $ \OOO_K $ is not necessarily $ \mmm $-adically complete.

\begin{corollary}
\label{cor:3.6}
If $ K $ is as in Proposition \ref{prop:3.5}.$ 2 $, then every $ x \in K $ can be written uniquely as $ \sum_{i = n}^\infty a_i\pi^i $ for $ a_i \in A $. Conversely any such expression defines an element of $ K $.
\end{corollary}

\begin{proof}
Use $ K = \OOO_K\sbr{1 / \pi} $.
\end{proof}

\begin{corollary}
\hfill
\begin{enumerate}
\item $ \ZZ_p \cong \varprojlim_n \ZZ / p^n\ZZ $.
\item Every element of $ \QQ_p $ can be written uniquely as $ \sum_{i = n}^\infty a_ip^i $ for $ a_i \in \cbr{0, \dots, p - 1} $.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item By Proposition \ref{prop:3.5}, it suffices to show that $ \ZZ_p / p^n\ZZ_p \cong \ZZ / p^n\ZZ $. Let $ f_n : \ZZ \to \ZZ_p / p^n\ZZ_p $ be the natural map. We have $ \ker f_n = \cbr{x \in \ZZ \st \abs{x}_p \le p^{-n}} = p^n\ZZ $, so $ \ZZ / p^n\ZZ \to \ZZ_p / p^n\ZZ_p $ is injective. Let $ \overline{c} \in \ZZ_p / p^n\ZZ_p $, and $ c \in \ZZ_p $ a lift. Since $ \ZZ $ is dense in $ \ZZ_p $, can choose $ x \in \ZZ $ such that $ x \in c + p^n\ZZ_p $, which is open in $ \ZZ_p $, so $ f_n\br{x} = \overline{c} $. Thus $ \ZZ / p^n\ZZ \to \ZZ_p / p^n\ZZ_p $ is surjective.
\item Follows from Corollary \ref{cor:3.6} noting that $ \ZZ_p / p\ZZ_p \cong \FF_p $.
\end{enumerate}
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item $ 1 / \br{1 - p} = 1 + p + \dots \in \QQ_p $.
\item Let $ K = k\br{\br{t}} $ with the $ t $-adic valuation. Then $ \OOO_K = k\sbr{\sbr{t}} = \varprojlim_n k\sbr{\sbr{t}} / \abr{t^n} $. Moreover $ \OOO_K $ is the $ t $-adic completion of $ k\sbr{t} $.
\end{itemize}
\end{example*}

\pagebreak

\section{Complete valued fields}

\subsection{Hensel's lemma}

\lecture{4}{Friday}{16/10/20}

For complete valued fields, there is a nice way to produce solutions in $ \OOO_K $ to certain equations from solutions modulo $ \mmm $.

\begin{theorem}[Hensel's lemma version $ 1 $]
\label{thm:4.1}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field. Let $ f\br{X} \in \OOO_K\sbr{X} $ and assume there exists $ a \in \OOO_K $ such that $ \abs{f\br{a}} < \abs{f'\br{a}}^2 $, where $ f'\br{a} $ is the \textbf{formal derivative} such that if $ f\br{X} = X^n $ then $ f'\br{X} = nX^{n - 1} $. Then there exists a unique $ x \in \OOO_K $ such that $ f\br{x} = 0 $ and $ \abs{x - a} < \abs{f'\br{a}} $.
\end{theorem}

\begin{proof}
Let $ \pi \in \OOO_K $ be a uniformiser and let $ r = v\br{f'\br{a}} $ for $ v $ a normalised valuation, so $ v\br{\pi} = 1 $. We construct a sequence $ \br{x_n}_{n = 1}^\infty $ in $ \OOO_K $ such that
\begin{enumerate}
\item $ f\br{x_n} \equiv 0 \mod \pi^{n + 2r} $, and
\item $ x_{n + 1} \equiv x_n \mod \pi^{n + r} $.
\end{enumerate}
Take $ x_1 = a $, then $ f\br{x_1} \equiv 0 \mod \pi^{1 + 2r} $. Suppose have constructed $ x_1, \dots, x_n $ satisfying $ 1 $ and $ 2 $. Define
$$ x_{n + 1} = x_n - \dfrac{f\br{x_n}}{f'\br{x_n}}. $$
\begin{itemize}
\item[$ 2 $.] Since $ x_n \equiv x_1 \mod \pi^{1 + r} $, $ v\br{f'\br{x_n}} = r $ and hence $ f\br{x_n} / f'\br{x_n} \equiv 0 \mod \pi^{n + r} $ by $ 1 $. It follows that $ x_{n + 1} \equiv x_n \mod \pi^{n + r} $ so $ 2 $ holds.
\item[$ 1 $.] Note that for $ X $ and $ Y $ indeterminates,
$$ f\br{X + Y} = f_0\br{X} + f_1\br{X}Y + \dots, \qquad f_i\br{X} \in \OOO_K\sbr{X}, \qquad f_0\br{X} = f\br{X}, \qquad f_1\br{X} = f'\br{X}. $$
Thus
$$ f\br{x_{n + 1}} = f\br{x_n} + f'\br{x_n}c + \dots, \qquad c = -\dfrac{f\br{x_n}}{f'\br{x_n}}. $$
Since $ c \equiv 0 \mod \pi^{n + r} $ and $ v\br{f_i\br{x_n}} \ge 0 $, we have $ f\br{x_{n + 1}} \equiv f\br{x_n} + f'\br{x_n}c \equiv 0 \mod \pi^{n + 2r + 1} $, so $ 1 $ holds.
\end{itemize}
This gives the construction of $ \br{x_n}_{n = 1}^\infty $.
\begin{itemize}
\item By property $ 2 $, $ \br{x_n}_{n = 1}^\infty $ is Cauchy, so let $ x \in \OOO_K $ such that $ x_n \to x $. Then $ f\br{x} = \lim_{n \to \infty} f\br{x_n} = 0 $ by $ 1 $. Moreover $ 2 $ implies $ a = x_1 \equiv x_n \mod \pi^{1 + r} $ for all $ n $, so $ a \equiv x \mod \pi^{1 + r} $, so $ \abs{x - a} < \abs{f'\br{a}} $. This proves existence.
\item For uniqueness, suppose $ x' $ also satisfies $ f\br{x'} = 0 $ and $ \abs{x' - a} < \abs{f'\br{a}} $. Set $ \delta = x' - x \ne 0 $. Then $ \abs{x' - a} < \abs{f'\br{a}} $, $ \abs{x - a} < \abs{f'\br{a}} $, and the ultrametric inequality implies $ \abs{\delta} = \abs{x - x'} < \abs{f'\br{a}} = \abs{f'\br{x}} $. But
$$ 0 = f\br{x'} = f\br{x + \delta} = f\br{x} + f'\br{x}\delta + \underbrace{\dots}_{\abs{\cdot} \le \abs{\delta}^2}, $$
where $ f\br{x} = 0 $. Hence $ \abs{f'\br{x}\delta} \le \abs{\delta}^2 $, so $ \abs{f'\br{x}} \le \abs{\delta} $, a contradiction.
\end{itemize}
\end{proof}

\begin{corollary}
\label{cor:4.2}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field. Let $ f\br{X} \in \OOO_K\sbr{X} $ and $ \overline{c} \in \kappa = \OOO_K / \mmm $ a simple root of $ \overline{f}\br{X} = f\br{X} \mod \mmm \in \kappa\sbr{X} $. Then there exists a unique $ x \in \OOO_K $ such that $ f\br{x} = 0 $ and $ x \equiv \overline{c} \mod \mmm $.
\end{corollary}

\begin{proof}
Apply Theorem \ref{thm:4.1} to a lift $ c \in \OOO_K $ of $ \overline{c} $. Then $ \abs{f\br{c}} < \abs{f'\br{c}}^2 = 1 $ since $ \overline{c} $ is a simple root.
\end{proof}

\begin{example*}
$ f\br{X} = X^2 - 2 $ has a simple root modulo seven. Thus $ \sqrt{2} \in \ZZ_7 \subseteq \QQ_7 $.
\end{example*}

\pagebreak

\begin{corollary}
$$ \QQ_p^\times / \br{\QQ_p^\times}^2 \cong
\begin{cases}
\br{\ZZ / 2\ZZ}^2 & p > 2 \\
\br{\ZZ / 2\ZZ}^3 & p = 2
\end{cases}.
$$
\end{corollary}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ p > 2 $.] Let $ b \in \ZZ_p^\times $. Applying Corollary \ref{cor:4.2} to $ f\br{X} = X^2 - b $, we find that $ b \in \br{\ZZ_p^\times}^2 $ if and only if $ b \in \br{\FF_p^\times}^2 $. Thus $ \ZZ_p^\times / \br{\ZZ_p^\times}^2 \cong \FF_p^\times / \br{\FF_p^\times}^2 \cong \ZZ / 2\ZZ $ since $ \FF_p^\times \cong \ZZ / \br{p - 1}\ZZ $. We have an isomorphism $ \QQ_p^\times \cong \ZZ_p^\times \times \ZZ $ given by $ \br{u, n} \mapsto up^n $. Thus $ \QQ_p^\times / \br{\QQ_p^\times}^2 \cong \br{\ZZ / 2\ZZ}^2 $.
\item[$ p = 2 $.] Let $ b \in \ZZ_2^\times $. Consider $ f\br{X} = X^2 - b $. Then $ f'\br{X} = 2X \equiv 0 \mod 2 $. Let $ b \equiv 1 \mod 8 $. Then $ \abs{f\br{1}}_2 \le 2^{-3} < \abs{f'\br{1}}_2^2 = 2^{-2} $. By Hensel's lemma, $ f\br{X} $ has a root in $ \ZZ_2 $, so $ b \in \br{\ZZ_2^\times}^2 $ if and only if $ b \equiv 1 \mod 8 $. Thus $ \ZZ_2^\times / \br{\ZZ_2^\times}^2 \cong \br{\ZZ / 8\ZZ}^\times \cong \br{\ZZ / 2\ZZ}^2 $. Again using $ \QQ_2^\times \cong \ZZ_2^\times \times \ZZ $, we find that $ \QQ_2^\times / \br{\QQ_2^\times}^2 \cong \br{\ZZ / 2\ZZ}^3 $.
\end{itemize}
\end{proof}

\begin{remark*}
The proof of Hensel's lemma uses the iteration $ x_{n + 1} = x_n - f\br{x_n} / f'\br{x_n} $, the non-archimedean analogue of the Newton-Raphson method.
\end{remark*}

For later applications, we need the following version of Hensel's lemma.

\begin{theorem}[Hensel's lemma version $ 2 $]
\label{thm:4.4}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field and $ f\br{X} \in \OOO_K\sbr{X} $. Suppose $ \overline{f}\br{X} = f\br{X} \mod \mmm \in \kappa\sbr{X} $ factorises as $ \overline{f}\br{X} = \overline{g}\br{X}\overline{h}\br{X} $ in $ \kappa\sbr{X} $, with $ \overline{g}\br{X} $ and $ \overline{h}\br{X} $ coprime. Then there is a factorisation $ f\br{X} = g\br{X}h\br{X} $ in $ \OOO_K\sbr{X} $, with $ \overline{g}\br{X} = g\br{X} \mod \mmm $, $ \overline{h}\br{X} = h\br{X} \mod \mmm $, and $ \deg \overline{g} = \deg g $.
\end{theorem}

\begin{proof}
Example sheet $ 1 $.
\end{proof}

\begin{corollary}
\label{cor:4.5}
Let $ f\br{X} = a_nX^n + \dots + a_0 \in K\sbr{X} $ with $ a_0, a_n \ne 0 $. If $ f\br{X} $ is irreducible, then $ \abs{a_i} \le \max\br{\abs{a_0}, \abs{a_n}} $ for all $ i $.
\end{corollary}

\begin{proof}
Upon scaling, we may assume $ f\br{X} \in \OOO_K\sbr{X} $ with $ \max_i \br{\abs{a_i}} = 1 $. Thus we need to show that $ \max\br{\abs{a_0}, \abs{a_n}} = 1 $. If not, let $ r $ be minimal such that $ \abs{a_r} = 1 $, then $ 0 < r < n $. Thus we have $ \overline{f}\br{X} = X^r\br{a_r + \dots + a_nX^{n - r}} \mod \mmm $. Then Theorem \ref{thm:4.4} implies $ f\br{X} = g\br{X}h\br{X} $, with $ 0 < \deg g = r < n $.
\end{proof}

\subsection{Teichm\"uller lifts}

\lecture{5}{Monday}{19/10/20}

Recall that in lecture $ 3 $ every element of $ x \in \QQ_p $ can be written as $ x = \sum_{i = n}^\infty a_ip^i $ for $ a_i \in A = \cbr{0, \dots, p - 1} $, but $ \FF_p \to A \subseteq \ZZ_p $ does not respect any algebraic structure. It turns out there is a natural choice of coset representatives in many cases which does respect some algebraic structure.

\begin{definition}
A ring $ R $ of characteristic $ p $ is a \textbf{perfect ring} if the Frobenius $ x \mapsto x^p $ is an automorphism of $ R $. A field of characteristic $ p $ is a \textbf{perfect field} if it is perfect as a ring.
\end{definition}

\begin{remark*}
Since $ \ch R = p $, $ \br{x + y}^p = x^p + y^p $, so Frobenius is a ring homomorphism.
\end{remark*}

\begin{example*}
\hfill
\begin{itemize}
\item $ \FF_{p^n} $ and $ \overline{\FF_p} $ are perfect fields.
\item $ \FF_p\sbr{t} $ is not perfect, since $ t \notin \im \Fr $.
\item $ \FF_p\br{t^{1 / p^\infty}} = \FF_p\br{t, t^{1 / p}, \dots} $ is a perfect field, the \textbf{perfection} of $ \FF_p\br{t} $. The $ t $-adic absolute value extends to $ \FF_p\br{t^{1 / p^\infty}} $, and the completion of $ \FF_p\br{t^{1 / p^\infty}} $ is a \textbf{perfectoid field}.
\end{itemize}
\end{example*}

\begin{fact*}
A field $ K $ is perfect if and only if any finite extension of $ K $ is separable.
\end{fact*}

\pagebreak

\begin{theorem}
\label{thm:5.2}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field such that $ \kappa = \OOO_K / \mmm $ is a perfect field of characteristic $ p $. Then there exists a unique map $ \sbr{\cdot} : \kappa \to \OOO_K $ such that
\begin{enumerate}
\item $ a \equiv \sbr{a} \mod \mmm $ for all $ a \in \kappa $, and
\item $ \sbr{ab} \equiv \sbr{a}\sbr{b} \mod \mmm $ for all $ a, b \in \kappa $.
\end{enumerate}
Moreover if $ \ch \OOO_K = p $, then $ \sbr{\cdot} $ is a ring homomorphism.
\end{theorem}

\begin{definition}
The element $ \sbr{a} \in \OOO_K $ constructed in Theorem \ref{thm:5.2} is called the \textbf{Teichm\"uller lift} of $ a $.
\end{definition}

The following is the idea of the proof. Let $ \alpha \in \OOO_K $ be any lift of $ a \in \kappa $. Then $ \alpha $ is well-defined up to $ \pi\OOO_K $. Let $ \beta \in \OOO_K $ be a lift of $ a^{1 / p} $. We claim that $ \beta $ is a better lift. Why? Let $ \beta' \in \OOO_K $ be another lift of $ a^{1 / p} $, then $ \beta = \beta' + \pi u $ for $ u \in \OOO_K $, so
$$ \beta^p = \br{\beta' + \pi u}^p = \beta'^p + \underbrace{\sum_{i = 1}^p \binom{p}{i}\beta'^{p - i}\br{\pi u}^i}_{\in \pi^2\OOO_K}, $$
using $ p \in \abr{\pi} $, so $ \beta^p $ is well-defined up to $ \pi^2\OOO_K $. Repeat this process to get better and better lifts.

\begin{lemma}
\label{lem:5.4}
Let $ \br{K, \abs{\cdot}} $ be as in Theorem \ref{thm:5.2}, and fix $ \pi \in \OOO_K $ a uniformiser. Let $ x, y \in \OOO_K $ such that $ x \equiv y \mod \pi^k $ for $ k \ge 1 $. Then $ x^p \equiv y^p \mod \pi^{k + 1} $.
\end{lemma}

\begin{proof}
Let $ x = y + u\pi^k $ for $ u \in \OOO_K $. Then
$$ x^p = \sum_{i = 0}^p \binom{p}{i}\br{u\pi^k}^iy^{p - i} = y^p + pu\pi^ky^{p - 1} + \sum_{i = 2}^p \binom{p}{i}y^{p - i}\br{u\pi^k}^i. $$
Since $ \OOO_K / \pi\OOO_K $ has characteristic $ p $, we have $ p \in \abr{\pi} $. Thus $ pu\pi^ky^{p - 1} \in \pi^{k + 1}\OOO_K $. For $ i \ge 2 $, $ \br{u\pi^k}^i \in \pi^{k + 1}\OOO_K $, so $ x^p \equiv y^p \mod \pi^{k + 1} $.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:5.2}]
Let $ a \in \kappa $. For each $ i \ge 0 $ we choose a lift $ y_i \in \OOO_K $ of $ a^{1 / p^i} $, and we define
$$ x_i = y_i^{p^i}. $$
Then $ x_i \equiv y_i^{p^i} \equiv \br{a^{1 / p^i}}^{p^i} \equiv a \mod \pi $. We claim that $ \br{x_i}_{i = 1}^\infty $ is a Cauchy sequence, and its limit $ x_i \to x $ is independent of the choice of $ y_i $.
\begin{itemize}
\item By construction $ y_i \equiv y_{i + 1}^p \mod \pi $. By Lemma \ref{lem:5.4} and induction on $ k $, we have $ y_i^{p^k} \equiv y_{i + 1}^{p^{k + 1}} \mod \pi^{k + 1} $, and hence $ x_i \equiv x_{i + 1} \mod \pi^{i + 1} $, by taking $ k = i $, so $ \abs{x_i - x_{i + 1}} \to 0 $. Then $ \br{x_i}_{i = 1}^\infty $ is Cauchy, so $ x_i \to x \in \OOO_K $.
\item Suppose $ \br{x_i'}_{i = 1}^\infty $ arises from another choice of $ y_i' $ lifting $ a^{1 / p^i} $. Then $ x_i' $ is Cauchy, and $ x_i' \to x' \in \OOO_K $. Let
$$ x_i'' =
\begin{cases}
x_i & i \ \text{even} \\
x_i' & i \ \text{odd}
\end{cases}.
$$
Then $ x_i'' $ arises from lifting
$$ y_i'' =
\begin{cases}
y_i & i \ \text{even} \\
y_i' & i \ \text{odd}
\end{cases}.
$$
Then $ \br{x_i''}_{i = 1}^\infty $ is Cauchy and $ x_i'' \to x $ and $ x_i'' \to x' $, so $ x = x' $, hence $ x $ is independent of $ y_i $.
\end{itemize}
We define $ \sbr{a} = x $.
\begin{enumerate}
\item $ x \equiv a \mod \pi $, so $ 1 $ is satisfied.
\item We let $ b \in \kappa $ and we choose $ u_i \in \OOO_K $ a lift of $ b^{1 / p^i} $, and let $ z_i = u_i^{p^i} $. Then $ \lim_{i \to \infty} z_i = \sbr{b} $. Now $ u_iy_i $ is a lift of $ \br{ab}^{1 / p^i} $, hence
$$ \sbr{ab} = \lim_{i \to \infty} x_iz_i = \lim_{i \to \infty} x_i\lim_{i \to \infty} z_i = \sbr{a}\sbr{b}, $$
so $ 2 $ is satisfied.
\end{enumerate}

\pagebreak

If $ \ch \OOO_K = p $, then $ y_i + u_i $ is a lift of $ a^{1 / p^i} + b^{1 / p^i} = \br{a + b}^{1 / p^i} $. Then
$$ \sbr{a + b} = \lim_{i \to \infty} \br{y_i + u_i}^{p^i} = \lim_{i \to \infty} \br{y_i^{p^i} + u_i^{p^i}} = \lim_{i \to \infty} \br{x_i + z_i} = \sbr{a} + \sbr{b}. $$
It is easy to check that $ \sbr{0} = 0 $ and $ \sbr{1} = 1 $, so $ \sbr{\cdot} $ is a ring homomorphism. For uniqueness, let $ \phi : \kappa \to \OOO_K $ be another such map. Then for $ a \in \kappa $, $ \phi\br{a^{1 / p^i}} $ is a lift of $ a^{1 / p^i} $, it follows that
$$ \sbr{a} = \lim_{i \to \infty} \phi\br{a^{1 / p^i}}^{p^i} = \lim_{i \to \infty} \phi\br{a} = \phi\br{a}. $$
\end{proof}

\begin{example}
Let $ K = \QQ_p $, and let $ \sbr{\cdot} : \FF_p \to \ZZ_p $. If $ a \in \FF_p^\times $, then $ \sbr{a}^{p - 1} = \sbr{a^{p - 1}} = \sbr{1} = 1 $, so $ \sbr{a} $ is a $ \br{p - 1} $-th root of unity.
\end{example}

More generally is the following.

\begin{lemma}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field. If $ \kappa = \OOO_K / \mmm \subseteq \overline{\FF_p} $, then $ \sbr{a} \in \OOO_K^\times $ is a root of unity.
\end{lemma}

\begin{proof}
If $ a \in \kappa $, then $ a \in \FF_{p^n} $ for some $ n $, so $ \sbr{a}^{p^n - 1} = \sbr{a^{p^n - 1}} = \sbr{1} = 1 $.
\end{proof}

\begin{theorem}
\label{thm:5.7}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field with $ \ch \kappa = p > 0 $. Assume $ \kappa $ is perfect, then $ K \cong \kappa\br{\br{t}} $.
\end{theorem}

\begin{proof}
Since $ K = \Frac \OOO_K $, it suffices to show $ \OOO_K \cong \kappa\sbr{\sbr{t}} $. Fix $ \pi \in \OOO_K $ a uniformiser, let $ \sbr{\cdot} : \kappa \to \OOO_K $ be the Teichm\"uller map, and define
$$ \function[\phi]{\kappa\sbr{\sbr{t}}}{\OOO_K}{\sum_{i = 0}^\infty a_it^i}{\sum_{i = 0}^\infty \sbr{a_i}\pi^i}. $$
Then $ \phi $ is a ring homomorphism since $ \sbr{\cdot} $ is a ring homomorphism and it is a bijection by Proposition \ref{prop:3.5}.$ 2 $.
\end{proof}

\subsection{Extensions of complete valued fields}

\lecture{6}{Wednesday}{21/10/20}

\begin{theorem}
\label{thm:6.1}
Let $ \br{K, \abs{\cdot}} $ be a complete non-archimedean discretely valued field and $ L / K $ a finite extension of degree $ n $.
\begin{enumerate}
\item $ \abs{\cdot} $ extends uniquely to an absolute value $ \abs{\cdot}_L $ on $ L $ defined by
$$ \abs{y}_L = \abs{\N_{L / K}\br{y}}^{\tfrac{1}{n}}, \qquad y \in L. $$
\item $ L $ is complete with respect to $ \abs{\cdot}_L $.
\end{enumerate}
\end{theorem}

Recall that if $ L / K $ is finite,
$$ \function[\N_{L / K}]{L}{K}{y}{\det_K \br{\cdot y}}, $$
where $ \cdot y : L \to L $ is the $ K $-linear map induced by multiplication by $ y $.

\begin{fact*}
\hfill
\begin{itemize}
\item $ \N_{L / K}\br{xy} = \N_{L / K}\br{x}\N_{L / K}\br{y} $.
\item Let $ X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in K\sbr{X} $ be the minimal polynomial of $ y \in L $. Then $ \N_{L / K}\br{y} = \pm a_0^m $ for $ m \ge 1 $.
\end{itemize}
\end{fact*}

\pagebreak

\begin{definition}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field and $ V $ a vector space over $ K $. A \textbf{norm} on $ V $ is a function $ \norm{\cdot} : V \to \RR_{\ge 0} $ satisfying
\begin{itemize}
\item $ \norm{x} = 0 $ if and only if $ x = 0 $,
\item $ \norm{\lambda x} = \abs{\lambda}\norm{x} $ for all $ \lambda \in K $ and $ x \in V $, and
\item $ \norm{x + y} \le \max\br{\norm{x}, \norm{y}} $ for all $ x, y \in V $.
\end{itemize}
\end{definition}

\begin{example*}
If $ V $ is finite dimensional and $ e_1, \dots, e_n $ is a basis of $ V $, the \textbf{sup norm} on $ V $ is defined by
$$ \norm{x}_{\sup} = \max_i \abs{x_i}, \qquad x = \sum_{i = 1}^n x_ie_i. $$
\end{example*}

\begin{exercise*}
$ \norm{\cdot}_{\sup} $ is a norm.
\end{exercise*}

\begin{definition}
Two norms $ \norm{\cdot}_1 $ and $ \norm{\cdot}_2 $ on $ V $ are \textbf{equivalent} if there exists $ C, D > 0 $ such that
$$ C\norm{x}_1 \le \norm{x}_2 \le D\norm{x}_1, \qquad x \in V. $$
\end{definition}

\begin{fact*}
A norm defines a topology on $ V $, and equivalent norms induce the same topology.
\end{fact*}

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be complete non-archimedean and $ V $ a finite dimensional vector space over $ K $. Then $ V $ is complete with respect to $ \norm{\cdot}_{\sup} $.
\end{proposition}

\begin{proof}
Let $ \br{v_i}_{i = 1}^\infty $ be a Cauchy sequence in $ V $ and $ e_1, \dots, e_n $ a basis for $ V $. Write $ v_i = \sum_{j = 1}^n x_j^ie_j $. Then $ \br{x_j^i}_{i = 0}^\infty $ is a Cauchy sequence in $ K $. Let $ x_j^i \to x_j \in K $, then $ v_i \to v = \sum_{j = 1}^n x_je_j $.
\end{proof}

\begin{theorem}
\label{thm:6.5}
Let $ \br{K, \abs{\cdot}} $ be complete non-archimedean and $ V $ a finite dimensional vector space over $ K $. Then any two norms on $ V $ are equivalent. In particular $ V $ is complete with respect to any norm.
\end{theorem}

\begin{proof}
Since equivalence defines an equivalence relation on the set of norms, it suffices to show any norm $ \norm{\cdot} $ is equivalent to $ \norm{\cdot}_{\sup} $. Let $ e_1, \dots, e_n $ be a basis for $ V $, and set $ D = \max_i \norm{e_i} $. Then for $ x = \sum_{i = 1}^n x_ie_i $, we have
$$ \norm{x} \le \max_i \norm{x_ie_i} = \max_i \abs{x_i}\norm{e_i} \le D\max_i \abs{x_i} = D\norm{x}_{\sup}. $$
To find $ C $ such that $ C\norm{\cdot}_{\sup} \le \norm{\cdot} $, we induct on $ n = \dim V $.
\begin{itemize}[leftmargin=0.5in]
\item[$ n = 1 $.] $ \norm{x} = \norm{x_1e_1} = \abs{x_1}\norm{e_1} $ so take $ C = \norm{e_1} $, since $ \abs{x_1} = \norm{x}_{\sup} $.
\item[$ n > 1 $.] Set $ V_i = \abr{e_1, \dots, e_{i - 1}, e_{i + 1}, \dots, e_n} $. By induction, $ V_i $ is complete with respect to $ \norm{\cdot} $, hence closed. Then $ e_i + V_i $ is closed for all $ i $, and hence $ S = \bigcup_{i = 1}^n \br{e_i + V_i} $ is a closed subset not containing zero. Thus there exists $ C > 0 $ such that $ \B\br{0, C} \cap S = \emptyset $ where $ \B\br{0, C} = \cbr{x \in V \st \norm{x} < C} $. Let $ x = \sum_{i = 1}^n x_ie_i $ and suppose $ \abs{x_j} = \max_i \abs{x_i} $. Then $ \norm{x}_{\sup} = \abs{x_j} $, and $ \br{1 / x_j}x \in S $. Thus $ \norm{\br{1 / x_j}x} \ge C $, so $ \norm{x} \ge C\abs{x_j} = C\norm{x}_{\sup} $.
\end{itemize}
The completeness of $ V $ follows since $ V $ is complete with respect to $ \norm{\cdot}_{\sup} $.
\end{proof}

\begin{definition}
Let $ R \subseteq S $ be rings.
\begin{itemize}
\item We say $ s \in S $ is \textbf{integral} over $ R $ if there exists a monic polynomial $ f\br{X} \in R\sbr{X} $ such that $ f\br{s} = 0 $.
\item The \textbf{integral closure} $ R^{\Int S} $ of $ R $ inside $ S $ is defined to be
$$ R^{\Int S} = \cbr{s \in S \st s \ \text{is integral over} \ R}. $$
\item We say $ R $ is \textbf{integrally closed} in $ S $ if $ R^{\Int S} = R $.
\end{itemize}
\end{definition}

\begin{proposition}
$ R^{\Int S} $ is a subring of $ S $. Moreover $ R^{\Int S} $ is integrally closed in $ S $.
\end{proposition}

\begin{proof}
Example sheet $ 2 $.
\end{proof}

\begin{lemma}
\label{lem:6.8}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean valued field. Then $ \OOO_K $ is integrally closed in $ K $.
\end{lemma}

\begin{proof}
Let $ x \in K $ be integral over $ \OOO_K $, and without loss of generality $ x \ne 0 $. Let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in \OOO_K\sbr{X} $ such that $ f\br{x} = 0 $. Then $ x = -a_{n - 1} - \dots - a_0 / x^{n - 1} $. If $ \abs{x} > 1 $, we have $ \abs{-a_{n - 1} - \dots - a_0 / x^{n - 1}} \le 1 $, a contradiction. Thus $ \abs{x} \le 1 $, so $ x \in \OOO_K $.
\end{proof}

\pagebreak

\begin{proof}[Proof of Theorem \ref{thm:6.1}]
\hfill
\begin{enumerate}
\item We show $ \abs{\cdot}_L = \abs{\N_{L / K}\br{\cdot}}^{1 / n} $ satisfies the three axioms in the definition of absolute values.
\begin{enumerate}[label=\arabic*.]
\item $ \abs{y}_L = 0 $ if and only if $ \abs{\N_{L / K}\br{y}}^{1 / n} = 0 $, if and only if $ \N_{L / K}\br{y} = 0 $, if and only if $ y = 0 $, by property of $ \N_{L / K} $.
\item $ \abs{y_1y_2}_L^n = \abs{\N_{L / K}\br{y_1y_2}} = \abs{\N_{L / K}\br{y_1}\N_{L / K}\br{y_2}} = \abs{\N_{L / K}\br{y_1}}\abs{\N_{L / K}\br{y_2}} = \abs{y_1}_L^n\abs{y_2}_L^n $.
\item Set $ \OOO_L = \cbr{y \in L \st \abs{y}_L \le 1} $. Claim that $ \OOO_L $ is the integral closure of $ \OOO_K $ inside $ L $.
\begin{itemize}
\item Let $ 0 \ne y \in \OOO_L $ and let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in K\sbr{X} $ be the minimal polynomial of $ y $. By property of $ \N_{L / K} $, there exists $ m \ge 1 $ such that $ \N_{L / K}\br{y} = \pm a_0^m $. By Corollary \ref{cor:4.5}, we have $ \abs{a_i} \le \max\br{\abs{\N_{L / K}\br{y}}^{1 / m}, 1} = 1 $, since $ \abs{\N_{L / K}\br{y}} \le 1 $. Thus $ a_i \in \OOO_K $ for all $ i $, so $ f \in \OOO_K\sbr{X} $, so $ y $ is integral over $ \OOO_K $.
\item Conversely let $ y \in L $ be integral over $ \OOO_K $. Again by property of $ \N_{L / K} $, we have
$$ \N_{L / K}\br{y} = \br{\prod_{\sigma : L \to \overline{K}} \sigma\br{y}}^d, \qquad d \ge 1, $$
where $ \overline{K} $ is an algebraic closure of $ K $ and $ \sigma $ runs over $ K $-algebra homomorphisms. For all such $ \sigma : L \to \overline{K} $, $ \sigma\br{y} $ is integral over $ \OOO_K $. Thus $ \N_{L / K}\br{y} \in K $ is integral over $ \OOO_K $. By Lemma \ref{lem:6.8}, $ \N_{L / K}\br{y} \in \OOO_K $, so $ \abs{\N_{L / K}\br{y}} \le 1 $, so $ y \in \OOO_L $.
\end{itemize}
Thus $ \OOO_K^{\Int L} = \OOO_L $ and proves the claim. Now we prove $ 3 $. Let $ x, y \in L $. Without loss of generality assume $ \abs{x}_L \le \abs{y}_L $, then $ \abs{x / y}_L \le 1 $, so $ x / y \in \OOO_L $. Since $ 1 \in \OOO_L = \OOO_K^{\Int L} $, we have $ 1 + x / y \in \OOO_L $ and hence $ \abs{1 + x / y}_L \le 1 $, so $ \abs{x + y}_L \le \abs{y}_L = \max\br{\abs{y}_L, \abs{x}_L} $. Thus $ 3 $ is satisfied. To check $ \abs{\cdot}_L $ extends $ \abs{\cdot} $ use $ \N_{L / K}\br{x} = x^n $ for $ x \in K $. If $ \abs{\cdot}_L' $ is another absolute value on $ L $ extending $ \abs{\cdot} $, then note that $ \abs{\cdot}_L $ and $ \abs{\cdot}_L' $ are norms on $ L $. By Theorem \ref{thm:6.5}, $ \abs{\cdot}_L' $ and $ \abs{\cdot}_L $ induce the same topology on $ L $, so $ \abs{\cdot}_L' = \abs{\cdot}_L^c $ for some $ c > 0 $. Since $ \abs{\cdot}_L' $ extends $ \abs{\cdot} $, we have $ c = 1 $.
\end{enumerate}
\item Since $ \abs{\cdot}_L $ defines a norm on $ K $, Theorem \ref{thm:6.5} implies $ L $ is complete with respect to $ \abs{\cdot}_L $.
\end{enumerate}
\end{proof}

\lecture{7}{Friday}{23/10/20}

\begin{corollary}
Let $ \br{K, \abs{\cdot}} $ be a complete non-archimedean discretely valued field and $ L / K $ a finite extension. Then
\begin{enumerate}
\item $ L $ is discretely valued with respect to $ \abs{\cdot}_L $, and
\item $ \OOO_L $ is the integral closure of $ \OOO_K $ in $ L $.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ v $ be a valuation on $ K $, and let $ v_L $ be a valuation on $ L $ such that $ v_L $ extends $ v $. If $ y \in L^\times $, then $ \abs{y}_L = \abs{\N_{L / K}\br{y}}^{1 / n} $ for $ n = \sbr{L : K} $, so $ v_L\br{y} = \br{1 / n}v\br{\N_{L / K}\br{y}} $. Thus $ v_L\br{L^\times} \subseteq \br{1 / n}v\br{K^\times} $, so $ v_L $ is discrete.
\item Proved in in the last lecture.
\end{enumerate}
\end{proof}

\begin{corollary}
Let $ \br{K, \abs{\cdot}} $ be a complete non-archimedean discretely valued field and $ \overline{K} / K $ an algebraic closure. Then $ \abs{\cdot} $ extends to a unique absolute value $ \abs{\cdot}_{\overline{K}} $ on $ \overline{K} $.
\end{corollary}

\begin{proof}
If $ x \in \overline{K} $, then $ x \in L $ for some $ L / K $ finite. Define $ \abs{x}_{\overline{K}} = \abs{x}_L $. Well-defined, that is independent of $ L $, by the uniqueness in Theorem \ref{thm:6.1}. The axioms for $ \abs{\cdot}_{\overline{K}} $ to be an absolute value can be checked over finite extensions. Uniqueness is clear.
\end{proof}

\begin{remark*}
$ \abs{\cdot}_{\overline{K}} $ on $ \overline{K} $ is never discrete. For example, if $ K = \QQ_p $, then $ \sqrt[n]{p} \in \overline{\QQ_p} $ for all $ n \in \NN_{> 0} $, so $ \v_p\br{\sqrt[n]{p}} = \br{1 / n}\v_p\br{p} = 1 / n $. Then $ \overline{\QQ_p} $ is not complete with respect to $ \abs{\cdot}_{\overline{\QQ_p}} $. By example sheet $ 2 $, if $ \CC_p $ is the completion of $ \overline{\QQ_p} $ with respect to $ \abs{\cdot}_{\overline{\QQ_p}} $, then $ \CC_p $ is algebraically closed.
\end{remark*}

\pagebreak

\section{Local fields}

\begin{definition}
Let $ \br{K, \abs{\cdot}} $ be a valued field. Then $ K $ is a \textbf{local field} if it is complete and locally compact.
\end{definition}

\begin{example*}
$ \RR $ and $ \CC $ are local fields.
\end{example*}

\subsection{Non-archimedean local fields}

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be a non-archimedean complete valued field. The following are equivalent.
\begin{enumerate}
\item $ K $ is locally compact.
\item $ \OOO_K $ is compact.
\item $ v $ is discrete and $ \kappa = \OOO_K / \mmm $ is finite.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $.] Let $ U \ni 0 $ be a compact neighbourhood of zero. Then there exists $ x \in \OOO_K $ such that $ x\OOO_K \subseteq U $. Since $ x\OOO_K $ is closed, $ x\OOO_K $ is compact, so $ \OOO_K $ is compact, since $ x^{-1} : x\OOO_K \to \OOO_K $ is homeomorphism.
\item[$ 2 \implies 1 $.] If $ \OOO_K $ is compact, then $ a + \OOO_K $ compact for all $ a \in K $, so $ K $ is locally compact.
\item[$ 2 \implies 3 $.] Let $ x \in \mmm $, and $ A_x \subseteq \OOO_K $ be a set of coset representatives for $ \OOO_K / x\OOO_K $. Then
$$ \OOO_K = \bigcup_{y \in A_x} \br{y + x\OOO_K} $$
is a disjoint open cover, so $ A_x $ is finite by compactness of $ \OOO_K $, so $ \OOO_K / x\OOO_K $ is finite, so $ \OOO_K / \mmm $ is finite. Suppose $ v $ is not discrete. Let $ x = x_1, x_2, \dots $ such that $ v\br{x_1} > v\br{x_2} > \dots > 0 $. Then $ x_1\OOO_K \subsetneq x_2\OOO_K \subsetneq \dots \subsetneq \OOO_K $. But $ \OOO_K / x\OOO_K $ is finite so can only have finitely many subgroups, a contradiction.
\item[$ 3 \implies 2 $.] Since $ \OOO_K $ is a metric space, it suffices to show $ \OOO_K $ is sequentially compact. Let $ \br{x_n}_{n = 1}^\infty $ be a sequence in $ \OOO_K $ and fix $ \pi \in \OOO_K $ a uniformiser in $ \OOO_K $. Since $ \pi^i\OOO_K / \pi^{i + 1}\OOO_K \cong \kappa $, $ \OOO_K / \pi^i\OOO_K $ is finite for all $ i $, since $ \OOO_K \supseteq \dots \supseteq \pi^i\OOO_K $. Since $ \OOO_K / \pi\OOO_K $ is finite, there exists $ a_1 \in \OOO_K / \pi\OOO_K $ and a subsequence $ \br{x_{1, n}}_{n = 1}^\infty $ such that $ x_{1, n} \equiv a_1 \mod \pi $. We define $ y_1 = x_{1, 1} $. Since $ \OOO_K / \pi^2\OOO_K $ is finite, there exists $ a_2 \in \OOO_K / \pi^2\OOO_K $ and a subsequence $ \br{x_{2, n}}_{n = 1}^\infty $ of $ \br{x_{1, n}}_{n = 1}^\infty $ such that $ x_{2, n} \equiv a_2 \mod \pi^2 $. Define $ y_2 = x_{2, 2} $. Continuing in this fashion, we obtain sequences $ \br{x_{i, n}}_{n = 1}^\infty $ for $ i = 1, 2, \dots $ such that
\begin{itemize}
\item $ \br{x_{i + 1, n}}_{n = 1}^\infty $ is a subsequence of $ \br{x_{i, n}}_{n = 1}^\infty $, and
\item for any $ i $, there exists $ a_i \in \OOO_K / \pi^i\OOO_K $ such that $ x_{i, n} \equiv a_i \mod \pi^i $ for all $ n $.
\end{itemize}
Then necessarily $ a_i \equiv a_{i + 1} \mod \pi^i $ for all $ i $. Now choose $ y_i = x_{ii} $. This defines a subsequence $ \br{y_n}_{n = 1}^\infty $. Moreover $ y_i \equiv a_i \equiv a_{i + 1} \equiv y_{i + 1} \mod \pi^i $. Thus $ y_i $ is Cauchy, hence converges by completeness.
\end{itemize}
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item $ \QQ_p $ is a local field.
\item $ \FF_p\br{\br{t}} $ is a local field.
\end{itemize}
\end{example*}

Let $ \br{A_n}_{n = 1}^\infty $ be a sequence of sets or groups or rings and $ \phi_n : A_{n + 1} \to A_n $ homomorphisms.

\begin{definition}
Assume $ A_n $ is finite. The \textbf{profinite topology} on $ A = \varprojlim_n A_n $ is the weakest topology on $ A $ such that $ A \to A_n $ is continuous for all $ n $, where $ A_n $ are equipped with the discrete topology.
\end{definition}

\begin{fact*}
$ A = \varprojlim_n A_n $ with profinite topology is compact, totally disconnected, and Hausdorff.
\end{fact*}

\pagebreak

\begin{proposition}
Let $ K $ be a local field. Under the isomorphism $ \OOO_K \cong \varprojlim_n \OOO_K / \pi^n\OOO_K $ for $ \pi \in \OOO_K $ a uniformiser, the topology on $ \OOO_K $ coincides with the profinite topology.
\end{proposition}

\begin{proof}
One checks that the sets
$$ B = \cbr{a + \pi^n\OOO_K \st n \in \NN_{\ge 1}, \ a \in A_{\pi^n}}, $$
where $ A_{\pi^n} $ is a set of coset representatives for $ \OOO_K / \pi^n\OOO_K $, is a basis of open sets in both topologies. For $ \abs{\cdot} $, this is clear. For the profinite topology, $ \OOO_K \to \OOO_K / \pi^n\OOO_K $ is continuous if and only if $ a + \pi^n\OOO_K $ is open for all $ a \in A_{\pi^n} $. Thus $ B $ is a basis for the profinite topology.
\end{proof}

\begin{remark*}
This gives another proof that $ \OOO_K $ is compact.
\end{remark*}

\lecture{8}{Monday}{26/10/20}

\begin{lemma}
Let $ K $ be a non-archimedean local field and $ L / K $ a finite extension. Then $ L $ is a local field.
\end{lemma}

\begin{proof}
By Theorem \ref{thm:6.1}, $ L $ is complete and discretely valued. It suffices to show $ \kappa_L = \OOO_L / \mmm_L $ is finite. Let $ \alpha_1, \dots, \alpha_n $ be a basis for $ L $ as a $ K $-vector space. The sup norm $ \norm{\cdot}_{\sup} $ is equivalent to $ \abs{\cdot}_L $ implies there exists $ r > 0 $ such that $ \OOO_L \subseteq \cbr{x \in L \st \norm{x}_{\sup} \le r} $. Take $ a \in K $ such that $ \abs{a} \ge r $, then $ \OOO_L \subseteq \bigoplus_{i = 1}^n a\alpha_i\OOO_K $, so $ \OOO_L $ is finitely generated as a module over $ \OOO_K $. Thus $ \kappa_L $ is finitely generated over $ \kappa $.
\end{proof}

\begin{theorem}
\label{thm:8.2}
Let $ K $ be a local field. Then either
\begin{itemize}
\item $ K \cong \RR, \CC $,
\item $ K $ is a finite extension of $ \QQ_p $, or
\item $ K \cong \FF_{p^n}\br{\br{t}} $ for $ p $ prime and $ n \ge 1 $.
\end{itemize}
\end{theorem}

\begin{definition}
A discretely valued field $ \br{K, \abs{\cdot}} $ has \textbf{equal characteristic} if $ \ch K = \ch \kappa $. Otherwise it has \textbf{mixed characteristic}.
\end{definition}

\begin{example*}
$ \ch \QQ_p = 0 $ and $ \ch \FF_p = p $, so $ \QQ_p $ has mixed characteristic.
\end{example*}

Note that if $ K $ is a non-archimedean local field, $ \ch \kappa = p > 0 $ and hence $ K $ has equal characteristic if $ \ch K = p $, or mixed characteristic if $ \ch K = 0 $.

\begin{theorem}
\label{thm:8.4}
Let $ K $ be a non-archimedean local field of equal characteristic $ p > 0 $. Then $ K \cong \FF_{p^n}\br{\br{t}} $ for some $ n \ge 1 $.
\end{theorem}

\begin{proof}
$ K $ is complete discretely valued and $ \ch K > 0 $. Moreover $ \kappa \cong \FF_{p^n} $ is finite, hence perfect. By Theorem \ref{thm:5.7}, $ K \cong \FF_{p^n}\br{\br{t}} $.
\end{proof}

\subsection{Witt vectors*}

For motivation, consider $ \ZZ_p $. Let $ x = \sum_{i = 0}^\infty \sbr{x_i}p^i \in \ZZ_p $ and $ y = \sum_{i = 0}^\infty \sbr{y_i}p^i \in \ZZ_p $ for $ x_i, y_i \in \FF_p $. Suppose $ x + y = s = \sum_{i = 0}^\infty \sbr{s_i}p^i $. Can we write $ s_i $ in terms of $ x_j $ and $ y_j $? Reducing modulo $ p $ we obtain
$$ x_0 + y_0 = s_0 \in \FF_p, $$
so $ s_0 $ is determined by $ x_0 $ and $ y_0 $. What about $ s_1 $? Reducing modulo $ p^2 $, $ \sbr{x_0} + \sbr{y_0} + p\sbr{x_1} + p\sbr{y_1} \equiv \sbr{s_0} + p\sbr{s_1} \mod p^2 $, so
$$ p\sbr{s_1} \equiv \sbr{x_0} + \sbr{y_0} - \sbr{s_0} + p\sbr{x_1} + p\sbr{y_1} \mod p^2, $$
and $ \sbr{x_0} + \sbr{y_0} - \sbr{s_0} \in p\ZZ_p $. So we need $ \sbr{x_0} + \sbr{y_0} - \sbr{s_0} $ modulo $ p^2 $. Note $ \sbr{x_0^{1 / p}} + \sbr{y_0^{1 / p}} \equiv \sbr{s_0^{1 / p}} \mod p $, so by Lemma \ref{lem:5.4}
$$ \sbr{s_0} \equiv \br{\sbr{x_0^{\tfrac{1}{p}}} + \sbr{y_0^{\tfrac{1}{p}}}}^p \equiv \sbr{x_0} + \sbr{y_0} + \sum_{d = 1}^{p - 1} \binom{p}{d}\sbr{x_0^{\tfrac{d}{p}}}\sbr{y_0^{\tfrac{p - d}{p}}} \mod p^2. $$
Thus
$$ s_1 = x_1 + y_1 - \sum_{d = 1}^{p - 1} \dfrac{1}{p}\binom{p}{d}\sbr{x_0^{\tfrac{d}{p}}}\sbr{y_0^{\tfrac{p - d}{p}}}. $$
Can find similar expressions for $ s_2, s_3, \dots $. Witt noticed the general pattern.

\pagebreak

\begin{definition}
The \textbf{$ n $-th Witt polynomial} $ \w_n $ is defined by
$$ \w_n\br{X_0, \dots, X_n} = \sum_{i = 0}^n p^iX_i^{p^{n - i}} \in \ZZ\sbr{X_0, \dots, X_n}. $$
\end{definition}

Define $ \S_n \in \QQ\sbr{X_0, Y_0, \dots, X_n, Y_n} $ inductively by the equation
$$ \w_n\br{\S_0, \dots, \S_n} = \w_n\br{X_0, \dots, X_n} + \w_n\br{Y_0, \dots, Y_n}, $$
where the only term containing $ \S_n $ is $ p^n\S_n $.

\begin{fact*}[Witt]
$ \S_n \in \ZZ\sbr{X_0, Y_0, \dots, X_n, Y_n} $.
\end{fact*}

\begin{example*}
$ \S_0 = X_0 + Y_0 $ and
$$ \S_1 = X_1 + Y_1 + \sum_{d = 1}^{p - 1} \dfrac{1}{p}\binom{p}{d}X_0^dY_0^{p - d}. $$
\end{example*}

\begin{theorem}
Suppose that
$$ \sum_{i = 0}^\infty \sbr{x_i}p^i + \sum_{i = 0}^\infty \sbr{y_i}p^i = \sum_{i = 0}^\infty \sbr{s_i}p^i \in \ZZ_p. $$
Then we have
$$ s_n = \S_n\br{x_0^{\tfrac{1}{p^n}}, y_0^{\tfrac{1}{p^n}}, \dots, x_n, y_n}. $$
\end{theorem}

\begin{proof}
Example sheet $ 2 $. A hint is Lemma \ref{lem:5.4}.
\end{proof}

Similarly, defines $ \Z_n \in \QQ\sbr{X_0, Y_0, \dots, X_n, Y_n} $ by
$$ \w_n\br{\Z_0, \dots, \Z_n} = \w_n\br{X_0, \dots, X_n}\w_n\br{Y_0, \dots, Y_n}, $$

\begin{fact*}[Witt]
$ \Z_n \in \ZZ\sbr{X_0, Y_0, \dots, X_n, Y_n} $.
\end{fact*}

We have
$$ \sum_{i = 0}^\infty \sbr{x_i}p^i\sum_{i = 0}^\infty \sbr{y_i}p^i = \sum_{i = 0}^\infty \sbr{z_i}p^i, $$
where
$$ z_n = \Z_n\br{x_0^{\tfrac{1}{p^n}}, y_0^{\tfrac{1}{p^n}}, \dots, x_n, y_n}. $$
The conclusion is that the ring structure on $ \ZZ_p $ can be reconstructed from the arithmetic of $ \FF_p $.

\begin{definition}
A ring $ A $ is a \textbf{strict $ p $-ring} if it is $ p $-adically complete, $ p $ is not a zero divisor in $ A $, and $ A / pA $ is a perfect ring of characteristic $ p $.
\end{definition}

\begin{theorem}[Existence of Witt vectors]
Let $ R $ be a perfect ring of characteristic $ p $.
\begin{enumerate}
\item There exists a strict $ p $-ring $ \W\br{R} $, called the \textbf{Witt vectors} of $ R $, such that $ \W\br{R} / p\W\br{R} \cong R $ which is unique up to isomorphism.
\item If $ R' $ is another perfect ring and $ f : R \to R' $ is a ring homomorphism. Then there exists a unique ring homomorphism $ F : \W\br{R} \to \W\br{R'} $ such that the diagram
$$
\begin{tikzcd}
\W\br{R} \arrow{r}{F} \arrow{d} & \W\br{R'} \arrow{d} \\
R \arrow{r}[swap]{f} & R'
\end{tikzcd}
$$
commutes, so $ \W\br{R} $ is the mixed characteristic analogue of $ R\sbr{\sbr{t}} $.
\end{enumerate}
\end{theorem}

\pagebreak

\begin{proof}
See Rabinoff's The theory of Witt vectors.
\begin{enumerate}
\item Define
$$ \W\br{R} = \cbr{\br{a_n}_{n = 0}^\infty \st a_n \in R}. $$
Define addition and multiplication by $ \br{a_n}_{n = 0}^\infty + \br{b_n}_{n = 0}^\infty = \br{s_n}_{n = 0}^\infty $ and $ \br{a_n}_{n = 0}^\infty\br{b_n}_{n = 0}^\infty = \br{z_n}_{n = 0}^\infty $ where \footnote{Exercise: check this defines a ring structure}
$$ s_n = \S_n\br{a_0, b_0, \dots, a_n, b_n}, \qquad z_n = \Z_n\br{a_0, b_0, \dots, a_n, b_n}. $$
For $ a = \br{a_0, a_1, \dots} \in \W\br{R} $, we compute
$$ pa = \br{0, a_0^p, a_1^p, \dots}, $$
so $ p $ is not a zero divisor. Moreover
$$ \W\br{R} / p^i\W\br{R} = \cbr{\br{a_n}_{n = 0}^{i - 1} \st a_n \in R}. $$
Compute explicitly
$$ \W\br{R} \cong \varprojlim_i \W\br{R} / p^i\W\br{R}. $$
\item For $ f : R \to R' $, define
$$ \function[F]{\W\br{R}}{\W\br{R'}}{\br{a_0, a_1, \dots}}{\br{f\br{a_0}, f\br{a_1}, \dots}}. $$
\end{enumerate}
\end{proof}

\begin{remark*}
If $ R = \FF_p $, then $ \W\br{\FF_p} \cong \ZZ_p $. The isomorphism is given by
$$ \br{a_0, a_1, \dots} \mapsto \sum_{i = 0}^\infty \sbr{a_i^{\tfrac{1}{p^i}}}p^i. $$
\end{remark*}

\begin{proposition}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field such that $ p \in \OOO_K $ is a uniformiser and $ \kappa = \OOO_K / \mmm $ is perfect. Then $ \OOO_K \cong \W\br{\kappa} $.
\end{proposition}

\begin{proof}
By uniqueness of $ \W\br{\kappa} $, it suffices to check that $ \OOO_K $ is a strict $ p $-ring. This is clear from properties of $ \OOO_K $.
\end{proof}

\lecture{9}{Wednesday}{28/10/20}

\begin{remark*}
Let $ \kappa $ be a perfect field. If $ K = \Frac \W\br{\kappa} $, then $ K $ is a complete discretely valued field with $ \OOO_K \cong \W\br{\kappa} $ and $ p = \ch \kappa \in \OOO_K $ is a uniformiser.
\end{remark*}

\begin{proposition}
\label{prop:9.1}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field with $ \kappa = \OOO_K / \mmm $ perfect of characteristic $ p $, then $ \OOO_K $ is finite over $ \W\br{\kappa} $.
\end{proposition}

\begin{proof}
Consider the subset $ R \subseteq \OOO_K $ defined by
$$ R = \cbr{\sum_{i = 0}^\infty \sbr{a_i}p^i \st a_i \in \kappa}. $$
Calculating as in the example of $ \ZZ_p $ shows that $ R \cong \W\br{\kappa} $. Let $ \pi $ be a uniformiser in $ \OOO_K $ and let $ e \in \NN $ such that $ ev\br{\pi} = v\br{p} $. Let
$$ M = \bigoplus_{i = 0}^{e - 1} \pi^iR \subseteq \OOO_K, $$
an $ R $-submodule. Since $ \sum_{n = 0}^\infty \sbr{x_n}\pi^n \equiv \sum_{n = 0}^{e - 1} \sbr{x_n}\pi^n \mod p $, $ M $ generates $ \OOO_K / p\OOO_K $ as an $ R $-module, so $ \OOO_K = M + p\OOO_K $. Iterating,
$$ \OOO_K = M + \dots + p^{m - 1}M + p^m\OOO_K = M + p^m\OOO_K, $$
so $ M \to \OOO_K / p^m\OOO_K $ is surjective for all $ m $. Then since $ M \cong \varprojlim_n M / p^nM $, we have $ M \to \OOO_K \cong \varprojlim_n \OOO_K / p^n\OOO_K $ is surjective. Thus $ M = \OOO_K $.
\end{proof}

\pagebreak

\begin{theorem}
\label{thm:9.2}
Let $ K $ be a non-archimedean local field of mixed characteristic. Then $ K $ is a finite extension of $ \QQ_p $.
\end{theorem}

\begin{proof}
Let $ \kappa = \FF_{p^n} $ for some prime $ p $. Then by Proposition \ref{prop:9.1}, $ K $ is a finite extension of $ \Frac \W\br{\FF_{p^n}} $. It suffices to show that $ \W\br{\FF_{p^n}} $ is finite over $ \ZZ_p $. Let $ e_1, \dots, e_n \in \FF_{p^n} $ be a basis of $ \FF_{p^n} $ as an $ \FF_p $-vector space, and we write
$$ M = \bigoplus_{i = 1}^n \W\br{\FF_p}\sbr{e_i} \subseteq \W\br{\FF_{p^n}}, $$
a $ \W\br{\FF_p} $-submodule. For $ x = \sum_{i = 0}^\infty \sbr{x_i}p^i \in \W\br{\FF_{p^n}} $, let $ x_0 = \sum_{i = 1}^n \lambda_ie_i $ for $ \lambda_i \in \FF_p $. Then $ x - \sum_{i = 1}^n \sbr{\lambda_i}\sbr{e_i} \in p\W\br{\FF_{p^n}} $, since $ \sbr{\lambda_i} \in \W\br{\FF_p} $ by commutativity of
$$
\begin{tikzcd}
\FF_p \arrow{r}{\sbr{\cdot}} \arrow{d} & \W\br{\FF_p} \arrow{d} \\
\FF_{p^n} \arrow{r}[swap]{\sbr{\cdot}} & \W\br{\FF_{p^n}}
\end{tikzcd},
$$
so $ \W\br{\FF_{p^n}} = M + p\W\br{\FF_{p^n}} $. Arguing as in Proposition \ref{prop:9.1} shows $ M = \W\br{\FF_{p^n}} $.
\end{proof}

\subsection{Classification of local fields}

We consider the archimedean case.

\begin{lemma}
\label{lem:9.3}
An absolute value $ \abs{\cdot} $ on a field is non-archimedean if and only if $ \abs{n} $ is bounded for all $ n \in \ZZ $.
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \implies $] Since $ \abs{-1} = 1 $, $ \abs{-n} = \abs{n} $, thus it suffices to show that $ \abs{n} $ is bounded for $ n \ge 1 $. Then $ \abs{n} = \abs{1 + \dots + 1} \le 1 $.
\item[$ \impliedby $] Suppose $ \abs{n} \le B $ for all $ n \in \ZZ $. Let $ x, y \in K $ with $ \abs{x} \le \abs{y} $. Then we have
$$ \abs{x + y}^m = \abs{\sum_{i = 0}^m \binom{m}{i}x^iy^{m - i}} \le \sum_{i = 0}^m \abs{\binom{m}{i}x^iy^{m - i}} \le \abs{y}^m\br{m + 1}B. $$
Taking $ m $-th roots gives
$$ \abs{x + y} \le \abs{y}\abs{\br{m + 1}B}^{\tfrac{1}{m}}, $$
and $ \abs{\br{m + 1}B}^{1 / m} \to 1 $ as $ m \to \infty $. Thus $ \abs{x + y} \le \abs{y} = \max\br{\abs{x}, \abs{y}} $.
\end{itemize}
\end{proof}

\begin{corollary}
\label{cor:9.4}
If $ \br{K, \abs{\cdot}} $ is a valued field with $ \ch K > 0 $, then $ K $ is non-archimedean.
\end{corollary}

\begin{theorem}[Ostrowski's theorem]
Any non-trivial absolute value on $ \QQ $ is equivalent to either the usual absolute value $ \abs{\cdot}_\infty $ or the $ p $-adic absolute value $ \abs{\cdot}_p $ for some prime $ p $.
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \abs{\cdot} $ is archimedean. We fix $ b > 1 $ an integer such that $ \abs{b} > 1 $, which exists by Lemma \ref{lem:9.3}. Let $ a > 1 $ be an integer and write $ b^n $ in base $ a $, so $ b^n = c_ma^m + \dots + c_0 $ for $ 0 \le c_i < a $. Let $ B = \max_{0 \le c < a} \abs{c} $, then we have $ \abs{b^n} \le \br{m + 1}B\max\br{\abs{a}^m, 1} $, so
$$ \abs{b} \le \br{\br{n\log_a b + 1}B}^{\tfrac{1}{n}}\max\br{\abs{a}^{\log_a b}, 1}, $$
and $ \br{\br{n\log_a b + 1}B}^{1 / n} \to 1 $ as $ n \to \infty $, so $ \abs{b} \le \max\br{\abs{a}^{\log_a b}, 1} $. Then $ \abs{a} > 1 $ and
\begin{equation}
\label{eq:1}
\abs{b} \le \abs{a}^{\log_a b}.
\end{equation}

\pagebreak

Switching the roles of $ a $ and $ b $, we obtain
\begin{equation}
\label{eq:2}
\abs{a} \le \abs{b}^{\log_b a}.
\end{equation}
By $ \br{\ref{eq:1}} $ and $ \br{\ref{eq:2}} $,
$$ \dfrac{\log \abs{a}}{\log a} = \dfrac{\log \abs{b}}{\log b} = \lambda \in \RR_{> 0}, $$
using $ \log_a b = \log b / \log a $, so $ \abs{a} = a^\lambda $ for all $ a \in \ZZ $ such that $ a > 1 $, so $ \abs{x} = \abs{x}_\infty^\lambda $ for all $ x \in \QQ $. Hence $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_\infty $.
\item $ \abs{\cdot} $ is non-archimedean. As in Lemma \ref{lem:9.3}, we have $ \abs{n} \le 1 $ for all $ n \in \ZZ $. Since $ \abs{\cdot} $ is non-trivial, there exists $ n \in \ZZ_{> 1} $ such that $ \abs{n} < 1 $. Write $ n = p_1^{e_1} \dots p_r^{e_r} $, a decomposition into prime factors. Then $ \abs{p} < 1 $ for some $ p \in \cbr{p_1, \dots, p_r} $. Suppose $ \abs{q} < 1 $ for some prime $ q $ such that $ q \ne p $. Write $ 1 = rp + sq $ for $ r, s \in \ZZ $. Then $ 1 = \abs{rp + sq} \le \max\br{\abs{rp}, \abs{sq}} < 1 $, a contradiction. Thus $ \abs{p} = \alpha < 1 $ and $ \abs{q} = 1 $ for all primes $ q \ne p $, so $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_p $.
\end{enumerate}
\end{proof}

\begin{theorem}
\label{thm:9.6}
Let $ \br{K, \abs{\cdot}} $ be an archimedean local field. Then $ K = \RR, \CC $ and $ \abs{\cdot} $ is equivalent to the usual absolute value $ \abs{\cdot}_\infty $.
\end{theorem}

\begin{proof}
If $ \ch K > 0 $, then $ K $ is non-archimedean by Corollary \ref{cor:9.4}. Therefore $ \ch K = 0 $, and hence $ \QQ \subseteq K $. Since $ \abs{\cdot} $ is archimedean, $ \eval{\abs{\cdot}}_\QQ $ is equivalent to $ \abs{\cdot}_\infty $ by Ostrowski. Therefore, since $ K $ is complete, we have $ \RR \subseteq K $.
\begin{itemize}
\item We first consider the case $ \CC \subseteq K $. Then by uniqueness of extensions of absolute values, $ \eval{\abs{\cdot}}_\CC $ is equivalent to $ \abs{\cdot}_\infty $. Suppose $ \alpha \in K \setminus \CC $. Then $ f\br{X} = \abs{X - \alpha} $ is a continuous function on $ \CC $, hence attains a lower bound at $ b \in \CC $ say, since $ \CC \subseteq K $ is closed. Set $ \beta = \alpha - b $ and we let $ c \in \CC $ such that $ 0 < \abs{c} < \abs{\beta} $. We have $ \abs{\beta - a} \ge \abs{\beta} $ for all $ a \in \CC $. Hence
$$ \dfrac{\abs{\beta - c}}{\abs{\beta}} \le \dfrac{\abs{\beta - c}}{\abs{\beta}}\prod_{\zeta^n = 1, \ \zeta \ne 1} \dfrac{\abs{\beta - \zeta c}}{\abs{\beta}} = \dfrac{\abs{\beta^n - c^n}}{\abs{\beta}^n} = \abs{1 - \br{\dfrac{c}{\beta}}^n} \to 1, $$
as $ n \to \infty $, since $ \abs{c / \beta} < 1 $ implies that $ \br{c / \beta}^n \to 0 $. Then $ \abs{\beta - c} \le \abs{\beta} $, so $ \abs{\beta - c} = \abs{\beta} $. Replacing $ \beta $ by $ \beta - c $ and iterating, we obtain $ \abs{\beta - mc} = \abs{\beta} $ for all $ m \in \NN $, so
$$ \abs{m}\abs{c} = \abs{mc} \le \abs{\beta - mc} + \abs{\beta} = 2\abs{\beta}. $$
This contradicts Lemma \ref{lem:9.3}, hence $ K = \CC $.
\item Now suppose $ K $ does not contain $ \CC $. Define $ L = K\br{i} $ where $ i^2 = -1 $. Can extend $ \abs{\cdot} $ to an absolute value $ \abs{\cdot}_L $ on $ L $ given by
$$ \abs{a + ib}_L = \sqrt{\abs{a}^2 + \abs{b}^2}, \qquad a, b \in K. $$
Applying the above argument gives $ K\br{i} = L = \CC $, hence $ K = \RR $.
\end{itemize}
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:8.2}]
\hfill
\begin{itemize}
\item $ \abs{\cdot} $ archimedean is Theorem \ref{thm:9.6}.
\item $ \abs{\cdot} $ non-archimedean and $ \ch K = 0 $ is Theorem \ref{thm:9.2}.
\item $ \abs{\cdot} $ non-archimedean and $ \ch K > 0 $ is Theorem \ref{thm:8.4}.
\end{itemize}
\end{proof}

\pagebreak

\subsection{Global fields}

\lecture{10}{Friday}{30/10/20}

\begin{definition}
A \textbf{global field} is a field which is either
\begin{itemize}
\item an algebraic number field, or
\item a \textbf{global function field}, the rational function field of an algebraic curve over a finite field, or equivalently a finite extension of $ \FF_p\br{t} $.
\end{itemize}
\end{definition}

We mainly focus on the number field. We show that local fields are completions of global fields.

\begin{lemma}
\label{lem:10.2}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field and $ L / K $ a Galois extension and $ \abs{\cdot}_L $ the unique extension of $ \abs{\cdot} $ to $ L $. Then for $ x \in L $ and $ \sigma \in \Gal\br{L / K} $, we have $ \abs{\sigma\br{x}}_L = \abs{x}_L $.
\end{lemma}

\begin{proof}
Since $ x \mapsto \abs{\sigma\br{x}}_L $ is also another absolute value on $ L $ extending $ \abs{\cdot} $ on $ K $, Lemma \ref{lem:10.2} follows from uniqueness of $ \abs{\cdot}_L $.
\end{proof}

\begin{lemma}[Krasner's lemma]
Let $ \br{K, \abs{\cdot}} $ a complete discretely valued field. Let $ f\br{X} \in K\sbr{X} $ be a separable irreducible polynomial with roots $ \alpha_1, \dots, \alpha_n \in K^{\sep} $, a separable closure of $ K $. Suppose $ \beta \in \overline{K} $ with $ \abs{\beta - \alpha_1} < \abs{\beta - \alpha_i} $ for $ i = 2, \dots, n $. Then $ \alpha_1 \in K\br{\beta} $.
\end{lemma}

\begin{proof}
Let $ L = K\br{\beta} $ and $ L' = L\br{\alpha_1, \dots, \alpha_n} $. Then $ L' / L $ is a Galois extension. Let $ \sigma \in \Gal\br{L' / L} $. We have $ \abs{\beta - \sigma\br{\alpha_1}} = \abs{\sigma\br{\beta - \alpha_1}} = \abs{\beta - \alpha_1} $, by Lemma \ref{lem:10.2}. Thus $ \sigma\br{\alpha_1} = \alpha_1 $, so $ \alpha_1 \in K\br{\beta} $.
\end{proof}

\begin{proposition}[Nearby polynomials define the same extension]
\label{prop:10.4}
Let $ \br{K, \abs{\cdot}} $ be a complete discretely valued field and $ f\br{X} = \sum_{i = 0}^n a_iX^i \in \OOO_K\sbr{X} $ be a separable irreducible monic polynomial. Let $ \alpha \in \overline{K} $ be a root of $ f $. Then there exists $ \epsilon > 0 $ such that for any $ g\br{X} = \sum_{i = 0}^n b_iX^i \in \OOO_K\sbr{X} $ monic with $ \abs{a_i - b_i} < \epsilon $, there exists a root $ \beta $ of $ g\br{X} $ such that $ K\br{\alpha} = K\br{\beta} $.
\end{proposition}

\begin{proof}
Let $ \alpha = \alpha_1, \dots, \alpha_n \in \overline{K} $ be the roots of $ f $ which are necessarily distinct. Then $ f'\br{\alpha} \ne 0 $. We choose $ \epsilon $ sufficiently small such that $ \abs{g\br{\alpha_1}} < \abs{f'\br{\alpha_1}}^2 $ and $ \abs{f'\br{\alpha_1} - g'\br{\alpha_1}} < \abs{f'\br{\alpha_1}} $. Then we have $ \abs{g\br{\alpha_1}} < \abs{f'\br{\alpha_1}}^2 = \abs{g'\br{\alpha_1}}^2 $. By Hensel's lemma applied to the field $ K\br{\alpha_1} $, there exists $ \beta \in K\br{\alpha_1} $ such that $ g\br{\beta} = 0 $ and $ \abs{\beta - \alpha_1} < \abs{g'\br{\alpha_1}} $. Then
$$ \abs{g'\br{\alpha_1}} = \abs{f'\br{\alpha_1}} = \prod_{i = 2}^n \abs{\alpha_1 - \alpha_i} \le \abs{\alpha_1 - \alpha_i}, \qquad i = 2, \dots, n, $$
using $ \abs{\alpha_1 - \alpha_i} \le 1 $. Since $ \abs{\beta - \alpha_1} < \abs{g'\br{\alpha_1}} = \abs{f'\br{\alpha_1}} \le \abs{\alpha_1 - \alpha_i} = \abs{\beta - \alpha_i} $ for $ i = 2, \dots, n $, by Krasner's lemma, $ \alpha \in K\br{\beta} $, so $ K\br{\alpha} = K\br{\beta} $.
\end{proof}

\begin{theorem}
Let $ K $ be a local field, then $ K $ is the completion of a global field.
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \abs{\cdot} $ is archimedean. Then $ \RR $ is the completion of $ \QQ $ with respect to $ \abs{\cdot}_\infty $ and $ \CC $ is the completion of $ \QQ\br{i} $ with respect to $ \abs{\cdot}_\infty $.
\item $ \abs{\cdot} $ is non-archimedean of equal characteristic. Then $ K \cong \FF_q\br{\br{t}} $, so $ K $ is the completion of $ \FF_q\br{t} $ with respect to the $ t $-adic absolute value.
\item $ \abs{\cdot} $ is non-archimedean of mixed characteristic. Then $ K \cong \QQ_p\br{\alpha} $ for $ \alpha $ a root of a monic irreducible polynomial $ f\br{X} \in \ZZ_p\sbr{X} $. Since $ \ZZ $ is dense in $ \ZZ_p $, we choose $ g\br{X} \in \ZZ\sbr{X} $ as in Proposition \ref{prop:10.4}. Then $ K = \QQ_p\br{\beta} $ for $ \beta $ a root of $ g\br{X} $. Since $ \beta \in \overline{\QQ} $, we have $ \QQ\br{\beta} \subseteq \QQ_p\br{\beta} = K $, so $ K $ is the completion of $ \QQ\br{\beta} $.
\end{enumerate}
\end{proof}

\pagebreak

\section{Dedekind domains}

The global analogue of a DVR is a Dedekind domain.

\subsection{Dedekind domains and DVRs}

\begin{definition}
A \textbf{Dedekind domain} is a ring $ R $ such that
\begin{itemize}
\item $ R $ is a Noetherian integral domain,
\item $ R $ is integrally closed in $ \Frac R $, and
\item every non-zero prime ideal is maximal.
\end{itemize}
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item The ring of integers in a number field is a Dedekind domain.
\item Any PID, hence DVR, is a Dedekind domain.
\end{itemize}
\end{example*}

\begin{theorem}
\label{thm:10.7}
A ring $ R $ is a DVR if and only if $ R $ is a Dedekind domain with exactly one non-zero prime ideal.
\end{theorem}

\begin{lemma}
\label{lem:10.8}
Let $ R $ be a Noetherian ring and $ I \subseteq R $ a non-zero ideal. Then there exist non-zero prime ideals $ \ppp_1, \dots, \ppp_r \subseteq R $ such that $ \ppp_1 \dots \ppp_r \subseteq I $.
\end{lemma}

\begin{proof}
Suppose not. Since $ R $ is Noetherian, we may choose $ I $ maximal without this property. Then $ I $ is not prime, so there exists $ x, y \in R \setminus I $ such that $ xy \in I $. Let $ I_1 = I + \abr{x} $ and $ I_2 = I + \abr{y} $. Then by maximality of $ I $, there exists $ \ppp_1, \dots, \ppp_r $ and $ \qqq_1, \dots, \qqq_s $ prime ideals such that $ \ppp_1 \dots \ppp_r \subseteq I_1 $ and $ \qqq_1 \dots \qqq_s \subseteq I_2 $, so $ \ppp_1 \dots \ppp_r\qqq_1 \dots \qqq_s \subseteq I_1I_2 \subseteq I $, a contradiction.
\end{proof}

\begin{lemma}
\label{lem:10.9}
Let $ R $ be an integral domain which is integrally closed in $ K = \Frac R $. Let $ I \subseteq R $ be a non-zero finitely generated ideal and $ x \in K $. Then if $ xI \subseteq I $, we have $ x \in R $.
\end{lemma}

\begin{proof}
Let $ I = \abr{c_1, \dots, c_n} $. We write $ xc_i = \sum_{i = 1}^n a_{ij}c_i $ for some $ a_{ij} \in R $. Let $ A $ be the matrix $ A = \br{a_{ij}}_{1 \le i, j \le n} $ and set $ B = x\I_n - A \in \Mat_{n \times n} K $. Then $ B\onebythree{c_1}{\dots}{c_n}^\intercal = 0 $ in $ K^n $. Multiplying by the adjugate matrix for $ B $, $ \br{\det B}\I_n\onebythree{c_1}{\dots}{c_n}^\intercal = 0 $, so $ \det B = 0 $. But $ \det B $ is a monic polynomial in $ x $ with coefficients in $ R $. Thus $ x $ is integral over $ R $, so $ x \in R $.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:10.7}]
\hfill
\begin{itemize}
\item[$ \implies $] Clear.
\item[$ \impliedby $] We need to show $ R $ is a PID. The assumption implies $ R $ is a local ring with unique maximal ideal $ \mmm $.
\begin{enumerate}[leftmargin=0.5in, label=Step \arabic*.]
\item $ \mmm $ is principal. Let $ 0 \ne x \in \mmm $. By Lemma \ref{lem:10.8}, $ \abr{x} \supseteq \mmm^n $ for some $ n \ge 1 $. Let $ n $ be minimal such that $ \abr{x} \supseteq \mmm^n $, then we may choose $ y \in \mmm^{n - 1} \setminus \abr{x} $. Set $ \pi = x / y $. Then we have $ y\mmm \subseteq \mmm^n \subseteq \abr{x} $, so $ \pi^{-1}\mmm \subseteq R $. If $ \pi^{-1}\mmm \subseteq \mmm $, then $ \pi^{-1} \in R $ by Lemma \ref{lem:10.9} and $ y \in \abr{x} $, a contradiction. Hence $ \pi^{-1}\mmm = R $, so $ \mmm = \pi R $ is principal.
\item $ R $ is a PID. Let $ I \subseteq R $ be a non-zero ideal. Consider the sequence of fractional ideals $ I \subseteq \pi^{-1}I \subseteq \dots $ in $ K $. Then $ \pi^{-k}I \ne \pi^{-\br{k + 1}}I $ for all $ k $ by Lemma \ref{lem:10.9}. Therefore since $ R $ is Noetherian, we may choose $ n $ maximal such that $ \pi^{-n}I \subseteq R $. If $ \pi^{-n}I \subseteq \mmm = \abr{\pi} $, then $ \pi^{-\br{n + 1}}I \subseteq R $, a contradiction. Thus $ \pi^{-n}I = R $, so $ I = \abr{\pi^n} $.
\end{enumerate}
\end{itemize}
\end{proof}

\lecture{11}{Monday}{02/11/20}

Let $ R $ be an integral domain and $ S \subseteq R $ a multiplicatively closed subset, so if $ x, y \in S $ then $ xy \in S $. The \textbf{localisation} $ S^{-1}R $ of $ R $ with respect to $ S $ is the ring
$$ S^{-1}R = \cbr{\dfrac{r}{s} \st r \in R, \ s \in S} \subseteq \Frac R. $$
If $ \ppp $ is a prime ideal in $ R $, we write $ R_{\br{\ppp}} $ for the localisation with respect to $ S = R \setminus \ppp $.

\pagebreak

\begin{example*}
\hfill
\begin{itemize}
\item If $ \ppp = 0 $, then $ R_{\br{\ppp}} = \Frac R $.
\item If $ R = \ZZ $, then $ \ZZ_{\br{\abr{p}}} = \cbr{a / p^n \st a \in \ZZ, \ n \in \ZZ_{\ge 0}} $.
\end{itemize}
\end{example*}

\begin{fact*}
\hfill
\begin{itemize}
\item If $ R $ is Noetherian, then $ S^{-1}R $ is Noetherian.
\item There exists a bijection
$$ \correspondence{\text{prime ideals} \ \ppp S^{-1}R \subseteq S^{-1}R}{\text{prime ideals} \ \ppp \subseteq R \ \text{such that} \ \ppp \cap S = \emptyset}. $$
\end{itemize}
\end{fact*}

\begin{corollary}
\label{cor:11.1}
Let $ R $ be a Dedekind domain and $ \ppp \subseteq R $ is a non-zero prime ideal. Then $ R_{\br{\ppp}} $ is a DVR.
\end{corollary}

\begin{proof}
By properties of localisation, $ R_{\br{\ppp}} $ is a Noetherian integral domain with a unique non-zero prime ideal $ \ppp R_{\br{\ppp}} $. It suffices to show that $ R_{\br{\ppp}} $ is integrally closed in $ \Frac R_{\br{\ppp}} = \Frac R $, since then $ R_{\br{\ppp}} $ is Dedekind, so by Theorem \ref{thm:10.7}, $ R_{\br{\ppp}} $ is a DVR. Let $ x \in \Frac R $ be integral over $ R_{\br{\ppp}} $. Multiplying by denominators of a monic polynomial satisfied by $ x $, we obtain $ sx^n + a_{n - 1}x^{n - 1} + \dots + a_0 = 0 $ for $ a_i \in R $ and $ s \in S $. By multiplying by $ s^{n - 1} $, $ xs $ is integral over $ R $. Thus $ xs \in R $, so $ x \in R_{\br{\ppp}} $.
\end{proof}

\begin{definition}
If $ R $ is a Dedekind domain and $ \ppp \subseteq R $ a non-zero prime ideal, we write $ \v_\ppp $ for the normalised valuation on $ \Frac R = \Frac R_{\br{\ppp}} $ corresponding to the DVR $ R_{\br{\ppp}} $.
\end{definition}

\begin{example*}
If $ R = \ZZ $ and $ \ppp = \abr{p} $, then $ \v_\ppp $ is the $ p $-adic valuation.
\end{example*}

\begin{theorem}
Let $ R $ be a Dedekind domain. Then every non-zero ideal $ I \subseteq R $ can be written uniquely as a product of prime ideals, $ I = \ppp_1^{e_1} \dots \ppp_r^{e_r} $ for $ \ppp_i $ distinct.
\end{theorem}

\begin{remark*}
This is clear for PIDs, since PID implies UFD.
\end{remark*}

\begin{proof}
We quote the following properties of localisation.
\begin{enumerate}
\item If $ I \subsetneq J $ then $ IR_{\br{\ppp}} \subsetneq JR_{\br{\ppp}} $.
\item $ I = J $ if and only if $ IR_{\br{\ppp}} = JR_{\br{\ppp}} $, for all $ \ppp $ prime ideals.
\end{enumerate}
Let $ I \subseteq R $ be a non-zero ideal. Then by Lemma \ref{lem:10.8}, there are prime ideals $ \ppp_1, \dots, \ppp_r $ such that $ \ppp_1^{\beta_1} \dots \ppp_r^{\beta_r} \subseteq I $, where $ \beta_i > 0 $. Then
$$ IR_{\br{\ppp}} =
\begin{cases}
R_{\br{\ppp}} & \ppp \notin \cbr{\ppp_1, \dots, \ppp_r} \\
\ppp^{\alpha_i}R_{\br{\ppp}} & \ppp = \ppp_i
\end{cases}.
$$
Here, $ 0 < \alpha_i \le \beta_i $, and the second case follows from Corollary \ref{cor:11.1}. Thus $ I = \ppp_1^{\alpha_1} \dots \ppp_r^{\alpha_r} $ by property $ 2 $. For uniqueness, if $ I = \ppp_1^{\alpha_1} \dots \ppp_r^{\alpha_r} = \ppp_1^{\gamma_1} \dots \ppp_r^{\gamma_r} $ then $ \ppp_i^{\alpha_i}R_{\br{\ppp_i}} = \ppp_i^{\gamma_i}R_{\br{\ppp_i}} $, so $ \alpha_i = \gamma_i $ by unique factorisation in DVRs.
\end{proof}

\subsection{Extensions of Dedekind domains}

Let $ L / K $ be a finite extension. For $ x \in L $ we write $ \Tr_{L / K} x \in K $ for the trace of the $ K $-linear map
$$ \function{L}{L}{y}{xy}. $$
If $ L / K $ is separable such that $ \sbr{L : K} = n $ and $ \sigma_1, \dots, \sigma_n : L \to \overline{K} $ denote the embeddings of $ L $ into a separable closure $ K^{\sep} $, then
$$ \Tr_{L / K} x = \sum_{i = 1}^n \sigma_i\br{x}. $$

\pagebreak

\begin{lemma}
Let $ L / K $ be a finite separable extension of fields. Then the symmetric bilinear pairing
$$ \function[\br{,}]{L \times L}{K}{\br{x, y}}{\Tr_{L / K} xy} $$
is non-degenerate.
\end{lemma}

\begin{proof}
By the primitive element theorem, $ L = K\br{\alpha} $ for some $ \alpha \in L $. We consider the matrix $ A $ for $ \br{,} $ in the $ K $-basis for $ L $ given by $ 1, \dots, \alpha^{n - 1} $. Then $ A_{ij} = \Tr_{L / K} \alpha^{i + j} = \sbr{BB^\intercal}_{ij} $ where $ B $ is the $ n \times n $ matrix with
$$ B = \threebythree{1}{\dots}{1}{\vdots}{\ddots}{\vdots}{\sigma_1\br{\alpha^{n - 1}}}{\dots}{\sigma_n\br{\alpha^{n - 1}}}, $$
so the Vandermonde determinant is
$$ \det A = \br{\det B}^2 = \sbr{\prod_{1 \le i < j \le n} \br{\sigma_i\br{\alpha} - \sigma_j\br{\alpha}}}^2 \ne 0, $$
since $ \sigma_i\br{\alpha} \ne \sigma_j\br{\alpha} $ for $ i \ne j $, by separability.
\end{proof}

\begin{remark*}
In fact a finite extension of fields $ L / K $ is separable if and only if the trace form is non-degenerate.
\end{remark*}

\begin{theorem}
\label{thm:11.5}
Let $ \OOO_K $ be a Dedekind domain and $ L $ a finite separable extension of $ K = \Frac \OOO_K $. Then the integral closure $ \OOO_L $ of $ \OOO_K $ in $ L $ is a Dedekind domain.
\end{theorem}

\begin{proof}
Since $ \OOO_L \subseteq L $, it is an integral domain. We need to show the following.
\begin{itemize}
\item $ \OOO_L $ is Noetherian. Let $ e_1, \dots, e_n \in L $ be a $ K $-basis for $ L $. Upon scaling by $ K $, we may assume $ e_i \in \OOO_L $, for all $ i $. Let $ f_i \in L $ be the dual basis with respect to the trace form $ \br{,} $. Let $ x \in \OOO_L $ and write $ x = \sum_{i = 1}^n \lambda_if_i $ for $ \lambda_i \in K $. Then $ \lambda_i = \Tr_{L / K} xe_i \in \OOO_K $, since for any $ z \in \OOO_L $, $ \Tr_{L / K} z $ is a sum of elements which are integral over $ \OOO_K $, so $ \Tr_{L / K} z $ is integral over $ \OOO_K $, so $ \Tr_{L / K} z \in \OOO_K $. Thus $ \OOO_L \subseteq \OOO_Kf_1 + \dots + \OOO_Kf_n $. Since $ \OOO_K $ is Noetherian, $ \OOO_L $ is finitely generated as an $ \OOO_K $-module, hence $ \OOO_L $ is Noetherian.
\item $ \OOO_L $ is integrally closed in $ L $. Example sheet $ 2 $.
\item Every non-zero prime ideal $ \pp $ in $ \OOO_L $ is maximal. Let $ \pp $ be a non-zero prime ideal of $ \OOO_L $, and define $ \ppp = \pp \cap \OOO_K $ a prime ideal of $ \OOO_K $. Let $ x \in \pp $, then $ x $ satisfies an equation $ x^n + a_{n - 1}x^{n - 1} + \dots + a_0 = 0 $ for $ a_i \in \OOO_K $ with $ a_0 \ne 0 $. Then $ a_0 \in \pp \cap \OOO_K $ is a non-zero element of $ \ppp $, so $ \ppp $ is non-zero, so $ \ppp $ is maximal. We have $ \OOO_K / \ppp \hookrightarrow \OOO_L / \pp $, and $ \OOO_L / \pp $ is a finite dimensional vector space over $ \OOO_K / \ppp $. Since $ \OOO_L / \pp $ is an integral domain, it is a field, using the rank-nullity theorem applied to the map $ y \mapsto zy $.
\end{itemize}
\end{proof}

\begin{remark*}
Theorem \ref{thm:11.5} in fact holds without the assumption that $ L / K $ is separable.
\end{remark*}

\begin{corollary}
The ring of integers inside a number field is a Dedekind domain.
\end{corollary}

By convention, if $ \OOO_K $ is the ring of integers of a number field and $ \ppp \subseteq \OOO_K $ is a non-zero prime ideal, we normalise $ \abs{\cdot}_\ppp $, the absolute value associated to $ \v_\ppp $, by
$$ \abs{x}_\ppp = \N_\ppp^{-\v_\ppp\br{x}}, \qquad \N_\ppp = \#\br{\OOO_K / \ppp}. $$

\lecture{12}{Wednesday}{04/11/20}

\begin{lemma}
\label{lem:12.1}
Let $ \OOO_K $ be a Dedekind domain. Let $ 0 \ne x \in \OOO_K $. Then
$$ \abr{x} = \prod_{\ppp \ne 0 \ \text{prime ideals}} \ppp^{\v_\ppp\br{x}}. $$
\end{lemma}

Note the product is finite.

\begin{proof}
$ x\OOO_{K, \br{\ppp}} = \br{\ppp\OOO_{K, \br{\ppp}}}^{\v_\ppp\br{x}} $ by definition of $ \v_\ppp\br{x} $. Lemma \ref{lem:12.1} follows from properties of localisation, where $ I = J $ if and only if $ I\OOO_{K, \br{\ppp}} = J\OOO_{K, \br{\ppp}} $ for all prime ideals $ \ppp $.
\end{proof}

\pagebreak

\begin{notation*}
Let $ \OOO_K $ be a Dedekind domain, let $ L / K $ be a finite separable extension, and let $ \pp \subseteq \OOO_L $ and $ \ppp \subseteq \OOO_K $ be non-zero prime ideals. We write $ \pp \mid \ppp $ if
$$ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r}, \qquad \pp \in \cbr{\pp_1, \dots, \pp_r}, \qquad e_i > 0. $$
\end{notation*}

\begin{theorem}
\label{thm:12.2}
Let $ \OOO_K $ be a Dedekind domain and $ L $ a finite separable extension of $ K = \Frac \OOO_K $. For $ \ppp $ a non-zero prime ideal of $ \OOO_K $, we write $ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r} $ for $ e_i > 0 $. Then the absolute values on $ L $ extending $ \abs{\cdot}_\ppp $, up to equivalence, are precisely $ \abs{\cdot}_{\pp_1}, \dots, \abs{\cdot}_{\pp_r} $.
\end{theorem}

\begin{proof}
By Lemma \ref{lem:12.1}, for any $ x \in \OOO_K $ and $ i = 1, \dots, r $, we have $ \v_{\pp_i}\br{x} = e_i\v_\ppp\br{x} $. Hence up to equivalence, $ \abs{\cdot}_{\pp_i} $ extends $ \abs{\cdot}_\ppp $. Now suppose $ \abs{\cdot} $ is an absolute value on $ L $ extending $ \abs{\cdot}_\ppp $. Then $ \abs{\cdot} $ is bounded on $ \ZZ $, hence $ \abs{\cdot} $ is non-archimedean. Let $ R = \cbr{x \in L \st \abs{x} \le 1} \subseteq L $ be the valuation ring for $ L $ with respect to $ \abs{\cdot} $. Then $ \OOO_K \subseteq R $, and since $ R $ is integrally closed in $ L $, by lecture $ 6 $, we have $ \OOO_L \subseteq R $. Set
\begin{equation}
\label{eq:3}
\pp = \cbr{x \in \OOO_L \st \abs{x} < 1}.
\end{equation}
It is easy to check $ \pp $ is a non-zero prime ideal. For example,
\begin{itemize}
\item if $ x, y \in \pp $ then $ x + y \in \pp $ by $ \br{\ref{eq:3}} $,
\item if $ r \in \OOO_L $ and $ x \in \pp $ then $ rx \in \pp $ by $ \OOO_L \subseteq R $ and $ \br{\ref{eq:3}} $,
\item if $ x, y \in \OOO_L $ and $ xy \in \pp $ then $ x \in \pp $ or $ y \in \pp $ by $ \br{\ref{eq:3}} $, and
\item $ \ppp \subseteq \pp $, hence $ \pp $ is non-zero.
\end{itemize}
Then $ \OOO_{L, \br{\pp}} \subseteq R $, since if $ s \in \OOO_L \setminus \pp $ then $ \abs{s} = 1 $. But $ \OOO_{L, \br{\pp}} $ is a DVR, hence a maximal subring of $ L $, so $ \OOO_{L, \br{\pp}} = R $. Hence $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_\pp $. Since $ \abs{\cdot} $ extends $ \abs{\cdot}_\ppp $, $ \pp \cap \OOO_K = \ppp $. Thus $ \pp_1^{e_1} \dots \pp_r^{e_r} \subseteq \pp $, so $ \pp = \pp_i $ for some $ i $.
\end{proof}

Let $ K $ be a number field. If $ \sigma : K \to \RR, \CC $ is a real or complex embedding, then $ x \mapsto \abs{\sigma\br{x}}_\infty $ defines an absolute value on $ K $, by example sheet $ 2 $, denoted by $ \abs{\cdot}_\sigma $.

\begin{corollary}
Let $ K $ be a number field with ring of integers $ \OOO_K $. Then any absolute value on $ K $ is either
\begin{itemize}
\item $ \abs{\cdot}_\ppp $ for some non-zero prime ideal of $ \OOO_K $, or
\item $ \abs{\cdot}_\sigma $ for some $ \sigma : K \to \RR, \CC $.
\end{itemize}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}[leftmargin=0.5in, label=Case \arabic*.]
\item $ \abs{\cdot} $ is non-archimedean. Then $ \eval{\abs{\cdot}}_\QQ $ is equivalent to $ \abs{\cdot}_p $ for some prime $ p $ by Ostrowski's theorem. Theorem \ref{thm:12.2} implies $ \abs{\cdot} $ is equivalent to $ \abs{\cdot}_\ppp $ for $ \ppp $ a prime ideal of $ \OOO_K $ dividing $ \abr{p} $.
\item $ \abs{\cdot} $ is archimedean. Example sheet.
\end{enumerate}
\end{proof}

\subsection{Completions of number fields}

Now let $ L / K $ be an extension of number fields with rings of integers $ \OOO_K $ and $ \OOO_L $ respectively. Let $ \ppp \subseteq \OOO_K $ and $ \pp \subseteq \OOO_L $ be non-zero prime ideals such that $ \pp $ divides $ \ppp $. We write $ K_\ppp $ and $ L_\pp $ for the completion of $ K $ and $ L $ with respect to $ \abs{\cdot}_\ppp $ and $ \abs{\cdot}_\pp $ respectively.

\begin{lemma}
\label{lem:12.4}
\hfill
\begin{itemize}
\item The natural map $ L \otimes_K K_\ppp \to L_\pp $ is surjective.
\item $ \sbr{L_\pp : K_\ppp} \le \sbr{L : K} $.
\end{itemize}
\end{lemma}

\begin{proof}
Let $ M = LK_\ppp \subseteq L_\pp $. Then $ M $ is a finite extension of $ K_\ppp $ and $ \sbr{M : K_\ppp} \le \sbr{L : K} $. Moreover $ M $ is complete and since $ L \subseteq M \subseteq L_\pp $, we have $ L_\pp = M $.
\end{proof}

\pagebreak

\begin{lemma}[Chinese remainder theorem]
Let $ R $ be a ring. Let $ I_1, \dots, I_n \subseteq R $ be ideals such that $ I_i + I_j = R $ for all $ i \ne j $. Then
\begin{itemize}
\item $ \bigcap_{i = 1}^n I_i = \prod_{i = 1}^n I_i = I $, and
\item $ R / I \cong \prod_{i = 1}^n R / I_i $.
\end{itemize}
\end{lemma}

\begin{proof}
Example sheet $ 2 $.
\end{proof}

\begin{theorem}
\label{thm:12.6}
$$ L \otimes_K K_\ppp \cong \prod_{\pp \mid \ppp} L_\pp. $$
\end{theorem}

\begin{proof}
Write $ L = K\br{\alpha} $, by separability, and let $ f\br{X} \in K\sbr{X} $ be the minimal polynomial of $ \alpha $. Let $ f\br{X} = f_1\br{X} \dots f_r\br{X} $ in $ K_\ppp\sbr{X} $ where $ f_i\br{X} \in K_\ppp\sbr{X} $ are distinct irreducible. Then $ L \cong K\sbr{X} / \abr{f\br{X}} $, and hence by CRT,
$$ L \otimes_K K_\ppp \cong K_\ppp\sbr{X} / \abr{f\br{X}} \cong \prod_{i = 1}^r K_\ppp\sbr{X} / \abr{f_i\br{X}}. $$
Set $ L_i = K_\ppp\sbr{X} / \abr{f_i\br{X}} $, a finite extension of $ K_\ppp $. Then $ L_i $ contains both $ L $ and $ K_\ppp $, using the map of fields $ K\sbr{X} / \abr{f\br{X}} \hookrightarrow K_\ppp\sbr{X} / \abr{f_i\br{X}} $ is injective. Moreover $ L $ is dense inside $ L_i $. Indeed since $ K $ is dense in $ K_\ppp $, can approximate coefficients of an element of $ K_\ppp\sbr{X} / \abr{f_i\br{X}} $ with an element of $ K\sbr{X} / \abr{f\br{X}} $. Then Theorem \ref{thm:12.6} follows from the following three claims.
\begin{itemize}
\item $ L_i \cong L_\pp $ for a prime $ \pp $ of $ \OOO_L $ dividing $ \ppp $. Since $ \sbr{L_i : K_\ppp} < \infty $, there is a unique absolute value $ \abs{\cdot} $ on $ L_i $ extending $ \abs{\cdot}_\ppp $. By Theorem \ref{thm:12.2}, $ \eval{\abs{\cdot}}_L $ is equivalent to $ \abs{\cdot}_\pp $ for some $ \pp \mid \ppp $. Since $ L $ is dense in $ L_i $ and $ L_i $ is complete, we have $ L_i \cong L_\pp $.
\item Each $ \pp $ appears at most once. Suppose $ \phi : L_i \cong L_j $ is an isomorphism preserving $ L $ and $ K_\ppp $, then $ \phi : K_\ppp\sbr{X} / \abr{f_i\br{X}} \xrightarrow{\sim} K_\ppp\sbr{X} / \abr{f_j\br{X}} $ takes $ X $ to $ X $. Hence $ f_i\br{X} = f_j\br{X} $, so $ i = j $.
\item Each $ \pp $ appears at least once. By Lemma \ref{lem:12.4}, the natural map $ \pi_\pp : L \otimes_K K_\ppp \to L_\pp $ is surjective for any $ \pp \mid \ppp $. Since $ L_\pp $ is a field, $ \pi_\pp $ factors through $ L_i $ for some $ i $, and hence $ L_i \cong L_\pp $ by surjectivity of $ \pi_\pp $.
\end{itemize}
\end{proof}

\begin{example*}
Let $ K = \QQ $, let $ L = \QQ\br{i} $, and let $ f\br{X} = X^2 + 1 $. By Hensel, $ \sqrt{-1} \in \QQ_5 $. Thus $ \abr{5} $ splits in $ \QQ\br{i} $, that is $ 5\OOO_L = \ppp_1\ppp_2 $.
\end{example*}

\begin{corollary}
For $ x \in L $,
$$ \N_{L / K}\br{x} = \prod_{\pp \mid \ppp} \N_{L_\pp / K_\ppp}\br{x}. $$
\end{corollary}

\begin{proof}
Let $ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r} $. Let $ \BBB_1, \dots, \BBB_r $ be bases for $ L_{\pp_1}, \dots, L_{\pp_r} $ as $ K_\ppp $-vector spaces. Then $ \BBB = \bigcup_{i = 1}^r \BBB_i $ is a basis for $ L \otimes_K K_\ppp $ over $ K_\ppp $. Let $ \sbr{\cdot x}_\BBB $ and $ \sbr{\cdot x}_{\BBB_i} $ denote the matrices for $ \cdot x : L \otimes_K K_\ppp \to L \otimes_K K_\ppp $ and $ \cdot x : L_{\pp_i} \to L_{\pp_i} $ with respect to the bases $ \BBB $ and $ \BBB_i $ respectively. Then
$$ \sbr{\cdot x}_\BBB = \threebythree{\sbr{\cdot x}_{\BBB_1}}{}{0}{}{\ddots}{}{0}{}{\sbr{\cdot x}_{\BBB_r}}, $$
so
$$ \N_{L / K}\br{x} = \det \sbr{\cdot x}_\BBB = \prod_{i = 1}^r \det \sbr{\cdot x}_{\BBB_i} = \prod_{i = 1}^r \N_{L_{\pp_i} / K_\ppp}\br{x}. $$
\end{proof}

\subsection{Decomposition groups}

\lecture{13}{Friday}{06/11/20}

Let $ \OOO_K $ be a Dedekind domain, $ L $ a finite separable extension of $ K = \Frac \OOO_K $, and $ \OOO_L $ the integral closure of $ \OOO_K $ in $ L $. By lecture $ 11 $, if $ 0 \ne \ppp \subseteq \OOO_K $ is a prime ideal, then $ \ppp\OOO_L = \pp_1^{e_1} \dots \pp_r^{e_r} $ where $ \pp_i $ are distinct prime ideals of $ \OOO_L $. Note that for any $ i $, $ \ppp \subseteq \OOO_K \cap \pp_i \subsetneq \OOO_K $, hence $ \ppp = \OOO_K \cap \pp_i $.

\pagebreak

\begin{definition}
$ e_i $ is the \textbf{ramification index} of $ \pp_i $ over $ \ppp $. We say $ \ppp $ \textbf{ramifies} in $ L $ if some $ e_i > 1 $.
\end{definition}

\begin{example*}
Let $ \OOO_K = \CC\sbr{t} $, let $ \OOO_L = \CC\sbr{T} $, and let
$$ \function{\OOO_K}{\OOO_L}{t}{T^n}. $$
We have $ t\OOO_L = T^n\OOO_L $, so the ramification index of $ \abr{T} $ over $ \abr{t} $ is $ n $. Corresponds geometrically to the degree $ n $ covering of Riemann surfaces
$$ \function{\CC}{\CC}{x}{x^n}, $$
having a ramification at zero with ramification index $ n $.
\end{example*}

\begin{definition}
$ f_i = \sbr{\OOO_L / \pp_i : \OOO_K / \ppp} $ is the \textbf{residue class degree} of $ \pp_i $ over $ \ppp $.
\end{definition}

\begin{theorem}
\label{thm:13.3}
$$ \sum_{i = 1}^r e_if_i = \sbr{L : K}. $$
\end{theorem}

\begin{proof}
Let $ S = \OOO_K \setminus \ppp $. We have the following whose proofs are left as an exercise.
\begin{enumerate}
\item $ S^{-1}\OOO_L $ is the integral closure of $ S^{-1}\OOO_K $ in $ L $.
\item $ S^{-1}\ppp S^{-1}\OOO_L \cong S^{-1}\pp_1^{e_1} \dots \pp_r^{e_r} $.
\item $ S^{-1}\OOO_L / S^{-1}\pp_i \cong \OOO_L / \pp_i $ and $ S^{-1}\OOO_K / S^{-1}\ppp \cong \OOO_K / \ppp $.
\end{enumerate}
In particular, $ 2 $ and $ 3 $ imply $ e_i $ and $ f_i $ do not change when we replace $ \OOO_K $ and $ \OOO_L $ by $ S^{-1}\OOO_K $ and $ S^{-1}\OOO_L $. Thus we may assume that $ \OOO_K $ is a DVR, and hence a PID. By CRT, we have
\begin{equation}
\label{eq:4}
\OOO_L / \ppp\OOO_L \cong \prod_{i = 1}^r \OOO_L / \pp_i^{e_i}.
\end{equation}
Note that $ \OOO_L / \ppp\OOO_L $ is a $ \kappa = \OOO_K / \ppp $-module, that is a $ \kappa $-vector space. We count dimensions of both sides in $ \br{\ref{eq:4}} $. For each $ i $, we have a decreasing sequence of $ \kappa $-subspaces
$$ 0 \subseteq \pp_i^{e_i - 1} / \pp_i^{e_i} \subseteq \dots \subseteq \pp_i / \pp_i^{e_i} \subseteq \OOO_L / \pp_i^{e_i}. $$
Thus $ \dim_\kappa \OOO_L / \pp_i^{e_i} = \sum_{j = 0}^{e_i - 1} \dim_\kappa \pp_i^j / \pp_i^{j + 1} $. Note that $ \pp_i^j / \pp_i^{j + 1} $ is an $ \OOO_L / \pp_i $-module and $ x \in \pp_i^j \setminus \pp_i^{j + 1} $ is a generator. For example, can prove this after localising at $ \pp_i $. Then $ \dim_\kappa \pp_i^j / \pp_i^{j + 1} = f_i $ and we have $ \dim_\kappa \OOO_L / \pp_i^{e_i} = e_if_i $. Recall that $ \OOO_K $ is a DVR. By the structure theorem for modules over PIDs, $ \OOO_L $ is a free module over $ \OOO_K $ of rank $ n = \sbr{L : K} $. Thus $ \OOO_L / \ppp\OOO_L \cong \br{\OOO_K / \ppp}^n $ as $ \OOO_K $-modules and hence $ \dim_\kappa \OOO_L / \ppp\OOO_L = n $.
\end{proof}

Theorem \ref{thm:13.3} is the algebraic analogue of the fact that for a degree $ n $ covering $ X \to Y $ of compact Riemann surfaces, and $ y \in Y $ we have
$$ n = \sum_{x \in f^{-1}\br{y}} \e_x, $$
where $ \e_x $ is the ramification index of $ x $. Now assume $ L / K $ is Galois. Then for any $ \sigma \in \Gal\br{L / K} $, $ \sigma\br{\pp_i} \cap \OOO_K = \ppp $ and hence $ \sigma\br{\pp_i} \in \cbr{\pp_1, \dots, \pp_r} $, so $ \Gal\br{L / K} $ acts on $ \cbr{\pp_1, \dots, \pp_r} $.

\begin{proposition}
\label{prop:13.4}
The action of $ \Gal\br{L / K} $ on $ \cbr{\pp_1, \dots, \pp_r} $ is transitive.
\end{proposition}

\begin{proof}
Suppose not, so that there exist $ i \ne j $ such that $ \sigma\br{\pp_i} \ne \pp_j $ for all $ \sigma \in \Gal\br{L / K} $. By CRT, we may choose $ x \in \OOO_L $ such that $ x \equiv 0 \mod \pp_i $ and $ x \equiv 1 \mod \sigma\br{\pp_j} $ for all $ \sigma \in \Gal\br{L / K} $. Then
$$ \N_{L / K}\br{x} = \prod_{\sigma \in \Gal\br{L / K}} \sigma\br{x} \in \OOO_K \cap \pp_i = \ppp \subseteq \pp_j. $$
Since $ \pp_j $ is prime, there exists $ \tau \in \Gal\br{L / K} $ such that $ \tau\br{x} \in \pp_j $, so $ x \in \tau^{-1}\br{\pp_j} $, that is $ x \equiv 0 \mod \tau^{-1}\br{\pp_i} $, a contradiction.
\end{proof}

\pagebreak

\begin{corollary}
Suppose $ L / K $ is Galois. Then $ e_1 = \dots = e_r = \e $ and $ f_1 = \dots = f_r = \f $, and we have $ n = \e\f r $.
\end{corollary}

\begin{proof}
For any $ \sigma \in \Gal\br{L / K} $ we have
\begin{itemize}
\item $ \ppp = \sigma\br{\ppp} = \sigma\br{\pp_1}^{e_1} \dots \sigma\br{\pp_r}^{e_r} $, so $ e_1 = \dots = e_r $, and
\item $ \OOO_L / \pp_i = \OOO_L / \sigma\br{\pp_i} $, so $ f_1 = \dots = f_r $.
\end{itemize}
\end{proof}

Let $ L / K $ be complete discretely valued fields with normalised valuations $ \v_L $ and $ \v_K $ and uniformisers $ \pi_L $ and $ \pi_K $. The \textbf{ramification index} is $ \e = \e_{L / K} = \v_L\br{\pi_K} $, that is $ \pi_L^\e\OOO_L = \pi_K\OOO_L $. The \textbf{residue class degree} is $ \f = \f_{L / K} = \sbr{\kappa_L : \kappa} $.

\begin{corollary}
\label{cor:13.6}
Suppose either
\begin{enumerate}
\item $ L / K $ is finite separable, or
\item $ \f $ is finite.
\end{enumerate}
Then $ \sbr{L : K} = \e\f $.
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item Theorem \ref{thm:13.3}.
\item Can apply the same proof as in Theorem \ref{thm:13.3} if we know $ \OOO_L $ is finitely generated as an $ \OOO_K $-module. As before, $ \dim_\kappa \OOO_L / \pi_K\OOO_L = \e\f < \infty $. Let $ x_1, \dots, x_m \in \OOO_L $ be a set of coset representatives for a $ \kappa $-basis for $ \OOO_L / \pi_K\OOO_L $. For $ y \in \OOO_L $, can write
$$ y = \sum_{i = 0}^\infty \br{\sum_{j = 1}^m a_{ij}x_j}\pi_K^i = \sum_{j = 1}^m \br{\sum_{i = 0}^\infty a_{ij}\pi_K^i}x_j, \qquad a_{ij} \in \OOO_K, $$
by Proposition \ref{prop:3.5}, so $ \OOO_L $ is finitely generated over $ \OOO_K $.
\end{enumerate}
\end{proof}

Let $ \OOO_K $ be a Dedekind domain, $ L $ a finite separable extension of $ K = \Frac \OOO_K $, and $ \OOO_L $ the integral closure of $ \OOO_K $ in $ L $.

\begin{definition}
Let $ L / K $ be finite Galois. The \textbf{decomposition group} at a prime $ \pp $ of $ \OOO_L $ is the subgroup of $ \Gal\br{L / K} $ defined by
$$ \G_\pp = \cbr{\sigma \in \Gal\br{L / K} \st \sigma\br{\pp} = \pp}. $$
\end{definition}

Proposition \ref{prop:13.4} shows that for any $ \pp $ and $ \pp' $ dividing $ \ppp $, $ \G_\pp $ and $ \G_{\pp'} $ are conjugate and $ \G_\pp $ has size $ ef $. Recall we write $ L_\pp $ and $ K_\ppp $ for the completions of $ L $ and $ K $ with respect to $ \abs{\cdot}_\pp $ and $ \abs{\cdot}_\ppp $ respectively.

\begin{proposition}
Suppose $ L / K $ is finite Galois and $ \pp $ is a prime ideal of $ L $ dividing $ \ppp $. Then
\begin{enumerate}
\item $ L_\pp / K_\ppp $ is Galois, and
\item there is a natural map $ \res : \Gal\br{L_\pp / K_\ppp} \to \Gal\br{L / K} $ which is injective and has image $ \G_\pp $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Since $ L / K $ is Galois, $ L $ is the splitting field of a separable polynomial $ f\br{X} \in K\sbr{X} $. Then $ L_\pp $ is the splitting field of $ f $ considered as an element of $ K_\ppp\sbr{X} $, so $ L_\pp / K_\ppp $ is Galois.
\item Let $ \sigma \in \Gal\br{L_\pp / K_\ppp} $, then $ \sigma\br{L} = L $ since $ L / K $ is normal, hence we have a map $ \res : \Gal\br{L_\pp / K_\ppp} \to \Gal\br{L / K} $. Since $ L $ is dense in $ L_\pp $, $ \res $ is injective. By Lemma \ref{lem:10.2} $ \abs{\sigma\br{x}}_\pp = \abs{x}_\pp $ for all $ \sigma \in \Gal\br{L_\pp / K_\ppp} $ and $ x \in L_\pp $. Then $ \sigma\br{\pp} = \pp $ for all $ \sigma \in \Gal\br{L_\pp / K_\ppp} $, so $ \res \sigma \in \G_\pp $ for all $ \sigma \in \Gal\br{L_\pp / K_\ppp} $. To show surjectivity it suffices to show that $ \sbr{L_\pp : K_\ppp} = \e\f = \abs{\G_\pp} $. We have already seen $ \abs{\G_\pp} = \e\f $. We can apply Corollary \ref{cor:13.6} to $ L_\pp / K_\ppp $ noting that $ \e $ and $ \f $ do not change when we take completions.
\end{enumerate}
\end{proof}

\pagebreak

\section{Ramification theory}

\subsection{Unramified and totally ramified extensions}

\lecture{14}{Monday}{09/11/20}

Let $ K $ be a non-archimedean local field and $ L $ a finite separable extension of $ K $. Then $ L $ is a local field. Then
\begin{equation}
\label{eq:5}
\sbr{L : K} = \e_{L / K}\f_{L / K}.
\end{equation}

\begin{lemma}
Let $ M / L / K $ be finite separable extensions of local fields. Then
\begin{enumerate}
\item $ \e_{M / K} = \e_{M / L}\e_{L / K} $, and
\item $ \f_{M / K} = \f_{M / L}\f_{L / K} $.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}
\item[$ 2 $.] $ \f_{M / K} = \sbr{\kappa_M : \kappa} = \sbr{\kappa_M : \kappa_L}\sbr{\kappa_L : \kappa} = \f_{M / L}\f_{L / K} $.
\item[$ 1 $.] $ 2 $ and $ \br{\ref{eq:5}} $.
\end{itemize}
\end{proof}

\begin{definition}
The extension $ L / K $ is said to be
\begin{itemize}
\item \textbf{unramified} if $ \e_{L / K} = 1 $, if and only if $ \f_{L / K} = \sbr{L : K} $,
\item \textbf{ramified} if $ \e_{L / K} > 1 $, if and only if $ \f_{L / K} < \sbr{L : K} $, and
\item \textbf{totally ramified} if $ \e_{L / K} = \sbr{L : K} $, if and only if $ \f_{L / K} = 1 $.
\end{itemize}
\end{definition}

\begin{theorem}
\label{thm:14.3}
Let $ L / K $ be a finite separable extension of local fields, then there exists a field $ K_0 $ such that $ K \subseteq K_0 \subseteq L $ and such that
\begin{itemize}
\item $ K_0 / K $ is unramified, and
\item $ L / K_0 $ is totally ramified.
\end{itemize}
Moreover $ \sbr{K_0 : K} = \f_{L / K} $ and $ \sbr{L : K_0} = \e_{L / K} $, and $ K_0 / K $ is Galois.
\end{theorem}

\begin{proof}
Let $ \kappa = \FF_q $, so that $ \kappa_L = \FF_{q^\f} $ for $ \f = \f_{L / K} $. Set $ m = q^\f - 1 $. Let $ \sbr{\cdot} : \FF_{q^\f}^\times \to L^\times $ be the Teichm\"uller map for $ L $ and let $ \zeta_m = \sbr{a} $ where $ a $ is a generator of $ \FF_{q^\f}^\times $. Then $ \zeta_m $ is a primitive $ m $-th root of unity, by lecture $ 5 $. We set
$$ K_0 = K\br{\zeta_m} \subseteq L. $$
Then $ K_0 $ is the splitting field of the separable polynomial $ f\br{X} = X^m - 1 \in K\sbr{X} $, hence $ K_0 / K $ is Galois. Since $ \abs{\zeta_m} = 1 $, we have $ \zeta_m \in \OOO_{K_0}^\times $. Since $ X^m - 1 $ is separable over $ \FF_q $, $ \zeta_m $ is a primitive $ m $-th root of unity in $ \kappa_0 = \OOO_{K_0} / \mmm_0 $, so $ \kappa_0 = \FF_{q^\f} \cong \kappa_L $. Now $ \Gal\br{K_0 / K} $ preserves $ \OOO_{K_0} $ and $ \mmm_0 $, using $ \abs{x} = \abs{\sigma\br{x}} $ for all $ x \in K_0 $ and $ \sigma \in \Gal\br{K_0 / K} $. Thus there is a natural map
$$ \res : \Gal\br{K_0 / K} \to \Gal\br{\kappa_0 / \kappa}. $$
For $ \sigma \in \Gal\br{K_0 / K} $ we have $ \sigma\br{\zeta_m} = \zeta_m $ if $ \sigma\br{\zeta_m} \equiv \zeta_m \mod \mmm_0 $. This follows from the fact that $ \sigma\br{\zeta_m} = \sbr{\br{\res \sigma}\br{\zeta_m \mod \mmm_0}} $. Thus $ \res $ is injective. It follows that $ \abs{\Gal\br{K_0 / K}} \le \abs{\Gal\br{\kappa_0 / \kappa}} = \f = \f_{L / K} $, so $ \sbr{K_0 : K} = \f_{L / K} $ and $ \res $ is an isomorphism. Thus $ K_0 / K $ is unramified. Since $ \kappa_0 \cong \kappa_L $, $ \f_{L / K_0} = 1 $ and hence $ L / K_0 $ is totally ramified.
\end{proof}

We obtain the following description of unramified extensions.

\begin{theorem}
\label{thm:14.4}
Let $ K $ be a non-archimedean local field with $ \kappa \cong \FF_q $. For any $ n \ge 1 $, there is a unique unramified extension $ L / K $ of degree $ n $. Moreover $ L / K $ is Galois and the natural map $ \Gal\br{L / K} \to \Gal\br{\kappa_L / \kappa} $ is an isomorphism. In particular $ \Gal\br{L / K} $ is cyclic group generated by an element $ \Fr_{L / K} $ such that
$$ \Fr_{L / K}\br{x} \equiv x^q \mod \mmm_L, \qquad x \in \OOO_L. $$
\end{theorem}

\pagebreak

\begin{proof}
For $ n \ge 1 $, we take $ L = K\br{\zeta_m} $ where $ m = q^n - 1 $ and $ \zeta_m \in \overline{K}^\times $ is a primitive $ m $-th root of unity. Then as in the proof of Theorem \ref{thm:14.3},
$$ \Gal\br{L / K} \xrightarrow{\sim} \Gal\br{\kappa_L / \kappa} \cong \Gal\br{\FF_{q^n} / \FF_q}, $$
and is cyclic and generated by a lift of $ x \mapsto x^q $. Uniqueness is clear since for $ L / K $ degree $ n $ unramified, we have $ \zeta_m \in L $ and hence $ L = K\br{\zeta_m} $ by degree reasons.
\end{proof}

\begin{corollary}
Let $ K $ be a non-archimedean local field, and let $ L / K $ be finite Galois. Then the natural map $ \res : \Gal\br{L / K} \to \Gal\br{\kappa_L / \kappa} $ is surjective.
\end{corollary}

\begin{proof}
With the notation of Theorem \ref{thm:14.3} the map $ \res $ factors as
$$ \Gal\br{L / K} \twoheadrightarrow \Gal\br{K_0 / K} \xrightarrow{\sim} \Gal\br{\kappa_L / \kappa}. $$
\end{proof}

\begin{definition}
Let $ L / K $ be a finite Galois extension of local fields. The \textbf{inertia subgroup} $ \I_{L / K} \subseteq \Gal\br{L / K} $ is defined to be the kernel of the surjective map $ \Gal\br{L / K} \twoheadrightarrow \Gal\br{\kappa_L / \kappa} $.
\end{definition}

Since $ \e_{L / K}\f_{L / K} = \sbr{L : K} $, we have $ \abs{\I_{L / K}} = \e_{L / K} $. There is an exact sequence
$$ 0 \to \I_{L / K} \xrightarrow{\iota} \Gal\br{L / K} \xrightarrow{\rho} \Gal\br{\kappa_L / \kappa} \to 0. $$
By exactness, $ \I_{L / K} = \ker \rho $ and $ \Gal\br{\kappa_L / \kappa} = \coker \iota $. Then $ \I_{L / K} = \Gal\br{L / K_0} $, where $ L / K_0 $ is totally ramified.

\begin{definition}
Let $ K $ be a non-archimedean local field, with normalised valuation $ \v $. Let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 \in \OOO_K\sbr{X} $. We say $ f\br{X} $ is \textbf{Eisenstein} if $ \v\br{a_i} \ge 1 $ for all $ i $ and $ \v\br{a_0} = 1 $.
\end{definition}

\begin{fact*}
If $ f\br{X} $ is Eisenstein, then $ f\br{X} $ is irreducible.
\end{fact*}

\begin{theorem}
\label{thm:14.8}
\hfill
\begin{enumerate}
\item If $ L / K $ is a finite totally ramified extension of non-archimedean local fields, then the minimal polynomial of $ \pi_L \in \OOO_L $ is an Eisenstein polynomial and $ \OOO_L = \OOO_K\sbr{\pi_L} $, so $ L = K\br{\pi_L} $.
\item Conversely, if $ f\br{X} \in \OOO_K\sbr{X} $ is Eisenstein and $ \alpha $ is a root of $ f $, then $ L = K\br{\alpha} / K $ is totally ramified.
\end{enumerate}
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ \v_L $ be the normalised valuation for $ L $ and set $ \e = \sbr{L : K} $. Let $ f\br{X} = X^m + a_{m - 1}X^{m - 1} + \dots + a_0 \in \OOO_K\sbr{X} $ be the minimal polynomial for $ \pi_L $, which is monic since $ \OOO_L $ is integral over $ \OOO_K $. Then $ m \le \e $. Since $ \v_L\br{K^\times} = \e\ZZ $, we have $ \v_L\br{a_i\pi_L^i} \equiv i \mod \e $ for $ i < m $, so that these terms all have different residues modulo $ \e $. We have $ \pi_L^m = -\sum_{i = 0}^{m - 1} a_i\pi_L^i $ hence
$$ m = \v_L\br{\pi_L^m} = \min_{0 \le i \le m - 1} \br{i + \e\v_K\br{a_i}}, $$
so $ \v_K\br{a_i} \ge 1 $ for all $ i $, $ m = \e $, and $ \v_K\br{a_0} = 1 $. Thus $ f\br{X} $ is Eisenstein, and $ L = K\br{\pi_L} $. For $ y \in L $, we write $ y = \sum_{i = 0}^{\e - 1} \pi_L^ib_i $ for $ b_i \in K $. Then
$$ \v_L\br{y} = \min_{0 \le i \le m - 1} \br{i + \e\v_K\br{b_i}}. $$
Thus $ y \in \OOO_L $ if and only if $ \v_L\br{y} \ge 0 $, if and only if $ \v_K\br{b_i} \ge 0 $ for all $ i $, if and only if $ y \in \OOO_K\sbr{\pi_L} $.
\item Let $ f\br{X} = X^n + a_{n - 1}X^{n - 1} + \dots + a_0 $ be Eisenstein and let $ \e = \e_{L / K} $. Thus $ \v_L\br{a_i} \ge \e $ and $ \v_L\br{a_0} = \e $. If $ \v_L\br{\alpha} \le 0 $ we have $ \v_L\br{\alpha^n} < \v_L\br{\sum_{i = 0}^{n - 1} a_i\alpha^i} $ hence $ \v_L\br{\alpha} > 0 $. For $ i \ne 0 $, $ \v_L\br{a_i\alpha^i} > \e = \v_L\br{a_0} $. It follows that $ \v_L\br{-\sum_{i = 0}^{n - 1} a_i\alpha^i} = \e $ and hence $ \v_L\br{\alpha^n} = \e $, so $ n\v_L\br{\alpha} = \e $. But $ n = \sbr{L : K} \ge \e $, so $ n = \e $ and $ L $ is totally ramified.
\end{enumerate}
\end{proof}

\pagebreak

\subsection{Structure of units}

\lecture{15}{Wednesday}{11/11/20}

Let $ \sbr{K : \QQ_p} < \infty $, with normalised valuation $ \v_K $ and uniformiser $ \pi $, and let $ \e = \e_{K / \QQ_p} $, the \textbf{absolute ramification index}.

\begin{proposition}
If $ r > \e / \br{p - 1} $, then the series
$$ \exp x = \sum_{n = 0}^\infty \dfrac{x^n}{n!} $$
converges on $ \pi^r\OOO_K $ and $ \exp $ determines an isomorphism $ \br{\pi^r\OOO_K, +} \xrightarrow{\sim} \br{1 + \pi^r\OOO_K, \times} $.
\end{proposition}

\begin{proof}
By example sheet $ 1 $,
$$ \v_K\br{n!} = \e\v_p\br{n!} = \e\br{\dfrac{n - \s_p\br{n}}{p - 1}} \le \e\br{\dfrac{n - 1}{p - 1}}. $$
For $ x \in \pi^r\OOO_K $, we have for $ n \ge 1 $,
$$ \v_K\br{\dfrac{x^n}{n!}} \ge nr - \e\br{\dfrac{n - 1}{p - 1}} = r + \br{n - 1}\br{r - \dfrac{\e}{p - 1}} \to \infty, $$
as $ n \to \infty $. Thus $ \exp x $ converges. Since $ \v_K\br{x^n / n!} \ge r $ for $ n \ge 1 $, $ \exp x \in 1 + \pi^r\OOO_K $. Similarly consider
$$ \function[\log]{1 + \pi^r\OOO_K}{\pi^r\OOO_K}{1 + x}{\sum_{n = 1}^\infty \dfrac{\br{-1}^{n - 1}}{n}x^n}. $$
Can check convergence as before. Recall properties of power series
$$ \exp \br{X + Y} = \exp X\exp Y, \qquad \exp \log X = X, \qquad \log \exp X = X. $$
Thus $ \exp : \br{\pi^r\OOO_K, +} \to \br{1 + \pi^r\OOO_K, \times} $ is an isomorphism of groups.
\end{proof}

Now let $ K $ be a non-archimedean local field. We define a filtration on $ \OOO_K^\times $. Write $ \U_K = \OOO_K^\times $.

\begin{definition}
For $ s \in \ZZ_{\ge 1} $, the \textbf{$ s $-th unit group} $ \U_K^{\br{s}} $ is defined by
$$ \U_K^{\br{s}} = \br{1 + \pi^s\OOO_K, \times}. $$
We set $ \U_K^{\br{0}} = \U_K $. Then we have
$$ \dots \subseteq \U_K^{\br{s}} \subseteq \dots \subseteq \U_K^{\br{1}} \subseteq \U_K^{\br{0}} = \U_K. $$
\end{definition}

\begin{proposition}
\label{prop:15.3}
We have
\begin{enumerate}
\item $ \U_K^{\br{0}} / \U_K^{\br{1}} \cong \br{\kappa^\times, \times} $ for $ \kappa = \OOO_K / \pi\OOO_K $, and
\item $ \U_K^{\br{s}} / \U_K^{\br{s + 1}} \cong \br{\kappa, +} $ for $ s \ge 1 $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Reduction modulo $ \pi $ gives a natural surjection $ \OOO_K^\times \to \kappa^\times $. The kernel is $ 1 + \pi\OOO_K = \U_K^{\br{1}} $.
\item Define
$$ \function[f]{\U_K^{\br{s}}}{\kappa}{1 + \pi^sx}{x \mod \pi}. $$
Then $ \br{1 + \pi^sx}\br{1 + \pi^sy} = \br{1 + \pi^s\br{x + y + \pi^sxy}} $ and $ x + y + \pi^sxy \equiv x + y \mod \pi $, hence $ f $ is a group homomorphism. It is easy to see $ f $ is surjective and $ \ker f = \U_K^{\br{s + 1}} $.
\end{enumerate}
\end{proof}

\pagebreak

\begin{corollary}
Let $ \sbr{K : \QQ_p} < \infty $. Then $ \OOO_K^\times $ has a subgroup of finite index isomorphic to $ \br{\OOO_K, +} $.
\end{corollary}

\begin{proof}
If $ r > \e / \br{p - 1} $, then $ \br{\OOO_K, +} \cong \U_K^{\br{r}} $, so $ \U_K^{\br{r}} \subseteq \U_K $ is finite index by Proposition \ref{prop:15.3}.
\end{proof}

\begin{example*}
If $ \ZZ_p $ for $ p > 2 $, then $ \e = 1 $ and can take $ r = 1 $. Then there is an isomorphism
$$ \function{\ZZ_p^\times}{\br{\ZZ / p\ZZ}^\times \times \br{1 + p\ZZ_p} \cong \ZZ / \br{p - 1}\ZZ \times \ZZ_p}{x}{\br{x \mod p, \dfrac{x}{\sbr{x \mod p}}}}. $$
If $ p = 2 $, take $ r = 2 $. Then
$$ \ZZ_2^\times \xrightarrow{\sim} \br{\ZZ / 4\ZZ}^\times \times \br{1 + 4\ZZ_2} \cong \ZZ / 2\ZZ \times \ZZ_2. $$
Get another proof that
$$ \ZZ_p^\times / \br{\ZZ_p^\times}^2 \cong
\begin{cases}
\ZZ / 2\ZZ & p > 2 \\
\br{\ZZ / 2\ZZ}^2 & p = 2
\end{cases}.
$$
\end{example*}

\subsection{Higher ramification groups}

Let $ L / K $ be a finite Galois extension of local fields. We define an analogous filtration of $ \Gal\br{L / K} $.

\begin{definition}
Let $ \v_L $ be the normalised valuation on $ L $. For $ s \in \RR_{\ge -1} $, we define the \textbf{$ s $-th ramification group} by
$$ \G_s\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \forall x \in \OOO_L, \ \v_L\br{\sigma\br{x} - x} \ge s + 1}. $$
\end{definition}

\begin{example*}
$ \G_{-1}\br{L / K} = \Gal\br{L / K} $. If $ \pi_L $ is a uniformiser in $ L $, then
$$ \G_0\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \forall x \in \OOO_L, \ \sigma\br{x} \equiv x \mod \pi_L} = \ker \br{\Gal\br{L / K} \twoheadrightarrow \Gal\br{\kappa_L / \kappa}} = \I_{L / K}. $$
\end{example*}

Note that for $ s \in \ZZ_{\ge 0} $
$$ \G_s\br{L / K} = \ker \br{\Gal\br{L / K} \to \Aut \br{\OOO_L / \pi_L^{s + 1}\OOO_L}}, $$
hence $ \G_s\br{L / K} $ is normal in $ G $. We have for $ s \in \ZZ_{\ge -1} $
$$ \dots \subseteq \G_s \subseteq \dots \subseteq \G_0 \subseteq \G_{-1} = \Gal\br{L / K}. $$

\begin{remark*}
$ \G_s $ only changes at the integers. The definition for $ s \in \RR_{\ge -1} $ will be used later.
\end{remark*}

\begin{theorem}
\label{thm:15.6}
\hfill
\begin{enumerate}
\item Let $ \pi_L \in \OOO_L $ be a uniformiser. For $ s \ge 0 $,
$$ \G_s = \cbr{\sigma \in \G_0 \st \v_L\br{\sigma\br{\pi_L} - \pi_L} \ge s + 1}. $$
\item $ \bigcap_{n = 0}^\infty \G_n = \cbr{1} $.
\item Let $ s \in \ZZ_{\ge 0} $. There is an injective group homomorphism $ \G_s / \G_{s + 1} \hookrightarrow \U_L^{\br{s}} / \U_L^{\br{s + 1}} $ induced by the map $ \sigma \mapsto \sigma\br{\pi_L} / \pi_L $. This map is independent of the choice of $ \pi_L $.
\end{enumerate}
\end{theorem}

\begin{proof}
Let $ K_0 \subseteq L $ be the maximal unramified extension of $ K $ contained in $ L $. Upon replacing $ K $ by $ K_0 $, we may assume $ L / K $ is totally ramified.
\begin{enumerate}
\item By Theorem \ref{thm:14.8}, $ \OOO_L = \OOO_K\sbr{\pi_L} $. Suppose $ \v_L\br{\sigma\br{\pi_L} - \pi_L} \ge s + 1 $. Let $ x \in \OOO_L $, then $ x = f\br{\pi_L} $ for $ f\br{X} \in \OOO_K\sbr{X} $. Then
$$ \sigma\br{x} - x = \sigma\br{f\br{\pi_L}} - f\br{\pi_L} = f\br{\sigma\br{\pi_L}} - f\br{\pi_L} = \br{\sigma\br{\pi_L} - \pi_L}g\br{\pi_L}, $$
where $ g\br{X} \in \OOO_K\sbr{X} $, using $ X^n - Y^n = \br{X - Y}\br{X^{n - 1} + \dots + Y^{n - 1}} $. Thus $ \v_L\br{\sigma\br{x} - x} = \v_L\br{\sigma\br{\pi_L} - \pi_L} + \v_L\br{g\br{\pi_L}} \ge s + 1 $.
\item Suppose $ \sigma \in \Gal\br{L / K} $ such that $ \sigma \ne \id $. Then $ \sigma\br{\pi_L} \ne \pi_L $ because $ L = K\br{\pi_L} $, and hence $ \v_L\br{\sigma\br{\pi_L} - \pi_L} < \infty $. Thus $ \sigma \notin \G_s $ for $ s \gg 0 $.

\pagebreak

\item Note that for $ \sigma \in \G_s $ and $ s \in \ZZ_{\ge 0} $, $ \sigma\br{\pi_L} \in \pi_L + \pi_L^{s + 1}\OOO_L $, so $ \sigma\br{\pi_L} / \pi_L \in 1 + \pi_L^s\OOO_L $. We claim
$$ \function[\phi]{\G_s}{\U_L^{\br{s}} / \U_L^{\br{s + 1}}}{\sigma}{\dfrac{\sigma\br{\pi_L}}{\pi_L}} $$
is a group homomorphism with kernel $ \G_{s + 1} $. For $ \sigma, \tau \in \G_s $, let $ \tau\br{\pi_L} = u\pi_L $ for $ u \in \OOO_L^\times $. Then
$$ \dfrac{\sigma\tau\br{\pi_L}}{\pi_L} = \dfrac{\sigma\br{\tau\br{\pi_L}}}{\tau\br{\pi_L}} \cdot \dfrac{\tau\br{\pi_L}}{\pi_L} = \dfrac{\sigma\br{u}}{u} \cdot \dfrac{\sigma\br{\pi_L}}{\pi_L} \cdot \dfrac{\tau\br{\pi_L}}{\pi_L}. $$
But $ \sigma\br{u} \in u + \pi_L^{s + 1}\OOO_L $ since $ \sigma \in \G_s $ thus $ \sigma\br{u} / u \in \U_L^{\br{s + 1}} $ and hence
$$ \dfrac{\sigma\tau\br{\pi_L}}{\pi_L} \equiv \dfrac{\sigma\br{\pi_L}}{\pi_L} \cdot \dfrac{\tau\br{\pi_L}}{\pi_L} \mod \U_L^{\br{s + 1}}, $$
so $ \phi $ is a group homomorphism. Moreover
$$ \ker \phi = \cbr{\sigma \in \G_s \st \sigma\br{\pi_L} \equiv \pi_L \mod \pi_L^{s + 2}} = \G_{s + 1}. $$
If $ \pi_L' = a\pi_L $ is another uniformiser for $ a \in \U_L $, then
$$ \dfrac{\sigma\br{\pi_L'}}{\pi_L'} = \dfrac{\sigma\br{a}}{a} \cdot \dfrac{\sigma\br{\pi_L}}{\pi_L} \equiv \dfrac{\sigma\br{\pi_L}}{\pi_L} \mod \U_L^{\br{s + 1}}. $$
\end{enumerate}
\end{proof}

\lecture{16}{Friday}{13/11/20}

\begin{corollary}
Let $ L / K $ be a finite Galois extension of non-archimedean local fields. Then $ \Gal\br{L / K} $ is solvable.
\end{corollary}

\begin{proof}
By Proposition \ref{prop:15.3}, Theorem \ref{thm:15.6}, and Theorem \ref{thm:14.4}, for $ s \in \ZZ_{\ge 1} $
$$ \G_s / \G_{s + 1} \hookrightarrow
\begin{cases}
\Gal\br{\kappa_L / \kappa} & s = -1 \\
\br{\kappa_L^\times, \times} & s = 0 \\
\br{\kappa_L, +} & s \ge 1
\end{cases}.
$$
Thus $ \G_s / \G_{s + 1} $ is abelian for $ s \ge -1 $. Conclude using Theorem \ref{thm:15.6}.$ 2 $.
\end{proof}

Let $ \ch \kappa = p $. Then $ \abs{\G_0 / \G_1} $ is coprime to $ p $ and $ \abs{\G_1} = p^n $ for some $ n \ge 0 $. Thus $ \G_1 $ is the unique, since normal, Sylow $ p $-subgroup of $ \G_0 = \I_{L / K} $.

\begin{definition}
The group $ \G_1 $ is called the \textbf{wild inertia group} and $ \G_0 / \G_1 $ is the \textbf{tame quotient}. Say $ L / K $, not necessarily Galois, is \textbf{tamely ramified} if $ \ch \kappa = p \nmid \e_{L / K} $, which is if and only if $ \G_1 = \cbr{1} $ if $ L / K $ is Galois. Otherwise it is \textbf{wildly ramified}.
\end{definition}

Thus
$$
\begin{tikzcd}
L \arrow[dash]{dr}{\text{totally wildly ramified}} \arrow[dash]{ddd} & \\
& K' \arrow[dash]{d}{\text{totally tamely ramified}} \\
& K_0 \arrow[dash]{dl}{\text{unramified}} \\
K &
\end{tikzcd}.
$$

\pagebreak

\begin{example*}
Let $ K = \QQ_p $. Let $ \zeta_{p^n} $ be a primitive $ p^n $-th root of unity, and let $ L = \QQ_p\br{\zeta_{p^n}} $. Then the $ p^n $-th cyclotomic polynomial
$$ \Phi_{p^n}\br{X} = X^{p^{n - 1}\br{p - 1}} + \dots + 1 $$
is the minimal polynomial of $ \zeta_{p^n} $. By example sheet $ 3 $,
\begin{itemize}
\item $ \Phi_{p^n}\br{X} $ is irreducible,
\item $ L / \QQ_p $ is Galois and totally ramified of degree $ p^{n - 1}\br{p - 1} $, and
\item $ \pi = \zeta_{p^n} - 1 $ is a uniformiser of $ \OOO_L $, and hence $ \OOO_L = \ZZ_p\sbr{\zeta_{p^n} - 1} = \ZZ_p\sbr{\zeta_{p^n}} $.
\end{itemize}
We have an isomorphism of abelian groups
$$ \function{\br{\ZZ / p^n\ZZ}^\times}{\Gal\br{L / \QQ_p}}{m}{\sigma_m : \zeta_{p^n} \mapsto \zeta_{p^n}^m}. $$
Thus $ \sigma_m\br{\pi} - \pi = \zeta_{p^n}^m - \zeta_{p^n} = \br{\zeta_{p^n}^{m - 1} - 1}\zeta_{p^n} $. Let $ k $ be maximal such that $ p^k \mid m - 1 $. Then $ \zeta_{p^n}^{m - 1} $ is a primitive $ p^{n - k} $-th root of unity, and hence $ \zeta_{p^n}^{m - 1} - 1 $ is a uniformiser $ \pi' $ in $ L' = \QQ_p\br{\zeta_{p^n}^{m - 1}} $. Thus
$$ \v_L\br{\sigma_m\br{\pi} - \pi} = \v_L\br{\pi'} = \e_{L / L'} = \dfrac{\e_{L / \QQ_p}}{\e_{L' / \QQ_p}} = \dfrac{\sbr{L : \QQ_p}}{\sbr{L' : \QQ_p}} = \dfrac{p^{n - 1}\br{p - 1}}{p^{n - k - 1}\br{p - 1}} = p^k. $$
By Theorem \ref{thm:15.6}.$ 1 $, $ \sigma_m \in \G_i $ if and only if $ p^k \ge i + 1 $. Thus
$$ \G_i \cong
\begin{cases}
\br{\ZZ / p^n\ZZ}^\times & i \le 0 \\
\br{1 + p^k\ZZ} / p^n\ZZ & p^{k - 1} - 1 < i \le p^k - 1, \ 1 \le k \le n - 1 \\
\cbr{1} & i > p^{n - 1} - 1
\end{cases},
$$
which is reminiscent of $ \U_{\QQ_p}^{\br{k}} $.
\end{example*}

\subsection{Upper numbering of ramification groups}

$ \G_s $ behaves well with respect to taking subgroups.

\begin{proposition}
\label{prop:16.3}
Let $ L / F / K $ be finite extensions of non-archimedean local fields, and let $ L / K $ be Galois. Then for $ s \in \RR_{\ge -1} $,
$$ \G_s\br{L / F} = \G_s\br{L / K} \cap \Gal\br{L / F}. $$
\end{proposition}

\begin{proof}
$ \G_s\br{L / F} = \cbr{\sigma \in \Gal\br{L / F} \st \forall x \in \OOO_L, \ \v_L\br{\sigma\br{x} - x} \ge s + 1} = \Gal\br{L / F} \cap \G_s\br{L / K} $.
\end{proof}

However $ \G_s $ behaves badly with respect to taking quotients. Fix this by renumbering. Let $ L / K $ be finite Galois. Define a function by
$$ \function[\phi = \phi_{L / K}]{\RR_{\ge -1}}{\RR}{s}{\intd{0}{s}{\dfrac{1}{\sbr{\G_0 : \G_t}}}{t}}. $$
By convention, if $ t \in \intco{-1, 0} $, then
$$ \dfrac{1}{\sbr{\G_0 : \G_t}} = \sbr{\G_t : \G_0}. $$
We have for $ m \le s < m + 1 $ for $ m \in \ZZ_{\ge -1} $,
$$ \phi\br{s} =
\begin{cases}
s & m = -1 \\
\dfrac{1}{\abs{\G_0}}\br{\abs{\G_1} + \dots + \abs{\G_m} + \br{s - m}\abs{\G_{m + 1}}} & m \ge 0
\end{cases}.
$$
Thus
\begin{itemize}
\item $ \phi $ is continuous and piecewise linear, and
\item $ \phi $ is strictly increasing.
\end{itemize}

\pagebreak

\begin{notation*}
Let $ L / F / K $ be finite extensions of non-archimedean local fields with $ L / K $ and $ F / K $ Galois, and let $ \G = \Gal\br{L / K} $ and $ \H = \Gal\br{L / F} $, so $ \G / \H = \Gal\br{F / K} $. If $ s \in \RR_{\ge -1} $, then $ \G_s $, $ \H_s $, and $ \br{\G / \H}_s $ are the $ s $-th higher ramification groups for $ \G $, $ \H $, and $ \G / \H $ respectively.
\end{notation*}

\begin{theorem}[Herbrand's theorem]
\label{thm:16.4}
Let $ L / F / K $ as above. Then for $ s \in \RR_{\ge -1} $ we have
$$ \G_s\H / \H = \br{\G / \H}_{\phi_{L / F}\br{s}}. $$
\end{theorem}

As $ \phi_{L / K} $ is continuous and strictly increasing, we may define $ \psi_{L / K} = \phi_{L / K}^{-1} $.

\begin{definition}
Let $ L / K $ be finite Galois. The \textbf{higher ramification groups in upper numbering} is defined by
$$ \G^s\br{L / K} = \G_{\psi_{L / K}\br{s}}\br{L / K}. $$
\end{definition}

Can rephrase Theorem \ref{thm:16.4} as follows.

\begin{lemma}
\label{lem:16.6}
Let $ L / F / K $ as above.
\begin{enumerate}
\item $ \phi_{L / K} = \phi_{F / K} \circ \phi_{L / F} $.
\item $ \psi_{L / K} = \psi_{L / F} \circ \psi_{F / K} $.
\end{enumerate}
\end{lemma}

\begin{proof}
Since $ \psi = \phi^{-1} $, it suffices to prove $ 1 $. Then $ \phi_{L / K} $ and $ \phi_{F / K} \circ \phi_{L / F} $ are continuous and piecewise linear and $ \phi_{L / K}\br{0} = \br{\phi_{F / K} \circ \phi_{L / F}}\br{0} = 0 $. Thus it suffices to show derivatives are equal. Let $ r = \phi_{L / F}\br{s} $. By the fundamental theorem of calculus,
$$ \br{\phi_{F / K} \circ \phi_{L / F}}'\br{s} = \phi_{L / F}'\br{s}\phi_{F / K}'\br{r} = \dfrac{\abs{\H_s}}{\abs{\H_0}} \cdot \dfrac{\abs{\br{\G / \H}_r}}{\abs{\br{\G / \H}_0}} = \dfrac{\abs{\H_s}}{\e_{L / F}} \cdot \dfrac{\abs{\br{\G / \H}_r}}{\e_{F / K}}. $$
Theorem \ref{thm:16.4} implies $ \br{\G / \H}_r = \G_s\H / \H = \G_s / \br{\G_s \cap \H} = \G_s / \H_s $, by Proposition \ref{prop:16.3}. Thus
$$ \phi_{L / K}'\br{s} = \dfrac{\abs{\G_s}}{\abs{\G_0}} = \dfrac{\abs{\H_s}\abs{\br{\G / \H}_r}}{\e_{L / K}} = \dfrac{\abs{\H_s}}{\e_{L / F}} \cdot \dfrac{\abs{\br{\G / \H}_r}}{\e_{F / K}}. $$
\end{proof}

\begin{corollary}
\label{cor:16.7}
For $ t \in \intoc{-1, \infty} $
$$ \G^t\H / \H = \br{\G / \H}^t. $$
\end{corollary}

\begin{proof}
Let $ r = \psi_{F / K}\br{t} $. Then by Theorem \ref{thm:16.4},
$$ \br{\G / \H}^t = \br{\G / \H}_r = \G_{\psi_{L / F}\br{r}}\H / \H = \G^t\H / \H, $$
since $ \G_{\psi_{L / F}\br{r}} = \G_{\psi_{L / K}\br{t}} = \G^t $, by Lemma \ref{lem:16.6}.
\end{proof}

\subsection{Proof of Herbrand's theorem}

\lecture{17}{Monday}{16/11/20}

We introduce an auxiliary function.

\begin{definition}
Let $ L / K $ be finite Galois, and let $ \id \ne \sigma \in \Gal\br{L / K} $. Define
$$ \function[\i_{L / K}]{\Gal\br{L / K}}{\ZZ \cup \cbr{\infty}}{\sigma}{\min_{x \in \OOO_L} \v_L\br{\sigma\br{x} - x} = \max \cbr{i \in \ZZ \st \sigma \in \G_{i - 1}}}. $$
By convention, $ \i_{L / K}\br{\id} = \infty $.
\end{definition}

Note that
$$ \G_s\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \i_{L / K}\br{\sigma} \ge s + 1}. $$

\pagebreak

\begin{lemma}
\label{lem:17.2}
Let $ L / K $ be finite Galois. Let $ x \in \OOO_L $ such that $ \OOO_K\sbr{x} = \OOO_L $. Then
\begin{enumerate}
\item $ \i_{L / K}\br{\sigma} = \v_L\br{\sigma\br{x} - x} $, and
\item we have
$$ \G_s\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \v_L\br{\sigma\br{x} - x} \ge s + 1}. $$
\end{enumerate}
\end{lemma}

\begin{proof}
Let $ y \in \OOO_L $, then $ y = f\br{x} $ for $ f\br{x} \in \OOO_K\sbr{x} $. The same argument as in Theorem \ref{thm:15.6}.$ 1 $ shows that $ \sigma\br{x} - x \mid \sigma\br{y} - y $ in $ \OOO_L $, so $ \v_L\br{\sigma\br{y} - y} \ge \v_L\br{\sigma\br{x} - x} $, which implies $ 1 $ and $ 2 $.
\end{proof}

\begin{proposition}
\label{prop:17.3}
Let $ L / F / K $ as above, and let $ \sigma \in \G $. Then we have
$$ \i_{F / K}\br{\sigma\H} = \e_{L / F}^{-1}\sum_{\tau \in \H} \i_{L / K}\br{\sigma\tau}. $$
\end{proposition}

\begin{proof}
When $ \sigma \in \H $, we interpret as $ \infty = \infty $. Thus assume $ \sigma \notin \H $. Let $ \v_L $ and $ \v_F $ be the normalised valuations on $ L $ and $ F $. Let $ x \in \OOO_F $ and $ y \in \OOO_L $, such that $ \OOO_F = \OOO_K\sbr{x} $ and $ \OOO_L = \OOO_K\sbr{y} $. Define
$$ a = \sigma\br{x} - x \in \OOO_L, \qquad b = \prod_{\tau \in \H} \br{\sigma\tau\br{y} - y} \in \OOO_L. $$
Then by Lemma \ref{lem:17.2},
$$ \e_{L / F}\i_{F / K}\br{\sigma\H} = \e_{L / F}\v_F\br{\sigma\br{x} - x} = \v_L\br{\sigma\br{x} - x} = \v_L\br{a}. $$
And
$$ \sum_{\tau \in \H} \i_{L / K}\br{\sigma\tau} = \sum_{\tau \in \H} \v_L\br{\sigma\tau\br{y} - y} = \v_L\br{\prod_{\tau \in \H} \br{\sigma\tau\br{y} - y}} = \v_L\br{b}. $$
Need to show $ \v_L\br{a} = \v_L\br{b} $. We show that $ a \mid b $ and $ b \mid a $ in $ \OOO_L $.
\begin{itemize}
\item $ a \mid b $. Let $ f \in \OOO_F\sbr{X} $ be the minimal polynomial for $ y $ over $ \OOO_F $. Then $ f\br{X} = \prod_{\tau \in \H} \br{X - \tau\br{y}} $ and $ \sigma\br{f}\br{X} = \prod_{\tau \in \H} \br{X - \sigma\tau\br{y}} $. Since $ \OOO_F = \OOO_K\sbr{x} $, $ a = \sigma\br{x} - x $ divides $ \sigma\br{z} - z $ for all $ z \in \OOO_F $, by Lemma \ref{lem:17.2}. Thus $ a $ divides all coefficients of $ \sigma\br{f}\br{X} - f\br{X} $, so
$$ a \mid \sigma\br{f}\br{y} - f\br{y} = \sigma\br{f}\br{y} = \pm b. $$
\item $ b \mid a $. Let $ g \in \OOO_K\sbr{X} $ such that $ x = g\br{y} $. Then $ g\br{X} - x \in \OOO_F\sbr{X} $ has $ y $ as a root, so $ g\br{X} - x = f\br{X}h\br{X} $ for some $ h \in \OOO_F\sbr{X} $. Applying $ \sigma $ and evaluating at $ y $ gives
$$ \sigma\br{g}\br{y} - \sigma\br{x} = \sigma\br{f}\br{y}\sigma\br{h}\br{y} = \pm b\sigma\br{h}\br{y}, $$
where $ \sigma\br{h}\br{y} \in \OOO_L $. But $ \sigma\br{g}\br{y} = g\br{y} = x $ and hence $ b \mid a $.
\end{itemize}
\end{proof}

\begin{lemma}
\label{lem:17.4}
Let $ L / K $ be finite Galois, and let $ \sigma \in \G = \Gal\br{L / K} $. Then
$$ \phi_{L / K}\br{s} = -1 + \dfrac{1}{\abs{\G_0}}\sum_{\sigma \in \G} \min\br{\i_{L / K}\br{\sigma}, s + 1}, \qquad s \in \RR_{\ge -1}. $$
\end{lemma}

\begin{proof}
Both sides are piecewise linear and continuous. Let $ \theta\br{s} $ be the right hand side. Then $ \phi_{L / K}\br{-1} = -1 = \theta\br{-1} $. Thus it suffices to show $ \theta' = \phi_{L / K}' $, and
$$ \theta'\br{s} = \dfrac{1}{\abs{\G_0}} \cdot \#\cbr{\sigma \in \G \st \i_{L / K}\br{\sigma} \ge s + 1} = \dfrac{\abs{\G_s}}{\abs{\G_0}} = \phi_{L / K}'\br{s}. $$
\end{proof}

\pagebreak

\begin{proof}[Proof of Theorem \ref{thm:16.4}]
Want $ \G_s\H / \H = \br{\G / \H}_{\phi_{L / F}\br{s}} $. Define a function by
$$ \function[j]{\G / \H}{\ZZ \cup \cbr{\infty}}{\sigma\H}{\max_{\tau \in \H} \cbr{\i_{L / K}\br{\sigma\tau}}}, \qquad \sigma \in \G. $$
Then we have $ \sigma\H \in \G_s\H / \H $ if and only if $ j\br{\sigma\H} - 1 \ge s $, if and only if $ \phi_{L / F}\br{j\br{\sigma\H} - 1} \ge \phi_{L / F}\br{s} $, since $ \phi $ is strictly increasing. On the other hand, we have $ \sigma\H \in \br{\G / \H}_{\phi_{L / F}\br{s}} $ if and only if $ \i_{F / K}\br{\sigma\H} - 1 \ge \phi_{L / F}\br{s} $. Thus it suffices to show
$$ \phi_{L / F}\br{j\br{\sigma\H} - 1} = \i_{F / K}\br{\sigma\H} - 1. $$
Can assume $ \sigma \notin \H $. Upon replacing $ \sigma $ by another element in $ \sigma\H $ we may assume $ j\br{\sigma\H} = \i_{L / K}\br{\sigma} = m $, that is $ \sigma \in \G_{m - 1} \setminus \G_m $. If $ \tau \in \H_{m - 1} = \G_{m - 1} \cap \H $, then $ \sigma\tau \in \G_{m - 1} $. Then $ \i_{L / K}\br{\sigma\tau} \ge m $, so $ \i_{L / K}\br{\sigma\tau} = m $ by maximality of $ m $. On the other hand if $ \tau \notin \H_{m - 1} $, then $ \sigma\tau \notin \G_{m - 1} $, so $ \i_{L / K}\br{\sigma\tau} < m $ and $ \i_{L / K}\br{\sigma\tau} = \i_{L / K}\br{\tau} $. In either case, we have for any $ \tau \in \H $, $ \i_{L / K}\br{\sigma\tau} = \min\br{\i_{L / K}\br{\tau}, m} $. By Proposition \ref{prop:17.3}, we have
$$ \i_{F / K}\br{\sigma\H} = \e_{L / F}^{-1}\sum_{\tau \in \H} \min\br{\i_{L / K}\br{\tau}, m}. $$
But $ \i_{L / K}\br{\tau} = \i_{L / F}\br{\tau} $ and $ \e_{L / F} = \abs{\H_0} $. Thus Lemma \ref{lem:17.4} implies
$$ \i_{F / K}\br{\sigma\H} = \dfrac{1}{\abs{\H_0}}\sum_{\tau \in \H} \min\br{\i_{L / F}\br{\tau}, m} = \phi_{L / F}\br{m - 1} + 1 = \phi_{L / F}\br{j\br{\sigma\H} - 1} + 1. $$
\end{proof}

\begin{example*}
Let $ K = \QQ_p $, and let $ L = \QQ_p\br{\zeta_{p^n}} $. Then $ \G \cong \br{\ZZ / p^n\ZZ}^\times $. Let $ k \in \ZZ $ such that $ 1 \le k \le n - 1 $. For $ p^{k - 1} - 1 < s \le p^k - 1 $,
$$ \G_s \cong \cbr{m \in \br{\ZZ / p^n\ZZ}^\times \st m \equiv 1 \mod p^k}. $$
Let us compute $ \phi_{L / K} $. Since $ \G_s $ jumps at $ p^k - 1 $, $ \phi_{L / K} $ is linear on $ \intoc{p^{k - 1} - 1, p^k - 1} $. It suffices to determine $ \phi_{L / K}\br{p^k - 1} $. Claim that
$$ \phi_{L / K}\br{p^k - 1} = k, \qquad 1 \le k \le n - 1. $$
Since $ \sbr{\G_0 : \G_t} = p^{t - 1}\br{p - 1} $,
\begin{align*}
\phi\br{p^k - 1}
& = \dfrac{1}{p^0\br{p - 1}}\br{\br{p^1 - 1} - \br{p^0 - 1}} + \dots + \dfrac{1}{p^{k - 1}\br{p - 1}}\br{\br{p^k - 1} - \br{p^{k - 1} - 1}} \\
& = 1 + \dots + 1
= k.
\end{align*}
Thus
$$ \G^s \cong
\begin{cases}
\br{\ZZ / p^n\ZZ}^\times & s \le 0 \\
\br{1 + p^k\ZZ} / p^n\ZZ & k - 1 < s \le k, \ 1 \le k \le n - 1 \\
\cbr{1} & s > n - 1
\end{cases},
$$
which seems much more natural. Note that $ \phi\br{p^k - 1} $ is an integer, which is a priori not clear.
\end{example*}

\begin{definition}
We say $ i $ is a \textbf{jump} in the filtration $ \cbr{\G^s}_{s \in \RR_{\ge -1}} $ if $ \G^i \ne \G^j $ for all $ j > i $.
\end{definition}

\begin{theorem}[Hasse-Arf]
If $ \Gal\br{L / K} $ is abelian, then the jumps of the filtration $ \cbr{\G^s}_{s \in \RR_{\ge -1}} $ can only be integers.
\end{theorem}

\begin{proof}
Omit. See Serre, Local fields, Chapter $ 4 $, Section $ 7 $.
\end{proof}

\pagebreak

\section{Local class field theory}

\subsection{Infinite Galois theory}

\lecture{18}{Wednesday}{18/11/20}

Let $ L / K $ be an algebraic extension of fields.

\begin{definition}
$ L / K $ is \textbf{separable} if for every $ \alpha \in L $, the minimal polynomial $ f_\alpha\br{X} \in K\sbr{X} $ for $ \alpha $ is separable. It is \textbf{normal} if $ f_\alpha\br{X} $ splits in $ L $ for all $ \alpha \in L $. We say the extension $ L / K $ is \textbf{Galois} if it is separable and normal. In this case we write $ \Gal\br{L / K} = \Aut_K L $.
\end{definition}

If $ L / K $ is finite and Galois, the Galois correspondence is a one-to-one correspondence
$$ \function{\cbr{\text{subextensions} \ K \subseteq K' \subseteq L}}{\cbr{\text{subgroups of} \ \Gal\br{L / K}}}{K'}{\Gal\br{L / K'}}. $$
For $ L / K $ infinite, need to introduce a topology. Let $ \br{I, \le} $ be a partially ordered set. We say that $ I $ is a \textbf{directed set} if for all $ i, j \in I $ there is some $ k \in I $ such that $ i \le k $ and $ j \le k $.

\begin{example*}
\hfill
\begin{itemize}
\item Any total order, such as $ \br{\NN, \le} $.
\item $ \br{\NN_{\ge 1}, \mid} $ ordered by divisibility.
\end{itemize}
\end{example*}

\begin{definition}
Let $ \br{I, \le} $ be a directed set and $ \br{G_i}_{i \in I} $ a collection of groups together with transition maps $ \phi_{ij} : G_j \to G_i $ for $ i \le j $ such that $ \phi_{ik} = \phi_{ij} \circ \phi_{jk} $ whenever $ i \le j \le k $ and $ \phi_{ii} = \id $. We say $ \br{\br{G_i}_{i \in I}, \phi_{ij}} $ is an \textbf{inverse system}. The \textbf{inverse limit} of $ \br{\br{G_i}_{i \in I}, \phi_{ij}} $ is defined by
$$ \varprojlim_{i \in I} G_i = \cbr{\br{g_i}_{i \in I} \in \prod_{i \in I} G_i \st \phi_{ij}\br{g_j} = g_i}. $$
\end{definition}

\begin{remark*}
\hfill
\begin{itemize}
\item For $ \br{\NN, \le} $, recovers the previous definition.
\item There exist projection maps $ \psi_j : \varprojlim_{i \in I} G_i \to G_j $.
\item $ \varprojlim_{i \in I} G_i $ satisfies the universal property.
\end{itemize}
\end{remark*}

If all $ G_i $ are finite, we define the \textbf{profinite topology} on $ \varprojlim_{i \in I} G_i $ as the weakest topology such that $ \psi_j $ are continuous for all $ j \in I $.

\begin{proposition}
\label{prop:18.3}
Let $ L / K $ be Galois.
\begin{itemize}
\item The set
$$ I = \cbr{F / K \ \text{finite Galois} \st F \subseteq L} $$
is a directed set under $ \subseteq $.
\item For $ F, F' \in I $ such that $ F \subseteq F' $, there is a restriction map $ \res_{F, F'} : \Gal\br{F' / K} \to \Gal\br{F / K} $ and the natural map
$$ \Gal\br{L / K} \to \varprojlim_{F \in I} \Gal\br{F / K} $$
is an isomorphism.
\end{itemize}
\end{proposition}

\begin{proof}
Example sheet $ 4 $.
\end{proof}

Thus $ \Gal\br{L / K} $ packages information of $ \Gal\br{F / K} $ for all finite Galois subextensions, and is endowed with the profinite topology.

\pagebreak

\begin{example*}
Let $ K = \FF_q $, and let $ L = \overline{\FF_q} $ be an algebraic closure. There is a one-to-one correspondence
$$ \function{\NN_{\ge 1}}{\cbr{F / K \ \text{finite Galois}}}{n}{\FF_{q^n}}, $$
since $ \FF_{q^m} \subseteq \FF_{q^n} $ if and only if $ m \mid n $. Then
$$
\begin{tikzcd}[row sep=small]
\Fr_q \arrow[leftrightarrow]{d} & \Gal\br{\FF_{q^n} / \FF_q} \arrow[twoheadrightarrow]{r} \arrow[cong]{d} & \Gal\br{\FF_{q^m} / \FF_q} \arrow[cong]{d} & \Fr_q \arrow[leftrightarrow]{d} \\
1 & \ZZ / n\ZZ \arrow[twoheadrightarrow]{r}[swap]{\mod m} & \ZZ / m\ZZ & 1
\end{tikzcd},
$$
so
$$
\begin{array}{rcl}
\Gal\br{\overline{\FF_q} / \FF_q} & \cong & \widehat{\ZZ} = \displaystyle\varprojlim_{n \in \br{\NN_{\ge 1}, \mid}} \ZZ / n\ZZ \\
\Fr_q & \longleftrightarrow & 1 \\
\abr{\Fr_q} & \longleftrightarrow & \ZZ
\end{array}.
$$
By example sheet $ 3 $,
$$ \widehat{\ZZ} \cong \prod_{p \ \text{prime}} \ZZ_p. $$
\end{example*}

\begin{theorem}[Fundamental theorem of Galois theory]
\label{thm:18.4}
Let $ L / K $ be Galois. There is a bijection
$$ \bijection{\cbr{F / K \ \text{subextensions of} \ L / K}}{\cbr{\text{closed subgroups of} \ \Gal\br{L / K}}}{F}{\Gal\br{L / F}}{L^H}{H}. $$
Moreover, $ F / K $ is finite if and only if $ \Gal\br{L / F} $ is open, and $ F / K $ is Galois if and only if $ \Gal\br{L / F} $ is normal in $ \Gal\br{L / K} $.
\end{theorem}

\begin{proof}
Omit.
\end{proof}

\subsection{Weil groups}

Let $ K $ be a local field and $ L / K $ a separable algebraic extension.

\begin{definition}
\hfill
\begin{itemize}
\item $ L / K $ is \textbf{unramified} if $ F / K $ is unramified for all $ F / K $ finite subextensions.
\item $ L / K $ is \textbf{totally ramified} if $ F / K $ is totally ramified for all $ F / K $ finite subextensions.
\end{itemize}
\end{definition}

\begin{proposition}
Let $ L / K $ be unramified. Then $ L / K $ is Galois and
$$ \Gal\br{L / K} \cong \Gal\br{\kappa_L / \kappa}. $$
\end{proposition}

\begin{proof}
Every finite subextension $ F / K $ is unramified hence Galois, so $ L / K $ is normal and separable, hence $ L / K $ is Galois. Moreover, there exists a commutative diagram
$$
\begin{tikzcd}
\Gal\br{L / K} \arrow{r}{\res} \arrow{d}{\sim}[swap]{\ref{prop:18.3}} & \Gal\br{\kappa_L / \kappa} \arrow{d}{i} \\
\displaystyle\varprojlim_{F / K \ \text{finite}, \ F \subseteq L} \Gal\br{F / K} \arrow{r}[swap]{\sim} & \displaystyle\varprojlim_{F / K \ \text{finite}, \ F \subseteq L} \Gal\br{\kappa_F / \kappa}
\end{tikzcd}.
$$
By Theorem \ref{thm:14.4} and Proposition \ref{prop:18.3},
$$ \varprojlim_{F / K \ \text{finite}, \ F \subseteq L} \Gal\br{\kappa_F / \kappa} \cong \varprojlim_{\lambda / \kappa \ \text{finite}, \ \lambda \subseteq \kappa_L} \Gal\br{\lambda / \kappa} \cong \Gal\br{\kappa_L / \kappa}, $$
so $ i $ is an isomorphism.
\end{proof}

\pagebreak

By example sheet $ 3 $, if $ L_1 / K $ and $ L_2 / K $ are finite unramified, then $ L_1L_2 / K $ is unramified. Thus for any $ L / K $, there exists a maximal unramified subextension $ K_0 / K $. There is a surjection
$$ \res : \Gal\br{L / K} \to \Gal\br{K_0 / K} \cong \Gal\br{\kappa_L / \kappa}, $$
and we write $ \I_{L / K} $ for the kernel of $ \res $, the \textbf{inertia subgroup}. We let $ \Fr_{\kappa_L / \kappa} \in \Gal\br{\kappa_L / \kappa} $ be the Frobenius $ x \mapsto x^{\abs{\kappa}} $, and we let $ \abr{\Fr_{\kappa_L / \kappa}} $ be the subgroup generated by $ \Fr_{\kappa_L / \kappa} $.

\begin{definition}
Let $ L / K $ be Galois. The \textbf{Weil group} $ \W\br{L / K} $ is the subgroup of $ \Gal\br{L / K} $ which maps to $ \abr{\Fr_{\kappa_L / \kappa}} \subseteq \Gal\br{\kappa_L / \kappa} $, that is $ \res^{-1}\br{\abr{\Fr_{\kappa_L / \kappa}}} $.
\end{definition}

\begin{remark*}
If $ \kappa_L / \kappa $ is finite $ \W\br{L / K} = \Gal\br{L / K} $. There exists a commutative diagram
$$
\begin{tikzcd}
0 \arrow{r} & \I_{L / K} \arrow{r} \arrow[cong]{d} & \W\br{L / K} \arrow{r} \arrow[hookrightarrow]{d} & \abr{\Fr_{\kappa_L / \kappa}} \arrow{r} \arrow[hookrightarrow]{d} & 0 \\
0 \arrow{r} & \I_{L / K} \arrow{r} & \Gal\br{L / K} \arrow{r} & \Gal\br{\kappa_L / \kappa} \arrow{r} & 0
\end{tikzcd},
$$
with exact rows. We endow $ \W\br{L / K} $ with the weakest topology such that $ \I_{L / K} $ is an open subgroup of $ \W\br{L / K} $ equipped with its subspace topology as $ \I_{L / K} \subseteq \Gal\br{L / K} $. A warning is if $ \kappa_L / \kappa $ is infinite, this is not the subspace topology on $ \W\br{L / K} \subseteq \Gal\br{L / K} $.
\end{remark*}

\begin{proposition}
\label{prop:18.8}
Let $ L / K $ be a Galois extension.
\begin{enumerate}
\item $ \W\br{L / K} $ is dense in $ \Gal\br{L / K} $.
\item If $ F / K $ is a finite subextension of $ L / K $, then $ \W\br{L / F} = \W\br{L / K} \cap \Gal\br{L / F} $.
\item If $ F / K $ is a finite Galois subextension, then $ \W\br{L / K} / \W\br{L / F} \cong \Gal\br{F / K} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item $ \W\br{L / K} $ is dense in $ \Gal\br{L / K} $ if and only if for all $ F / K $ finite Galois subextensions, $ \W\br{L / K} $ intersects every coset of $ \Gal\br{L / F} $, if and only if for all $ F / K $ finite Galois, $ \W\br{L / K} \twoheadrightarrow \Gal\br{F / K} $. We have a diagram
$$
\begin{tikzcd}
0 \arrow{r} & \I_{L / K} \arrow{r} \arrow{d}{a} & \W\br{L / K} \arrow{r} \arrow{d}{b} & \abr{\Fr_{\kappa_L / \kappa}} \arrow{r} \arrow{d}{c} & 0 \\
0 \arrow{r} & \I_{F / K} \arrow{r} & \Gal\br{F / K} \arrow{r} & \Gal\br{\kappa_F / \kappa} \arrow{r} & 0
\end{tikzcd}.
$$
By example sheet $ 4 $, $ a $ is surjective. Since $ \Gal\br{\kappa_F / \kappa} $ is generated by $ \Fr_{\kappa_F / \kappa} $, $ c $ is surjective. By a diagram chase, $ b $ is surjective.
\item Let $ F / K $ be finite. There exists a diagram
$$
\begin{tikzcd}
\Gal\br{L / K} \arrow[twoheadrightarrow]{r} & \Gal\br{\kappa_L / \kappa} & \abr{\Fr_{\kappa_L / \kappa}} \arrow[subset]{l} \\
\Gal\br{L / F} \arrow[hookrightarrow]{u} \arrow[twoheadrightarrow]{r} & \Gal\br{\kappa_L / \kappa_F} \arrow[hookrightarrow]{u} & \abr{\Fr_{\kappa_L / \kappa_F}} \arrow[hookrightarrow]{u} \arrow[subset]{l}
\end{tikzcd}.
$$
Hence for $ \sigma \in \Gal\br{L / F} $, $ \sigma \in \W\br{L / F} $ if and only if $ \eval{\sigma}_{\kappa_L} \in \abr{\Fr_{\kappa_L / \kappa_F}} $, if and only if $ \eval{\sigma}_{\kappa_L} \in \abr{\Fr_{\kappa_L / \kappa}} $ using $ \Gal\br{\kappa_L / \kappa_F} \cap \abr{\Fr_{\kappa_L / \kappa}} = \abr{\Fr_{\kappa_L / \kappa_F}} $, if and only if $ \sigma \in \W\br{L / K} $.
\item
\begin{align*}
\W\br{L / K} / \W\br{L / F}
& = \W\br{L / K} / \br{\W\br{L / K} \cap \Gal\br{L / F}} & \text{by} \ 2 \\
& \cong \W\br{L / K}\Gal\br{L / F} / \Gal\br{L / F} \\
& = \Gal\br{L / K} / \Gal\br{L / F} & \text{by} \ 1 \\
& \cong \Gal\br{F / K}.
\end{align*}
\end{enumerate}
\end{proof}

\pagebreak

\subsection{Statements of local class field theory}

\lecture{19}{Friday}{20/11/20}

Let $ K $ be a non-archimedean local field.

\begin{definition}
An extension $ L / K $ is \textbf{abelian} if it is Galois and $ \Gal\br{L / K} $ is an abelian group.
\end{definition}

\begin{fact*}
Let $ L_1 / K $ and $ L_2 / K $ be abelian.
\begin{enumerate}
\item $ L_1L_2 / K $ is abelian.
\item If $ L_1 \cap L_2 = K $, there is a canonical isomorphism
$$ \Gal\br{L_1L_2 / K} \xrightarrow{\sim} \Gal\br{L_1 / K} \times \Gal\br{L_2 / K}. $$
\end{enumerate}
By fact $ 1 $, there exists a maximal abelian extension $ K^{\ab} $ of $ K $.
\end{fact*}

\begin{example*}
Let $ K^{\ur} $ denote the maximal unramified extension of $ K $ inside $ K^{\sep} $. If $ \abs{\kappa} = q $, then
$$ K^{\ur} = \bigcup_{m = 1}^\infty K\br{\zeta_{q^m - 1}}, \qquad \kappa_{K^{\ur}} \cong \overline{\FF_q}, \qquad \Gal\br{K^{\ur} / K} \cong \Gal\br{\overline{\FF_q} / \FF_q} \cong \widehat{\ZZ}, $$
so $ K^{\ur} $ is abelian and hence $ K^{\ur} \subseteq K^{\ab} $. There exists an exact sequence
$$ 0 \to \I_{K^{\ab} / K} \to \W\br{K^{\ab} / K} \to \ZZ \to 0. $$
\end{example*}

For $ L / K $ unramified, let $ \Fr_{L / K} \in \Gal\br{L / K} $ correspond to $ \Fr_{\kappa_L / \kappa} \in \Gal\br{\kappa_L / \kappa} $.

\begin{theorem}[Local Artin reciprocity]
\hfill
\begin{itemize}
\item There exists a unique topological isomorphism, so an isomorphism of groups and a homeomorphism,
$$ \Art_K : K^\times \to \W\br{K^{\ab} / K}, $$
called the \textbf{Artin reciprocity map}, satisfying the following properties.
\begin{itemize}
\item For any uniformiser $ \pi \in K $,
$$ \eval{\Art_K\br{\pi}}_{K^{\ur}} = \Fr_{K^{\ur} / K}. $$
\item For each finite subextension $ L / K $ in $ K^{\ab} / K $,
$$ \eval{\Art_K\br{\N_{L / K}\br{L^\times}}}_L = \id. $$
\end{itemize}
\item Let $ L / K $ be finite abelian. Then $ \Art_K $ induces an isomorphism
$$ K^\times / \N_{L / K}\br{L^\times} \cong \W\br{K^{\ab} / K} / \W\br{K^{\ab} / L} \cong \Gal\br{L / K}. $$
\end{itemize}
\end{theorem}

\begin{remark*}
$ \Fr_{K^{\ur} / K} $ lifts $ x \mapsto x^q $ in $ \Gal\br{\overline{\FF_q} / \FF_q} $. This is the \textbf{arithmetic Frobenius}, and $ \Fr_{K^{\ur} / K}^{-1} $ is called the \textbf{geometric Frobenius}. There is another normalisation of $ \Art_K $ with
$$ \eval{\Art_K\br{\pi}}_{K^{\ur}} = \Fr_{K^{\ur} / K}^{-1}. $$
\end{remark*}

\begin{definition}
Let $ L / K $ be Galois. For $ s \in \RR_{\ge -1} $ we define
$$ \G^s\br{L / K} = \cbr{\sigma \in \Gal\br{L / K} \st \forall F / K \ \text{finite Galois subextension}, \ \eval{\sigma}_F \in \G^s\br{F / K}}. $$
\end{definition}

By Corollary \ref{cor:16.7}, $ \G^s\br{L / K} $ is well-defined.

\pagebreak

\begin{proposition}
The following are properties of the Artin reciprocity map.
\begin{itemize}
\item (Existence theorem) For $ H \subseteq K^\times $ an open finite index subgroup, there is a finite abelian extension $ L / K $ such that $ \N_{L / K}\br{L^\times} = H $. In particular, $ \Art_K $ induces an inclusion reversing isomorphism of posets
$$ \bijection{\cbr{\text{open finite index subgroups of} \ K^\times}}{\cbr{\text{finite abelian extensions} \ L / K}}{H}{\br{K^{\ab}}^{\Art_K\br{H}}}{\N_{L / K}\br{L^\times}}{L / K}. $$
\item (Norm functoriality) Let $ L / K $ be a finite separable extension. There is a commutative diagram
$$
\begin{tikzcd}
L^\times \arrow{r}{\Art_L} \arrow{d}[swap]{\N_{L / K}} & \W\br{L^{\ab} / L} \arrow{d}{\res} \\
K^\times \arrow{r}[swap]{\Art_K} & \W\br{K^{\ab} / K}
\end{tikzcd}.
$$
\item (Compatibility with higher ramification groups) Let $ s \in \ZZ_{\ge 0} $. Then
$$ \Art_K\br{\U_K^{\br{s}}} = \G^s\br{K^{\ab} / K}. $$
\end{itemize}
\end{proposition}

Note that
$$ \G^s\br{K^{\ab} / K} \subseteq \I_{K^{\ab} / K} \subseteq \W\br{K^{\ab} / K}, \qquad s \ge 0. $$

\subsection{Construction of \texorpdfstring{$ \Art_{\QQ_p} $}{the Artin map}}

Recall that
$$ \QQ_p^{\ur} = \bigcup_{m = 1}^\infty \QQ_p\br{\zeta_{p^m - 1}} = \bigcup_{p \nmid m} \QQ_p\br{\zeta_m}. $$
By example sheet $ 3 $, $ \QQ_p\br{\zeta_{p^n}} / \QQ_p $ is totally ramified of degree $ p^{n - 1}\br{p - 1} $, with $ \theta_n : \Gal\br{\QQ_p\br{\zeta_{p^n}}} \cong \br{\ZZ / p^n\ZZ}^\times $. For $ n \ge m \ge 1 $, there is a diagram
$$
\begin{tikzcd}
\Gal\br{\QQ_p\br{\zeta_{p^n}} / \QQ_p} \arrow[twoheadrightarrow]{r} \arrow{d}{\sim}[swap]{\theta_n} & \Gal\br{\QQ_p\br{\zeta_{p^m}} / \QQ_p} \arrow{d}{\theta_n}[swap]{\sim} \\
\br{\ZZ / p^n\ZZ}^\times \arrow[twoheadrightarrow]{r}[swap]{\mod m} & \br{\ZZ / p^m\ZZ}^\times
\end{tikzcd}.
$$
Set
$$ \QQ_p\br{\zeta_{p^\infty}} = \bigcup_{n = 1}^\infty \QQ_p\br{\zeta_{p^n}}. $$
Then $ \QQ_p\br{\zeta_{p^\infty}} / \QQ_p $ is Galois and we have
$$ \theta : \Gal\br{\QQ_p\br{\zeta_{p^\infty}} / \QQ_p} \xrightarrow{\sim} \varprojlim_{n \ge 1} \br{\ZZ / p^n\ZZ}^\times \cong \ZZ_p^\times. $$
We have $ \QQ_p\br{\zeta_{p^\infty}} \cap \QQ_p^{\ur} = \QQ_p $, since $ \QQ_p\br{\zeta_{p^\infty}} $ is totally ramified and $ \QQ_p^{\ur} $ is unramified. It follows that there is an isomorphism
$$ \Gal\br{\QQ_p\br{\zeta_{p^\infty}}\QQ_p^{\ur} / \QQ_p} \cong \widehat{\ZZ} \times \ZZ_p^\times. $$

\begin{theorem}[Local Kronecker-Weber]
\label{thm:19.5}
$$ \QQ_p^{\ab} = \QQ_p^{\ur}\QQ_p\br{\zeta_{p^\infty}}. $$
\end{theorem}

\begin{proof}
Later.
\end{proof}

\pagebreak

The Artin map can now be constructed as follows. We have an isomorphism
$$ \function{\ZZ \times \ZZ_p^\times}{\QQ_p^\times}{\br{n, u}}{p^nu}. $$
Then
$$ \Art_{\QQ_p}\br{p^nu} = \br{\Fr_{\QQ_p^{\ur} / \QQ_p}^n, \theta^{-1}\br{u}} \in \Gal\br{\QQ_p^{\ur} / \QQ_p} \times \Gal\br{\QQ_p\br{\zeta_{p^\infty}} / \QQ_p}. $$

\begin{remark*}
The definition of $ \Art_{\QQ_p} $ involves the choice of a totally ramified $ \QQ_p\br{\zeta_{p^\infty}} $, and there is no maximal totally ramified extension of $ \QQ_p $, such as by example sheet $ 3 $ question $ 6 $(b), and the choice of a uniformiser $ p $, which determines the isomorphism $ \QQ_p^\times \cong \ZZ \times \ZZ_p^\times $. These choices are related, since the choices cancel out so $ \Art_{\QQ_p} $ is in fact canonical.
\end{remark*}

Thus $ \Art_{\QQ_p} $ was constructed by constructing a totally ramified extension $ \QQ_p\br{\zeta_{p^n}} $ with
$$ \theta_n : \Gal\br{\QQ_p\br{\zeta_{p^n}} / \QQ_p} \xrightarrow{\sim} \br{\ZZ / p^n\ZZ}^\times \cong \U_{\QQ_p}^{\br{0}} / \U_{\QQ_p}^{\br{n}}. $$
In general, let $ K $ be a local field, and let $ \pi $ be a uniformiser of $ K $. We construct for $ n \ge 1 $ a totally ramified Galois extension $ K_{\pi, n} / K $ satisfying
\begin{enumerate}
\item $ K \subseteq K_{\pi, 1} \subseteq K_{\pi, 2} \subseteq \dots $,
\item for $ n \ge m \ge 1 $ there exists a diagram
$$
\begin{tikzcd}
\Gal\br{K_{\pi, n} / K} \arrow[twoheadrightarrow]{r} \arrow{d}{\sim}[swap]{\psi_n} & \Gal\br{K_{\pi, m} / K} \arrow{d}{\psi_m}[swap]{\sim} \\
\OOO_K^\times / \U_K^{\br{n}} \arrow[twoheadrightarrow]{r}[swap]{\mod m} & \OOO_K^\times / \U_K^{\br{m}}
\end{tikzcd},
$$
\item setting $ K_{\pi, \infty} = \bigcup_{n = 1}^\infty K_{\pi, n} $, we have
$$ K^{\ab} = K^{\ur}K_{\pi, \infty}. $$
\end{enumerate}
Since $ \OOO_K^\times = \U_K^{\br{0}} \cong \varprojlim_n \OOO_K^\times / \U_K^{\br{n}} $, by $ 2 $, there exists an isomorphism
$$ \psi : \Gal\br{K_{\pi, \infty} / K} \cong \OOO_K^\times. $$
Can define $ \Art_K $ by
$$ \function{K^\times \cong \ZZ \times \OOO_K^\times}{\Gal\br{K^{\ur} / K} \times \Gal\br{K_{\pi, \infty} / K} \cong \Gal\br{K^{\ab} / K}}{\pi^nu \leftrightarrow \br{n, u}}{\br{\Fr_{K^{\ur} / K}^n, \psi^{-1}\br{u}}}. $$
Thus
$$
\begin{tikzcd}
& \QQ_p^{\ab} \arrow[dash]{dl} \arrow[dash]{dr} & \\
\QQ_p^{\ur} \arrow[dash]{dr}[swap]{\widehat{\ZZ}} & & \QQ_p\br{\zeta_{p^\infty}} \arrow[dash]{dl}{\ZZ_p^\times} \\
& \QQ_p &
\end{tikzcd}
\qquad \implies \qquad
\begin{tikzcd}
& K^{\ab} \arrow[dash]{dl} \arrow[dash]{dr} & \\
K^{\ur} \arrow[dash]{dr}[swap]{\widehat{\ZZ}} & & K_{\pi, \infty} \arrow[dash]{dl}{\OOO_K^\times} \\
& K &
\end{tikzcd}.
$$
The goal is to construct $ K_{\pi, n} $.

\pagebreak

\section{Lubin-Tate theory}

\subsection{Formal group laws}

\lecture{20}{Monday}{23/11/20}

If $ R $ is a ring,
$$ R\sbr{\sbr{X_1, \dots, X_n}} = \cbr{\sum_{k_1, \dots, k_n \ge 0} a_{k_1 \dots k_n}X_1^{k_1} \dots X_n^{k_n} \st a_{k_1 \dots k_n} \in R} $$
is the ring of formal power series in $ n $ variables over $ R $.

\begin{definition}
A \textbf{one-dimensional commutative formal group law} over $ R $ is a power series $ F\br{X, Y} \in R\sbr{\sbr{X, Y}} $ satisfying
\begin{itemize}
\item $ F\br{X, Y} \equiv X + Y \mod \deg 2 $,
\item associativity $ F\br{X, F\br{Y, Z}} = F\br{F\br{X, Y}, Z} $, and
\item commutativity $ F\br{X, Y} = F\br{Y, X} $.
\end{itemize}
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item $ \widehat{\GG_\a}\br{X, Y} = X + Y $ is the \textbf{formal additive group}.
\item $ \widehat{\GG_\m}\br{X, Y} = X + Y + XY $ is the \textbf{formal multiplicative group}.
\end{itemize}
\end{example*}

\begin{lemma}
Let $ R $ be a ring, and let $ F $ be a formal group law over $ R $. Then
\begin{itemize}
\item $ F\br{X, 0} = X $ and $ F\br{0, Y} = Y $, and
\item there exists a unique power series $ \iota\br{X} \in XR\sbr{\sbr{X}} $ such that $ F\br{X, \iota\br{X}} = 0 $.
\end{itemize}
\end{lemma}

\begin{proof}
Example sheet $ 4 $.
\end{proof}

Let $ K $ be a complete non-archimedean valued field, and $ F $ a formal group law over $ \OOO_K $. Then $ F\br{x, y} $ converges for all $ x, y \in \mmm $ to an element in $ \mmm $. Defining $ x \cdot_F y = F\br{x, y} $, this turns $ \br{\mmm, \cdot_F} $ into a commutative group.

\begin{example*}
If $ \widehat{\GG_\m} $ is over $ \ZZ_p $, then $ x \cdot_{\widehat{\GG_\m}} y = x + y + xy $, and there is an isomorphism
$$ \function{\br{p\ZZ_p, \cdot_{\widehat{\GG_\m}}}}{\br{1 + p\ZZ_p, \times}}{x}{1 + x}. $$
\end{example*}

\begin{definition}
Let $ F $ and $ G $ be formal group laws over $ R $. A \textbf{homomorphism} $ f : F \to G $ is an element $ f\br{X} \in XR\sbr{\sbr{X}} $ such that
$$ f\br{F\br{X, Y}} = G\br{f\br{X}, f\br{Y}}. $$
\end{definition}

We define $ \End_R F $ to be the set of homomorphisms $ f : F \to F $.

\begin{lemma}
$ \End_R F $ is a ring with addition given by $ \br{f +_F g}\br{X} = F\br{f\br{X}, g\br{X}} $ and multiplication is given by composition.
\end{lemma}

\begin{proof}
Let $ f, g \in \End_R F $. Using associativity and commutativity,
\begin{align*}
\br{f +_F g}\br{F\br{X, Y}}
& = F\br{f\br{F\br{X, Y}}, g\br{F\br{X, Y}}}
= F\br{F\br{f\br{X}, f\br{Y}}, F\br{g\br{X}, g\br{Y}}} \\
& = F\br{F\br{f\br{X}, g\br{X}}, F\br{f\br{Y}, g\br{Y}}}
= F\br{\br{f +_F g}\br{X}, \br{f +_F g}\br{Y}},
\end{align*}
so $ f +_F g \in \End_R F $, and $ f \circ g \circ F = f \circ F \circ g = F \circ f \circ g $, so $ f \circ g \in \End_R F $. The ring axioms are an exercise. \footnote{Exercise}
\end{proof}

\pagebreak

\subsection{Lubin-Tate formal group laws}

Let $ K $ be a non-archimedean local field, let $ \pi $ be a uniformiser, and let $ \abs{\kappa} = q $.

\begin{definition}
A \textbf{formal $ \OOO_K $-module} is a formal group law $ F\br{X, Y} \in \OOO_K\sbr{\sbr{X, Y}} $ together with a ring homomorphism $ \sbr{\cdot}_F : \OOO_K \to \End_{\OOO_K} F $ such that
$$ \sbr{a}_F\br{X} \equiv aX \mod X^2, \qquad a \in \OOO_K. $$
\end{definition}

\begin{definition}
A \textbf{Lubin-Tate series} for $ \pi $ is a power series $ f\br{X} \in \OOO_K\sbr{\sbr{X}} $ such that
\begin{itemize}
\item $ f\br{X} \equiv \pi X \mod X^2 $, and
\item $ f\br{X} \equiv X^q \mod \pi $.
\end{itemize}
\end{definition}

\begin{example*}
If $ K = \QQ_p $, then $ f\br{X} = \br{X + 1}^p - 1 $ is a Lubin-Tate series for $ p $.
\end{example*}

\begin{theorem}
\label{thm:20.7}
Let $ f\br{X} $ be a Lubin-Tate series for $ \pi $.
\begin{enumerate}
\item There exists a unique formal group law $ \F_f $ over $ \OOO_K $ such that $ f \in \End_{\OOO_K} \F_f $.
\item There is a ring homomorphism $ \sbr{\cdot}_{\F_f} : \OOO_K \to \End_{\OOO_K} \F_f $ satisfying $ \sbr{\pi}_{\F_f}\br{X} = f\br{X} $ and which endows $ \F_f $ with the structure of a formal $ \OOO_K $-module over $ \OOO_K $.
\item If $ g\br{X} $ is another Lubin-Tate series, $ \F_f \cong \F_g $ as formal $ \OOO_K $-modules. Here an isomorphism $ \theta : F \to G $ of formal $ \OOO_K $-modules is an isomorphism of formal groups such that $ \theta \circ \sbr{a}_F = \sbr{a}_G \circ \theta $ for all $ a \in \OOO_K $.
\end{enumerate}
\end{theorem}

Then $ \F_f $ is the \textbf{Lubin-Tate formal group law} for $ \pi $, which only depends on $ \pi $ up to isomorphism.

\begin{example*}
If $ K = \QQ_p $ and $ f\br{X} = \br{X + 1}^p - 1 $, then the Lubin-Tate formal group law $ \F_f $ associated to $ f $ is $ \widehat{\GG_\m} $. To see this it suffices to show $ f \circ \widehat{\GG_\m} = \widehat{\GG_\m} \circ f $, and
$$ f\br{\widehat{\GG_\m}\br{X, Y}} = \br{1 + X}^p\br{1 + Y}^p - 1 = \widehat{\GG_\m}\br{f\br{X}, f\br{Y}}. $$
\end{example*}

\begin{lemma}[Key lemma]
\label{lem:20.8}
Let $ f\br{X} $ and $ g\br{X} $ be Lubin-Tate series for $ \pi $, and let $ L\br{X_1, \dots, X_n} = \sum_{i = 1}^n a_iX_i $ for $ a_i \in \OOO_K $. There is a unique power series $ F\br{X_1, \dots, X_n} \in \OOO_K\sbr{\sbr{X_1, \dots, X_n}} $ such that
\begin{enumerate}
\item $ F\br{X_1, \dots, X_n} \equiv L\br{X_1, \dots, X_n} \mod \deg 2 $,
\item $ f\br{F\br{X_1, \dots, X_n}} = F\br{g\br{X_1}, \dots, g\br{X_n}} $.
\end{enumerate}
\end{lemma}

\begin{proof}
We show by induction there are unique polynomials $ F_m \in \OOO_K\sbr{X_1, \dots, X_n} $ of total degree at most $ m $ such that
\begin{enumerate}[label=\arabic*$ ' $.]
\item $ f\br{F_m\br{X_1, \dots, X_n}} \equiv F_m\br{g\br{X_1}, \dots, g\br{X_n}} \mod \deg \br{m + 1} $,
\item $ F_m\br{X_1, \dots, X_n} \equiv L\br{X_1, \dots, X_n} \mod \deg 2 $, and
\item $ F_m \equiv F_{m + 1} \mod \deg \br{m + 1} $.
\end{enumerate}
For $ m = 1 $, take $ F_1 = L $. Then
$$ f\br{F_1\br{X_1, \dots, X_n}} \equiv \pi L\br{X_1, \dots, X_n} \equiv F_1\br{g\br{X_1}, \dots, g\br{X_n}} \mod \deg 2. $$
Suppose $ F_m $ are constructed for $ m \ge 1 $. Set $ F_{m + 1} = F_m + h $ where $ h \in \OOO_K\sbr{X_1, \dots, X_n} $ is homogeneous of degree $ m + 1 $. We have
$$ f \circ \br{F_m + h} \equiv f \circ F_m + \pi h \mod \deg \br{m + 2}, $$
since $ f\br{X} \equiv \pi X \mod X^2 $, such as using $ f\br{X + Y} = f\br{X} + f'\br{X}Y + \dots $. Similarly,
$$ \br{F_m + h} \circ g \equiv F_m \circ g + h\br{\pi X_1, \dots, \pi X_n} \equiv F_m \circ g + \pi^{m + 1}h \mod \deg \br{m + 2}, $$
since $ g\br{X} \equiv \pi X \mod X^2 $. Thus $ 1' $, $ 2' $, and $ 3' $ are satisfied for $ h $ if and only if
$$ f \circ F_m - F_m \circ g \equiv \br{\pi - \pi^{m + 1}}h \mod \deg \br{m + 2}. $$

\pagebreak

But $ f\br{X} \equiv g\br{X} \equiv X^q \mod \pi $. Thus
$$ f \circ F_m - F_m \circ g \equiv F_m\br{X_1, \dots, X_n}^q - F_m\br{X_1^q, \dots, X_n^q} \equiv 0 \mod \pi. $$
Thus $ f \circ F_m - F_m \circ g \in \pi\OOO_K\sbr{X_1, \dots, X_n} $. Let $ r\br{X_1, \dots, X_n} $ be the degree $ m + 1 $ terms in $ f \circ F_m - F_m \circ g $. Then set
$$ h = \dfrac{1}{\pi\br{1 - \pi^m}}r \in \OOO_K\sbr{X_1, \dots, X_n}, $$
so that $ F_{m + 1} $ satisfies $ 1' $, $ 2' $, and $ 3' $. Unique since $ h $ is determined by property $ 1' $. Set $ F = \lim_{m \to \infty} F_m $, then $ F\br{X_1, \dots, X_n} $ satisfies $ 1 $ and $ 2 $. Uniqueness of $ F $ follows from uniqueness of $ F_m $.
\end{proof}

\lecture{21}{Wednesday}{25/11/20}

\begin{proof}[Proof of Theorem \ref{thm:20.7}]
\hfill
\begin{enumerate}
\item By Lemma \ref{lem:20.8}, there exists a unique $ \F_f\br{X, Y} \in \OOO_K\sbr{\sbr{X, Y}} $ such that
\begin{itemize}
\item $ \F_f\br{X, Y} \equiv X + Y \mod \deg 2 $, and
\item $ f\br{\F_f\br{X, Y}} = \F_f\br{f\br{X}, f\br{Y}} $.
\end{itemize}
Then $ \F_f $ is a formal group law.
\begin{itemize}
\item Associativity, since
$$ \F_f\br{X, \F_f\br{Y, Z}} \equiv X + Y + Z \equiv \F_f\br{\F_f\br{X, Y}, Z} \mod \deg 2, $$
and
$$ f\br{\F_f\br{X, \F_f\br{Y, Z}}} = \F_f\br{f\br{X}, f\br{\F_f\br{Y, Z}}} = \F_f\br{f\br{X}, \F_f\br{f\br{Y}, f\br{Z}}}, $$
and similarly
$$ f\br{\F_f\br{\F_f\br{X, Y}, Z}} = \F_f\br{\F_f\br{f\br{X}, f\br{Y}}, f\br{Z}}, $$
thus $ \F_f\br{X, \F_f\br{Y, Z}} = \F_f\br{\F_f\br{X, Y}, Z} $ by uniqueness in Lemma \ref{lem:20.8}.
\item Commutativity is similar, by uniqueness.
\item $ F\br{X, 0} = X $ and $ F\br{0, Y} = Y $, by uniqueness.
\end{itemize}
\item By Lemma \ref{lem:20.8}, for $ a \in \OOO_K $, there exists $ \sbr{a}_{\F_f} \in \OOO_K\sbr{\sbr{X}} $ such that $ \sbr{a}_{\F_f}\br{X} \equiv aX \mod X^2 $ and $ f \circ \sbr{a}_{\F_f} = \sbr{a}_{\F_f} \circ f $. Then,
$$ \sbr{a}_f \circ \F_f \equiv aX + aY \equiv \F_f \circ \sbr{a}_{\F_f} \mod \deg 2, $$
and
$$ f \circ \sbr{a}_{\F_f} \circ \F_f = \sbr{a}_{\F_f} \circ f \circ \F_f = \sbr{a}_{\F_f} \circ \F_f \circ f, \qquad f \circ \F_f \circ \sbr{a}_{\F_f} = \F_f \circ f \circ \sbr{a}_{\F_f} = \F_f \circ \sbr{a}_{\F_f} \circ f, $$
so $ \sbr{a}_{\F_f} \circ \F_f = \F_f \circ \sbr{a}_{\F_f} $, that is $ \sbr{a}_{\F_f} \in \End_{\OOO_K} \F_f $. We have
\begin{itemize}
\item the map $ \sbr{\cdot}_{\F_f} : \OOO_K \to \End_{\OOO_K} \F_f $ is a ring homomorphism, by uniqueness,
\item $ \F_f $ is a formal $ \OOO_K $-module, and
\item $ \sbr{\pi}_{\F_f} = f $, by uniqueness.
\end{itemize}
\item If $ g $ is another Lubin-Tate series for $ \pi $, let $ \theta \in \OOO_K\sbr{\sbr{X}} $ be the unique power series such that $ f\br{\theta\br{X}} = \theta\br{g\br{X}} $ and $ \theta\br{X} \equiv X \mod X^2 $. Then $ \theta \circ \F_g = \F_f \circ \theta $, by uniqueness. Thus $ \theta \in \Hom_{\OOO_K}\br{\F_g, \F_f} $. Reversing the roles of $ f $ and $ g $, obtain $ \theta^{-1} \in \OOO_K\sbr{\sbr{X}} $ such that $ \theta^{-1} \in \Hom_{\OOO_K}\br{\F_f, \F_g} $ with $ g\br{\theta^{-1}\br{X}} = \theta^{-1}\br{f\br{X}} $. Then $ \theta^{-1}\br{\theta\br{X}} = X $ and $ \theta\br{\theta^{-1}\br{X}} = X $, by uniqueness, so $ \theta $ is an isomorphism. By uniqueness, $ \theta\br{\sbr{a}_{\F_g}\br{X}} = \sbr{a}_{\F_f}\br{\theta\br{X}} $ for all $ a \in \OOO_K $ and hence $ \theta $ is an isomorphism of formal $ \OOO_K $-modules.
\end{enumerate}
\end{proof}

\pagebreak

\subsection{Lubin-Tate extensions}

Let $ \overline{K} $ be the algebraic closure of $ K $, and let $ \overline{\mmm} \subseteq \OOO_{\overline{K}} $ be the maximal ideal.

\begin{lemma}
Let $ F $ be a formal $ \OOO_K $-module. Then $ \overline{\mmm} $ becomes a genuine $ \OOO_K $-module with operations
$$ x +_F y = F\br{x, y}, \qquad a \cdot_F x = \sbr{a}_F\br{x}, \qquad x, y \in \overline{\mmm}, \qquad a \in \OOO_K. $$
\end{lemma}

\begin{proof}
Note that $ \overline{K} $ is not complete. If $ x \in \overline{\mmm} $, then $ x \in \mmm_L $ for some $ L / K $ finite. Since $ \sbr{a}_F \in \OOO_K\sbr{\sbr{X}} $, $ \sbr{a}_F\br{x} $ converges in $ L $, and since $ \mmm_L $ is closed, $ \sbr{a}_F\br{x} \in \mmm_L \subseteq \overline{\mmm} $. Similarly $ x +_F y \in \overline{\mmm} $. The module structure follows from definitions.
\end{proof}

\begin{definition}
Let $ f $ be a Lubin-Tate series for $ \pi $ and $ \F_f $ the associated formal $ \OOO_K $-module. The \textbf{$ \pi^n $-torsion group} is defined to be
$$ \mu_{f, n} = \cbr{x \in \overline{\mmm} \st \pi^n \cdot_{\F_f} x = 0} = \cbr{x \in \overline{\mmm} \st f_n\br{x} = \br{f \circ \dots \circ f}\br{x} = 0}. $$
\end{definition}

\begin{fact*}
\hfill
\begin{itemize}
\item $ \mu_{f, n} $ is an $ \OOO_K $-module.
\item $ \mu_{f, n} \subseteq \mu_{f, n + 1} $ for all $ n $.
\end{itemize}
\end{fact*}

\begin{example*}
If $ K = \QQ_p $ and $ f\br{X} = \br{X + 1}^p - 1 $ is a Lubin-Tate series for $ p $, then
$$ \sbr{p^n}_{\F_f}\br{X} = \br{f \circ \dots \circ f}\br{X} = \br{X + 1}^{p^n} - 1, $$
such as by induction on $ n $. Thus
$$ \mu_{f, n} = \cbr{\zeta_{p^n}^i - 1 \st i = 0, \dots, p^n - 1}. $$
\end{example*}

Now let $ f\br{X} $ be the Lubin-Tate series $ f\br{X} = \pi X + X^q $. Then
$$ f_n\br{X} = f\br{f_{n - 1}\br{X}} = f_{n - 1}\br{X}\br{\pi + f_{n - 1}\br{X}^{q - 1}}. $$
Set
$$ \h_n\br{X} = \dfrac{f_n\br{X}}{f_{n - 1}\br{X}} = \pi + f_{n - 1}\br{X}^{q - 1}. $$

\begin{proposition}
\label{prop:21.3}
\hfill
\begin{enumerate}
\item $ \h_n\br{X} $ is a separable Eisenstein polynomial of degree $ q^{n - 1}\br{q - 1} $.
\item $ \mu_{f, n} $ is a free $ \OOO_K / \pi^n\OOO_K $-module of rank one.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item $ \h_1\br{X} = \pi + X^{q - 1} $. Clear that $ \h_n\br{X} $ is monic of degree $ q^{n - 1}\br{q - 1} $. Since $ f\br{X} \equiv X^q \mod \pi $, $ f_{n - 1}\br{X}^{q - 1} \equiv X^{q^{n - 1}\br{q - 1}} \mod \pi $. Since $ f_{n - 1}\br{X} $ has zero constant term $ \h_n\br{X} = \pi + f_{n - 1}\br{X}^{q - 1} $ has constant term $ \pi $. Thus $ \h_n\br{X} $ is Eisenstein. Since $ \h_n\br{X} $ is irreducible, $ \h_n\br{X} $ is separable if $ \ch K = 0 $ or if $ \ch K = p $ and $ \h_n'\br{X} \ne 0 $. Assume $ \ch K = p $ and induct on $ n $.
\begin{itemize}
\item $ \h_1\br{X} = \pi + X^{q - 1} $ is separable.
\item Suppose $ \h_{n - 1}\br{X}, \dots, \h_1\br{X} $ are separable. Then $ f_{n - 1}\br{X} = \h_{n - 1}\br{X} \dots \h_1\br{X}X $ is separable, as a product of irreducible polynomials of different degrees. Since $ \h_n\br{X} = \pi + f_{n - 1}\br{X}^{q - 1} $, $ \h_n'\br{X} = \br{q - 1}f_{n - 1}'\br{X}f_{n - 1}\br{X}^{q - 2} \ne 0 $, so $ \h_n\br{X} $ is separable.
\end{itemize}
\item Let $ \alpha $ be a root of $ \h_n\br{X} $. Since $ \h_n\br{X} $ and $ f_{n - 1}\br{X} $ are coprime, $ \alpha \in \mu_{f, n} \setminus \mu_{f, n - 1} $. Then the map
$$ \function[\widetilde{\phi}]{\OOO_K}{\mu_{f, n}}{a}{a \cdot_{\F_f} \alpha} $$
is an $ \OOO_K $-module homomorphism with $ \pi^n\OOO_K \subseteq \ker \widetilde{\phi} $. As $ \alpha \in \mu_{f, n} \setminus \mu_{f, n - 1} $, $ \pi^{n - 1} \cdot_{\F_f} \alpha \ne 0 $ thus $ \pi^n\OOO_K = \ker \widetilde{\phi} $. Thus $ \widetilde{\phi} $ induces an injection $ \phi : \OOO_K / \pi^n\OOO_K \to \mu_{f, n} $. Since $ f_n\br{X} $ is separable, $ \abs{\mu_{f, n}} = \deg f_n\br{X} = q^n = \abs{\OOO_K / \pi^n\OOO_K} $. Thus $ \phi $ is an isomorphism by counting.
\end{enumerate}
\end{proof}

\pagebreak

Since $ x \in \mu_{f, n} $ is a root of $ f_n\br{X} $, $ x $ is algebraic.

\begin{proposition}
\label{prop:21.4}
Let $ g $ be another Lubin-Tate series for $ \pi $. Then
\begin{itemize}
\item $ \mu_{f, n} \cong \mu_{g, n} $ as $ \OOO_K $-modules, and
\item $ K\br{\mu_{f, n}} = K\br{\mu_{g, n}} $.
\end{itemize}
\end{proposition}

\begin{proof}
Let $ \theta \in \Hom_{\OOO_K}\br{\F_f, \F_g} $ be an isomorphism of formal $ \OOO_K $-modules. Then $ \theta $ induces an isomorphism $ \theta : \br{\overline{\mmm}, +_{\F_f}} \xrightarrow{\sim} \br{\overline{\mmm}, +_{\F_g}} $ of $ \OOO_K $-modules, and hence $ \mu_{f, n} \cong \mu_{g, n} $. Since $ \mu_{f, n} $ is algebraic, $ K\br{\mu_{f, n}} / K $ is finite, hence complete. Since $ \theta \in \OOO_K\sbr{\sbr{X}} $, for $ x \in \mu_{f, n} $, $ \theta\br{x} \in K\br{\mu_{f, n}} $, so $ K\br{\mu_{g, n}} \subseteq K\br{\mu_{f, n}} $. Thus $ K\br{\mu_{g, n}} / K $ is finite. Applying the same argument to $ \theta^{-1} $ gives $ K\br{\mu_{f, n}} \subseteq K\br{\mu_{g, n}} $, so $ K\br{\mu_{f, n}} = K\br{\mu_{g, n}} $.
\end{proof}

\begin{definition}
$ K_{\pi, n} = K\br{\mu_{f, n}} $ is the \textbf{Lubin-Tate extension} of degree $ n $ associated to $ \pi $.
\end{definition}

\begin{remark*}
\hfill
\begin{itemize}
\item $ K_{\pi, n} $ does not depend on the Lubin-Tate series $ f $ by Proposition \ref{prop:21.4}.
\item $ K_{\pi, n} \subseteq K_{\pi, n + 1} $.
\end{itemize}
\end{remark*}

\lecture{22}{Friday}{27/11/20}

\begin{theorem}
\hfill
\begin{enumerate}
\item $ K_{\pi, n} $ is a totally ramified Galois extension of degree $ q^{n - 1}\br{q - 1} $.
\item There are isomorphisms
$$ \psi_n : \Gal\br{K_{\pi, n} / K} \xrightarrow{\sim} \br{\OOO_K / \pi^n\OOO_K}^\times \cong \OOO_K^\times / \U_K^{\br{n}}, $$
characterised by
\begin{equation}
\label{eq:6}
\psi_n\br{\sigma} \cdot_{\F_f} x = \sigma\br{x}, \qquad x \in \mu_{f, n}, \qquad \sigma \in \Gal\br{K_{\pi, n} / K}.
\end{equation}
\end{enumerate}
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}
\item By Proposition \ref{prop:21.4}, we may choose $ f\br{X} = \pi X + X^q $. Let $ \alpha $ be a root of $ \h_n\br{X} = f_n\br{X} / f_{n - 1}\br{X} $. We show that $ K\br{\alpha} = K\br{\mu_{f, n}} = K_{\pi, n} $. By Proposition \ref{prop:21.3}, every element $ x $ of $ \mu_{f, n} $ is of the form $ a \cdot_{\F_f} \alpha $ for some $ a \in \OOO_K $, since $ \alpha \in \mu_{f, n} \setminus \mu_{f, n - 1} $. Since $ K\br{\alpha} $ is complete and $ \sbr{a}_{\F_f}\br{X} \in \OOO_K\sbr{\sbr{X}} $, $ x = \sbr{a}_{\F_f}\br{\alpha} \in K\br{\alpha} $, so $ K\br{\alpha} = K\br{\mu_{f, n}} $. Since $ \h_n\br{X} $ is Eisenstein of degree $ q^{n - 1}\br{q - 1} $, by Proposition \ref{prop:21.3}, $ K\br{\alpha} / K $ is totally ramified of degree $ q^{n - 1}\br{q - 1} $, by Theorem \ref{thm:14.8}. This is Galois since $ K\br{\alpha} = K\br{\mu_{f, n}} $ is the splitting field of $ f_n $.
\item Let $ \sigma \in \Gal\br{K_{\pi, n} / K} $. We show that $ \sigma \in \Aut_{\OOO_K} \mu_{f, n} $. Note that $ \sigma $ preserves $ \mu_{f, n} $, and $ \sigma $ acts continuously on $ K\br{\mu_{f, n}} $. Since $ \F_f\br{X, Y} \in \OOO_K\sbr{\sbr{X, Y}} $ and $ \sbr{a}_{\F_f} \in \OOO_K\sbr{\sbr{X}} $ for all $ a \in \OOO_K $, we have $ \sigma\br{x +_{\F_f} y} = \sigma\br{x} +_{\F_f} \sigma\br{y} $ for all $ x, y \in \mu_{f, n} $ and $ \sigma\br{a \cdot_{\F_f} x} = a \cdot_{\F_f} \sigma\br{x} $ for all $ x \in \mu_{f, n} $ and $ a \in \OOO_K $, by continuity of $ \sigma $. Thus $ \sigma \in \Aut_{\OOO_K} \mu_{f, n} $. This induces a group homomorphism $ \Gal\br{K_{\pi, n} / K} \hookrightarrow \Aut_{\OOO_K} \mu_{f, n} $, injective since $ K_{\pi, n} = K\br{\mu_{f, n}} $. Since $ \mu_{f, n} \cong \OOO_K / \pi^n\OOO_K $,
$$ \Aut_{\OOO_K} \mu_{f, n} \cong \Aut_{\OOO_K} \br{\OOO_K / \pi^n\OOO_K} \cong \br{\OOO_K / \pi^n\OOO_K}^\times, $$
canonically. Obtain $ \psi_n : \Gal\br{K_{\pi, n} / K} \hookrightarrow \br{\OOO_K / \pi^n\OOO_K}^\times $ defined by $ \psi_n\br{\sigma} \in \br{\OOO_K / \pi^n\OOO_K}^\times $ is the unique element such that $ \psi_n\br{\sigma} \cdot_{\F_f} x = \sigma\br{x} $ for all $ x \in \mu_{f, n} $. Then $ \sbr{K_{\pi, n} : K} = q^{n - 1}\br{q - 1} = \abs{\br{\OOO_K / \pi^n\OOO_K}^\times} $, so $ \psi_n $ is surjective by counting. Let $ g $ be another Lubin-Tate series and $ \psi_n' : \Gal\br{K_{\pi, n} / K} \xrightarrow{\sim} \br{\OOO_K / \pi^n\OOO_K}^\times $. By Theorem \ref{thm:20.7}, there exists $ \theta : \F_f \to \F_g $ an isomorphism of formal $ \OOO_K $-modules. This induces an isomorphism $ \theta : \mu_{f, n} \xrightarrow{\sim} \mu_{g, n} $ of $ \OOO_K $-modules. Since $ \theta \in \OOO_K\sbr{\sbr{X}} $, $ \theta\br{\sigma\br{x}} = \sigma\br{\theta\br{x}} $ for all $ x \in \mu_{f, n} $ and $ \sigma \in \Gal\br{K_{\pi, n} / K} $, so $ \theta\br{\psi_n\br{\sigma} \cdot_{\F_f} x} = \psi_n'\br{\sigma} \cdot_{\F_g} \theta\br{x} $. Thus $ \psi_n\br{\sigma} \cdot_{\F_g} \theta\br{x} = \psi_n'\br{\sigma} \cdot_{\F_g} \theta\br{x} $, so $ \psi_n\br{\sigma} = \psi_n'\br{\sigma} $.
\end{enumerate}
\end{proof}

\pagebreak

Define
$$ K_{\pi, \infty} = \bigcup_{n = 1}^\infty K_{\pi, n}. $$

\begin{corollary}
There is an isomorphism
$$ \psi : \Gal\br{K_{\pi, \infty} / K} \cong \OOO_K^\times. $$
\end{corollary}

\begin{proof}
By $ \br{\ref{eq:6}} $, there exists a commutative diagram
$$
\begin{tikzcd}
\Gal\br{K_{\pi, n + 1} / K} \arrow{r}{\psi_{n + 1}}[swap]{\sim} \arrow[twoheadrightarrow]{d} & \OOO_K^\times / \U_K^{\br{n + 1}} \arrow[twoheadrightarrow]{d}{\mod n} \\
\Gal\br{K_{\pi, n} / K} \arrow{r}{\sim}[swap]{\psi_n} & \OOO_K^\times / \U_K^{\br{n}}
\end{tikzcd},
$$
so $ \Gal\br{K_{\pi, \infty} / K} \cong \varprojlim_n \OOO_K^\times / \U_K^{\br{n}} \cong \OOO_K^\times $.
\end{proof}

\subsection{The Artin map}

\begin{theorem}[Generalised Kronecker-Weber theorem]
\label{thm:22.3}
$$ K^{\ab} = K^{\ur}K_{\pi, \infty}. $$
\end{theorem}

\begin{example*}
If $ K = \QQ_p $ and $ f\br{X} = \br{X + 1}^p - 1 $, then $ \mu_{f, n} = \cbr{\zeta_{p^n}^i - 1 \st i = 0, \dots, p^n - 1} $. Thus Theorem \ref{thm:22.3} says
$$ \QQ_p^{\ab} = \QQ_p^{\ur}\QQ_p\br{\zeta_{p^\infty}} = \QQ_p^{\ur}\bigcup_{n = 1}^\infty \QQ_p\br{\zeta_n}, $$
which is Theorem \ref{thm:19.5}.
\end{example*}

Note $ K_{\pi, \infty} \cap K^{\ur} = K $, since $ K_{\pi, \infty} $ is totally ramified and $ K^{\ur} $ is unramified, so
$$ \Gal\br{K^{\ab} / K} \cong \Gal\br{K^{\ur} / K} \times \Gal\br{K_{\pi, \infty} / K}. $$
Define $ \Art_K $ by the commutative diagram
$$
\begin{tikzcd}[row sep=tiny]
\pi^nu \arrow[leftrightarrow]{d} & K^\times \arrow{r}{\Art_K} \arrow[cong]{d} & \Gal\br{K^{\ab} / K} \arrow[cong]{d} \\
\br{n, u} & \ZZ \times \OOO_K^\times \arrow{r} & \Gal\br{K^{\ur} / K} \times \Gal\br{K_{\pi, \infty} / K} \\
& \br{n, u} \arrow[mapsto]{r} & \br{\Fr_{K^{\ur} / K}^n, \psi^{-1}\br{u}}
\end{tikzcd}.
$$
The image of $ \Art_K $ lands in $ \W\br{K^{\ab} / K} $, so $ \Art_K : K^\times \xrightarrow{\sim} \W\br{K^{\ab} / K} $.

\begin{remark*}
Can show $ \Art_K $ is independent of the choice of uniformiser $ \pi $. Proof omitted.
\end{remark*}

\begin{notation*}
Let $ L / K $ be possibly infinite. Write
$$ \N\br{L / K} = \bigcap_{F / K \ \text{finite}, \ F \subseteq L} \N_{F / K}\br{F^\times} \subseteq K^\times. $$
\end{notation*}

\begin{proposition}
\label{prop:22.4}
Let $ x \in K $ with $ \v_K\br{x} > 0 $, and $ \sigma \in \Gal\br{K^{\sep} / K} $ such that $ \eval{\sigma}_{K^{\ab}} = \Art_K\br{x} $. Set $ L = \br{K^{\sep}}^\sigma $. Then $ \N\br{L / K} = \abr{x} $.
\end{proposition}

\begin{proof}
Omit. Can be proved using Coleman operators in Patrick Allen's notes on non-archimedean local fields.
\end{proof}

\pagebreak

\begin{theorem}[Norm functoriality]
\label{thm:22.5}
Let $ L / K $ be a finite separable extension. There exists a commutative diagram
$$
\begin{tikzcd}
L^\times \arrow{r}{\Art_L} \arrow{d}[swap]{\N_{L / K}} & \W\br{L^{\ab} / L} \arrow{d}{\sigma \mapsto \eval{\sigma}_{K^{\ab}}} \\
K^\times \arrow{r}[swap]{\Art_K} & \W\br{K^{\ab} / K}
\end{tikzcd}.
$$
\end{theorem}

\begin{proof}
Since the set of uniformisers in $ L^\times $ generate $ L^\times $, it suffices to show
$$ \eval{\Art_L\br{\pi_L}}_{K^{\ab}} = \Art_K\br{\N_{L / K}\br{\pi_L}}, $$
where $ \pi_L $ is a uniformiser in $ L $. Let $ \sigma \in \Gal\br{K^{\sep} / L} $ be a lift of $ \Art_L\br{\pi_L} $ and then $ K_\sigma = \br{K^{\sep}}^\sigma $. Let $ x = \Art_K^{-1}\br{\eval{\Art_L\br{\pi_L}}_{K^{\ab}}} \in K^\times $. Need to show $ x = \N_{L / K}\br{\pi_L} $. Then by Proposition \ref{prop:22.4}, we have $ \N\br{K_\sigma / L} = \abr{\pi_L} \subseteq L^\times $ and $ \N\br{K_\sigma / K} = \abr{x} \subseteq K^\times $. Thus
$$ \abr{\N_{L / K}\br{\pi_L}} = \N_{L / K}\br{\abr{\pi_L}} = \N_{L / K}\br{\N\br{K_\sigma / L}} = \N\br{K_\sigma / K} = \abr{x} \subseteq K^\times. $$
Thus $ \N_{L / K}\br{\pi_L} = x^{\pm 1} $. It suffices to show $ \v_K\br{x} > 0 $. Since $ \eval{\Art_L\br{\pi_L}}_{L^{\ur}} = \Fr_{L^{\ur} / L} $, $ \eval{\Art_L\br{\pi_L}}_{K^{\ur}} = \Fr_{K^{\ur} / K}^{\f_{L / K}} $, \footnote{Exercise: check on residue fields} so $ \v_K\br{x} > 0 $ by definition of $ \Art_K $.
\end{proof}

\begin{corollary}
Let $ L / K $ be finite abelian. Then $ \Art_K $ induces an isomorphism
$$ K^\times / \N_{L / K}\br{L^\times} \cong \Gal\br{L / K}. $$
\end{corollary}

\begin{proof}
Since $ L / K $ is abelian, $ L^{\ab} = K^{\ab} $. By Theorem \ref{thm:22.5} and Proposition \ref{prop:18.8}.$ 3 $,
$$ K^\times / \N_{L / K}\br{L^\times} \cong \W\br{K^{\ab} / K} / \W\br{K^{\ab} / L} \cong \Gal\br{L / K}. $$
\end{proof}

\subsection{Proof of generalised local Kronecker-Weber theorem}

\lecture{23}{Monday}{30/11/20}

\begin{proposition}
Let $ K_{\pi, n} $ denote the Lubin-Tate extension of degree $ n $ associated to $ \pi $. The isomorphism
$$ \psi_n : \G = \Gal\br{K_{\pi, n} / K} \cong \br{\OOO_K / \pi^n\OOO_K}^\times \cong \U_K^{\br{0}} / \U_K^{\br{n}} $$
induces isomorphisms
$$ \G_s \cong
\begin{cases}
\U_K^{\br{0}} / \U_K^{\br{n}} & s \le 0 \\
\U_K^{\br{k}} / \U_K^{\br{n}} & q^{k - 1} - 1 < s \le q^k - 1, \ 1 \le k \le n - 1 \\
\cbr{1} & s > q^{n - 1} - 1
\end{cases}.
$$
\end{proposition}

\begin{proof}
If $ s \le 0 $, then $ \G_s = \G_{-1} $ since $ K_{\pi, n} / K $ is totally ramified. Let $ \v_n $ be the normalised valuation on $ K_{\pi, n} $. Recall that
$$ \function[\i_{K_{\pi, n} / K}]{\G}{\ZZ \cup \cbr{\infty}}{\sigma}{\max \cbr{i \in \ZZ \st \sigma \in \G_{i - 1}}}. $$
Let $ f\br{X} = \pi X + X^q $ and $ \alpha \in \mu_{f, n} \setminus \mu_{f, n - 1} $. Then $ \alpha $ is a uniformiser in $ \OOO_{K_{\pi, n}} $ and $ \OOO_{K_{\pi, n}} = \OOO_K\sbr{\alpha} $, so $ \i_{K_{\pi, n} / K}\br{\sigma} = \v_n\br{\sigma\br{\alpha} - \alpha} $. Fix $ \sigma \in \G $ and let $ \psi_n\br{\sigma} = u $, and let $ k = \max \cbr{r \st u \in \U_K^{\br{r}} / \U_K^{\br{n}}} $. Then $ u - 1 \in \pi^k\OOO_K \setminus \pi^{k + 1}\OOO_K $. By definition of $ \G_s $, it suffices to show $ \v_n\br{\sigma\br{\alpha} - \alpha} = q^k $. Since $ \sigma\br{\alpha} - \alpha = u \cdot_{\F_f} \alpha - \alpha = \br{u - 1} \cdot_{\F_f} \alpha $, we have $ \sigma\br{\alpha} - \alpha \in \mu_{f, n - k} \setminus \mu_{f, n - k - 1} $, so $ \sigma\br{\alpha} - \alpha $ is a uniformiser in $ K_{\pi, n - k} $. Since $ \e_{K_{\pi, n} / K_{\pi, n - k}} = q^k $, $ \v_n\br{\sigma\br{\alpha} - \alpha} = q^k $.
\end{proof}

\begin{corollary}
$ \psi_n $ induces
$$ \G^s \cong
\begin{cases}
\U_K^{\br{0}} / \U_K^{\br{n}} & s \le 0 \\
\U_K^{\br{k}} / \U_K^{\br{n}} & k - 1 < s \le k, \ 1 \le k \le n - 1 \\
\cbr{1} & s > n - 1
\end{cases}.
$$
\end{corollary}

\pagebreak

\begin{proof}
If $ s \le 0 $, then $ \G_s = \G^s $. We compute
$$ \phi_{K_{\pi, n} / K}\br{s} = \intd{0}{s}{\dfrac{1}{\sbr{\G_0 : \G_t}}}{t}. $$
We have for $ 1 \le k \le n - 1 $, $ \phi_{K_{\pi, n} / K} $ is linear on $ \intoc{q^{k - 1} - 1, q^k - 1} $, and
$$ \phi_{K_{\pi, n} / K}\br{q^k - 1} = \sum_{i = 1}^k \dfrac{\br{q^i - 1} - \br{q^{i - 1} - 1}}{q^i\br{q - 1}} = \sum_{i = 1}^k 1 = k, $$
by the same computation as $ \QQ_p\br{\zeta_{p^n}} / \QQ_p $. The result follows from $ \G^{\phi_{K_{\pi, n} / K}\br{s}} = \G_s $.
\end{proof}

\begin{proposition}
\label{prop:23.3}
Let $ \sigma \in \Gal\br{K^{\ab} / K} $ such that $ \eval{\sigma}_{K^{\ur}} = \Fr_{K^{\ur} / K} $ and set $ K_\sigma = \br{K^{\ab}}^\sigma $ then
$$ K^{\ab} = K_\sigma K^{\ur}. $$
\end{proposition}

\begin{fact*}
By Theorem \ref{thm:18.4}, $ \overline{\abr{\sigma}} = \Gal\br{K^{\ab} / K_\sigma} \cong \widehat{\ZZ} $, since there is a splitting
$$ 1 \to \Gal\br{K^{\ab} / K^{\ur}} \to \Gal\br{K^{\ab} / K} \xrightarrow{\sigma \mapsfrom 1} \widehat{\ZZ} \to 1. $$
\end{fact*}

\begin{proof}
Let $ F / K_\sigma $ be a finite extension of degree $ d $ such that $ F \subseteq K^{\ab} $. Want to show $ F \subseteq K^{\ur}K_\sigma $. Since $ \Gal\br{K^{\ab} / K_\sigma} \cong \widehat{\ZZ} $, there exists a unique degree $ d $ extension of $ K_\sigma $ contained in $ K^{\ab} $ corresponding to $ \widehat{\ZZ} / d\widehat{\ZZ} $. Since $ \eval{\sigma}_{K^{\ur}} = \Fr_{K^{\ur} / K} $, $ K_\sigma \cap K^{\ur} = K $, since for example $ \OOO_{K_\sigma} / \mmm_{K_\sigma} = \kappa $. Thus
$$ \Gal\br{K_dK_\sigma / K_\sigma} \cong \Gal\br{K_d / K} \cong \ZZ / d\ZZ, $$
where $ K_d / K $ is the degree $ d $ unramified extension, so $ F = K_dK_\sigma $.
\end{proof}

\begin{lemma}
\label{lem:23.4}
Let $ L_1, L_2 \subseteq K^{\ab} $ such that $ \G^n\br{L_1 / K} = \cbr{1} $ and $ \G^n\br{L_2 / K} = \cbr{1} $, then $ \G^n\br{L_1L_2 / K} = \cbr{1} $.
\end{lemma}

\begin{proof}
Set $ H_1 = \Gal\br{L_1L_2 / L_1} $ and $ H_2 = \Gal\br{L_1L_2 / L_2} $. Then
$$ \G^n\br{L_1L_2 / K}H_1 / H_1 \cong \G^n\br{L_1 / K} = \cbr{1}, \qquad \G^n\br{L_1L_2 / K}H_2 / H_2 \cong \G^n\br{L_2 / K} = \cbr{1}, $$
so $ \G^n\br{L_1L_2 / K} \subseteq H_1 \cap H_2 = \cbr{1} $.
\end{proof}

\begin{corollary}[Corollary of Hasse-Arf]
\label{cor:23.5}
Let $ L / K $ be a totally ramified abelian extension, and let $ \G = \Gal\br{L / K} $. If $ \G^n = \cbr{1} $, then
$$ \sbr{L : K} \mid q^{n - 1}\br{q - 1}. $$
\end{corollary}

\begin{remark*}
The Hasse-Arf theorem says $ K_{\pi, n} $ maxes out the possible jumps. See example sheet $ 3 $ question $ 7 $.
\end{remark*}

\begin{proof}
Let $ m \in \ZZ_{\ge 0} $ such that $ m - 1 < \psi_{L / K}\br{n} \le m $. Then
$$ \G = \G_0 \supseteq \dots \supseteq \G_m = \cbr{1}. $$
Claim that there exist at most $ n - 1 $ distinct $ \G_i $ for $ i \ge 1 $ such that $ \G_i / \G_{i + 1} \ne \cbr{1} $. By Hasse-Arf, $ \G_i / \G_{i + 1} \ne \cbr{1} $ for at most $ n $ distinct $ \G_i $ for $ i \ge 0 $. If $ \G_0 \ne \G_1 $, done. Otherwise, $ \G_0 = \G_1 $ and $ \psi_{L / K}\br{1} = 1 $, so $ \G^0 = \G_0 = \G_1 = \G^1 $, which implies the claim. Then $ \G_0 / \G_1 \hookrightarrow \kappa_L^\times = \kappa^\times $ and $ \G_i / \G_{i + 1} \hookrightarrow \br{\kappa, +} $ for $ i \ge 1 $, so $ \sbr{L : K} = \abs{\G} \mid q^{n - 1}\br{q - 1} $.
\end{proof}

Consider $ K^{\ur}K_{\pi, \infty} $. Since $ \Gal\br{K^{\ur}K_{\pi, \infty} / K} \cong \widehat{\ZZ} \times \OOO_K^\times $, $ K^{\ur}K_{\pi, \infty} \subseteq K^{\ab} $. Theorem \ref{thm:22.3} states that $ K^{\ab} = K^{\ur}K_{\pi, \infty} $.

\begin{proof}[Proof of Theorem \ref{thm:22.3}]
Let $ \widetilde{\sigma} \in \Gal\br{K^{\ur}K_{\pi, \infty} / K} $ be corresponding to $ \br{\Fr_{K^{\ur} / K}, \id} \in \Gal\br{K^{\ur} / K} \times \Gal\br{K_{\pi, \infty} / K} $. Let $ \sigma \in \Gal\br{K^{\ab} / K} $ such that $ \eval{\sigma}_{K_{\pi, \infty}K^{\ur}} = \widetilde{\sigma} $. Set $ K_\sigma = \br{K^{\ab}}^\sigma $. Then $ K_\sigma \cap K^{\ur} = K $, so $ K_\sigma $ is totally ramified. We have $ K_{\pi, \infty} = \br{K^{\ur}K_{\pi, \infty}}^{\widetilde{\sigma}} \subseteq K_\sigma $. By Proposition \ref{prop:23.3}, it suffices to show $ K_{\pi, \infty} = K_\sigma $. Let $ F / K $ be finite Galois such that $ F \subseteq K_\sigma $. Take $ n \ge 1 $ such that $ \G^n\br{F / K} = \cbr{1} $. Let $ L = K_{\pi, n}F $. Then by Lemma \ref{lem:23.4}, $ \G^n\br{L / K} = \cbr{1} $. Since $ L / K $ is totally ramified, by Corollary \ref{cor:23.5}, $ \sbr{L : K} \mid q^{n - 1}\br{q - 1} = \sbr{K_{\pi, n} : K} $, so $ L = K_{\pi, n} $. Thus $ F \subseteq K_{\pi, n} $, so $ K_\sigma = K_{\pi, \infty} $.
\end{proof}

\pagebreak

\section{Quadratic forms*}

\subsection{Quadratic forms}

Let $ K $ be a field with $ \ch K \ne 2 $, and let
$$ Q\br{x_1, \dots, x_n} = \sum_{1 \le i, j \le n} a_{ij}x_ix_j \in K\sbr{x_1, \dots, x_n}, \qquad a_{ij} = a_{ji} $$
be a quadratic form of rank $ n $, so $ A = \br{a_{ij}} $ is non-degenerate.

\begin{definition}
$ Q $ \textbf{represents} an element $ c \in K $ if there exist $ \alpha_1, \dots, \alpha_n \in K $ not all zero such that $ Q\br{\alpha_1, \dots, \alpha_n} = c $.
\end{definition}

\begin{fact*}
\hfill
\begin{itemize}
\item If $ Q $ represents zero, then $ Q $ represents all $ c \in K $.
\item If $ Q \sim Q' $ are equivalent, $ Q $ represents zero if and only if $ Q' $ represents zero.
\item Every non-degenerate quadratic form of rank $ n $ is equivalent to a diagonal form, that is
$$ Q = a_1x_1^2 + \dots + a_nx_n^2, \qquad a_i \in K. $$
\end{itemize}
\end{fact*}

\begin{proposition}
\label{prop:23.6}
Let $ p > 2 $, and let $ Q = \sum_{i = 1}^n a_ix_i^2 $ for $ a_i \in \QQ_p^\times $. Suppose either
\begin{enumerate}
\item $ n \ge 3 $, and $ a_i \in \ZZ_p^\times $ for all $ i $, or
\item $ n \ge 5 $.
\end{enumerate}
Then $ Q $ represents zero.
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Without loss of generality $ Q = ax^2 + by^2 - z^2 $ for $ a, b \in \ZZ_p^\times $. Then the maps given by
$$ \function{\FF_p}{\FF_p}{x}{\overline{a}x^2}, \qquad \function{\FF_p}{\FF_p}{y}{1 - \overline{b}y^2} $$
have images of size $ \br{p + 1} / 2 $, hence they overlap, so there exist $ x, y \in \ZZ_p $ such that $ ax^2 + by^2 \equiv 1 \mod p $. By Hensel, $ ax^2 + by^2 \in \br{\ZZ_p^\times}^2 $, so $ X^2 - ax^2 + by^2 = 0 $ has a solution in $ \ZZ_p $. Thus $ Q $ represents zero.
\item Without loss of generality $ \v_p\br{a_i} \in \cbr{0, 1} $ for all $ i $, by scaling by powers of $ p $. Since $ n \ge 5 $, without loss of generality $ \v_p\br{a_1} = \v_p\br{a_2} = \v_p\br{a_3} $. If these are zero, reduce to case $ 1 $. Otherwise divide by $ p $ and we are in case $ 1 $.
\end{enumerate}
\end{proof}

\subsection{The Hasse-Minkowski theorem}

\lecture{24}{Wednesday}{02/12/20}

\begin{theorem}[Hasse-Minkowski]
\label{thm:24.1}
Let $ Q $ be a quadratic form over $ \QQ $ of rank $ n $. Then $ Q $ represents zero in $ \QQ $ if and only if $ Q $ represents zero in $ \QQ_v $ for $ v \in \cbr{2, 3, \dots, \infty} $, where $ \QQ_\infty = \RR $.
\end{theorem}

\begin{remark*}
\hfill
\begin{itemize}
\item An example of a local to global principle.
\item The result is also true for number fields.
\end{itemize}
\end{remark*}

\pagebreak

\begin{lemma}
\label{lem:24.2}
Let $ Q = x_1^2 - ax_2^2 - bx_3^2 $ for $ a, b \in K^\times $ with $ \ch K \ne 2 $. Then $ Q $ represents zero in $ K $ if and only if $ b \in \N_{L / K}\br{L^\times} $ for $ L = K\br{\sqrt{a}} $.
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \implies $] Let $ \br{x, y, z} \in K^3 $ be a non-trivial solution. If $ z = 0 $, then $ a = \br{x / y}^2 $, so $ L = K $ so $ \N_{L / K}\br{L^\times} = K^\times $. Otherwise $ z \ne 0 $ and $ b = \br{x / z}^2 - a\br{y / z}^2 = \N_{L / K}\br{x / z + \br{y / z}\sqrt{a}} $.
\item[$ \impliedby $] If $ a \in \br{K^\times}^2 $, then $ \br{\sqrt{a}, 1, 0} $ is a solution. Otherwise $ b = \N_{L / K}\br{x + y\sqrt{a}} = x^2 - ay^2 $, so $ \br{x, y, 1} $ is a solution.
\end{itemize}
\end{proof}

\begin{definition}
For $ v \in \cbr{2, 3, \dots, \infty} $ and $ \alpha, \beta \in \QQ_v^\times $. The \textbf{Hilbert symbol} $ \br{\alpha, \beta}_v \in \cbr{\pm 1} $ is defined by
$$ \br{\alpha, \beta}_v =
\begin{cases}
+1 & \alpha x + \beta y^2 - z^2 \ \text{represents zero in} \ \QQ_v \\
-1 & \text{otherwise}
\end{cases}.
$$
\end{definition}

By example sheet $ 4 $, if $ a, b \in \QQ^\times $, then
$$ \prod_{v \in \cbr{2, 3, \dots, \infty}} \br{a, b}_v = 1, $$
the \textbf{product formula}.

\begin{corollary}
\label{cor:24.4}
If $ Q = a_1x_1^2 + a_2x_2^2 + a_3x_3^2 $ for $ a_1, a_2, a_3 \in \QQ $ of rank three represents zero in $ \RR $ and $ \QQ_p $ for all but one prime $ q $, then $ Q $ represents zero in $ \QQ_q $.
\end{corollary}

\begin{proof}
Without loss of generality $ Q = a_1x_1^2 + a_2x_2^2 - x_3^2 $. Then $ \br{a_1, a_2}_v = 1 $ for all $ v $ except possibly $ v = q $. By the product formula, $ \br{a_1, a_2}_q = 1 $.
\end{proof}

\begin{theorem}[Dirichlet's theorem]
For $ m, d \in \ZZ $ such that $ \br{m, d} = 1 $, there are infinitely many primes of the form $ mb + d $ for $ b \in \ZZ $.
\end{theorem}

\begin{proof}[Proof of Theorem \ref{thm:24.1}]
\hfill
\begin{itemize}
\item[$ \implies $] Clear.
\item[$ \impliedby $] Four cases.
\begin{itemize}[leftmargin=0.5in]
\item[$ n = 2 $.] Without loss of generality $ Q = x_1^2 + ax_2^2 $. Since $ -a \in \br{\QQ_p^\times}^2 $, $ \v_p\br{a} $ is even for all primes $ p $. Since $ -a \in \br{\RR^\times}^2 $, $ a < 0 $. Thus $ a = -p_1^{2e_1} \dots p_r^{2e_r} / q_1^{2f_1} \dots q_s^{2f_s} $. Thus $ -a \in \br{\QQ^\times}^2 $ and $ Q $ represents zero in $ \QQ $.
\item[$ n = 3 $.] Let $ Q = x_1^2 - ax_2^2 - bx_3^2 $. Without loss of generality $ \v_p\br{a}, \v_p\br{b} \in \cbr{0, 1} $ for all $ p $, by scaling $ x_2 $ and $ x_3 $, and $ \abs{a} \le \abs{b} $. We induct on $ m = \abs{a} + \abs{b} $.
\begin{itemize}
\item If $ m = 2 $, then $ Q = \pm x_1^2 \pm x_2^2 \pm x_3^2 $. Exclude all $ + $ and all $ - $, since $ Q $ represents zero over $ \RR $.
\item Suppose $ m > 2 $, then $ \abs{b} \ge 2 $. Write $ b = \pm p_1 \dots p_k $ for $ p_i $ distinct primes. Claim that $ a $ is a square modulo $ p_i $ for $ i = 1, \dots, k $. If $ p_i \mid a $ this is clear. Otherwise $ \v_{p_i}\br{a} = 0 $. Let $ \br{x, y, z} \in \QQ_{p_i}^3 $ be a non-trivial solution. Without loss of generality may assume $ \br{x, y, z} \in \ZZ_{p_i}^3 $, and $ \br{x, y, z} \notin \br{p_i\ZZ_{p_i}}^3 $. Thus $ x^2 - ay^2 \equiv 0 \mod p_i $. If $ y \equiv 0 \mod p_i $, then $ x \equiv 0 \mod p_i $, so $ z \equiv 0 \mod p_i $, a contradiction. Thus $ a \equiv \br{x / y}^2 \mod p_i $. Since $ \ZZ / b\ZZ \cong \prod_{i = 1}^k \ZZ / p_i\ZZ $, $ a $ is a square modulo $ b $. That is, there exist $ r, s \in \ZZ $ such that
$$ r^2 = a + bs. $$
Without loss of generality $ 0 \le r \le b / 2 $. Since $ sb = r^2 - a $, $ sb \in \N_{K / \QQ}\br{K^\times} $ for $ K = \QQ\br{\sqrt{a}} $. By Lemma \ref{lem:24.2} $ x_1^2 - ax_2^2 - bx_3^2 $ represents zero in $ \QQ $ or $ \QQ_v $ if and only if $ x_1^2 - ax_2^2 - sx_3^2 $ represents zero in $ \QQ $ or $ \QQ_v $, since $ b \in \N_{K / \QQ}\br{K^\times} $ if and only if $ s \in \N_{K / \QQ}\br{K^\times} $. Then $ \abs{s} = \abs{\br{r^2 - a} / b} \le \abs{b / 4} + 1 < \abs{b} $ since $ \abs{b} \ge 2 $. Write $ s = b'u^2 $ where $ b' $ is square-free and $ u \in \ZZ $. Then $ \abs{b'} < \abs{b} $ and by induction $ x_1^2 - ax_2^2 - b'x_3^2 $ represents zero in $ \QQ $, so $ x_1^2 - ax_2^2 - bx_3^2 $ represents zero in $ \QQ $.
\end{itemize}

\pagebreak

\item[$ n = 4 $.] We reduce to the case $ n = 3 $. Without loss of generality $ Q = a_1x_1^2 + a_2x_2^2 + a_3x_3^2 + a_4x_4^2 $. Without loss of generality $ a_4 < 0 $ and $ a_1 > 0 $. Consider
$$ g = a_1x_1^2 + a_2x_2^2, \qquad h = -a_3x_3^2 - a_4x_4^2. $$
Let $ p_1, \dots, p_s $ be the odd primes dividing $ a_1a_2a_3a_4 $. Since $ Q $ represents zero in $ \QQ_p $, there exists $ b_p \in \QQ_p $ such that $ g $ and $ h $ both represent $ b_p $ in $ \QQ_p $. Without loss of generality $ b_p \ne 0 $, since if $ g $ represents zero then it represents any $ \gamma \in \QQ_p $, and $ \v_p\br{b_p} \in \cbr{0, 1} $. Claim that there exists $ a \in \ZZ_{> 0} $ such that
\begin{enumerate}
\item $ a \equiv b_2 \mod 16 $,
\item $ a \equiv b_{p_i} \mod p_i^2 $ for $ i = 1, \dots, s $, and
\item there exists a unique prime $ q \notin \cbr{2, p_1, \dots, p_s} $ such that $ q \mid a $.
\end{enumerate}
Set $ m = 16p_1^2 \dots p_s^2 $. Choose $ a' > 0 $ satisfying $ 1 $ and $ 2 $, by CRT. Let $ d = \br{m, a'} $. By Dirichlet, there exists $ k \in \ZZ_{> 0} $ such that $ a' / d + km / d = q $ is prime, so $ a = a' + km = dq $ satisfies $ 1 $, $ 2 $, and $ 3 $. Set $ g' = g - ax_0^2 $ and $ h' = h - ax_0^2 $. By $ 1 $ and $ 2 $, $ b_{p_i}^{-1}a \equiv 1 \mod p_i $ for $ i = 1, \dots, s $ and $ b_2^{-1}a \equiv 1 \mod 8 $. By Hensel's lemma, $ b_{p_i}^{-1}a \in \br{\QQ_{p_i}^\times}^2 $ for $ i = 1, \dots, s $ and $ b_2^{-1}a \in \br{\QQ_2^\times}^2 $. Thus $ g' $ and $ h' $ represent zero in $ \QQ_2 $ and $ \QQ_{p_i} $ for $ i = 1, \dots, s $. By Proposition \ref{prop:23.6}, $ g' $ and $ h' $ represent zero in $ \QQ_p $ for $ p \notin \cbr{2, p_1, \dots, p_s} $ and $ p \ne q $. Since $ a_1 > 0 $ and $ a_4 < 0 $, $ g' $ and $ h' $ represent zero in $ \RR $. By Corollary \ref{cor:24.4}, $ g' $ and $ h' $ represent zero in $ \QQ_q $. Thus $ g' $ and $ h' $ represent zero in $ \QQ $, so $ Q = g' - h' $ represents zero in $ \QQ $.
\item[$ n \ge 5 $.] Let $ Q = \sum_{i = 1}^n a_ix_i^2 $. By Proposition \ref{prop:23.6}, $ Q $ represents zero in $ \QQ_p $ for all $ p $. Thus need to show, if $ Q $ is indefinite, then $ Q $ represents zero in $ \QQ $. Without loss of generality $ a_1 > 0 $ and $ a_5 < 0 $. It suffices to show $ Q = \sum_{i = 1}^5 a_ix_i^2 $ represents zero in $ \QQ $. Let
$$ g = a_1x_1^2 + a_2x_2^2, \qquad h = -a_3x_3^2 - a_4x_4^2 - a_5x_5^2. $$
The same argument as $ n = 4 $ shows there exists $ a \in \ZZ_{> 0} $ such that $ g' = g - ax_0^2 $ and $ h' = h - ax_0^2 $ represent zero in $ \QQ_v $ for $ v \in \cbr{2, 3, \dots, \infty} $. By $ n = 3 $ and $ n = 4 $, $ g' $ and $ h' $ represent zero in $ \QQ $. Thus $ Q $ represents zero in $ \QQ $.
\end{itemize}
\end{itemize}
\end{proof}

\end{document}